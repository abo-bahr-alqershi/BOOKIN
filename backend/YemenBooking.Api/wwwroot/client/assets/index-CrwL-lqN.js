function fC(e,n){for(var a=0;a<n.length;a++){const r=n[a];if(typeof r!="string"&&!Array.isArray(r)){for(const o in r)if(o!=="default"&&!(o in e)){const d=Object.getOwnPropertyDescriptor(r,o);d&&Object.defineProperty(e,o,d.get?d:{enumerable:!0,get:()=>r[o]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const d of o)if(d.type==="childList")for(const h of d.addedNodes)h.tagName==="LINK"&&h.rel==="modulepreload"&&r(h)}).observe(document,{childList:!0,subtree:!0});function a(o){const d={};return o.integrity&&(d.integrity=o.integrity),o.referrerPolicy&&(d.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?d.credentials="include":o.crossOrigin==="anonymous"?d.credentials="omit":d.credentials="same-origin",d}function r(o){if(o.ep)return;o.ep=!0;const d=a(o);fetch(o.href,d)}})();function pu(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function nl(e){if(Object.prototype.hasOwnProperty.call(e,"__esModule"))return e;var n=e.default;if(typeof n=="function"){var a=function r(){var o=!1;try{o=this instanceof r}catch{}return o?Reflect.construct(n,arguments,this.constructor):n.apply(this,arguments)};a.prototype=n.prototype}else a={};return Object.defineProperty(a,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var o=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(a,r,o.get?o:{enumerable:!0,get:function(){return e[r]}})}),a}var _g={exports:{}},Td={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Xv;function pC(){if(Xv)return Td;Xv=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.fragment");function a(r,o,d){var h=null;if(d!==void 0&&(h=""+d),o.key!==void 0&&(h=""+o.key),"key"in o){d={};for(var g in o)g!=="key"&&(d[g]=o[g])}else d=o;return o=d.ref,{$$typeof:e,type:r,key:h,ref:o!==void 0?o:null,props:d}}return Td.Fragment=n,Td.jsx=a,Td.jsxs=a,Td}var Jv;function gC(){return Jv||(Jv=1,_g.exports=pC()),_g.exports}var t=gC(),Sg={exports:{}},pt={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e1;function xC(){if(e1)return pt;e1=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),v=Symbol.for("react.lazy"),w=Symbol.iterator;function S(z){return z===null||typeof z!="object"?null:(z=w&&z[w]||z["@@iterator"],typeof z=="function"?z:null)}var T={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},C=Object.assign,_={};function k(z,J,se){this.props=z,this.context=J,this.refs=_,this.updater=se||T}k.prototype.isReactComponent={},k.prototype.setState=function(z,J){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,J,"setState")},k.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function R(){}R.prototype=k.prototype;function O(z,J,se){this.props=z,this.context=J,this.refs=_,this.updater=se||T}var P=O.prototype=new R;P.constructor=O,C(P,k.prototype),P.isPureReactComponent=!0;var U=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},$=Object.prototype.hasOwnProperty;function E(z,J,se,ae,ee,re){return se=re.ref,{$$typeof:e,type:z,key:J,ref:se!==void 0?se:null,props:re}}function I(z,J){return E(z.type,J,void 0,void 0,void 0,z.props)}function Z(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function F(z){var J={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(se){return J[se]})}var Y=/\/+/g;function G(z,J){return typeof z=="object"&&z!==null&&z.key!=null?F(""+z.key):J.toString(36)}function V(){}function H(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(V,V):(z.status="pending",z.then(function(J){z.status==="pending"&&(z.status="fulfilled",z.value=J)},function(J){z.status==="pending"&&(z.status="rejected",z.reason=J)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function Q(z,J,se,ae,ee){var re=typeof z;(re==="undefined"||re==="boolean")&&(z=null);var me=!1;if(z===null)me=!0;else switch(re){case"bigint":case"string":case"number":me=!0;break;case"object":switch(z.$$typeof){case e:case n:me=!0;break;case v:return me=z._init,Q(me(z._payload),J,se,ae,ee)}}if(me)return ee=ee(z),me=ae===""?"."+G(z,0):ae,U(ee)?(se="",me!=null&&(se=me.replace(Y,"$&/")+"/"),Q(ee,J,se,"",function(de){return de})):ee!=null&&(Z(ee)&&(ee=I(ee,se+(ee.key==null||z&&z.key===ee.key?"":(""+ee.key).replace(Y,"$&/")+"/")+me)),J.push(ee)),1;me=0;var ye=ae===""?".":ae+":";if(U(z))for(var Ce=0;Ce<z.length;Ce++)ae=z[Ce],re=ye+G(ae,Ce),me+=Q(ae,J,se,re,ee);else if(Ce=S(z),typeof Ce=="function")for(z=Ce.call(z),Ce=0;!(ae=z.next()).done;)ae=ae.value,re=ye+G(ae,Ce++),me+=Q(ae,J,se,re,ee);else if(re==="object"){if(typeof z.then=="function")return Q(H(z),J,se,ae,ee);throw J=String(z),Error("Objects are not valid as a React child (found: "+(J==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":J)+"). If you meant to render a collection of children, use an array instead.")}return me}function K(z,J,se){if(z==null)return z;var ae=[],ee=0;return Q(z,ae,"","",function(re){return J.call(se,re,ee++)}),ae}function oe(z){if(z._status===-1){var J=z._result;J=J(),J.then(function(se){(z._status===0||z._status===-1)&&(z._status=1,z._result=se)},function(se){(z._status===0||z._status===-1)&&(z._status=2,z._result=se)}),z._status===-1&&(z._status=0,z._result=J)}if(z._status===1)return z._result.default;throw z._result}var W=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var J=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(J))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function X(){}return pt.Children={map:K,forEach:function(z,J,se){K(z,function(){J.apply(this,arguments)},se)},count:function(z){var J=0;return K(z,function(){J++}),J},toArray:function(z){return K(z,function(J){return J})||[]},only:function(z){if(!Z(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},pt.Component=k,pt.Fragment=a,pt.Profiler=o,pt.PureComponent=O,pt.StrictMode=r,pt.Suspense=p,pt.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,pt.__COMPILER_RUNTIME={__proto__:null,c:function(z){return A.H.useMemoCache(z)}},pt.cache=function(z){return function(){return z.apply(null,arguments)}},pt.cloneElement=function(z,J,se){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ae=C({},z.props),ee=z.key,re=void 0;if(J!=null)for(me in J.ref!==void 0&&(re=void 0),J.key!==void 0&&(ee=""+J.key),J)!$.call(J,me)||me==="key"||me==="__self"||me==="__source"||me==="ref"&&J.ref===void 0||(ae[me]=J[me]);var me=arguments.length-2;if(me===1)ae.children=se;else if(1<me){for(var ye=Array(me),Ce=0;Ce<me;Ce++)ye[Ce]=arguments[Ce+2];ae.children=ye}return E(z.type,ee,void 0,void 0,re,ae)},pt.createContext=function(z){return z={$$typeof:h,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:d,_context:z},z},pt.createElement=function(z,J,se){var ae,ee={},re=null;if(J!=null)for(ae in J.key!==void 0&&(re=""+J.key),J)$.call(J,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(ee[ae]=J[ae]);var me=arguments.length-2;if(me===1)ee.children=se;else if(1<me){for(var ye=Array(me),Ce=0;Ce<me;Ce++)ye[Ce]=arguments[Ce+2];ee.children=ye}if(z&&z.defaultProps)for(ae in me=z.defaultProps,me)ee[ae]===void 0&&(ee[ae]=me[ae]);return E(z,re,void 0,void 0,null,ee)},pt.createRef=function(){return{current:null}},pt.forwardRef=function(z){return{$$typeof:g,render:z}},pt.isValidElement=Z,pt.lazy=function(z){return{$$typeof:v,_payload:{_status:-1,_result:z},_init:oe}},pt.memo=function(z,J){return{$$typeof:f,type:z,compare:J===void 0?null:J}},pt.startTransition=function(z){var J=A.T,se={};A.T=se;try{var ae=z(),ee=A.S;ee!==null&&ee(se,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(X,W)}catch(re){W(re)}finally{A.T=J}},pt.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},pt.use=function(z){return A.H.use(z)},pt.useActionState=function(z,J,se){return A.H.useActionState(z,J,se)},pt.useCallback=function(z,J){return A.H.useCallback(z,J)},pt.useContext=function(z){return A.H.useContext(z)},pt.useDebugValue=function(){},pt.useDeferredValue=function(z,J){return A.H.useDeferredValue(z,J)},pt.useEffect=function(z,J,se){var ae=A.H;if(typeof se=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(z,J)},pt.useId=function(){return A.H.useId()},pt.useImperativeHandle=function(z,J,se){return A.H.useImperativeHandle(z,J,se)},pt.useInsertionEffect=function(z,J){return A.H.useInsertionEffect(z,J)},pt.useLayoutEffect=function(z,J){return A.H.useLayoutEffect(z,J)},pt.useMemo=function(z,J){return A.H.useMemo(z,J)},pt.useOptimistic=function(z,J){return A.H.useOptimistic(z,J)},pt.useReducer=function(z,J,se){return A.H.useReducer(z,J,se)},pt.useRef=function(z){return A.H.useRef(z)},pt.useState=function(z){return A.H.useState(z)},pt.useSyncExternalStore=function(z,J,se){return A.H.useSyncExternalStore(z,J,se)},pt.useTransition=function(){return A.H.useTransition()},pt.version="19.1.1",pt}var t1;function Jx(){return t1||(t1=1,Sg.exports=xC()),Sg.exports}var b=Jx();const We=pu(b),ox=fC({__proto__:null,default:We},[b]);var Cg={exports:{}},Ed={},kg={exports:{}},Tg={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var n1;function yC(){return n1||(n1=1,function(e){function n(K,oe){var W=K.length;K.push(oe);e:for(;0<W;){var X=W-1>>>1,z=K[X];if(0<o(z,oe))K[X]=oe,K[W]=z,W=X;else break e}}function a(K){return K.length===0?null:K[0]}function r(K){if(K.length===0)return null;var oe=K[0],W=K.pop();if(W!==oe){K[0]=W;e:for(var X=0,z=K.length,J=z>>>1;X<J;){var se=2*(X+1)-1,ae=K[se],ee=se+1,re=K[ee];if(0>o(ae,W))ee<z&&0>o(re,ae)?(K[X]=re,K[ee]=W,X=ee):(K[X]=ae,K[se]=W,X=se);else if(ee<z&&0>o(re,W))K[X]=re,K[ee]=W,X=ee;else break e}}return oe}function o(K,oe){var W=K.sortIndex-oe.sortIndex;return W!==0?W:K.id-oe.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var d=performance;e.unstable_now=function(){return d.now()}}else{var h=Date,g=h.now();e.unstable_now=function(){return h.now()-g}}var p=[],f=[],v=1,w=null,S=3,T=!1,C=!1,_=!1,k=!1,R=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,P=typeof setImmediate<"u"?setImmediate:null;function U(K){for(var oe=a(f);oe!==null;){if(oe.callback===null)r(f);else if(oe.startTime<=K)r(f),oe.sortIndex=oe.expirationTime,n(p,oe);else break;oe=a(f)}}function A(K){if(_=!1,U(K),!C)if(a(p)!==null)C=!0,$||($=!0,G());else{var oe=a(f);oe!==null&&Q(A,oe.startTime-K)}}var $=!1,E=-1,I=5,Z=-1;function F(){return k?!0:!(e.unstable_now()-Z<I)}function Y(){if(k=!1,$){var K=e.unstable_now();Z=K;var oe=!0;try{e:{C=!1,_&&(_=!1,O(E),E=-1),T=!0;var W=S;try{t:{for(U(K),w=a(p);w!==null&&!(w.expirationTime>K&&F());){var X=w.callback;if(typeof X=="function"){w.callback=null,S=w.priorityLevel;var z=X(w.expirationTime<=K);if(K=e.unstable_now(),typeof z=="function"){w.callback=z,U(K),oe=!0;break t}w===a(p)&&r(p),U(K)}else r(p);w=a(p)}if(w!==null)oe=!0;else{var J=a(f);J!==null&&Q(A,J.startTime-K),oe=!1}}break e}finally{w=null,S=W,T=!1}oe=void 0}}finally{oe?G():$=!1}}}var G;if(typeof P=="function")G=function(){P(Y)};else if(typeof MessageChannel<"u"){var V=new MessageChannel,H=V.port2;V.port1.onmessage=Y,G=function(){H.postMessage(null)}}else G=function(){R(Y,0)};function Q(K,oe){E=R(function(){K(e.unstable_now())},oe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(K){K.callback=null},e.unstable_forceFrameRate=function(K){0>K||125<K?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):I=0<K?Math.floor(1e3/K):5},e.unstable_getCurrentPriorityLevel=function(){return S},e.unstable_next=function(K){switch(S){case 1:case 2:case 3:var oe=3;break;default:oe=S}var W=S;S=oe;try{return K()}finally{S=W}},e.unstable_requestPaint=function(){k=!0},e.unstable_runWithPriority=function(K,oe){switch(K){case 1:case 2:case 3:case 4:case 5:break;default:K=3}var W=S;S=K;try{return oe()}finally{S=W}},e.unstable_scheduleCallback=function(K,oe,W){var X=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?X+W:X):W=X,K){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=W+z,K={id:v++,callback:oe,priorityLevel:K,startTime:W,expirationTime:z,sortIndex:-1},W>X?(K.sortIndex=W,n(f,K),a(p)===null&&K===a(f)&&(_?(O(E),E=-1):_=!0,Q(A,W-X))):(K.sortIndex=z,n(p,K),C||T||(C=!0,$||($=!0,G()))),K},e.unstable_shouldYield=F,e.unstable_wrapCallback=function(K){var oe=S;return function(){var W=S;S=oe;try{return K.apply(this,arguments)}finally{S=W}}}}(Tg)),Tg}var a1;function bC(){return a1||(a1=1,kg.exports=yC()),kg.exports}var Eg={exports:{}},va={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var s1;function vC(){if(s1)return va;s1=1;var e=Jx();function n(p){var f="https://react.dev/errors/"+p;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var v=2;v<arguments.length;v++)f+="&args[]="+encodeURIComponent(arguments[v])}return"Minified React error #"+p+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function a(){}var r={d:{f:a,r:function(){throw Error(n(522))},D:a,C:a,L:a,m:a,X:a,S:a,M:a},p:0,findDOMNode:null},o=Symbol.for("react.portal");function d(p,f,v){var w=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:w==null?null:""+w,children:p,containerInfo:f,implementation:v}}var h=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function g(p,f){if(p==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return va.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,va.createPortal=function(p,f){var v=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(n(299));return d(p,f,null,v)},va.flushSync=function(p){var f=h.T,v=r.p;try{if(h.T=null,r.p=2,p)return p()}finally{h.T=f,r.p=v,r.d.f()}},va.preconnect=function(p,f){typeof p=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(p,f))},va.prefetchDNS=function(p){typeof p=="string"&&r.d.D(p)},va.preinit=function(p,f){if(typeof p=="string"&&f&&typeof f.as=="string"){var v=f.as,w=g(v,f.crossOrigin),S=typeof f.integrity=="string"?f.integrity:void 0,T=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;v==="style"?r.d.S(p,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:w,integrity:S,fetchPriority:T}):v==="script"&&r.d.X(p,{crossOrigin:w,integrity:S,fetchPriority:T,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},va.preinitModule=function(p,f){if(typeof p=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var v=g(f.as,f.crossOrigin);r.d.M(p,{crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(p)},va.preload=function(p,f){if(typeof p=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var v=f.as,w=g(v,f.crossOrigin);r.d.L(p,v,{crossOrigin:w,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},va.preloadModule=function(p,f){if(typeof p=="string")if(f){var v=g(f.as,f.crossOrigin);r.d.m(p,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:v,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(p)},va.requestFormReset=function(p){r.d.r(p)},va.unstable_batchedUpdates=function(p,f){return p(f)},va.useFormState=function(p,f,v){return h.H.useFormState(p,f,v)},va.useFormStatus=function(){return h.H.useHostTransitionStatus()},va.version="19.1.1",va}var r1;function Ow(){if(r1)return Eg.exports;r1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Eg.exports=vC(),Eg.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var i1;function jC(){if(i1)return Ed;i1=1;var e=bC(),n=Jx(),a=Ow();function r(s){var i="https://react.dev/errors/"+s;if(1<arguments.length){i+="?args[]="+encodeURIComponent(arguments[1]);for(var c=2;c<arguments.length;c++)i+="&args[]="+encodeURIComponent(arguments[c])}return"Minified React error #"+s+"; visit "+i+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(s){return!(!s||s.nodeType!==1&&s.nodeType!==9&&s.nodeType!==11)}function d(s){var i=s,c=s;if(s.alternate)for(;i.return;)i=i.return;else{s=i;do i=s,(i.flags&4098)!==0&&(c=i.return),s=i.return;while(s)}return i.tag===3?c:null}function h(s){if(s.tag===13){var i=s.memoizedState;if(i===null&&(s=s.alternate,s!==null&&(i=s.memoizedState)),i!==null)return i.dehydrated}return null}function g(s){if(d(s)!==s)throw Error(r(188))}function p(s){var i=s.alternate;if(!i){if(i=d(s),i===null)throw Error(r(188));return i!==s?null:s}for(var c=s,m=i;;){var y=c.return;if(y===null)break;var j=y.alternate;if(j===null){if(m=y.return,m!==null){c=m;continue}break}if(y.child===j.child){for(j=y.child;j;){if(j===c)return g(y),s;if(j===m)return g(y),i;j=j.sibling}throw Error(r(188))}if(c.return!==m.return)c=y,m=j;else{for(var D=!1,q=y.child;q;){if(q===c){D=!0,c=y,m=j;break}if(q===m){D=!0,m=y,c=j;break}q=q.sibling}if(!D){for(q=j.child;q;){if(q===c){D=!0,c=j,m=y;break}if(q===m){D=!0,m=j,c=y;break}q=q.sibling}if(!D)throw Error(r(189))}}if(c.alternate!==m)throw Error(r(190))}if(c.tag!==3)throw Error(r(188));return c.stateNode.current===c?s:i}function f(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s;for(s=s.child;s!==null;){if(i=f(s),i!==null)return i;s=s.sibling}return null}var v=Object.assign,w=Symbol.for("react.element"),S=Symbol.for("react.transitional.element"),T=Symbol.for("react.portal"),C=Symbol.for("react.fragment"),_=Symbol.for("react.strict_mode"),k=Symbol.for("react.profiler"),R=Symbol.for("react.provider"),O=Symbol.for("react.consumer"),P=Symbol.for("react.context"),U=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),$=Symbol.for("react.suspense_list"),E=Symbol.for("react.memo"),I=Symbol.for("react.lazy"),Z=Symbol.for("react.activity"),F=Symbol.for("react.memo_cache_sentinel"),Y=Symbol.iterator;function G(s){return s===null||typeof s!="object"?null:(s=Y&&s[Y]||s["@@iterator"],typeof s=="function"?s:null)}var V=Symbol.for("react.client.reference");function H(s){if(s==null)return null;if(typeof s=="function")return s.$$typeof===V?null:s.displayName||s.name||null;if(typeof s=="string")return s;switch(s){case C:return"Fragment";case k:return"Profiler";case _:return"StrictMode";case A:return"Suspense";case $:return"SuspenseList";case Z:return"Activity"}if(typeof s=="object")switch(s.$$typeof){case T:return"Portal";case P:return(s.displayName||"Context")+".Provider";case O:return(s._context.displayName||"Context")+".Consumer";case U:var i=s.render;return s=s.displayName,s||(s=i.displayName||i.name||"",s=s!==""?"ForwardRef("+s+")":"ForwardRef"),s;case E:return i=s.displayName||null,i!==null?i:H(s.type)||"Memo";case I:i=s._payload,s=s._init;try{return H(s(i))}catch{}}return null}var Q=Array.isArray,K=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,oe=a.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},X=[],z=-1;function J(s){return{current:s}}function se(s){0>z||(s.current=X[z],X[z]=null,z--)}function ae(s,i){z++,X[z]=s.current,s.current=i}var ee=J(null),re=J(null),me=J(null),ye=J(null);function Ce(s,i){switch(ae(me,i),ae(re,s),ae(ee,null),i.nodeType){case 9:case 11:s=(s=i.documentElement)&&(s=s.namespaceURI)?Cv(s):0;break;default:if(s=i.tagName,i=i.namespaceURI)i=Cv(i),s=kv(i,s);else switch(s){case"svg":s=1;break;case"math":s=2;break;default:s=0}}se(ee),ae(ee,s)}function de(){se(ee),se(re),se(me)}function te(s){s.memoizedState!==null&&ae(ye,s);var i=ee.current,c=kv(i,s.type);i!==c&&(ae(re,s),ae(ee,c))}function _e(s){re.current===s&&(se(ee),se(re)),ye.current===s&&(se(ye),Nd._currentValue=W)}var Ie=Object.prototype.hasOwnProperty,at=e.unstable_scheduleCallback,Je=e.unstable_cancelCallback,it=e.unstable_shouldYield,Te=e.unstable_requestPaint,Fe=e.unstable_now,wt=e.unstable_getCurrentPriorityLevel,Nt=e.unstable_ImmediatePriority,ut=e.unstable_UserBlockingPriority,Ee=e.unstable_NormalPriority,Pe=e.unstable_LowPriority,qe=e.unstable_IdlePriority,De=e.log,He=e.unstable_setDisableYieldValue,ct=null,ce=null;function Oe(s){if(typeof De=="function"&&He(s),ce&&typeof ce.setStrictMode=="function")try{ce.setStrictMode(ct,s)}catch{}}var Le=Math.clz32?Math.clz32:Fn,Ct=Math.log,rn=Math.LN2;function Fn(s){return s>>>=0,s===0?32:31-(Ct(s)/rn|0)|0}var Un=256,Nn=4194304;function ln(s){var i=s&42;if(i!==0)return i;switch(s&-s){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return s&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return s&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return s}}function la(s,i,c){var m=s.pendingLanes;if(m===0)return 0;var y=0,j=s.suspendedLanes,D=s.pingedLanes;s=s.warmLanes;var q=m&134217727;return q!==0?(m=q&~j,m!==0?y=ln(m):(D&=q,D!==0?y=ln(D):c||(c=q&~s,c!==0&&(y=ln(c))))):(q=m&~j,q!==0?y=ln(q):D!==0?y=ln(D):c||(c=m&~s,c!==0&&(y=ln(c)))),y===0?0:i!==0&&i!==y&&(i&j)===0&&(j=y&-y,c=i&-i,j>=c||j===32&&(c&4194048)!==0)?i:y}function Mn(s,i){return(s.pendingLanes&~(s.suspendedLanes&~s.pingedLanes)&i)===0}function he(s,i){switch(s){case 1:case 2:case 4:case 8:case 64:return i+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return i+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function tt(){var s=Un;return Un<<=1,(Un&4194048)===0&&(Un=256),s}function ne(){var s=Nn;return Nn<<=1,(Nn&62914560)===0&&(Nn=4194304),s}function Me(s){for(var i=[],c=0;31>c;c++)i.push(s);return i}function $e(s,i){s.pendingLanes|=i,i!==268435456&&(s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0)}function Qe(s,i,c,m,y,j){var D=s.pendingLanes;s.pendingLanes=c,s.suspendedLanes=0,s.pingedLanes=0,s.warmLanes=0,s.expiredLanes&=c,s.entangledLanes&=c,s.errorRecoveryDisabledLanes&=c,s.shellSuspendCounter=0;var q=s.entanglements,le=s.expirationTimes,xe=s.hiddenUpdates;for(c=D&~c;0<c;){var Se=31-Le(c),Re=1<<Se;q[Se]=0,le[Se]=-1;var be=xe[Se];if(be!==null)for(xe[Se]=null,Se=0;Se<be.length;Se++){var ve=be[Se];ve!==null&&(ve.lane&=-536870913)}c&=~Re}m!==0&&Yt(s,m,0),j!==0&&y===0&&s.tag!==0&&(s.suspendedLanes|=j&~(D&~i))}function Yt(s,i,c){s.pendingLanes|=i,s.suspendedLanes&=~i;var m=31-Le(i);s.entangledLanes|=i,s.entanglements[m]=s.entanglements[m]|1073741824|c&4194090}function At(s,i){var c=s.entangledLanes|=i;for(s=s.entanglements;c;){var m=31-Le(c),y=1<<m;y&i|s[m]&i&&(s[m]|=i),c&=~y}}function Rn(s){switch(s){case 2:s=1;break;case 8:s=4;break;case 32:s=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:s=128;break;case 268435456:s=134217728;break;default:s=0}return s}function _n(s){return s&=-s,2<s?8<s?(s&134217727)!==0?32:268435456:8:2}function oa(){var s=oe.p;return s!==0?s:(s=window.event,s===void 0?32:Vv(s.type))}function Ma(s,i){var c=oe.p;try{return oe.p=s,i()}finally{oe.p=c}}var Pt=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Pt,Qt="__reactProps$"+Pt,Jn="__reactContainer$"+Pt,Hn="__reactEvents$"+Pt,Ve="__reactListeners$"+Pt,Ha="__reactHandles$"+Pt,Ts="__reactResources$"+Pt,os="__reactMarker$"+Pt;function Xl(s){delete s[Gt],delete s[Qt],delete s[Hn],delete s[Ve],delete s[Ha]}function Vs(s){var i=s[Gt];if(i)return i;for(var c=s.parentNode;c;){if(i=c[Jn]||c[Gt]){if(c=i.alternate,i.child!==null||c!==null&&c.child!==null)for(s=Rv(s);s!==null;){if(c=s[Gt])return c;s=Rv(s)}return i}s=c,c=s.parentNode}return null}function yr(s){if(s=s[Gt]||s[Jn]){var i=s.tag;if(i===5||i===6||i===13||i===26||i===27||i===3)return s}return null}function cs(s){var i=s.tag;if(i===5||i===26||i===27||i===6)return s.stateNode;throw Error(r(33))}function br(s){var i=s[Ts];return i||(i=s[Ts]={hoistableStyles:new Map,hoistableScripts:new Map}),i}function qn(s){s[os]=!0}var Lu=new Set,zu={};function vr(s,i){jr(s,i),jr(s+"Capture",i)}function jr(s,i){for(zu[s]=i,s=0;s<i.length;s++)Lu.add(i[s])}var Of=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),rl={},Iu={};function Pf(s){return Ie.call(Iu,s)?!0:Ie.call(rl,s)?!1:Of.test(s)?Iu[s]=!0:(rl[s]=!0,!1)}function Jl(s,i,c){if(Pf(i))if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":s.removeAttribute(i);return;case"boolean":var m=i.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){s.removeAttribute(i);return}}s.setAttribute(i,""+c)}}function eo(s,i,c){if(c===null)s.removeAttribute(i);else{switch(typeof c){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(i);return}s.setAttribute(i,""+c)}}function Es(s,i,c,m){if(m===null)s.removeAttribute(c);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":s.removeAttribute(c);return}s.setAttributeNS(i,c,""+m)}}var il,ni;function wr(s){if(il===void 0)try{throw Error()}catch(c){var i=c.stack.trim().match(/\n( *(at )?)/);il=i&&i[1]||"",ni=-1<c.stack.indexOf(`
    at`)?" (<anonymous>)":-1<c.stack.indexOf("@")?"@unknown:0:0":""}return`
`+il+s+ni}var to=!1;function Nr(s,i){if(!s||to)return"";to=!0;var c=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(i){var Re=function(){throw Error()};if(Object.defineProperty(Re.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(Re,[])}catch(ve){var be=ve}Reflect.construct(s,[],Re)}else{try{Re.call()}catch(ve){be=ve}s.call(Re.prototype)}}else{try{throw Error()}catch(ve){be=ve}(Re=s())&&typeof Re.catch=="function"&&Re.catch(function(){})}}catch(ve){if(ve&&be&&typeof ve.stack=="string")return[ve.stack,be.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var y=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");y&&y.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var j=m.DetermineComponentFrameRoot(),D=j[0],q=j[1];if(D&&q){var le=D.split(`
`),xe=q.split(`
`);for(y=m=0;m<le.length&&!le[m].includes("DetermineComponentFrameRoot");)m++;for(;y<xe.length&&!xe[y].includes("DetermineComponentFrameRoot");)y++;if(m===le.length||y===xe.length)for(m=le.length-1,y=xe.length-1;1<=m&&0<=y&&le[m]!==xe[y];)y--;for(;1<=m&&0<=y;m--,y--)if(le[m]!==xe[y]){if(m!==1||y!==1)do if(m--,y--,0>y||le[m]!==xe[y]){var Se=`
`+le[m].replace(" at new "," at ");return s.displayName&&Se.includes("<anonymous>")&&(Se=Se.replace("<anonymous>",s.displayName)),Se}while(1<=m&&0<=y);break}}}finally{to=!1,Error.prepareStackTrace=c}return(c=s?s.displayName||s.name:"")?wr(c):""}function kt(s){switch(s.tag){case 26:case 27:case 5:return wr(s.type);case 16:return wr("Lazy");case 13:return wr("Suspense");case 19:return wr("SuspenseList");case 0:case 15:return Nr(s.type,!1);case 11:return Nr(s.type.render,!1);case 1:return Nr(s.type,!0);case 31:return wr("Activity");default:return""}}function tn(s){try{var i="";do i+=kt(s),s=s.return;while(s);return i}catch(c){return`
Error generating stack: `+c.message+`
`+c.stack}}function ca(s){switch(typeof s){case"bigint":case"boolean":case"number":case"string":case"undefined":return s;case"object":return s;default:return""}}function _r(s){var i=s.type;return(s=s.nodeName)&&s.toLowerCase()==="input"&&(i==="checkbox"||i==="radio")}function ai(s){var i=_r(s)?"checked":"value",c=Object.getOwnPropertyDescriptor(s.constructor.prototype,i),m=""+s[i];if(!s.hasOwnProperty(i)&&typeof c<"u"&&typeof c.get=="function"&&typeof c.set=="function"){var y=c.get,j=c.set;return Object.defineProperty(s,i,{configurable:!0,get:function(){return y.call(this)},set:function(D){m=""+D,j.call(this,D)}}),Object.defineProperty(s,i,{enumerable:c.enumerable}),{getValue:function(){return m},setValue:function(D){m=""+D},stopTracking:function(){s._valueTracker=null,delete s[i]}}}}function si(s){s._valueTracker||(s._valueTracker=ai(s))}function ht(s){if(!s)return!1;var i=s._valueTracker;if(!i)return!0;var c=i.getValue(),m="";return s&&(m=_r(s)?s.checked?"true":"false":s.value),s=m,s!==c?(i.setValue(s),!0):!1}function nn(s){if(s=s||(typeof document<"u"?document:void 0),typeof s>"u")return null;try{return s.activeElement||s.body}catch{return s.body}}var Ac=/[\n"\\]/g;function da(s){return s.replace(Ac,function(i){return"\\"+i.charCodeAt(0).toString(16)+" "})}function xa(s,i,c,m,y,j,D,q){s.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?s.type=D:s.removeAttribute("type"),i!=null?D==="number"?(i===0&&s.value===""||s.value!=i)&&(s.value=""+ca(i)):s.value!==""+ca(i)&&(s.value=""+ca(i)):D!=="submit"&&D!=="reset"||s.removeAttribute("value"),i!=null?ri(s,D,ca(i)):c!=null?ri(s,D,ca(c)):m!=null&&s.removeAttribute("value"),y==null&&j!=null&&(s.defaultChecked=!!j),y!=null&&(s.checked=y&&typeof y!="function"&&typeof y!="symbol"),q!=null&&typeof q!="function"&&typeof q!="symbol"&&typeof q!="boolean"?s.name=""+ca(q):s.removeAttribute("name")}function Bu(s,i,c,m,y,j,D,q){if(j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"&&(s.type=j),i!=null||c!=null){if(!(j!=="submit"&&j!=="reset"||i!=null))return;c=c!=null?""+ca(c):"",i=i!=null?""+ca(i):c,q||i===s.value||(s.value=i),s.defaultValue=i}m=m??y,m=typeof m!="function"&&typeof m!="symbol"&&!!m,s.checked=q?s.checked:!!m,s.defaultChecked=!!m,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(s.name=D)}function ri(s,i,c){i==="number"&&nn(s.ownerDocument)===s||s.defaultValue===""+c||(s.defaultValue=""+c)}function Ra(s,i,c,m){if(s=s.options,i){i={};for(var y=0;y<c.length;y++)i["$"+c[y]]=!0;for(c=0;c<s.length;c++)y=i.hasOwnProperty("$"+s[c].value),s[c].selected!==y&&(s[c].selected=y),y&&m&&(s[c].defaultSelected=!0)}else{for(c=""+ca(c),i=null,y=0;y<s.length;y++){if(s[y].value===c){s[y].selected=!0,m&&(s[y].defaultSelected=!0);return}i!==null||s[y].disabled||(i=s[y])}i!==null&&(i.selected=!0)}}function pn(s,i,c){if(i!=null&&(i=""+ca(i),i!==s.value&&(s.value=i),c==null)){s.defaultValue!==i&&(s.defaultValue=i);return}s.defaultValue=c!=null?""+ca(c):""}function Zs(s,i,c,m){if(i==null){if(m!=null){if(c!=null)throw Error(r(92));if(Q(m)){if(1<m.length)throw Error(r(93));m=m[0]}c=m}c==null&&(c=""),i=c}c=ca(i),s.defaultValue=c,m=s.textContent,m===c&&m!==""&&m!==null&&(s.value=m)}function ds(s,i){if(i){var c=s.firstChild;if(c&&c===s.lastChild&&c.nodeType===3){c.nodeValue=i;return}}s.textContent=i}var ll=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function no(s,i,c){var m=i.indexOf("--")===0;c==null||typeof c=="boolean"||c===""?m?s.setProperty(i,""):i==="float"?s.cssFloat="":s[i]="":m?s.setProperty(i,c):typeof c!="number"||c===0||ll.has(i)?i==="float"?s.cssFloat=c:s[i]=(""+c).trim():s[i]=c+"px"}function ii(s,i,c){if(i!=null&&typeof i!="object")throw Error(r(62));if(s=s.style,c!=null){for(var m in c)!c.hasOwnProperty(m)||i!=null&&i.hasOwnProperty(m)||(m.indexOf("--")===0?s.setProperty(m,""):m==="float"?s.cssFloat="":s[m]="");for(var y in i)m=i[y],i.hasOwnProperty(y)&&c[y]!==m&&no(s,y,m)}else for(var j in i)i.hasOwnProperty(j)&&no(s,j,i[j])}function ol(s){if(s.indexOf("-")===-1)return!1;switch(s){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Dc=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),ao=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function li(s){return ao.test(""+s)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":s}var cl=null;function oi(s){return s=s.target||s.srcElement||window,s.correspondingUseElement&&(s=s.correspondingUseElement),s.nodeType===3?s.parentNode:s}var Sr=null,Ws=null;function $u(s){var i=yr(s);if(i&&(s=i.stateNode)){var c=s[Qt]||null;e:switch(s=i.stateNode,i.type){case"input":if(xa(s,c.value,c.defaultValue,c.defaultValue,c.checked,c.defaultChecked,c.type,c.name),i=c.name,c.type==="radio"&&i!=null){for(c=s;c.parentNode;)c=c.parentNode;for(c=c.querySelectorAll('input[name="'+da(""+i)+'"][type="radio"]'),i=0;i<c.length;i++){var m=c[i];if(m!==s&&m.form===s.form){var y=m[Qt]||null;if(!y)throw Error(r(90));xa(m,y.value,y.defaultValue,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name)}}for(i=0;i<c.length;i++)m=c[i],m.form===s.form&&ht(m)}break e;case"textarea":pn(s,c.value,c.defaultValue);break e;case"select":i=c.value,i!=null&&Ra(s,!!c.multiple,i,!1)}}}var mt=!1;function qa(s,i,c){if(mt)return s(i,c);mt=!0;try{var m=s(i);return m}finally{if(mt=!1,(Sr!==null||Ws!==null)&&(Om(),Sr&&(i=Sr,s=Ws,Ws=Sr=null,$u(i),s)))for(i=0;i<s.length;i++)$u(s[i])}}function Dt(s,i){var c=s.stateNode;if(c===null)return null;var m=c[Qt]||null;if(m===null)return null;c=m[i];e:switch(i){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(s=s.type,m=!(s==="button"||s==="input"||s==="select"||s==="textarea")),s=!m;break e;default:s=!1}if(s)return null;if(c&&typeof c!="function")throw Error(r(231,i,typeof c));return c}var us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),dl=!1;if(us)try{var Cr={};Object.defineProperty(Cr,"passive",{get:function(){dl=!0}}),window.addEventListener("test",Cr,Cr),window.removeEventListener("test",Cr,Cr)}catch{dl=!1}var ms=null,Ms=null,ci=null;function di(){if(ci)return ci;var s,i=Ms,c=i.length,m,y="value"in ms?ms.value:ms.textContent,j=y.length;for(s=0;s<c&&i[s]===y[s];s++);var D=c-s;for(m=1;m<=D&&i[c-m]===y[j-m];m++);return ci=y.slice(s,1<m?1-m:void 0)}function Sn(s){var i=s.keyCode;return"charCode"in s?(s=s.charCode,s===0&&i===13&&(s=13)):s=i,s===10&&(s=13),32<=s||s===13?s:0}function hs(){return!0}function Oc(){return!1}function ua(s){function i(c,m,y,j,D){this._reactName=c,this._targetInst=y,this.type=m,this.nativeEvent=j,this.target=D,this.currentTarget=null;for(var q in s)s.hasOwnProperty(q)&&(c=s[q],this[q]=c?c(j):j[q]);return this.isDefaultPrevented=(j.defaultPrevented!=null?j.defaultPrevented:j.returnValue===!1)?hs:Oc,this.isPropagationStopped=Oc,this}return v(i.prototype,{preventDefault:function(){this.defaultPrevented=!0;var c=this.nativeEvent;c&&(c.preventDefault?c.preventDefault():typeof c.returnValue!="unknown"&&(c.returnValue=!1),this.isDefaultPrevented=hs)},stopPropagation:function(){var c=this.nativeEvent;c&&(c.stopPropagation?c.stopPropagation():typeof c.cancelBubble!="unknown"&&(c.cancelBubble=!0),this.isPropagationStopped=hs)},persist:function(){},isPersistent:hs}),i}var kr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(s){return s.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},ul=ua(kr),Tr=v({},kr,{view:0,detail:0}),Lf=ua(Tr),so,yt,ml,ya=v({},Tr,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ro,button:0,buttons:0,relatedTarget:function(s){return s.relatedTarget===void 0?s.fromElement===s.srcElement?s.toElement:s.fromElement:s.relatedTarget},movementX:function(s){return"movementX"in s?s.movementX:(s!==ml&&(ml&&s.type==="mousemove"?(so=s.screenX-ml.screenX,yt=s.screenY-ml.screenY):yt=so=0,ml=s),so)},movementY:function(s){return"movementY"in s?s.movementY:yt}}),ui=ua(ya),Fu=v({},ya,{dataTransfer:0}),zf=ua(Fu),Pc=v({},Tr,{relatedTarget:0}),Lc=ua(Pc),Uu=v({},kr,{animationName:0,elapsedTime:0,pseudoElement:0}),If=ua(Uu),Bf=v({},kr,{clipboardData:function(s){return"clipboardData"in s?s.clipboardData:window.clipboardData}}),zc=ua(Bf),$f=v({},kr,{data:0}),Ya=ua($f),Ff={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Hu={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Ks={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qu(s){var i=this.nativeEvent;return i.getModifierState?i.getModifierState(s):(s=Ks[s])?!!i[s]:!1}function ro(){return qu}var Ic=v({},Tr,{key:function(s){if(s.key){var i=Ff[s.key]||s.key;if(i!=="Unidentified")return i}return s.type==="keypress"?(s=Sn(s),s===13?"Enter":String.fromCharCode(s)):s.type==="keydown"||s.type==="keyup"?Hu[s.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ro,charCode:function(s){return s.type==="keypress"?Sn(s):0},keyCode:function(s){return s.type==="keydown"||s.type==="keyup"?s.keyCode:0},which:function(s){return s.type==="keypress"?Sn(s):s.type==="keydown"||s.type==="keyup"?s.keyCode:0}}),Uf=ua(Ic),Yu=v({},ya,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Bc=ua(Yu),Hf=v({},Tr,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ro}),qf=ua(Hf),$c=v({},kr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Yf=ua($c),Vu=v({},ya,{deltaX:function(s){return"deltaX"in s?s.deltaX:"wheelDeltaX"in s?-s.wheelDeltaX:0},deltaY:function(s){return"deltaY"in s?s.deltaY:"wheelDeltaY"in s?-s.wheelDeltaY:"wheelDelta"in s?-s.wheelDelta:0},deltaZ:0,deltaMode:0}),Zu=ua(Vu),io=v({},kr,{newState:0,oldState:0}),Er=ua(io),Vf=[9,13,27,32],Mr=us&&"CompositionEvent"in window,ea=null;us&&"documentMode"in document&&(ea=document.documentMode);var Wu=us&&"TextEvent"in window&&!ea,Fc=us&&(!Mr||ea&&8<ea&&11>=ea),Ku=" ",lo=!1;function oo(s,i){switch(s){case"keyup":return Vf.indexOf(i.keyCode)!==-1;case"keydown":return i.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gu(s){return s=s.detail,typeof s=="object"&&"data"in s?s.data:null}var mi=!1;function Qu(s,i){switch(s){case"compositionend":return Gu(i);case"keypress":return i.which!==32?null:(lo=!0,Ku);case"textInput":return s=i.data,s===Ku&&lo?null:s;default:return null}}function Zf(s,i){if(mi)return s==="compositionend"||!Mr&&oo(s,i)?(s=di(),ci=Ms=ms=null,mi=!1,s):null;switch(s){case"paste":return null;case"keypress":if(!(i.ctrlKey||i.altKey||i.metaKey)||i.ctrlKey&&i.altKey){if(i.char&&1<i.char.length)return i.char;if(i.which)return String.fromCharCode(i.which)}return null;case"compositionend":return Fc&&i.locale!=="ko"?null:i.data;default:return null}}var Va={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Rr(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i==="input"?!!Va[s.type]:i==="textarea"}function Xu(s,i,c,m){Sr?Ws?Ws.push(m):Ws=[m]:Sr=m,i=$m(i,"onChange"),0<i.length&&(c=new ul("onChange","change",null,c,m),s.push({event:c,listeners:i}))}var Na=null,hl=null;function hi(s){jv(s,0)}function co(s){var i=cs(s);if(ht(i))return s}function fi(s,i){if(s==="change")return i}var Uc=!1;if(us){var pi;if(us){var Hc="oninput"in document;if(!Hc){var Rs=document.createElement("div");Rs.setAttribute("oninput","return;"),Hc=typeof Rs.oninput=="function"}pi=Hc}else pi=!1;Uc=pi&&(!document.documentMode||9<document.documentMode)}function fl(){Na&&(Na.detachEvent("onpropertychange",Ju),hl=Na=null)}function Ju(s){if(s.propertyName==="value"&&co(hl)){var i=[];Xu(i,hl,s,oi(s)),qa(hi,i)}}function qc(s,i,c){s==="focusin"?(fl(),Na=i,hl=c,Na.attachEvent("onpropertychange",Ju)):s==="focusout"&&fl()}function Wf(s){if(s==="selectionchange"||s==="keyup"||s==="keydown")return co(hl)}function As(s,i){if(s==="click")return co(i)}function Kf(s,i){if(s==="input"||s==="change")return co(i)}function gi(s,i){return s===i&&(s!==0||1/s===1/i)||s!==s&&i!==i}var _a=typeof Object.is=="function"?Object.is:gi;function Sa(s,i){if(_a(s,i))return!0;if(typeof s!="object"||s===null||typeof i!="object"||i===null)return!1;var c=Object.keys(s),m=Object.keys(i);if(c.length!==m.length)return!1;for(m=0;m<c.length;m++){var y=c[m];if(!Ie.call(i,y)||!_a(s[y],i[y]))return!1}return!0}function pl(s){for(;s&&s.firstChild;)s=s.firstChild;return s}function Yc(s,i){var c=pl(s);s=0;for(var m;c;){if(c.nodeType===3){if(m=s+c.textContent.length,s<=i&&m>=i)return{node:c,offset:i-s};s=m}e:{for(;c;){if(c.nextSibling){c=c.nextSibling;break e}c=c.parentNode}c=void 0}c=pl(c)}}function uo(s,i){return s&&i?s===i?!0:s&&s.nodeType===3?!1:i&&i.nodeType===3?uo(s,i.parentNode):"contains"in s?s.contains(i):s.compareDocumentPosition?!!(s.compareDocumentPosition(i)&16):!1:!1}function gl(s){s=s!=null&&s.ownerDocument!=null&&s.ownerDocument.defaultView!=null?s.ownerDocument.defaultView:window;for(var i=nn(s.document);i instanceof s.HTMLIFrameElement;){try{var c=typeof i.contentWindow.location.href=="string"}catch{c=!1}if(c)s=i.contentWindow;else break;i=nn(s.document)}return i}function xl(s){var i=s&&s.nodeName&&s.nodeName.toLowerCase();return i&&(i==="input"&&(s.type==="text"||s.type==="search"||s.type==="tel"||s.type==="url"||s.type==="password")||i==="textarea"||s.contentEditable==="true")}var mo=us&&"documentMode"in document&&11>=document.documentMode,Za=null,xi=null,Ar=null,ho=!1;function em(s,i,c){var m=c.window===c?c.document:c.nodeType===9?c:c.ownerDocument;ho||Za==null||Za!==nn(m)||(m=Za,"selectionStart"in m&&xl(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Ar&&Sa(Ar,m)||(Ar=m,m=$m(xi,"onSelect"),0<m.length&&(i=new ul("onSelect","select",null,i,c),s.push({event:i,listeners:m}),i.target=Za)))}function fs(s,i){var c={};return c[s.toLowerCase()]=i.toLowerCase(),c["Webkit"+s]="webkit"+i,c["Moz"+s]="moz"+i,c}var yi={animationend:fs("Animation","AnimationEnd"),animationiteration:fs("Animation","AnimationIteration"),animationstart:fs("Animation","AnimationStart"),transitionrun:fs("Transition","TransitionRun"),transitionstart:fs("Transition","TransitionStart"),transitioncancel:fs("Transition","TransitionCancel"),transitionend:fs("Transition","TransitionEnd")},fo={},tm={};us&&(tm=document.createElement("div").style,"AnimationEvent"in window||(delete yi.animationend.animation,delete yi.animationiteration.animation,delete yi.animationstart.animation),"TransitionEvent"in window||delete yi.transitionend.transition);function Gs(s){if(fo[s])return fo[s];if(!yi[s])return s;var i=yi[s],c;for(c in i)if(i.hasOwnProperty(c)&&c in tm)return fo[s]=i[c];return s}var nm=Gs("animationend"),Wa=Gs("animationiteration"),yl=Gs("animationstart"),Gf=Gs("transitionrun"),po=Gs("transitionstart"),Qf=Gs("transitioncancel"),Vc=Gs("transitionend"),am=new Map,Dr="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Dr.push("scrollEnd");function Ka(s,i){am.set(s,i),vr(i,[s])}var Or=new WeakMap;function Ca(s,i){if(typeof s=="object"&&s!==null){var c=Or.get(s);return c!==void 0?c:(i={value:s,source:i,stack:tn(i)},Or.set(s,i),i)}return{value:s,source:i,stack:tn(i)}}var ka=[],bi=0,Ga=0;function bl(){for(var s=bi,i=Ga=bi=0;i<s;){var c=ka[i];ka[i++]=null;var m=ka[i];ka[i++]=null;var y=ka[i];ka[i++]=null;var j=ka[i];if(ka[i++]=null,m!==null&&y!==null){var D=m.pending;D===null?y.next=y:(y.next=D.next,D.next=y),m.pending=y}j!==0&&jl(c,y,j)}}function vl(s,i,c,m){ka[bi++]=s,ka[bi++]=i,ka[bi++]=c,ka[bi++]=m,Ga|=m,s.lanes|=m,s=s.alternate,s!==null&&(s.lanes|=m)}function Pr(s,i,c,m){return vl(s,i,c,m),Qs(s)}function vi(s,i){return vl(s,null,null,i),Qs(s)}function jl(s,i,c){s.lanes|=c;var m=s.alternate;m!==null&&(m.lanes|=c);for(var y=!1,j=s.return;j!==null;)j.childLanes|=c,m=j.alternate,m!==null&&(m.childLanes|=c),j.tag===22&&(s=j.stateNode,s===null||s._visibility&1||(y=!0)),s=j,j=j.return;return s.tag===3?(j=s.stateNode,y&&i!==null&&(y=31-Le(c),s=j.hiddenUpdates,m=s[y],m===null?s[y]=[i]:m.push(i),i.lane=c|536870912),j):null}function Qs(s){if(50<pd)throw pd=0,Wp=null,Error(r(185));for(var i=s.return;i!==null;)s=i,i=s.return;return s.tag===3?s.stateNode:null}var Lr={};function sm(s,i,c,m){this.tag=s,this.key=c,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=i,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ta(s,i,c,m){return new sm(s,i,c,m)}function go(s){return s=s.prototype,!(!s||!s.isReactComponent)}function ps(s,i){var c=s.alternate;return c===null?(c=Ta(s.tag,i,s.key,s.mode),c.elementType=s.elementType,c.type=s.type,c.stateNode=s.stateNode,c.alternate=s,s.alternate=c):(c.pendingProps=i,c.type=s.type,c.flags=0,c.subtreeFlags=0,c.deletions=null),c.flags=s.flags&65011712,c.childLanes=s.childLanes,c.lanes=s.lanes,c.child=s.child,c.memoizedProps=s.memoizedProps,c.memoizedState=s.memoizedState,c.updateQueue=s.updateQueue,i=s.dependencies,c.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext},c.sibling=s.sibling,c.index=s.index,c.ref=s.ref,c.refCleanup=s.refCleanup,c}function Zc(s,i){s.flags&=65011714;var c=s.alternate;return c===null?(s.childLanes=0,s.lanes=i,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=c.childLanes,s.lanes=c.lanes,s.child=c.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=c.memoizedProps,s.memoizedState=c.memoizedState,s.updateQueue=c.updateQueue,s.type=c.type,i=c.dependencies,s.dependencies=i===null?null:{lanes:i.lanes,firstContext:i.firstContext}),s}function wl(s,i,c,m,y,j){var D=0;if(m=s,typeof s=="function")go(s)&&(D=1);else if(typeof s=="string")D=tC(s,c,ee.current)?26:s==="html"||s==="head"||s==="body"?27:5;else e:switch(s){case Z:return s=Ta(31,c,i,y),s.elementType=Z,s.lanes=j,s;case C:return Xs(c.children,y,j,i);case _:D=8,y|=24;break;case k:return s=Ta(12,c,i,y|2),s.elementType=k,s.lanes=j,s;case A:return s=Ta(13,c,i,y),s.elementType=A,s.lanes=j,s;case $:return s=Ta(19,c,i,y),s.elementType=$,s.lanes=j,s;default:if(typeof s=="object"&&s!==null)switch(s.$$typeof){case R:case P:D=10;break e;case O:D=9;break e;case U:D=11;break e;case E:D=14;break e;case I:D=16,m=null;break e}D=29,c=Error(r(130,s===null?"null":typeof s,"")),m=null}return i=Ta(D,c,i,y),i.elementType=s,i.type=m,i.lanes=j,i}function Xs(s,i,c,m){return s=Ta(7,s,m,i),s.lanes=c,s}function Wc(s,i,c){return s=Ta(6,s,null,i),s.lanes=c,s}function xo(s,i,c){return i=Ta(4,s.children!==null?s.children:[],s.key,i),i.lanes=c,i.stateNode={containerInfo:s.containerInfo,pendingChildren:null,implementation:s.implementation},i}var zr=[],ji=0,l=null,u=0,x=[],N=0,M=null,B=1,ie="";function pe(s,i){zr[ji++]=u,zr[ji++]=l,l=s,u=i}function je(s,i,c){x[N++]=B,x[N++]=ie,x[N++]=M,M=s;var m=B;s=ie;var y=32-Le(m)-1;m&=~(1<<y),c+=1;var j=32-Le(i)+y;if(30<j){var D=y-y%5;j=(m&(1<<D)-1).toString(32),m>>=D,y-=D,B=1<<32-Le(i)+y|c<<y|m,ie=j+s}else B=1<<j|c<<y|m,ie=s}function Ae(s){s.return!==null&&(pe(s,1),je(s,1,0))}function Ue(s){for(;s===l;)l=zr[--ji],zr[ji]=null,u=zr[--ji],zr[ji]=null;for(;s===M;)M=x[--N],x[N]=null,ie=x[--N],x[N]=null,B=x[--N],x[N]=null}var Ye=null,Ge=null,dt=!1,an=null,gn=!1,ta=Error(r(519));function Aa(s){var i=Error(r(418,""));throw Ni(Ca(i,s)),ta}function rm(s){var i=s.stateNode,c=s.type,m=s.memoizedProps;switch(i[Gt]=s,i[Qt]=m,c){case"dialog":jt("cancel",i),jt("close",i);break;case"iframe":case"object":case"embed":jt("load",i);break;case"video":case"audio":for(c=0;c<xd.length;c++)jt(xd[c],i);break;case"source":jt("error",i);break;case"img":case"image":case"link":jt("error",i),jt("load",i);break;case"details":jt("toggle",i);break;case"input":jt("invalid",i),Bu(i,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),si(i);break;case"select":jt("invalid",i);break;case"textarea":jt("invalid",i),Zs(i,m.value,m.defaultValue,m.children),si(i)}c=m.children,typeof c!="string"&&typeof c!="number"&&typeof c!="bigint"||i.textContent===""+c||m.suppressHydrationWarning===!0||Sv(i.textContent,c)?(m.popover!=null&&(jt("beforetoggle",i),jt("toggle",i)),m.onScroll!=null&&jt("scroll",i),m.onScrollEnd!=null&&jt("scrollend",i),m.onClick!=null&&(i.onclick=Fm),i=!0):i=!1,i||Aa(s)}function im(s){for(Ye=s.return;Ye;)switch(Ye.tag){case 5:case 13:gn=!1;return;case 27:case 3:gn=!0;return;default:Ye=Ye.return}}function Nl(s){if(s!==Ye)return!1;if(!dt)return im(s),dt=!0,!1;var i=s.tag,c;if((c=i!==3&&i!==27)&&((c=i===5)&&(c=s.type,c=!(c!=="form"&&c!=="button")||dg(s.type,s.memoizedProps)),c=!c),c&&Ge&&Aa(s),im(s),i===13){if(s=s.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(r(317));e:{for(s=s.nextSibling,i=0;s;){if(s.nodeType===8)if(c=s.data,c==="/$"){if(i===0){Ge=Ls(s.nextSibling);break e}i--}else c!=="$"&&c!=="$!"&&c!=="$?"||i++;s=s.nextSibling}Ge=null}}else i===27?(i=Ge,Ii(s.type)?(s=fg,fg=null,Ge=s):Ge=i):Ge=Ye?Ls(s.stateNode.nextSibling):null;return!0}function wi(){Ge=Ye=null,dt=!1}function lm(){var s=an;return s!==null&&(Pa===null?Pa=s:Pa.push.apply(Pa,s),an=null),s}function Ni(s){an===null?an=[s]:an.push(s)}var cn=J(null),gs=null,Ds=null;function Js(s,i,c){ae(cn,i._currentValue),i._currentValue=c}function Os(s){s._currentValue=cn.current,se(cn)}function _l(s,i,c){for(;s!==null;){var m=s.alternate;if((s.childLanes&i)!==i?(s.childLanes|=i,m!==null&&(m.childLanes|=i)):m!==null&&(m.childLanes&i)!==i&&(m.childLanes|=i),s===c)break;s=s.return}}function yo(s,i,c,m){var y=s.child;for(y!==null&&(y.return=s);y!==null;){var j=y.dependencies;if(j!==null){var D=y.child;j=j.firstContext;e:for(;j!==null;){var q=j;j=y;for(var le=0;le<i.length;le++)if(q.context===i[le]){j.lanes|=c,q=j.alternate,q!==null&&(q.lanes|=c),_l(j.return,c,s),m||(D=null);break e}j=q.next}}else if(y.tag===18){if(D=y.return,D===null)throw Error(r(341));D.lanes|=c,j=D.alternate,j!==null&&(j.lanes|=c),_l(D,c,s),D=null}else D=y.child;if(D!==null)D.return=y;else for(D=y;D!==null;){if(D===s){D=null;break}if(y=D.sibling,y!==null){y.return=D.return,D=y;break}D=D.return}y=D}}function Sl(s,i,c,m){s=null;for(var y=i,j=!1;y!==null;){if(!j){if((y.flags&524288)!==0)j=!0;else if((y.flags&262144)!==0)break}if(y.tag===10){var D=y.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var q=y.type;_a(y.pendingProps.value,D.value)||(s!==null?s.push(q):s=[q])}}else if(y===ye.current){if(D=y.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==y.memoizedState.memoizedState&&(s!==null?s.push(Nd):s=[Nd])}y=y.return}s!==null&&yo(i,s,c,m),i.flags|=262144}function om(s){for(s=s.firstContext;s!==null;){if(!_a(s.context._currentValue,s.memoizedValue))return!0;s=s.next}return!1}function Cl(s){gs=s,Ds=null,s=s.dependencies,s!==null&&(s.firstContext=null)}function ba(s){return uy(gs,s)}function cm(s,i){return gs===null&&Cl(s),uy(s,i)}function uy(s,i){var c=i._currentValue;if(i={context:i,memoizedValue:c,next:null},Ds===null){if(s===null)throw Error(r(308));Ds=i,s.dependencies={lanes:0,firstContext:i},s.flags|=524288}else Ds=Ds.next=i;return c}var eS=typeof AbortController<"u"?AbortController:function(){var s=[],i=this.signal={aborted:!1,addEventListener:function(c,m){s.push(m)}};this.abort=function(){i.aborted=!0,s.forEach(function(c){return c()})}},tS=e.unstable_scheduleCallback,nS=e.unstable_NormalPriority,Wn={$$typeof:P,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function Xf(){return{controller:new eS,data:new Map,refCount:0}}function Kc(s){s.refCount--,s.refCount===0&&tS(nS,function(){s.controller.abort()})}var Gc=null,Jf=0,bo=0,vo=null;function aS(s,i){if(Gc===null){var c=Gc=[];Jf=0,bo=tg(),vo={status:"pending",value:void 0,then:function(m){c.push(m)}}}return Jf++,i.then(my,my),i}function my(){if(--Jf===0&&Gc!==null){vo!==null&&(vo.status="fulfilled");var s=Gc;Gc=null,bo=0,vo=null;for(var i=0;i<s.length;i++)(0,s[i])()}}function sS(s,i){var c=[],m={status:"pending",value:null,reason:null,then:function(y){c.push(y)}};return s.then(function(){m.status="fulfilled",m.value=i;for(var y=0;y<c.length;y++)(0,c[y])(i)},function(y){for(m.status="rejected",m.reason=y,y=0;y<c.length;y++)(0,c[y])(void 0)}),m}var hy=K.S;K.S=function(s,i){typeof i=="object"&&i!==null&&typeof i.then=="function"&&aS(s,i),hy!==null&&hy(s,i)};var kl=J(null);function ep(){var s=kl.current;return s!==null?s:sn.pooledCache}function dm(s,i){i===null?ae(kl,kl.current):ae(kl,i.pool)}function fy(){var s=ep();return s===null?null:{parent:Wn._currentValue,pool:s}}var Qc=Error(r(460)),py=Error(r(474)),um=Error(r(542)),tp={then:function(){}};function gy(s){return s=s.status,s==="fulfilled"||s==="rejected"}function mm(){}function xy(s,i,c){switch(c=s[c],c===void 0?s.push(i):c!==i&&(i.then(mm,mm),i=c),i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,by(s),s;default:if(typeof i.status=="string")i.then(mm,mm);else{if(s=sn,s!==null&&100<s.shellSuspendCounter)throw Error(r(482));s=i,s.status="pending",s.then(function(m){if(i.status==="pending"){var y=i;y.status="fulfilled",y.value=m}},function(m){if(i.status==="pending"){var y=i;y.status="rejected",y.reason=m}})}switch(i.status){case"fulfilled":return i.value;case"rejected":throw s=i.reason,by(s),s}throw Xc=i,Qc}}var Xc=null;function yy(){if(Xc===null)throw Error(r(459));var s=Xc;return Xc=null,s}function by(s){if(s===Qc||s===um)throw Error(r(483))}var _i=!1;function np(s){s.updateQueue={baseState:s.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function ap(s,i){s=s.updateQueue,i.updateQueue===s&&(i.updateQueue={baseState:s.baseState,firstBaseUpdate:s.firstBaseUpdate,lastBaseUpdate:s.lastBaseUpdate,shared:s.shared,callbacks:null})}function Si(s){return{lane:s,tag:0,payload:null,callback:null,next:null}}function Ci(s,i,c){var m=s.updateQueue;if(m===null)return null;if(m=m.shared,(Ft&2)!==0){var y=m.pending;return y===null?i.next=i:(i.next=y.next,y.next=i),m.pending=i,i=Qs(s),jl(s,null,c),i}return vl(s,m,i,c),Qs(s)}function Jc(s,i,c){if(i=i.updateQueue,i!==null&&(i=i.shared,(c&4194048)!==0)){var m=i.lanes;m&=s.pendingLanes,c|=m,i.lanes=c,At(s,c)}}function sp(s,i){var c=s.updateQueue,m=s.alternate;if(m!==null&&(m=m.updateQueue,c===m)){var y=null,j=null;if(c=c.firstBaseUpdate,c!==null){do{var D={lane:c.lane,tag:c.tag,payload:c.payload,callback:null,next:null};j===null?y=j=D:j=j.next=D,c=c.next}while(c!==null);j===null?y=j=i:j=j.next=i}else y=j=i;c={baseState:m.baseState,firstBaseUpdate:y,lastBaseUpdate:j,shared:m.shared,callbacks:m.callbacks},s.updateQueue=c;return}s=c.lastBaseUpdate,s===null?c.firstBaseUpdate=i:s.next=i,c.lastBaseUpdate=i}var rp=!1;function ed(){if(rp){var s=vo;if(s!==null)throw s}}function td(s,i,c,m){rp=!1;var y=s.updateQueue;_i=!1;var j=y.firstBaseUpdate,D=y.lastBaseUpdate,q=y.shared.pending;if(q!==null){y.shared.pending=null;var le=q,xe=le.next;le.next=null,D===null?j=xe:D.next=xe,D=le;var Se=s.alternate;Se!==null&&(Se=Se.updateQueue,q=Se.lastBaseUpdate,q!==D&&(q===null?Se.firstBaseUpdate=xe:q.next=xe,Se.lastBaseUpdate=le))}if(j!==null){var Re=y.baseState;D=0,Se=xe=le=null,q=j;do{var be=q.lane&-536870913,ve=be!==q.lane;if(ve?(Tt&be)===be:(m&be)===be){be!==0&&be===bo&&(rp=!0),Se!==null&&(Se=Se.next={lane:0,tag:q.tag,payload:q.payload,callback:null,next:null});e:{var lt=s,nt=q;be=i;var Wt=c;switch(nt.tag){case 1:if(lt=nt.payload,typeof lt=="function"){Re=lt.call(Wt,Re,be);break e}Re=lt;break e;case 3:lt.flags=lt.flags&-65537|128;case 0:if(lt=nt.payload,be=typeof lt=="function"?lt.call(Wt,Re,be):lt,be==null)break e;Re=v({},Re,be);break e;case 2:_i=!0}}be=q.callback,be!==null&&(s.flags|=64,ve&&(s.flags|=8192),ve=y.callbacks,ve===null?y.callbacks=[be]:ve.push(be))}else ve={lane:be,tag:q.tag,payload:q.payload,callback:q.callback,next:null},Se===null?(xe=Se=ve,le=Re):Se=Se.next=ve,D|=be;if(q=q.next,q===null){if(q=y.shared.pending,q===null)break;ve=q,q=ve.next,ve.next=null,y.lastBaseUpdate=ve,y.shared.pending=null}}while(!0);Se===null&&(le=Re),y.baseState=le,y.firstBaseUpdate=xe,y.lastBaseUpdate=Se,j===null&&(y.shared.lanes=0),Oi|=D,s.lanes=D,s.memoizedState=Re}}function vy(s,i){if(typeof s!="function")throw Error(r(191,s));s.call(i)}function jy(s,i){var c=s.callbacks;if(c!==null)for(s.callbacks=null,s=0;s<c.length;s++)vy(c[s],i)}var jo=J(null),hm=J(0);function wy(s,i){s=qr,ae(hm,s),ae(jo,i),qr=s|i.baseLanes}function ip(){ae(hm,qr),ae(jo,jo.current)}function lp(){qr=hm.current,se(jo),se(hm)}var ki=0,xt=null,Vt=null,Yn=null,fm=!1,wo=!1,Tl=!1,pm=0,nd=0,No=null,rS=0;function An(){throw Error(r(321))}function op(s,i){if(i===null)return!1;for(var c=0;c<i.length&&c<s.length;c++)if(!_a(s[c],i[c]))return!1;return!0}function cp(s,i,c,m,y,j){return ki=j,xt=i,i.memoizedState=null,i.updateQueue=null,i.lanes=0,K.H=s===null||s.memoizedState===null?rb:ib,Tl=!1,j=c(m,y),Tl=!1,wo&&(j=_y(i,c,m,y)),Ny(s),j}function Ny(s){K.H=jm;var i=Vt!==null&&Vt.next!==null;if(ki=0,Yn=Vt=xt=null,fm=!1,nd=0,No=null,i)throw Error(r(300));s===null||na||(s=s.dependencies,s!==null&&om(s)&&(na=!0))}function _y(s,i,c,m){xt=s;var y=0;do{if(wo&&(No=null),nd=0,wo=!1,25<=y)throw Error(r(301));if(y+=1,Yn=Vt=null,s.updateQueue!=null){var j=s.updateQueue;j.lastEffect=null,j.events=null,j.stores=null,j.memoCache!=null&&(j.memoCache.index=0)}K.H=mS,j=i(c,m)}while(wo);return j}function iS(){var s=K.H,i=s.useState()[0];return i=typeof i.then=="function"?ad(i):i,s=s.useState()[0],(Vt!==null?Vt.memoizedState:null)!==s&&(xt.flags|=1024),i}function dp(){var s=pm!==0;return pm=0,s}function up(s,i,c){i.updateQueue=s.updateQueue,i.flags&=-2053,s.lanes&=~c}function mp(s){if(fm){for(s=s.memoizedState;s!==null;){var i=s.queue;i!==null&&(i.pending=null),s=s.next}fm=!1}ki=0,Yn=Vt=xt=null,wo=!1,nd=pm=0,No=null}function Da(){var s={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Yn===null?xt.memoizedState=Yn=s:Yn=Yn.next=s,Yn}function Vn(){if(Vt===null){var s=xt.alternate;s=s!==null?s.memoizedState:null}else s=Vt.next;var i=Yn===null?xt.memoizedState:Yn.next;if(i!==null)Yn=i,Vt=s;else{if(s===null)throw xt.alternate===null?Error(r(467)):Error(r(310));Vt=s,s={memoizedState:Vt.memoizedState,baseState:Vt.baseState,baseQueue:Vt.baseQueue,queue:Vt.queue,next:null},Yn===null?xt.memoizedState=Yn=s:Yn=Yn.next=s}return Yn}function hp(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function ad(s){var i=nd;return nd+=1,No===null&&(No=[]),s=xy(No,s,i),i=xt,(Yn===null?i.memoizedState:Yn.next)===null&&(i=i.alternate,K.H=i===null||i.memoizedState===null?rb:ib),s}function gm(s){if(s!==null&&typeof s=="object"){if(typeof s.then=="function")return ad(s);if(s.$$typeof===P)return ba(s)}throw Error(r(438,String(s)))}function fp(s){var i=null,c=xt.updateQueue;if(c!==null&&(i=c.memoCache),i==null){var m=xt.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(i={data:m.data.map(function(y){return y.slice()}),index:0})))}if(i==null&&(i={data:[],index:0}),c===null&&(c=hp(),xt.updateQueue=c),c.memoCache=i,c=i.data[i.index],c===void 0)for(c=i.data[i.index]=Array(s),m=0;m<s;m++)c[m]=F;return i.index++,c}function Ir(s,i){return typeof i=="function"?i(s):i}function xm(s){var i=Vn();return pp(i,Vt,s)}function pp(s,i,c){var m=s.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=c;var y=s.baseQueue,j=m.pending;if(j!==null){if(y!==null){var D=y.next;y.next=j.next,j.next=D}i.baseQueue=y=j,m.pending=null}if(j=s.baseState,y===null)s.memoizedState=j;else{i=y.next;var q=D=null,le=null,xe=i,Se=!1;do{var Re=xe.lane&-536870913;if(Re!==xe.lane?(Tt&Re)===Re:(ki&Re)===Re){var be=xe.revertLane;if(be===0)le!==null&&(le=le.next={lane:0,revertLane:0,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null}),Re===bo&&(Se=!0);else if((ki&be)===be){xe=xe.next,be===bo&&(Se=!0);continue}else Re={lane:0,revertLane:xe.revertLane,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},le===null?(q=le=Re,D=j):le=le.next=Re,xt.lanes|=be,Oi|=be;Re=xe.action,Tl&&c(j,Re),j=xe.hasEagerState?xe.eagerState:c(j,Re)}else be={lane:Re,revertLane:xe.revertLane,action:xe.action,hasEagerState:xe.hasEagerState,eagerState:xe.eagerState,next:null},le===null?(q=le=be,D=j):le=le.next=be,xt.lanes|=Re,Oi|=Re;xe=xe.next}while(xe!==null&&xe!==i);if(le===null?D=j:le.next=q,!_a(j,s.memoizedState)&&(na=!0,Se&&(c=vo,c!==null)))throw c;s.memoizedState=j,s.baseState=D,s.baseQueue=le,m.lastRenderedState=j}return y===null&&(m.lanes=0),[s.memoizedState,m.dispatch]}function gp(s){var i=Vn(),c=i.queue;if(c===null)throw Error(r(311));c.lastRenderedReducer=s;var m=c.dispatch,y=c.pending,j=i.memoizedState;if(y!==null){c.pending=null;var D=y=y.next;do j=s(j,D.action),D=D.next;while(D!==y);_a(j,i.memoizedState)||(na=!0),i.memoizedState=j,i.baseQueue===null&&(i.baseState=j),c.lastRenderedState=j}return[j,m]}function Sy(s,i,c){var m=xt,y=Vn(),j=dt;if(j){if(c===void 0)throw Error(r(407));c=c()}else c=i();var D=!_a((Vt||y).memoizedState,c);D&&(y.memoizedState=c,na=!0),y=y.queue;var q=Ty.bind(null,m,y,s);if(sd(2048,8,q,[s]),y.getSnapshot!==i||D||Yn!==null&&Yn.memoizedState.tag&1){if(m.flags|=2048,_o(9,ym(),ky.bind(null,m,y,c,i),null),sn===null)throw Error(r(349));j||(ki&124)!==0||Cy(m,i,c)}return c}function Cy(s,i,c){s.flags|=16384,s={getSnapshot:i,value:c},i=xt.updateQueue,i===null?(i=hp(),xt.updateQueue=i,i.stores=[s]):(c=i.stores,c===null?i.stores=[s]:c.push(s))}function ky(s,i,c,m){i.value=c,i.getSnapshot=m,Ey(i)&&My(s)}function Ty(s,i,c){return c(function(){Ey(i)&&My(s)})}function Ey(s){var i=s.getSnapshot;s=s.value;try{var c=i();return!_a(s,c)}catch{return!0}}function My(s){var i=vi(s,2);i!==null&&ts(i,s,2)}function xp(s){var i=Da();if(typeof s=="function"){var c=s;if(s=c(),Tl){Oe(!0);try{c()}finally{Oe(!1)}}}return i.memoizedState=i.baseState=s,i.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:s},i}function Ry(s,i,c,m){return s.baseState=c,pp(s,Vt,typeof m=="function"?m:Ir)}function lS(s,i,c,m,y){if(vm(s))throw Error(r(485));if(s=i.action,s!==null){var j={payload:y,action:s,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){j.listeners.push(D)}};K.T!==null?c(!0):j.isTransition=!1,m(j),c=i.pending,c===null?(j.next=i.pending=j,Ay(i,j)):(j.next=c.next,i.pending=c.next=j)}}function Ay(s,i){var c=i.action,m=i.payload,y=s.state;if(i.isTransition){var j=K.T,D={};K.T=D;try{var q=c(y,m),le=K.S;le!==null&&le(D,q),Dy(s,i,q)}catch(xe){yp(s,i,xe)}finally{K.T=j}}else try{j=c(y,m),Dy(s,i,j)}catch(xe){yp(s,i,xe)}}function Dy(s,i,c){c!==null&&typeof c=="object"&&typeof c.then=="function"?c.then(function(m){Oy(s,i,m)},function(m){return yp(s,i,m)}):Oy(s,i,c)}function Oy(s,i,c){i.status="fulfilled",i.value=c,Py(i),s.state=c,i=s.pending,i!==null&&(c=i.next,c===i?s.pending=null:(c=c.next,i.next=c,Ay(s,c)))}function yp(s,i,c){var m=s.pending;if(s.pending=null,m!==null){m=m.next;do i.status="rejected",i.reason=c,Py(i),i=i.next;while(i!==m)}s.action=null}function Py(s){s=s.listeners;for(var i=0;i<s.length;i++)(0,s[i])()}function Ly(s,i){return i}function zy(s,i){if(dt){var c=sn.formState;if(c!==null){e:{var m=xt;if(dt){if(Ge){t:{for(var y=Ge,j=gn;y.nodeType!==8;){if(!j){y=null;break t}if(y=Ls(y.nextSibling),y===null){y=null;break t}}j=y.data,y=j==="F!"||j==="F"?y:null}if(y){Ge=Ls(y.nextSibling),m=y.data==="F!";break e}}Aa(m)}m=!1}m&&(i=c[0])}}return c=Da(),c.memoizedState=c.baseState=i,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ly,lastRenderedState:i},c.queue=m,c=nb.bind(null,xt,m),m.dispatch=c,m=xp(!1),j=Np.bind(null,xt,!1,m.queue),m=Da(),y={state:i,dispatch:null,action:s,pending:null},m.queue=y,c=lS.bind(null,xt,y,j,c),y.dispatch=c,m.memoizedState=s,[i,c,!1]}function Iy(s){var i=Vn();return By(i,Vt,s)}function By(s,i,c){if(i=pp(s,i,Ly)[0],s=xm(Ir)[0],typeof i=="object"&&i!==null&&typeof i.then=="function")try{var m=ad(i)}catch(D){throw D===Qc?um:D}else m=i;i=Vn();var y=i.queue,j=y.dispatch;return c!==i.memoizedState&&(xt.flags|=2048,_o(9,ym(),oS.bind(null,y,c),null)),[m,j,s]}function oS(s,i){s.action=i}function $y(s){var i=Vn(),c=Vt;if(c!==null)return By(i,c,s);Vn(),i=i.memoizedState,c=Vn();var m=c.queue.dispatch;return c.memoizedState=s,[i,m,!1]}function _o(s,i,c,m){return s={tag:s,create:c,deps:m,inst:i,next:null},i=xt.updateQueue,i===null&&(i=hp(),xt.updateQueue=i),c=i.lastEffect,c===null?i.lastEffect=s.next=s:(m=c.next,c.next=s,s.next=m,i.lastEffect=s),s}function ym(){return{destroy:void 0,resource:void 0}}function Fy(){return Vn().memoizedState}function bm(s,i,c,m){var y=Da();m=m===void 0?null:m,xt.flags|=s,y.memoizedState=_o(1|i,ym(),c,m)}function sd(s,i,c,m){var y=Vn();m=m===void 0?null:m;var j=y.memoizedState.inst;Vt!==null&&m!==null&&op(m,Vt.memoizedState.deps)?y.memoizedState=_o(i,j,c,m):(xt.flags|=s,y.memoizedState=_o(1|i,j,c,m))}function Uy(s,i){bm(8390656,8,s,i)}function Hy(s,i){sd(2048,8,s,i)}function qy(s,i){return sd(4,2,s,i)}function Yy(s,i){return sd(4,4,s,i)}function Vy(s,i){if(typeof i=="function"){s=s();var c=i(s);return function(){typeof c=="function"?c():i(null)}}if(i!=null)return s=s(),i.current=s,function(){i.current=null}}function Zy(s,i,c){c=c!=null?c.concat([s]):null,sd(4,4,Vy.bind(null,i,s),c)}function bp(){}function Wy(s,i){var c=Vn();i=i===void 0?null:i;var m=c.memoizedState;return i!==null&&op(i,m[1])?m[0]:(c.memoizedState=[s,i],s)}function Ky(s,i){var c=Vn();i=i===void 0?null:i;var m=c.memoizedState;if(i!==null&&op(i,m[1]))return m[0];if(m=s(),Tl){Oe(!0);try{s()}finally{Oe(!1)}}return c.memoizedState=[m,i],m}function vp(s,i,c){return c===void 0||(ki&1073741824)!==0?s.memoizedState=i:(s.memoizedState=c,s=Xb(),xt.lanes|=s,Oi|=s,c)}function Gy(s,i,c,m){return _a(c,i)?c:jo.current!==null?(s=vp(s,c,m),_a(s,i)||(na=!0),s):(ki&42)===0?(na=!0,s.memoizedState=c):(s=Xb(),xt.lanes|=s,Oi|=s,i)}function Qy(s,i,c,m,y){var j=oe.p;oe.p=j!==0&&8>j?j:8;var D=K.T,q={};K.T=q,Np(s,!1,i,c);try{var le=y(),xe=K.S;if(xe!==null&&xe(q,le),le!==null&&typeof le=="object"&&typeof le.then=="function"){var Se=sS(le,m);rd(s,i,Se,es(s))}else rd(s,i,m,es(s))}catch(Re){rd(s,i,{then:function(){},status:"rejected",reason:Re},es())}finally{oe.p=j,K.T=D}}function cS(){}function jp(s,i,c,m){if(s.tag!==5)throw Error(r(476));var y=Xy(s).queue;Qy(s,y,i,W,c===null?cS:function(){return Jy(s),c(m)})}function Xy(s){var i=s.memoizedState;if(i!==null)return i;i={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:W},next:null};var c={};return i.next={memoizedState:c,baseState:c,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Ir,lastRenderedState:c},next:null},s.memoizedState=i,s=s.alternate,s!==null&&(s.memoizedState=i),i}function Jy(s){var i=Xy(s).next.queue;rd(s,i,{},es())}function wp(){return ba(Nd)}function eb(){return Vn().memoizedState}function tb(){return Vn().memoizedState}function dS(s){for(var i=s.return;i!==null;){switch(i.tag){case 24:case 3:var c=es();s=Si(c);var m=Ci(i,s,c);m!==null&&(ts(m,i,c),Jc(m,i,c)),i={cache:Xf()},s.payload=i;return}i=i.return}}function uS(s,i,c){var m=es();c={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null},vm(s)?ab(i,c):(c=Pr(s,i,c,m),c!==null&&(ts(c,s,m),sb(c,i,m)))}function nb(s,i,c){var m=es();rd(s,i,c,m)}function rd(s,i,c,m){var y={lane:m,revertLane:0,action:c,hasEagerState:!1,eagerState:null,next:null};if(vm(s))ab(i,y);else{var j=s.alternate;if(s.lanes===0&&(j===null||j.lanes===0)&&(j=i.lastRenderedReducer,j!==null))try{var D=i.lastRenderedState,q=j(D,c);if(y.hasEagerState=!0,y.eagerState=q,_a(q,D))return vl(s,i,y,0),sn===null&&bl(),!1}catch{}finally{}if(c=Pr(s,i,y,m),c!==null)return ts(c,s,m),sb(c,i,m),!0}return!1}function Np(s,i,c,m){if(m={lane:2,revertLane:tg(),action:m,hasEagerState:!1,eagerState:null,next:null},vm(s)){if(i)throw Error(r(479))}else i=Pr(s,c,m,2),i!==null&&ts(i,s,2)}function vm(s){var i=s.alternate;return s===xt||i!==null&&i===xt}function ab(s,i){wo=fm=!0;var c=s.pending;c===null?i.next=i:(i.next=c.next,c.next=i),s.pending=i}function sb(s,i,c){if((c&4194048)!==0){var m=i.lanes;m&=s.pendingLanes,c|=m,i.lanes=c,At(s,c)}}var jm={readContext:ba,use:gm,useCallback:An,useContext:An,useEffect:An,useImperativeHandle:An,useLayoutEffect:An,useInsertionEffect:An,useMemo:An,useReducer:An,useRef:An,useState:An,useDebugValue:An,useDeferredValue:An,useTransition:An,useSyncExternalStore:An,useId:An,useHostTransitionStatus:An,useFormState:An,useActionState:An,useOptimistic:An,useMemoCache:An,useCacheRefresh:An},rb={readContext:ba,use:gm,useCallback:function(s,i){return Da().memoizedState=[s,i===void 0?null:i],s},useContext:ba,useEffect:Uy,useImperativeHandle:function(s,i,c){c=c!=null?c.concat([s]):null,bm(4194308,4,Vy.bind(null,i,s),c)},useLayoutEffect:function(s,i){return bm(4194308,4,s,i)},useInsertionEffect:function(s,i){bm(4,2,s,i)},useMemo:function(s,i){var c=Da();i=i===void 0?null:i;var m=s();if(Tl){Oe(!0);try{s()}finally{Oe(!1)}}return c.memoizedState=[m,i],m},useReducer:function(s,i,c){var m=Da();if(c!==void 0){var y=c(i);if(Tl){Oe(!0);try{c(i)}finally{Oe(!1)}}}else y=i;return m.memoizedState=m.baseState=y,s={pending:null,lanes:0,dispatch:null,lastRenderedReducer:s,lastRenderedState:y},m.queue=s,s=s.dispatch=uS.bind(null,xt,s),[m.memoizedState,s]},useRef:function(s){var i=Da();return s={current:s},i.memoizedState=s},useState:function(s){s=xp(s);var i=s.queue,c=nb.bind(null,xt,i);return i.dispatch=c,[s.memoizedState,c]},useDebugValue:bp,useDeferredValue:function(s,i){var c=Da();return vp(c,s,i)},useTransition:function(){var s=xp(!1);return s=Qy.bind(null,xt,s.queue,!0,!1),Da().memoizedState=s,[!1,s]},useSyncExternalStore:function(s,i,c){var m=xt,y=Da();if(dt){if(c===void 0)throw Error(r(407));c=c()}else{if(c=i(),sn===null)throw Error(r(349));(Tt&124)!==0||Cy(m,i,c)}y.memoizedState=c;var j={value:c,getSnapshot:i};return y.queue=j,Uy(Ty.bind(null,m,j,s),[s]),m.flags|=2048,_o(9,ym(),ky.bind(null,m,j,c,i),null),c},useId:function(){var s=Da(),i=sn.identifierPrefix;if(dt){var c=ie,m=B;c=(m&~(1<<32-Le(m)-1)).toString(32)+c,i="«"+i+"R"+c,c=pm++,0<c&&(i+="H"+c.toString(32)),i+="»"}else c=rS++,i="«"+i+"r"+c.toString(32)+"»";return s.memoizedState=i},useHostTransitionStatus:wp,useFormState:zy,useActionState:zy,useOptimistic:function(s){var i=Da();i.memoizedState=i.baseState=s;var c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return i.queue=c,i=Np.bind(null,xt,!0,c),c.dispatch=i,[s,i]},useMemoCache:fp,useCacheRefresh:function(){return Da().memoizedState=dS.bind(null,xt)}},ib={readContext:ba,use:gm,useCallback:Wy,useContext:ba,useEffect:Hy,useImperativeHandle:Zy,useInsertionEffect:qy,useLayoutEffect:Yy,useMemo:Ky,useReducer:xm,useRef:Fy,useState:function(){return xm(Ir)},useDebugValue:bp,useDeferredValue:function(s,i){var c=Vn();return Gy(c,Vt.memoizedState,s,i)},useTransition:function(){var s=xm(Ir)[0],i=Vn().memoizedState;return[typeof s=="boolean"?s:ad(s),i]},useSyncExternalStore:Sy,useId:eb,useHostTransitionStatus:wp,useFormState:Iy,useActionState:Iy,useOptimistic:function(s,i){var c=Vn();return Ry(c,Vt,s,i)},useMemoCache:fp,useCacheRefresh:tb},mS={readContext:ba,use:gm,useCallback:Wy,useContext:ba,useEffect:Hy,useImperativeHandle:Zy,useInsertionEffect:qy,useLayoutEffect:Yy,useMemo:Ky,useReducer:gp,useRef:Fy,useState:function(){return gp(Ir)},useDebugValue:bp,useDeferredValue:function(s,i){var c=Vn();return Vt===null?vp(c,s,i):Gy(c,Vt.memoizedState,s,i)},useTransition:function(){var s=gp(Ir)[0],i=Vn().memoizedState;return[typeof s=="boolean"?s:ad(s),i]},useSyncExternalStore:Sy,useId:eb,useHostTransitionStatus:wp,useFormState:$y,useActionState:$y,useOptimistic:function(s,i){var c=Vn();return Vt!==null?Ry(c,Vt,s,i):(c.baseState=s,[s,c.queue.dispatch])},useMemoCache:fp,useCacheRefresh:tb},So=null,id=0;function wm(s){var i=id;return id+=1,So===null&&(So=[]),xy(So,s,i)}function ld(s,i){i=i.props.ref,s.ref=i!==void 0?i:null}function Nm(s,i){throw i.$$typeof===w?Error(r(525)):(s=Object.prototype.toString.call(i),Error(r(31,s==="[object Object]"?"object with keys {"+Object.keys(i).join(", ")+"}":s)))}function lb(s){var i=s._init;return i(s._payload)}function ob(s){function i(fe,ue){if(s){var ge=fe.deletions;ge===null?(fe.deletions=[ue],fe.flags|=16):ge.push(ue)}}function c(fe,ue){if(!s)return null;for(;ue!==null;)i(fe,ue),ue=ue.sibling;return null}function m(fe){for(var ue=new Map;fe!==null;)fe.key!==null?ue.set(fe.key,fe):ue.set(fe.index,fe),fe=fe.sibling;return ue}function y(fe,ue){return fe=ps(fe,ue),fe.index=0,fe.sibling=null,fe}function j(fe,ue,ge){return fe.index=ge,s?(ge=fe.alternate,ge!==null?(ge=ge.index,ge<ue?(fe.flags|=67108866,ue):ge):(fe.flags|=67108866,ue)):(fe.flags|=1048576,ue)}function D(fe){return s&&fe.alternate===null&&(fe.flags|=67108866),fe}function q(fe,ue,ge,ke){return ue===null||ue.tag!==6?(ue=Wc(ge,fe.mode,ke),ue.return=fe,ue):(ue=y(ue,ge),ue.return=fe,ue)}function le(fe,ue,ge,ke){var Ze=ge.type;return Ze===C?Se(fe,ue,ge.props.children,ke,ge.key):ue!==null&&(ue.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===I&&lb(Ze)===ue.type)?(ue=y(ue,ge.props),ld(ue,ge),ue.return=fe,ue):(ue=wl(ge.type,ge.key,ge.props,null,fe.mode,ke),ld(ue,ge),ue.return=fe,ue)}function xe(fe,ue,ge,ke){return ue===null||ue.tag!==4||ue.stateNode.containerInfo!==ge.containerInfo||ue.stateNode.implementation!==ge.implementation?(ue=xo(ge,fe.mode,ke),ue.return=fe,ue):(ue=y(ue,ge.children||[]),ue.return=fe,ue)}function Se(fe,ue,ge,ke,Ze){return ue===null||ue.tag!==7?(ue=Xs(ge,fe.mode,ke,Ze),ue.return=fe,ue):(ue=y(ue,ge),ue.return=fe,ue)}function Re(fe,ue,ge){if(typeof ue=="string"&&ue!==""||typeof ue=="number"||typeof ue=="bigint")return ue=Wc(""+ue,fe.mode,ge),ue.return=fe,ue;if(typeof ue=="object"&&ue!==null){switch(ue.$$typeof){case S:return ge=wl(ue.type,ue.key,ue.props,null,fe.mode,ge),ld(ge,ue),ge.return=fe,ge;case T:return ue=xo(ue,fe.mode,ge),ue.return=fe,ue;case I:var ke=ue._init;return ue=ke(ue._payload),Re(fe,ue,ge)}if(Q(ue)||G(ue))return ue=Xs(ue,fe.mode,ge,null),ue.return=fe,ue;if(typeof ue.then=="function")return Re(fe,wm(ue),ge);if(ue.$$typeof===P)return Re(fe,cm(fe,ue),ge);Nm(fe,ue)}return null}function be(fe,ue,ge,ke){var Ze=ue!==null?ue.key:null;if(typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint")return Ze!==null?null:q(fe,ue,""+ge,ke);if(typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:return ge.key===Ze?le(fe,ue,ge,ke):null;case T:return ge.key===Ze?xe(fe,ue,ge,ke):null;case I:return Ze=ge._init,ge=Ze(ge._payload),be(fe,ue,ge,ke)}if(Q(ge)||G(ge))return Ze!==null?null:Se(fe,ue,ge,ke,null);if(typeof ge.then=="function")return be(fe,ue,wm(ge),ke);if(ge.$$typeof===P)return be(fe,ue,cm(fe,ge),ke);Nm(fe,ge)}return null}function ve(fe,ue,ge,ke,Ze){if(typeof ke=="string"&&ke!==""||typeof ke=="number"||typeof ke=="bigint")return fe=fe.get(ge)||null,q(ue,fe,""+ke,Ze);if(typeof ke=="object"&&ke!==null){switch(ke.$$typeof){case S:return fe=fe.get(ke.key===null?ge:ke.key)||null,le(ue,fe,ke,Ze);case T:return fe=fe.get(ke.key===null?ge:ke.key)||null,xe(ue,fe,ke,Ze);case I:var bt=ke._init;return ke=bt(ke._payload),ve(fe,ue,ge,ke,Ze)}if(Q(ke)||G(ke))return fe=fe.get(ge)||null,Se(ue,fe,ke,Ze,null);if(typeof ke.then=="function")return ve(fe,ue,ge,wm(ke),Ze);if(ke.$$typeof===P)return ve(fe,ue,ge,cm(ue,ke),Ze);Nm(ue,ke)}return null}function lt(fe,ue,ge,ke){for(var Ze=null,bt=null,Xe=ue,st=ue=0,sa=null;Xe!==null&&st<ge.length;st++){Xe.index>st?(sa=Xe,Xe=null):sa=Xe.sibling;var Ot=be(fe,Xe,ge[st],ke);if(Ot===null){Xe===null&&(Xe=sa);break}s&&Xe&&Ot.alternate===null&&i(fe,Xe),ue=j(Ot,ue,st),bt===null?Ze=Ot:bt.sibling=Ot,bt=Ot,Xe=sa}if(st===ge.length)return c(fe,Xe),dt&&pe(fe,st),Ze;if(Xe===null){for(;st<ge.length;st++)Xe=Re(fe,ge[st],ke),Xe!==null&&(ue=j(Xe,ue,st),bt===null?Ze=Xe:bt.sibling=Xe,bt=Xe);return dt&&pe(fe,st),Ze}for(Xe=m(Xe);st<ge.length;st++)sa=ve(Xe,fe,st,ge[st],ke),sa!==null&&(s&&sa.alternate!==null&&Xe.delete(sa.key===null?st:sa.key),ue=j(sa,ue,st),bt===null?Ze=sa:bt.sibling=sa,bt=sa);return s&&Xe.forEach(function(Hi){return i(fe,Hi)}),dt&&pe(fe,st),Ze}function nt(fe,ue,ge,ke){if(ge==null)throw Error(r(151));for(var Ze=null,bt=null,Xe=ue,st=ue=0,sa=null,Ot=ge.next();Xe!==null&&!Ot.done;st++,Ot=ge.next()){Xe.index>st?(sa=Xe,Xe=null):sa=Xe.sibling;var Hi=be(fe,Xe,Ot.value,ke);if(Hi===null){Xe===null&&(Xe=sa);break}s&&Xe&&Hi.alternate===null&&i(fe,Xe),ue=j(Hi,ue,st),bt===null?Ze=Hi:bt.sibling=Hi,bt=Hi,Xe=sa}if(Ot.done)return c(fe,Xe),dt&&pe(fe,st),Ze;if(Xe===null){for(;!Ot.done;st++,Ot=ge.next())Ot=Re(fe,Ot.value,ke),Ot!==null&&(ue=j(Ot,ue,st),bt===null?Ze=Ot:bt.sibling=Ot,bt=Ot);return dt&&pe(fe,st),Ze}for(Xe=m(Xe);!Ot.done;st++,Ot=ge.next())Ot=ve(Xe,fe,st,Ot.value,ke),Ot!==null&&(s&&Ot.alternate!==null&&Xe.delete(Ot.key===null?st:Ot.key),ue=j(Ot,ue,st),bt===null?Ze=Ot:bt.sibling=Ot,bt=Ot);return s&&Xe.forEach(function(hC){return i(fe,hC)}),dt&&pe(fe,st),Ze}function Wt(fe,ue,ge,ke){if(typeof ge=="object"&&ge!==null&&ge.type===C&&ge.key===null&&(ge=ge.props.children),typeof ge=="object"&&ge!==null){switch(ge.$$typeof){case S:e:{for(var Ze=ge.key;ue!==null;){if(ue.key===Ze){if(Ze=ge.type,Ze===C){if(ue.tag===7){c(fe,ue.sibling),ke=y(ue,ge.props.children),ke.return=fe,fe=ke;break e}}else if(ue.elementType===Ze||typeof Ze=="object"&&Ze!==null&&Ze.$$typeof===I&&lb(Ze)===ue.type){c(fe,ue.sibling),ke=y(ue,ge.props),ld(ke,ge),ke.return=fe,fe=ke;break e}c(fe,ue);break}else i(fe,ue);ue=ue.sibling}ge.type===C?(ke=Xs(ge.props.children,fe.mode,ke,ge.key),ke.return=fe,fe=ke):(ke=wl(ge.type,ge.key,ge.props,null,fe.mode,ke),ld(ke,ge),ke.return=fe,fe=ke)}return D(fe);case T:e:{for(Ze=ge.key;ue!==null;){if(ue.key===Ze)if(ue.tag===4&&ue.stateNode.containerInfo===ge.containerInfo&&ue.stateNode.implementation===ge.implementation){c(fe,ue.sibling),ke=y(ue,ge.children||[]),ke.return=fe,fe=ke;break e}else{c(fe,ue);break}else i(fe,ue);ue=ue.sibling}ke=xo(ge,fe.mode,ke),ke.return=fe,fe=ke}return D(fe);case I:return Ze=ge._init,ge=Ze(ge._payload),Wt(fe,ue,ge,ke)}if(Q(ge))return lt(fe,ue,ge,ke);if(G(ge)){if(Ze=G(ge),typeof Ze!="function")throw Error(r(150));return ge=Ze.call(ge),nt(fe,ue,ge,ke)}if(typeof ge.then=="function")return Wt(fe,ue,wm(ge),ke);if(ge.$$typeof===P)return Wt(fe,ue,cm(fe,ge),ke);Nm(fe,ge)}return typeof ge=="string"&&ge!==""||typeof ge=="number"||typeof ge=="bigint"?(ge=""+ge,ue!==null&&ue.tag===6?(c(fe,ue.sibling),ke=y(ue,ge),ke.return=fe,fe=ke):(c(fe,ue),ke=Wc(ge,fe.mode,ke),ke.return=fe,fe=ke),D(fe)):c(fe,ue)}return function(fe,ue,ge,ke){try{id=0;var Ze=Wt(fe,ue,ge,ke);return So=null,Ze}catch(Xe){if(Xe===Qc||Xe===um)throw Xe;var bt=Ta(29,Xe,null,fe.mode);return bt.lanes=ke,bt.return=fe,bt}finally{}}}var Co=ob(!0),cb=ob(!1),xs=J(null),er=null;function Ti(s){var i=s.alternate;ae(Kn,Kn.current&1),ae(xs,s),er===null&&(i===null||jo.current!==null||i.memoizedState!==null)&&(er=s)}function db(s){if(s.tag===22){if(ae(Kn,Kn.current),ae(xs,s),er===null){var i=s.alternate;i!==null&&i.memoizedState!==null&&(er=s)}}else Ei()}function Ei(){ae(Kn,Kn.current),ae(xs,xs.current)}function Br(s){se(xs),er===s&&(er=null),se(Kn)}var Kn=J(0);function _m(s){for(var i=s;i!==null;){if(i.tag===13){var c=i.memoizedState;if(c!==null&&(c=c.dehydrated,c===null||c.data==="$?"||hg(c)))return i}else if(i.tag===19&&i.memoizedProps.revealOrder!==void 0){if((i.flags&128)!==0)return i}else if(i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return null;i=i.return}i.sibling.return=i.return,i=i.sibling}return null}function _p(s,i,c,m){i=s.memoizedState,c=c(m,i),c=c==null?i:v({},i,c),s.memoizedState=c,s.lanes===0&&(s.updateQueue.baseState=c)}var Sp={enqueueSetState:function(s,i,c){s=s._reactInternals;var m=es(),y=Si(m);y.payload=i,c!=null&&(y.callback=c),i=Ci(s,y,m),i!==null&&(ts(i,s,m),Jc(i,s,m))},enqueueReplaceState:function(s,i,c){s=s._reactInternals;var m=es(),y=Si(m);y.tag=1,y.payload=i,c!=null&&(y.callback=c),i=Ci(s,y,m),i!==null&&(ts(i,s,m),Jc(i,s,m))},enqueueForceUpdate:function(s,i){s=s._reactInternals;var c=es(),m=Si(c);m.tag=2,i!=null&&(m.callback=i),i=Ci(s,m,c),i!==null&&(ts(i,s,c),Jc(i,s,c))}};function ub(s,i,c,m,y,j,D){return s=s.stateNode,typeof s.shouldComponentUpdate=="function"?s.shouldComponentUpdate(m,j,D):i.prototype&&i.prototype.isPureReactComponent?!Sa(c,m)||!Sa(y,j):!0}function mb(s,i,c,m){s=i.state,typeof i.componentWillReceiveProps=="function"&&i.componentWillReceiveProps(c,m),typeof i.UNSAFE_componentWillReceiveProps=="function"&&i.UNSAFE_componentWillReceiveProps(c,m),i.state!==s&&Sp.enqueueReplaceState(i,i.state,null)}function El(s,i){var c=i;if("ref"in i){c={};for(var m in i)m!=="ref"&&(c[m]=i[m])}if(s=s.defaultProps){c===i&&(c=v({},c));for(var y in s)c[y]===void 0&&(c[y]=s[y])}return c}var Sm=typeof reportError=="function"?reportError:function(s){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var i=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof s=="object"&&s!==null&&typeof s.message=="string"?String(s.message):String(s),error:s});if(!window.dispatchEvent(i))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",s);return}console.error(s)};function hb(s){Sm(s)}function fb(s){console.error(s)}function pb(s){Sm(s)}function Cm(s,i){try{var c=s.onUncaughtError;c(i.value,{componentStack:i.stack})}catch(m){setTimeout(function(){throw m})}}function gb(s,i,c){try{var m=s.onCaughtError;m(c.value,{componentStack:c.stack,errorBoundary:i.tag===1?i.stateNode:null})}catch(y){setTimeout(function(){throw y})}}function Cp(s,i,c){return c=Si(c),c.tag=3,c.payload={element:null},c.callback=function(){Cm(s,i)},c}function xb(s){return s=Si(s),s.tag=3,s}function yb(s,i,c,m){var y=c.type.getDerivedStateFromError;if(typeof y=="function"){var j=m.value;s.payload=function(){return y(j)},s.callback=function(){gb(i,c,m)}}var D=c.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(s.callback=function(){gb(i,c,m),typeof y!="function"&&(Pi===null?Pi=new Set([this]):Pi.add(this));var q=m.stack;this.componentDidCatch(m.value,{componentStack:q!==null?q:""})})}function hS(s,i,c,m,y){if(c.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(i=c.alternate,i!==null&&Sl(i,c,y,!0),c=xs.current,c!==null){switch(c.tag){case 13:return er===null?Gp():c.alternate===null&&Cn===0&&(Cn=3),c.flags&=-257,c.flags|=65536,c.lanes=y,m===tp?c.flags|=16384:(i=c.updateQueue,i===null?c.updateQueue=new Set([m]):i.add(m),Xp(s,m,y)),!1;case 22:return c.flags|=65536,m===tp?c.flags|=16384:(i=c.updateQueue,i===null?(i={transitions:null,markerInstances:null,retryQueue:new Set([m])},c.updateQueue=i):(c=i.retryQueue,c===null?i.retryQueue=new Set([m]):c.add(m)),Xp(s,m,y)),!1}throw Error(r(435,c.tag))}return Xp(s,m,y),Gp(),!1}if(dt)return i=xs.current,i!==null?((i.flags&65536)===0&&(i.flags|=256),i.flags|=65536,i.lanes=y,m!==ta&&(s=Error(r(422),{cause:m}),Ni(Ca(s,c)))):(m!==ta&&(i=Error(r(423),{cause:m}),Ni(Ca(i,c))),s=s.current.alternate,s.flags|=65536,y&=-y,s.lanes|=y,m=Ca(m,c),y=Cp(s.stateNode,m,y),sp(s,y),Cn!==4&&(Cn=2)),!1;var j=Error(r(520),{cause:m});if(j=Ca(j,c),fd===null?fd=[j]:fd.push(j),Cn!==4&&(Cn=2),i===null)return!0;m=Ca(m,c),c=i;do{switch(c.tag){case 3:return c.flags|=65536,s=y&-y,c.lanes|=s,s=Cp(c.stateNode,m,s),sp(c,s),!1;case 1:if(i=c.type,j=c.stateNode,(c.flags&128)===0&&(typeof i.getDerivedStateFromError=="function"||j!==null&&typeof j.componentDidCatch=="function"&&(Pi===null||!Pi.has(j))))return c.flags|=65536,y&=-y,c.lanes|=y,y=xb(y),yb(y,s,c,m),sp(c,y),!1}c=c.return}while(c!==null);return!1}var bb=Error(r(461)),na=!1;function ma(s,i,c,m){i.child=s===null?cb(i,null,c,m):Co(i,s.child,c,m)}function vb(s,i,c,m,y){c=c.render;var j=i.ref;if("ref"in m){var D={};for(var q in m)q!=="ref"&&(D[q]=m[q])}else D=m;return Cl(i),m=cp(s,i,c,D,j,y),q=dp(),s!==null&&!na?(up(s,i,y),$r(s,i,y)):(dt&&q&&Ae(i),i.flags|=1,ma(s,i,m,y),i.child)}function jb(s,i,c,m,y){if(s===null){var j=c.type;return typeof j=="function"&&!go(j)&&j.defaultProps===void 0&&c.compare===null?(i.tag=15,i.type=j,wb(s,i,j,m,y)):(s=wl(c.type,null,m,i,i.mode,y),s.ref=i.ref,s.return=i,i.child=s)}if(j=s.child,!Op(s,y)){var D=j.memoizedProps;if(c=c.compare,c=c!==null?c:Sa,c(D,m)&&s.ref===i.ref)return $r(s,i,y)}return i.flags|=1,s=ps(j,m),s.ref=i.ref,s.return=i,i.child=s}function wb(s,i,c,m,y){if(s!==null){var j=s.memoizedProps;if(Sa(j,m)&&s.ref===i.ref)if(na=!1,i.pendingProps=m=j,Op(s,y))(s.flags&131072)!==0&&(na=!0);else return i.lanes=s.lanes,$r(s,i,y)}return kp(s,i,c,m,y)}function Nb(s,i,c){var m=i.pendingProps,y=m.children,j=s!==null?s.memoizedState:null;if(m.mode==="hidden"){if((i.flags&128)!==0){if(m=j!==null?j.baseLanes|c:c,s!==null){for(y=i.child=s.child,j=0;y!==null;)j=j|y.lanes|y.childLanes,y=y.sibling;i.childLanes=j&~m}else i.childLanes=0,i.child=null;return _b(s,i,m,c)}if((c&536870912)!==0)i.memoizedState={baseLanes:0,cachePool:null},s!==null&&dm(i,j!==null?j.cachePool:null),j!==null?wy(i,j):ip(),db(i);else return i.lanes=i.childLanes=536870912,_b(s,i,j!==null?j.baseLanes|c:c,c)}else j!==null?(dm(i,j.cachePool),wy(i,j),Ei(),i.memoizedState=null):(s!==null&&dm(i,null),ip(),Ei());return ma(s,i,y,c),i.child}function _b(s,i,c,m){var y=ep();return y=y===null?null:{parent:Wn._currentValue,pool:y},i.memoizedState={baseLanes:c,cachePool:y},s!==null&&dm(i,null),ip(),db(i),s!==null&&Sl(s,i,m,!0),null}function km(s,i){var c=i.ref;if(c===null)s!==null&&s.ref!==null&&(i.flags|=4194816);else{if(typeof c!="function"&&typeof c!="object")throw Error(r(284));(s===null||s.ref!==c)&&(i.flags|=4194816)}}function kp(s,i,c,m,y){return Cl(i),c=cp(s,i,c,m,void 0,y),m=dp(),s!==null&&!na?(up(s,i,y),$r(s,i,y)):(dt&&m&&Ae(i),i.flags|=1,ma(s,i,c,y),i.child)}function Sb(s,i,c,m,y,j){return Cl(i),i.updateQueue=null,c=_y(i,m,c,y),Ny(s),m=dp(),s!==null&&!na?(up(s,i,j),$r(s,i,j)):(dt&&m&&Ae(i),i.flags|=1,ma(s,i,c,j),i.child)}function Cb(s,i,c,m,y){if(Cl(i),i.stateNode===null){var j=Lr,D=c.contextType;typeof D=="object"&&D!==null&&(j=ba(D)),j=new c(m,j),i.memoizedState=j.state!==null&&j.state!==void 0?j.state:null,j.updater=Sp,i.stateNode=j,j._reactInternals=i,j=i.stateNode,j.props=m,j.state=i.memoizedState,j.refs={},np(i),D=c.contextType,j.context=typeof D=="object"&&D!==null?ba(D):Lr,j.state=i.memoizedState,D=c.getDerivedStateFromProps,typeof D=="function"&&(_p(i,c,D,m),j.state=i.memoizedState),typeof c.getDerivedStateFromProps=="function"||typeof j.getSnapshotBeforeUpdate=="function"||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(D=j.state,typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount(),D!==j.state&&Sp.enqueueReplaceState(j,j.state,null),td(i,m,j,y),ed(),j.state=i.memoizedState),typeof j.componentDidMount=="function"&&(i.flags|=4194308),m=!0}else if(s===null){j=i.stateNode;var q=i.memoizedProps,le=El(c,q);j.props=le;var xe=j.context,Se=c.contextType;D=Lr,typeof Se=="object"&&Se!==null&&(D=ba(Se));var Re=c.getDerivedStateFromProps;Se=typeof Re=="function"||typeof j.getSnapshotBeforeUpdate=="function",q=i.pendingProps!==q,Se||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(q||xe!==D)&&mb(i,j,m,D),_i=!1;var be=i.memoizedState;j.state=be,td(i,m,j,y),ed(),xe=i.memoizedState,q||be!==xe||_i?(typeof Re=="function"&&(_p(i,c,Re,m),xe=i.memoizedState),(le=_i||ub(i,c,le,m,be,xe,D))?(Se||typeof j.UNSAFE_componentWillMount!="function"&&typeof j.componentWillMount!="function"||(typeof j.componentWillMount=="function"&&j.componentWillMount(),typeof j.UNSAFE_componentWillMount=="function"&&j.UNSAFE_componentWillMount()),typeof j.componentDidMount=="function"&&(i.flags|=4194308)):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),i.memoizedProps=m,i.memoizedState=xe),j.props=m,j.state=xe,j.context=D,m=le):(typeof j.componentDidMount=="function"&&(i.flags|=4194308),m=!1)}else{j=i.stateNode,ap(s,i),D=i.memoizedProps,Se=El(c,D),j.props=Se,Re=i.pendingProps,be=j.context,xe=c.contextType,le=Lr,typeof xe=="object"&&xe!==null&&(le=ba(xe)),q=c.getDerivedStateFromProps,(xe=typeof q=="function"||typeof j.getSnapshotBeforeUpdate=="function")||typeof j.UNSAFE_componentWillReceiveProps!="function"&&typeof j.componentWillReceiveProps!="function"||(D!==Re||be!==le)&&mb(i,j,m,le),_i=!1,be=i.memoizedState,j.state=be,td(i,m,j,y),ed();var ve=i.memoizedState;D!==Re||be!==ve||_i||s!==null&&s.dependencies!==null&&om(s.dependencies)?(typeof q=="function"&&(_p(i,c,q,m),ve=i.memoizedState),(Se=_i||ub(i,c,Se,m,be,ve,le)||s!==null&&s.dependencies!==null&&om(s.dependencies))?(xe||typeof j.UNSAFE_componentWillUpdate!="function"&&typeof j.componentWillUpdate!="function"||(typeof j.componentWillUpdate=="function"&&j.componentWillUpdate(m,ve,le),typeof j.UNSAFE_componentWillUpdate=="function"&&j.UNSAFE_componentWillUpdate(m,ve,le)),typeof j.componentDidUpdate=="function"&&(i.flags|=4),typeof j.getSnapshotBeforeUpdate=="function"&&(i.flags|=1024)):(typeof j.componentDidUpdate!="function"||D===s.memoizedProps&&be===s.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&be===s.memoizedState||(i.flags|=1024),i.memoizedProps=m,i.memoizedState=ve),j.props=m,j.state=ve,j.context=le,m=Se):(typeof j.componentDidUpdate!="function"||D===s.memoizedProps&&be===s.memoizedState||(i.flags|=4),typeof j.getSnapshotBeforeUpdate!="function"||D===s.memoizedProps&&be===s.memoizedState||(i.flags|=1024),m=!1)}return j=m,km(s,i),m=(i.flags&128)!==0,j||m?(j=i.stateNode,c=m&&typeof c.getDerivedStateFromError!="function"?null:j.render(),i.flags|=1,s!==null&&m?(i.child=Co(i,s.child,null,y),i.child=Co(i,null,c,y)):ma(s,i,c,y),i.memoizedState=j.state,s=i.child):s=$r(s,i,y),s}function kb(s,i,c,m){return wi(),i.flags|=256,ma(s,i,c,m),i.child}var Tp={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Ep(s){return{baseLanes:s,cachePool:fy()}}function Mp(s,i,c){return s=s!==null?s.childLanes&~c:0,i&&(s|=ys),s}function Tb(s,i,c){var m=i.pendingProps,y=!1,j=(i.flags&128)!==0,D;if((D=j)||(D=s!==null&&s.memoizedState===null?!1:(Kn.current&2)!==0),D&&(y=!0,i.flags&=-129),D=(i.flags&32)!==0,i.flags&=-33,s===null){if(dt){if(y?Ti(i):Ei(),dt){var q=Ge,le;if(le=q){e:{for(le=q,q=gn;le.nodeType!==8;){if(!q){q=null;break e}if(le=Ls(le.nextSibling),le===null){q=null;break e}}q=le}q!==null?(i.memoizedState={dehydrated:q,treeContext:M!==null?{id:B,overflow:ie}:null,retryLane:536870912,hydrationErrors:null},le=Ta(18,null,null,0),le.stateNode=q,le.return=i,i.child=le,Ye=i,Ge=null,le=!0):le=!1}le||Aa(i)}if(q=i.memoizedState,q!==null&&(q=q.dehydrated,q!==null))return hg(q)?i.lanes=32:i.lanes=536870912,null;Br(i)}return q=m.children,m=m.fallback,y?(Ei(),y=i.mode,q=Tm({mode:"hidden",children:q},y),m=Xs(m,y,c,null),q.return=i,m.return=i,q.sibling=m,i.child=q,y=i.child,y.memoizedState=Ep(c),y.childLanes=Mp(s,D,c),i.memoizedState=Tp,m):(Ti(i),Rp(i,q))}if(le=s.memoizedState,le!==null&&(q=le.dehydrated,q!==null)){if(j)i.flags&256?(Ti(i),i.flags&=-257,i=Ap(s,i,c)):i.memoizedState!==null?(Ei(),i.child=s.child,i.flags|=128,i=null):(Ei(),y=m.fallback,q=i.mode,m=Tm({mode:"visible",children:m.children},q),y=Xs(y,q,c,null),y.flags|=2,m.return=i,y.return=i,m.sibling=y,i.child=m,Co(i,s.child,null,c),m=i.child,m.memoizedState=Ep(c),m.childLanes=Mp(s,D,c),i.memoizedState=Tp,i=y);else if(Ti(i),hg(q)){if(D=q.nextSibling&&q.nextSibling.dataset,D)var xe=D.dgst;D=xe,m=Error(r(419)),m.stack="",m.digest=D,Ni({value:m,source:null,stack:null}),i=Ap(s,i,c)}else if(na||Sl(s,i,c,!1),D=(c&s.childLanes)!==0,na||D){if(D=sn,D!==null&&(m=c&-c,m=(m&42)!==0?1:Rn(m),m=(m&(D.suspendedLanes|c))!==0?0:m,m!==0&&m!==le.retryLane))throw le.retryLane=m,vi(s,m),ts(D,s,m),bb;q.data==="$?"||Gp(),i=Ap(s,i,c)}else q.data==="$?"?(i.flags|=192,i.child=s.child,i=null):(s=le.treeContext,Ge=Ls(q.nextSibling),Ye=i,dt=!0,an=null,gn=!1,s!==null&&(x[N++]=B,x[N++]=ie,x[N++]=M,B=s.id,ie=s.overflow,M=i),i=Rp(i,m.children),i.flags|=4096);return i}return y?(Ei(),y=m.fallback,q=i.mode,le=s.child,xe=le.sibling,m=ps(le,{mode:"hidden",children:m.children}),m.subtreeFlags=le.subtreeFlags&65011712,xe!==null?y=ps(xe,y):(y=Xs(y,q,c,null),y.flags|=2),y.return=i,m.return=i,m.sibling=y,i.child=m,m=y,y=i.child,q=s.child.memoizedState,q===null?q=Ep(c):(le=q.cachePool,le!==null?(xe=Wn._currentValue,le=le.parent!==xe?{parent:xe,pool:xe}:le):le=fy(),q={baseLanes:q.baseLanes|c,cachePool:le}),y.memoizedState=q,y.childLanes=Mp(s,D,c),i.memoizedState=Tp,m):(Ti(i),c=s.child,s=c.sibling,c=ps(c,{mode:"visible",children:m.children}),c.return=i,c.sibling=null,s!==null&&(D=i.deletions,D===null?(i.deletions=[s],i.flags|=16):D.push(s)),i.child=c,i.memoizedState=null,c)}function Rp(s,i){return i=Tm({mode:"visible",children:i},s.mode),i.return=s,s.child=i}function Tm(s,i){return s=Ta(22,s,null,i),s.lanes=0,s.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},s}function Ap(s,i,c){return Co(i,s.child,null,c),s=Rp(i,i.pendingProps.children),s.flags|=2,i.memoizedState=null,s}function Eb(s,i,c){s.lanes|=i;var m=s.alternate;m!==null&&(m.lanes|=i),_l(s.return,i,c)}function Dp(s,i,c,m,y){var j=s.memoizedState;j===null?s.memoizedState={isBackwards:i,rendering:null,renderingStartTime:0,last:m,tail:c,tailMode:y}:(j.isBackwards=i,j.rendering=null,j.renderingStartTime=0,j.last=m,j.tail=c,j.tailMode=y)}function Mb(s,i,c){var m=i.pendingProps,y=m.revealOrder,j=m.tail;if(ma(s,i,m.children,c),m=Kn.current,(m&2)!==0)m=m&1|2,i.flags|=128;else{if(s!==null&&(s.flags&128)!==0)e:for(s=i.child;s!==null;){if(s.tag===13)s.memoizedState!==null&&Eb(s,c,i);else if(s.tag===19)Eb(s,c,i);else if(s.child!==null){s.child.return=s,s=s.child;continue}if(s===i)break e;for(;s.sibling===null;){if(s.return===null||s.return===i)break e;s=s.return}s.sibling.return=s.return,s=s.sibling}m&=1}switch(ae(Kn,m),y){case"forwards":for(c=i.child,y=null;c!==null;)s=c.alternate,s!==null&&_m(s)===null&&(y=c),c=c.sibling;c=y,c===null?(y=i.child,i.child=null):(y=c.sibling,c.sibling=null),Dp(i,!1,y,c,j);break;case"backwards":for(c=null,y=i.child,i.child=null;y!==null;){if(s=y.alternate,s!==null&&_m(s)===null){i.child=y;break}s=y.sibling,y.sibling=c,c=y,y=s}Dp(i,!0,c,null,j);break;case"together":Dp(i,!1,null,null,void 0);break;default:i.memoizedState=null}return i.child}function $r(s,i,c){if(s!==null&&(i.dependencies=s.dependencies),Oi|=i.lanes,(c&i.childLanes)===0)if(s!==null){if(Sl(s,i,c,!1),(c&i.childLanes)===0)return null}else return null;if(s!==null&&i.child!==s.child)throw Error(r(153));if(i.child!==null){for(s=i.child,c=ps(s,s.pendingProps),i.child=c,c.return=i;s.sibling!==null;)s=s.sibling,c=c.sibling=ps(s,s.pendingProps),c.return=i;c.sibling=null}return i.child}function Op(s,i){return(s.lanes&i)!==0?!0:(s=s.dependencies,!!(s!==null&&om(s)))}function fS(s,i,c){switch(i.tag){case 3:Ce(i,i.stateNode.containerInfo),Js(i,Wn,s.memoizedState.cache),wi();break;case 27:case 5:te(i);break;case 4:Ce(i,i.stateNode.containerInfo);break;case 10:Js(i,i.type,i.memoizedProps.value);break;case 13:var m=i.memoizedState;if(m!==null)return m.dehydrated!==null?(Ti(i),i.flags|=128,null):(c&i.child.childLanes)!==0?Tb(s,i,c):(Ti(i),s=$r(s,i,c),s!==null?s.sibling:null);Ti(i);break;case 19:var y=(s.flags&128)!==0;if(m=(c&i.childLanes)!==0,m||(Sl(s,i,c,!1),m=(c&i.childLanes)!==0),y){if(m)return Mb(s,i,c);i.flags|=128}if(y=i.memoizedState,y!==null&&(y.rendering=null,y.tail=null,y.lastEffect=null),ae(Kn,Kn.current),m)break;return null;case 22:case 23:return i.lanes=0,Nb(s,i,c);case 24:Js(i,Wn,s.memoizedState.cache)}return $r(s,i,c)}function Rb(s,i,c){if(s!==null)if(s.memoizedProps!==i.pendingProps)na=!0;else{if(!Op(s,c)&&(i.flags&128)===0)return na=!1,fS(s,i,c);na=(s.flags&131072)!==0}else na=!1,dt&&(i.flags&1048576)!==0&&je(i,u,i.index);switch(i.lanes=0,i.tag){case 16:e:{s=i.pendingProps;var m=i.elementType,y=m._init;if(m=y(m._payload),i.type=m,typeof m=="function")go(m)?(s=El(m,s),i.tag=1,i=Cb(null,i,m,s,c)):(i.tag=0,i=kp(null,i,m,s,c));else{if(m!=null){if(y=m.$$typeof,y===U){i.tag=11,i=vb(null,i,m,s,c);break e}else if(y===E){i.tag=14,i=jb(null,i,m,s,c);break e}}throw i=H(m)||m,Error(r(306,i,""))}}return i;case 0:return kp(s,i,i.type,i.pendingProps,c);case 1:return m=i.type,y=El(m,i.pendingProps),Cb(s,i,m,y,c);case 3:e:{if(Ce(i,i.stateNode.containerInfo),s===null)throw Error(r(387));m=i.pendingProps;var j=i.memoizedState;y=j.element,ap(s,i),td(i,m,null,c);var D=i.memoizedState;if(m=D.cache,Js(i,Wn,m),m!==j.cache&&yo(i,[Wn],c,!0),ed(),m=D.element,j.isDehydrated)if(j={element:m,isDehydrated:!1,cache:D.cache},i.updateQueue.baseState=j,i.memoizedState=j,i.flags&256){i=kb(s,i,m,c);break e}else if(m!==y){y=Ca(Error(r(424)),i),Ni(y),i=kb(s,i,m,c);break e}else{switch(s=i.stateNode.containerInfo,s.nodeType){case 9:s=s.body;break;default:s=s.nodeName==="HTML"?s.ownerDocument.body:s}for(Ge=Ls(s.firstChild),Ye=i,dt=!0,an=null,gn=!0,c=cb(i,null,m,c),i.child=c;c;)c.flags=c.flags&-3|4096,c=c.sibling}else{if(wi(),m===y){i=$r(s,i,c);break e}ma(s,i,m,c)}i=i.child}return i;case 26:return km(s,i),s===null?(c=Pv(i.type,null,i.pendingProps,null))?i.memoizedState=c:dt||(c=i.type,s=i.pendingProps,m=Um(me.current).createElement(c),m[Gt]=i,m[Qt]=s,fa(m,c,s),qn(m),i.stateNode=m):i.memoizedState=Pv(i.type,s.memoizedProps,i.pendingProps,s.memoizedState),null;case 27:return te(i),s===null&&dt&&(m=i.stateNode=Av(i.type,i.pendingProps,me.current),Ye=i,gn=!0,y=Ge,Ii(i.type)?(fg=y,Ge=Ls(m.firstChild)):Ge=y),ma(s,i,i.pendingProps.children,c),km(s,i),s===null&&(i.flags|=4194304),i.child;case 5:return s===null&&dt&&((y=m=Ge)&&(m=US(m,i.type,i.pendingProps,gn),m!==null?(i.stateNode=m,Ye=i,Ge=Ls(m.firstChild),gn=!1,y=!0):y=!1),y||Aa(i)),te(i),y=i.type,j=i.pendingProps,D=s!==null?s.memoizedProps:null,m=j.children,dg(y,j)?m=null:D!==null&&dg(y,D)&&(i.flags|=32),i.memoizedState!==null&&(y=cp(s,i,iS,null,null,c),Nd._currentValue=y),km(s,i),ma(s,i,m,c),i.child;case 6:return s===null&&dt&&((s=c=Ge)&&(c=HS(c,i.pendingProps,gn),c!==null?(i.stateNode=c,Ye=i,Ge=null,s=!0):s=!1),s||Aa(i)),null;case 13:return Tb(s,i,c);case 4:return Ce(i,i.stateNode.containerInfo),m=i.pendingProps,s===null?i.child=Co(i,null,m,c):ma(s,i,m,c),i.child;case 11:return vb(s,i,i.type,i.pendingProps,c);case 7:return ma(s,i,i.pendingProps,c),i.child;case 8:return ma(s,i,i.pendingProps.children,c),i.child;case 12:return ma(s,i,i.pendingProps.children,c),i.child;case 10:return m=i.pendingProps,Js(i,i.type,m.value),ma(s,i,m.children,c),i.child;case 9:return y=i.type._context,m=i.pendingProps.children,Cl(i),y=ba(y),m=m(y),i.flags|=1,ma(s,i,m,c),i.child;case 14:return jb(s,i,i.type,i.pendingProps,c);case 15:return wb(s,i,i.type,i.pendingProps,c);case 19:return Mb(s,i,c);case 31:return m=i.pendingProps,c=i.mode,m={mode:m.mode,children:m.children},s===null?(c=Tm(m,c),c.ref=i.ref,i.child=c,c.return=i,i=c):(c=ps(s.child,m),c.ref=i.ref,i.child=c,c.return=i,i=c),i;case 22:return Nb(s,i,c);case 24:return Cl(i),m=ba(Wn),s===null?(y=ep(),y===null&&(y=sn,j=Xf(),y.pooledCache=j,j.refCount++,j!==null&&(y.pooledCacheLanes|=c),y=j),i.memoizedState={parent:m,cache:y},np(i),Js(i,Wn,y)):((s.lanes&c)!==0&&(ap(s,i),td(i,null,null,c),ed()),y=s.memoizedState,j=i.memoizedState,y.parent!==m?(y={parent:m,cache:m},i.memoizedState=y,i.lanes===0&&(i.memoizedState=i.updateQueue.baseState=y),Js(i,Wn,m)):(m=j.cache,Js(i,Wn,m),m!==y.cache&&yo(i,[Wn],c,!0))),ma(s,i,i.pendingProps.children,c),i.child;case 29:throw i.pendingProps}throw Error(r(156,i.tag))}function Fr(s){s.flags|=4}function Ab(s,i){if(i.type!=="stylesheet"||(i.state.loading&4)!==0)s.flags&=-16777217;else if(s.flags|=16777216,!$v(i)){if(i=xs.current,i!==null&&((Tt&4194048)===Tt?er!==null:(Tt&62914560)!==Tt&&(Tt&536870912)===0||i!==er))throw Xc=tp,py;s.flags|=8192}}function Em(s,i){i!==null&&(s.flags|=4),s.flags&16384&&(i=s.tag!==22?ne():536870912,s.lanes|=i,Mo|=i)}function od(s,i){if(!dt)switch(s.tailMode){case"hidden":i=s.tail;for(var c=null;i!==null;)i.alternate!==null&&(c=i),i=i.sibling;c===null?s.tail=null:c.sibling=null;break;case"collapsed":c=s.tail;for(var m=null;c!==null;)c.alternate!==null&&(m=c),c=c.sibling;m===null?i||s.tail===null?s.tail=null:s.tail.sibling=null:m.sibling=null}}function xn(s){var i=s.alternate!==null&&s.alternate.child===s.child,c=0,m=0;if(i)for(var y=s.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags&65011712,m|=y.flags&65011712,y.return=s,y=y.sibling;else for(y=s.child;y!==null;)c|=y.lanes|y.childLanes,m|=y.subtreeFlags,m|=y.flags,y.return=s,y=y.sibling;return s.subtreeFlags|=m,s.childLanes=c,i}function pS(s,i,c){var m=i.pendingProps;switch(Ue(i),i.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xn(i),null;case 1:return xn(i),null;case 3:return c=i.stateNode,m=null,s!==null&&(m=s.memoizedState.cache),i.memoizedState.cache!==m&&(i.flags|=2048),Os(Wn),de(),c.pendingContext&&(c.context=c.pendingContext,c.pendingContext=null),(s===null||s.child===null)&&(Nl(i)?Fr(i):s===null||s.memoizedState.isDehydrated&&(i.flags&256)===0||(i.flags|=1024,lm())),xn(i),null;case 26:return c=i.memoizedState,s===null?(Fr(i),c!==null?(xn(i),Ab(i,c)):(xn(i),i.flags&=-16777217)):c?c!==s.memoizedState?(Fr(i),xn(i),Ab(i,c)):(xn(i),i.flags&=-16777217):(s.memoizedProps!==m&&Fr(i),xn(i),i.flags&=-16777217),null;case 27:_e(i),c=me.current;var y=i.type;if(s!==null&&i.stateNode!=null)s.memoizedProps!==m&&Fr(i);else{if(!m){if(i.stateNode===null)throw Error(r(166));return xn(i),null}s=ee.current,Nl(i)?rm(i):(s=Av(y,m,c),i.stateNode=s,Fr(i))}return xn(i),null;case 5:if(_e(i),c=i.type,s!==null&&i.stateNode!=null)s.memoizedProps!==m&&Fr(i);else{if(!m){if(i.stateNode===null)throw Error(r(166));return xn(i),null}if(s=ee.current,Nl(i))rm(i);else{switch(y=Um(me.current),s){case 1:s=y.createElementNS("http://www.w3.org/2000/svg",c);break;case 2:s=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;default:switch(c){case"svg":s=y.createElementNS("http://www.w3.org/2000/svg",c);break;case"math":s=y.createElementNS("http://www.w3.org/1998/Math/MathML",c);break;case"script":s=y.createElement("div"),s.innerHTML="<script><\/script>",s=s.removeChild(s.firstChild);break;case"select":s=typeof m.is=="string"?y.createElement("select",{is:m.is}):y.createElement("select"),m.multiple?s.multiple=!0:m.size&&(s.size=m.size);break;default:s=typeof m.is=="string"?y.createElement(c,{is:m.is}):y.createElement(c)}}s[Gt]=i,s[Qt]=m;e:for(y=i.child;y!==null;){if(y.tag===5||y.tag===6)s.appendChild(y.stateNode);else if(y.tag!==4&&y.tag!==27&&y.child!==null){y.child.return=y,y=y.child;continue}if(y===i)break e;for(;y.sibling===null;){if(y.return===null||y.return===i)break e;y=y.return}y.sibling.return=y.return,y=y.sibling}i.stateNode=s;e:switch(fa(s,c,m),c){case"button":case"input":case"select":case"textarea":s=!!m.autoFocus;break e;case"img":s=!0;break e;default:s=!1}s&&Fr(i)}}return xn(i),i.flags&=-16777217,null;case 6:if(s&&i.stateNode!=null)s.memoizedProps!==m&&Fr(i);else{if(typeof m!="string"&&i.stateNode===null)throw Error(r(166));if(s=me.current,Nl(i)){if(s=i.stateNode,c=i.memoizedProps,m=null,y=Ye,y!==null)switch(y.tag){case 27:case 5:m=y.memoizedProps}s[Gt]=i,s=!!(s.nodeValue===c||m!==null&&m.suppressHydrationWarning===!0||Sv(s.nodeValue,c)),s||Aa(i)}else s=Um(s).createTextNode(m),s[Gt]=i,i.stateNode=s}return xn(i),null;case 13:if(m=i.memoizedState,s===null||s.memoizedState!==null&&s.memoizedState.dehydrated!==null){if(y=Nl(i),m!==null&&m.dehydrated!==null){if(s===null){if(!y)throw Error(r(318));if(y=i.memoizedState,y=y!==null?y.dehydrated:null,!y)throw Error(r(317));y[Gt]=i}else wi(),(i.flags&128)===0&&(i.memoizedState=null),i.flags|=4;xn(i),y=!1}else y=lm(),s!==null&&s.memoizedState!==null&&(s.memoizedState.hydrationErrors=y),y=!0;if(!y)return i.flags&256?(Br(i),i):(Br(i),null)}if(Br(i),(i.flags&128)!==0)return i.lanes=c,i;if(c=m!==null,s=s!==null&&s.memoizedState!==null,c){m=i.child,y=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(y=m.alternate.memoizedState.cachePool.pool);var j=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(j=m.memoizedState.cachePool.pool),j!==y&&(m.flags|=2048)}return c!==s&&c&&(i.child.flags|=8192),Em(i,i.updateQueue),xn(i),null;case 4:return de(),s===null&&rg(i.stateNode.containerInfo),xn(i),null;case 10:return Os(i.type),xn(i),null;case 19:if(se(Kn),y=i.memoizedState,y===null)return xn(i),null;if(m=(i.flags&128)!==0,j=y.rendering,j===null)if(m)od(y,!1);else{if(Cn!==0||s!==null&&(s.flags&128)!==0)for(s=i.child;s!==null;){if(j=_m(s),j!==null){for(i.flags|=128,od(y,!1),s=j.updateQueue,i.updateQueue=s,Em(i,s),i.subtreeFlags=0,s=c,c=i.child;c!==null;)Zc(c,s),c=c.sibling;return ae(Kn,Kn.current&1|2),i.child}s=s.sibling}y.tail!==null&&Fe()>Am&&(i.flags|=128,m=!0,od(y,!1),i.lanes=4194304)}else{if(!m)if(s=_m(j),s!==null){if(i.flags|=128,m=!0,s=s.updateQueue,i.updateQueue=s,Em(i,s),od(y,!0),y.tail===null&&y.tailMode==="hidden"&&!j.alternate&&!dt)return xn(i),null}else 2*Fe()-y.renderingStartTime>Am&&c!==536870912&&(i.flags|=128,m=!0,od(y,!1),i.lanes=4194304);y.isBackwards?(j.sibling=i.child,i.child=j):(s=y.last,s!==null?s.sibling=j:i.child=j,y.last=j)}return y.tail!==null?(i=y.tail,y.rendering=i,y.tail=i.sibling,y.renderingStartTime=Fe(),i.sibling=null,s=Kn.current,ae(Kn,m?s&1|2:s&1),i):(xn(i),null);case 22:case 23:return Br(i),lp(),m=i.memoizedState!==null,s!==null?s.memoizedState!==null!==m&&(i.flags|=8192):m&&(i.flags|=8192),m?(c&536870912)!==0&&(i.flags&128)===0&&(xn(i),i.subtreeFlags&6&&(i.flags|=8192)):xn(i),c=i.updateQueue,c!==null&&Em(i,c.retryQueue),c=null,s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),m=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(m=i.memoizedState.cachePool.pool),m!==c&&(i.flags|=2048),s!==null&&se(kl),null;case 24:return c=null,s!==null&&(c=s.memoizedState.cache),i.memoizedState.cache!==c&&(i.flags|=2048),Os(Wn),xn(i),null;case 25:return null;case 30:return null}throw Error(r(156,i.tag))}function gS(s,i){switch(Ue(i),i.tag){case 1:return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 3:return Os(Wn),de(),s=i.flags,(s&65536)!==0&&(s&128)===0?(i.flags=s&-65537|128,i):null;case 26:case 27:case 5:return _e(i),null;case 13:if(Br(i),s=i.memoizedState,s!==null&&s.dehydrated!==null){if(i.alternate===null)throw Error(r(340));wi()}return s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 19:return se(Kn),null;case 4:return de(),null;case 10:return Os(i.type),null;case 22:case 23:return Br(i),lp(),s!==null&&se(kl),s=i.flags,s&65536?(i.flags=s&-65537|128,i):null;case 24:return Os(Wn),null;case 25:return null;default:return null}}function Db(s,i){switch(Ue(i),i.tag){case 3:Os(Wn),de();break;case 26:case 27:case 5:_e(i);break;case 4:de();break;case 13:Br(i);break;case 19:se(Kn);break;case 10:Os(i.type);break;case 22:case 23:Br(i),lp(),s!==null&&se(kl);break;case 24:Os(Wn)}}function cd(s,i){try{var c=i.updateQueue,m=c!==null?c.lastEffect:null;if(m!==null){var y=m.next;c=y;do{if((c.tag&s)===s){m=void 0;var j=c.create,D=c.inst;m=j(),D.destroy=m}c=c.next}while(c!==y)}}catch(q){Xt(i,i.return,q)}}function Mi(s,i,c){try{var m=i.updateQueue,y=m!==null?m.lastEffect:null;if(y!==null){var j=y.next;m=j;do{if((m.tag&s)===s){var D=m.inst,q=D.destroy;if(q!==void 0){D.destroy=void 0,y=i;var le=c,xe=q;try{xe()}catch(Se){Xt(y,le,Se)}}}m=m.next}while(m!==j)}}catch(Se){Xt(i,i.return,Se)}}function Ob(s){var i=s.updateQueue;if(i!==null){var c=s.stateNode;try{jy(i,c)}catch(m){Xt(s,s.return,m)}}}function Pb(s,i,c){c.props=El(s.type,s.memoizedProps),c.state=s.memoizedState;try{c.componentWillUnmount()}catch(m){Xt(s,i,m)}}function dd(s,i){try{var c=s.ref;if(c!==null){switch(s.tag){case 26:case 27:case 5:var m=s.stateNode;break;case 30:m=s.stateNode;break;default:m=s.stateNode}typeof c=="function"?s.refCleanup=c(m):c.current=m}}catch(y){Xt(s,i,y)}}function tr(s,i){var c=s.ref,m=s.refCleanup;if(c!==null)if(typeof m=="function")try{m()}catch(y){Xt(s,i,y)}finally{s.refCleanup=null,s=s.alternate,s!=null&&(s.refCleanup=null)}else if(typeof c=="function")try{c(null)}catch(y){Xt(s,i,y)}else c.current=null}function Lb(s){var i=s.type,c=s.memoizedProps,m=s.stateNode;try{e:switch(i){case"button":case"input":case"select":case"textarea":c.autoFocus&&m.focus();break e;case"img":c.src?m.src=c.src:c.srcSet&&(m.srcset=c.srcSet)}}catch(y){Xt(s,s.return,y)}}function Pp(s,i,c){try{var m=s.stateNode;zS(m,s.type,c,i),m[Qt]=i}catch(y){Xt(s,s.return,y)}}function zb(s){return s.tag===5||s.tag===3||s.tag===26||s.tag===27&&Ii(s.type)||s.tag===4}function Lp(s){e:for(;;){for(;s.sibling===null;){if(s.return===null||zb(s.return))return null;s=s.return}for(s.sibling.return=s.return,s=s.sibling;s.tag!==5&&s.tag!==6&&s.tag!==18;){if(s.tag===27&&Ii(s.type)||s.flags&2||s.child===null||s.tag===4)continue e;s.child.return=s,s=s.child}if(!(s.flags&2))return s.stateNode}}function zp(s,i,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,i?(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c).insertBefore(s,i):(i=c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,i.appendChild(s),c=c._reactRootContainer,c!=null||i.onclick!==null||(i.onclick=Fm));else if(m!==4&&(m===27&&Ii(s.type)&&(c=s.stateNode,i=null),s=s.child,s!==null))for(zp(s,i,c),s=s.sibling;s!==null;)zp(s,i,c),s=s.sibling}function Mm(s,i,c){var m=s.tag;if(m===5||m===6)s=s.stateNode,i?c.insertBefore(s,i):c.appendChild(s);else if(m!==4&&(m===27&&Ii(s.type)&&(c=s.stateNode),s=s.child,s!==null))for(Mm(s,i,c),s=s.sibling;s!==null;)Mm(s,i,c),s=s.sibling}function Ib(s){var i=s.stateNode,c=s.memoizedProps;try{for(var m=s.type,y=i.attributes;y.length;)i.removeAttributeNode(y[0]);fa(i,m,c),i[Gt]=s,i[Qt]=c}catch(j){Xt(s,s.return,j)}}var Ur=!1,Dn=!1,Ip=!1,Bb=typeof WeakSet=="function"?WeakSet:Set,aa=null;function xS(s,i){if(s=s.containerInfo,og=Wm,s=gl(s),xl(s)){if("selectionStart"in s)var c={start:s.selectionStart,end:s.selectionEnd};else e:{c=(c=s.ownerDocument)&&c.defaultView||window;var m=c.getSelection&&c.getSelection();if(m&&m.rangeCount!==0){c=m.anchorNode;var y=m.anchorOffset,j=m.focusNode;m=m.focusOffset;try{c.nodeType,j.nodeType}catch{c=null;break e}var D=0,q=-1,le=-1,xe=0,Se=0,Re=s,be=null;t:for(;;){for(var ve;Re!==c||y!==0&&Re.nodeType!==3||(q=D+y),Re!==j||m!==0&&Re.nodeType!==3||(le=D+m),Re.nodeType===3&&(D+=Re.nodeValue.length),(ve=Re.firstChild)!==null;)be=Re,Re=ve;for(;;){if(Re===s)break t;if(be===c&&++xe===y&&(q=D),be===j&&++Se===m&&(le=D),(ve=Re.nextSibling)!==null)break;Re=be,be=Re.parentNode}Re=ve}c=q===-1||le===-1?null:{start:q,end:le}}else c=null}c=c||{start:0,end:0}}else c=null;for(cg={focusedElem:s,selectionRange:c},Wm=!1,aa=i;aa!==null;)if(i=aa,s=i.child,(i.subtreeFlags&1024)!==0&&s!==null)s.return=i,aa=s;else for(;aa!==null;){switch(i=aa,j=i.alternate,s=i.flags,i.tag){case 0:break;case 11:case 15:break;case 1:if((s&1024)!==0&&j!==null){s=void 0,c=i,y=j.memoizedProps,j=j.memoizedState,m=c.stateNode;try{var lt=El(c.type,y,c.elementType===c.type);s=m.getSnapshotBeforeUpdate(lt,j),m.__reactInternalSnapshotBeforeUpdate=s}catch(nt){Xt(c,c.return,nt)}}break;case 3:if((s&1024)!==0){if(s=i.stateNode.containerInfo,c=s.nodeType,c===9)mg(s);else if(c===1)switch(s.nodeName){case"HEAD":case"HTML":case"BODY":mg(s);break;default:s.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((s&1024)!==0)throw Error(r(163))}if(s=i.sibling,s!==null){s.return=i.return,aa=s;break}aa=i.return}}function $b(s,i,c){var m=c.flags;switch(c.tag){case 0:case 11:case 15:Ri(s,c),m&4&&cd(5,c);break;case 1:if(Ri(s,c),m&4)if(s=c.stateNode,i===null)try{s.componentDidMount()}catch(D){Xt(c,c.return,D)}else{var y=El(c.type,i.memoizedProps);i=i.memoizedState;try{s.componentDidUpdate(y,i,s.__reactInternalSnapshotBeforeUpdate)}catch(D){Xt(c,c.return,D)}}m&64&&Ob(c),m&512&&dd(c,c.return);break;case 3:if(Ri(s,c),m&64&&(s=c.updateQueue,s!==null)){if(i=null,c.child!==null)switch(c.child.tag){case 27:case 5:i=c.child.stateNode;break;case 1:i=c.child.stateNode}try{jy(s,i)}catch(D){Xt(c,c.return,D)}}break;case 27:i===null&&m&4&&Ib(c);case 26:case 5:Ri(s,c),i===null&&m&4&&Lb(c),m&512&&dd(c,c.return);break;case 12:Ri(s,c);break;case 13:Ri(s,c),m&4&&Hb(s,c),m&64&&(s=c.memoizedState,s!==null&&(s=s.dehydrated,s!==null&&(c=CS.bind(null,c),qS(s,c))));break;case 22:if(m=c.memoizedState!==null||Ur,!m){i=i!==null&&i.memoizedState!==null||Dn,y=Ur;var j=Dn;Ur=m,(Dn=i)&&!j?Ai(s,c,(c.subtreeFlags&8772)!==0):Ri(s,c),Ur=y,Dn=j}break;case 30:break;default:Ri(s,c)}}function Fb(s){var i=s.alternate;i!==null&&(s.alternate=null,Fb(i)),s.child=null,s.deletions=null,s.sibling=null,s.tag===5&&(i=s.stateNode,i!==null&&Xl(i)),s.stateNode=null,s.return=null,s.dependencies=null,s.memoizedProps=null,s.memoizedState=null,s.pendingProps=null,s.stateNode=null,s.updateQueue=null}var dn=null,Oa=!1;function Hr(s,i,c){for(c=c.child;c!==null;)Ub(s,i,c),c=c.sibling}function Ub(s,i,c){if(ce&&typeof ce.onCommitFiberUnmount=="function")try{ce.onCommitFiberUnmount(ct,c)}catch{}switch(c.tag){case 26:Dn||tr(c,i),Hr(s,i,c),c.memoizedState?c.memoizedState.count--:c.stateNode&&(c=c.stateNode,c.parentNode.removeChild(c));break;case 27:Dn||tr(c,i);var m=dn,y=Oa;Ii(c.type)&&(dn=c.stateNode,Oa=!1),Hr(s,i,c),bd(c.stateNode),dn=m,Oa=y;break;case 5:Dn||tr(c,i);case 6:if(m=dn,y=Oa,dn=null,Hr(s,i,c),dn=m,Oa=y,dn!==null)if(Oa)try{(dn.nodeType===9?dn.body:dn.nodeName==="HTML"?dn.ownerDocument.body:dn).removeChild(c.stateNode)}catch(j){Xt(c,i,j)}else try{dn.removeChild(c.stateNode)}catch(j){Xt(c,i,j)}break;case 18:dn!==null&&(Oa?(s=dn,Mv(s.nodeType===9?s.body:s.nodeName==="HTML"?s.ownerDocument.body:s,c.stateNode),kd(s)):Mv(dn,c.stateNode));break;case 4:m=dn,y=Oa,dn=c.stateNode.containerInfo,Oa=!0,Hr(s,i,c),dn=m,Oa=y;break;case 0:case 11:case 14:case 15:Dn||Mi(2,c,i),Dn||Mi(4,c,i),Hr(s,i,c);break;case 1:Dn||(tr(c,i),m=c.stateNode,typeof m.componentWillUnmount=="function"&&Pb(c,i,m)),Hr(s,i,c);break;case 21:Hr(s,i,c);break;case 22:Dn=(m=Dn)||c.memoizedState!==null,Hr(s,i,c),Dn=m;break;default:Hr(s,i,c)}}function Hb(s,i){if(i.memoizedState===null&&(s=i.alternate,s!==null&&(s=s.memoizedState,s!==null&&(s=s.dehydrated,s!==null))))try{kd(s)}catch(c){Xt(i,i.return,c)}}function yS(s){switch(s.tag){case 13:case 19:var i=s.stateNode;return i===null&&(i=s.stateNode=new Bb),i;case 22:return s=s.stateNode,i=s._retryCache,i===null&&(i=s._retryCache=new Bb),i;default:throw Error(r(435,s.tag))}}function Bp(s,i){var c=yS(s);i.forEach(function(m){var y=kS.bind(null,s,m);c.has(m)||(c.add(m),m.then(y,y))})}function Qa(s,i){var c=i.deletions;if(c!==null)for(var m=0;m<c.length;m++){var y=c[m],j=s,D=i,q=D;e:for(;q!==null;){switch(q.tag){case 27:if(Ii(q.type)){dn=q.stateNode,Oa=!1;break e}break;case 5:dn=q.stateNode,Oa=!1;break e;case 3:case 4:dn=q.stateNode.containerInfo,Oa=!0;break e}q=q.return}if(dn===null)throw Error(r(160));Ub(j,D,y),dn=null,Oa=!1,j=y.alternate,j!==null&&(j.return=null),y.return=null}if(i.subtreeFlags&13878)for(i=i.child;i!==null;)qb(i,s),i=i.sibling}var Ps=null;function qb(s,i){var c=s.alternate,m=s.flags;switch(s.tag){case 0:case 11:case 14:case 15:Qa(i,s),Xa(s),m&4&&(Mi(3,s,s.return),cd(3,s),Mi(5,s,s.return));break;case 1:Qa(i,s),Xa(s),m&512&&(Dn||c===null||tr(c,c.return)),m&64&&Ur&&(s=s.updateQueue,s!==null&&(m=s.callbacks,m!==null&&(c=s.shared.hiddenCallbacks,s.shared.hiddenCallbacks=c===null?m:c.concat(m))));break;case 26:var y=Ps;if(Qa(i,s),Xa(s),m&512&&(Dn||c===null||tr(c,c.return)),m&4){var j=c!==null?c.memoizedState:null;if(m=s.memoizedState,c===null)if(m===null)if(s.stateNode===null){e:{m=s.type,c=s.memoizedProps,y=y.ownerDocument||y;t:switch(m){case"title":j=y.getElementsByTagName("title")[0],(!j||j[os]||j[Gt]||j.namespaceURI==="http://www.w3.org/2000/svg"||j.hasAttribute("itemprop"))&&(j=y.createElement(m),y.head.insertBefore(j,y.querySelector("head > title"))),fa(j,m,c),j[Gt]=s,qn(j),m=j;break e;case"link":var D=Iv("link","href",y).get(m+(c.href||""));if(D){for(var q=0;q<D.length;q++)if(j=D[q],j.getAttribute("href")===(c.href==null||c.href===""?null:c.href)&&j.getAttribute("rel")===(c.rel==null?null:c.rel)&&j.getAttribute("title")===(c.title==null?null:c.title)&&j.getAttribute("crossorigin")===(c.crossOrigin==null?null:c.crossOrigin)){D.splice(q,1);break t}}j=y.createElement(m),fa(j,m,c),y.head.appendChild(j);break;case"meta":if(D=Iv("meta","content",y).get(m+(c.content||""))){for(q=0;q<D.length;q++)if(j=D[q],j.getAttribute("content")===(c.content==null?null:""+c.content)&&j.getAttribute("name")===(c.name==null?null:c.name)&&j.getAttribute("property")===(c.property==null?null:c.property)&&j.getAttribute("http-equiv")===(c.httpEquiv==null?null:c.httpEquiv)&&j.getAttribute("charset")===(c.charSet==null?null:c.charSet)){D.splice(q,1);break t}}j=y.createElement(m),fa(j,m,c),y.head.appendChild(j);break;default:throw Error(r(468,m))}j[Gt]=s,qn(j),m=j}s.stateNode=m}else Bv(y,s.type,s.stateNode);else s.stateNode=zv(y,m,s.memoizedProps);else j!==m?(j===null?c.stateNode!==null&&(c=c.stateNode,c.parentNode.removeChild(c)):j.count--,m===null?Bv(y,s.type,s.stateNode):zv(y,m,s.memoizedProps)):m===null&&s.stateNode!==null&&Pp(s,s.memoizedProps,c.memoizedProps)}break;case 27:Qa(i,s),Xa(s),m&512&&(Dn||c===null||tr(c,c.return)),c!==null&&m&4&&Pp(s,s.memoizedProps,c.memoizedProps);break;case 5:if(Qa(i,s),Xa(s),m&512&&(Dn||c===null||tr(c,c.return)),s.flags&32){y=s.stateNode;try{ds(y,"")}catch(ve){Xt(s,s.return,ve)}}m&4&&s.stateNode!=null&&(y=s.memoizedProps,Pp(s,y,c!==null?c.memoizedProps:y)),m&1024&&(Ip=!0);break;case 6:if(Qa(i,s),Xa(s),m&4){if(s.stateNode===null)throw Error(r(162));m=s.memoizedProps,c=s.stateNode;try{c.nodeValue=m}catch(ve){Xt(s,s.return,ve)}}break;case 3:if(Ym=null,y=Ps,Ps=Hm(i.containerInfo),Qa(i,s),Ps=y,Xa(s),m&4&&c!==null&&c.memoizedState.isDehydrated)try{kd(i.containerInfo)}catch(ve){Xt(s,s.return,ve)}Ip&&(Ip=!1,Yb(s));break;case 4:m=Ps,Ps=Hm(s.stateNode.containerInfo),Qa(i,s),Xa(s),Ps=m;break;case 12:Qa(i,s),Xa(s);break;case 13:Qa(i,s),Xa(s),s.child.flags&8192&&s.memoizedState!==null!=(c!==null&&c.memoizedState!==null)&&(Yp=Fe()),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Bp(s,m)));break;case 22:y=s.memoizedState!==null;var le=c!==null&&c.memoizedState!==null,xe=Ur,Se=Dn;if(Ur=xe||y,Dn=Se||le,Qa(i,s),Dn=Se,Ur=xe,Xa(s),m&8192)e:for(i=s.stateNode,i._visibility=y?i._visibility&-2:i._visibility|1,y&&(c===null||le||Ur||Dn||Ml(s)),c=null,i=s;;){if(i.tag===5||i.tag===26){if(c===null){le=c=i;try{if(j=le.stateNode,y)D=j.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{q=le.stateNode;var Re=le.memoizedProps.style,be=Re!=null&&Re.hasOwnProperty("display")?Re.display:null;q.style.display=be==null||typeof be=="boolean"?"":(""+be).trim()}}catch(ve){Xt(le,le.return,ve)}}}else if(i.tag===6){if(c===null){le=i;try{le.stateNode.nodeValue=y?"":le.memoizedProps}catch(ve){Xt(le,le.return,ve)}}}else if((i.tag!==22&&i.tag!==23||i.memoizedState===null||i===s)&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===s)break e;for(;i.sibling===null;){if(i.return===null||i.return===s)break e;c===i&&(c=null),i=i.return}c===i&&(c=null),i.sibling.return=i.return,i=i.sibling}m&4&&(m=s.updateQueue,m!==null&&(c=m.retryQueue,c!==null&&(m.retryQueue=null,Bp(s,c))));break;case 19:Qa(i,s),Xa(s),m&4&&(m=s.updateQueue,m!==null&&(s.updateQueue=null,Bp(s,m)));break;case 30:break;case 21:break;default:Qa(i,s),Xa(s)}}function Xa(s){var i=s.flags;if(i&2){try{for(var c,m=s.return;m!==null;){if(zb(m)){c=m;break}m=m.return}if(c==null)throw Error(r(160));switch(c.tag){case 27:var y=c.stateNode,j=Lp(s);Mm(s,j,y);break;case 5:var D=c.stateNode;c.flags&32&&(ds(D,""),c.flags&=-33);var q=Lp(s);Mm(s,q,D);break;case 3:case 4:var le=c.stateNode.containerInfo,xe=Lp(s);zp(s,xe,le);break;default:throw Error(r(161))}}catch(Se){Xt(s,s.return,Se)}s.flags&=-3}i&4096&&(s.flags&=-4097)}function Yb(s){if(s.subtreeFlags&1024)for(s=s.child;s!==null;){var i=s;Yb(i),i.tag===5&&i.flags&1024&&i.stateNode.reset(),s=s.sibling}}function Ri(s,i){if(i.subtreeFlags&8772)for(i=i.child;i!==null;)$b(s,i.alternate,i),i=i.sibling}function Ml(s){for(s=s.child;s!==null;){var i=s;switch(i.tag){case 0:case 11:case 14:case 15:Mi(4,i,i.return),Ml(i);break;case 1:tr(i,i.return);var c=i.stateNode;typeof c.componentWillUnmount=="function"&&Pb(i,i.return,c),Ml(i);break;case 27:bd(i.stateNode);case 26:case 5:tr(i,i.return),Ml(i);break;case 22:i.memoizedState===null&&Ml(i);break;case 30:Ml(i);break;default:Ml(i)}s=s.sibling}}function Ai(s,i,c){for(c=c&&(i.subtreeFlags&8772)!==0,i=i.child;i!==null;){var m=i.alternate,y=s,j=i,D=j.flags;switch(j.tag){case 0:case 11:case 15:Ai(y,j,c),cd(4,j);break;case 1:if(Ai(y,j,c),m=j,y=m.stateNode,typeof y.componentDidMount=="function")try{y.componentDidMount()}catch(xe){Xt(m,m.return,xe)}if(m=j,y=m.updateQueue,y!==null){var q=m.stateNode;try{var le=y.shared.hiddenCallbacks;if(le!==null)for(y.shared.hiddenCallbacks=null,y=0;y<le.length;y++)vy(le[y],q)}catch(xe){Xt(m,m.return,xe)}}c&&D&64&&Ob(j),dd(j,j.return);break;case 27:Ib(j);case 26:case 5:Ai(y,j,c),c&&m===null&&D&4&&Lb(j),dd(j,j.return);break;case 12:Ai(y,j,c);break;case 13:Ai(y,j,c),c&&D&4&&Hb(y,j);break;case 22:j.memoizedState===null&&Ai(y,j,c),dd(j,j.return);break;case 30:break;default:Ai(y,j,c)}i=i.sibling}}function $p(s,i){var c=null;s!==null&&s.memoizedState!==null&&s.memoizedState.cachePool!==null&&(c=s.memoizedState.cachePool.pool),s=null,i.memoizedState!==null&&i.memoizedState.cachePool!==null&&(s=i.memoizedState.cachePool.pool),s!==c&&(s!=null&&s.refCount++,c!=null&&Kc(c))}function Fp(s,i){s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Kc(s))}function nr(s,i,c,m){if(i.subtreeFlags&10256)for(i=i.child;i!==null;)Vb(s,i,c,m),i=i.sibling}function Vb(s,i,c,m){var y=i.flags;switch(i.tag){case 0:case 11:case 15:nr(s,i,c,m),y&2048&&cd(9,i);break;case 1:nr(s,i,c,m);break;case 3:nr(s,i,c,m),y&2048&&(s=null,i.alternate!==null&&(s=i.alternate.memoizedState.cache),i=i.memoizedState.cache,i!==s&&(i.refCount++,s!=null&&Kc(s)));break;case 12:if(y&2048){nr(s,i,c,m),s=i.stateNode;try{var j=i.memoizedProps,D=j.id,q=j.onPostCommit;typeof q=="function"&&q(D,i.alternate===null?"mount":"update",s.passiveEffectDuration,-0)}catch(le){Xt(i,i.return,le)}}else nr(s,i,c,m);break;case 13:nr(s,i,c,m);break;case 23:break;case 22:j=i.stateNode,D=i.alternate,i.memoizedState!==null?j._visibility&2?nr(s,i,c,m):ud(s,i):j._visibility&2?nr(s,i,c,m):(j._visibility|=2,ko(s,i,c,m,(i.subtreeFlags&10256)!==0)),y&2048&&$p(D,i);break;case 24:nr(s,i,c,m),y&2048&&Fp(i.alternate,i);break;default:nr(s,i,c,m)}}function ko(s,i,c,m,y){for(y=y&&(i.subtreeFlags&10256)!==0,i=i.child;i!==null;){var j=s,D=i,q=c,le=m,xe=D.flags;switch(D.tag){case 0:case 11:case 15:ko(j,D,q,le,y),cd(8,D);break;case 23:break;case 22:var Se=D.stateNode;D.memoizedState!==null?Se._visibility&2?ko(j,D,q,le,y):ud(j,D):(Se._visibility|=2,ko(j,D,q,le,y)),y&&xe&2048&&$p(D.alternate,D);break;case 24:ko(j,D,q,le,y),y&&xe&2048&&Fp(D.alternate,D);break;default:ko(j,D,q,le,y)}i=i.sibling}}function ud(s,i){if(i.subtreeFlags&10256)for(i=i.child;i!==null;){var c=s,m=i,y=m.flags;switch(m.tag){case 22:ud(c,m),y&2048&&$p(m.alternate,m);break;case 24:ud(c,m),y&2048&&Fp(m.alternate,m);break;default:ud(c,m)}i=i.sibling}}var md=8192;function To(s){if(s.subtreeFlags&md)for(s=s.child;s!==null;)Zb(s),s=s.sibling}function Zb(s){switch(s.tag){case 26:To(s),s.flags&md&&s.memoizedState!==null&&aC(Ps,s.memoizedState,s.memoizedProps);break;case 5:To(s);break;case 3:case 4:var i=Ps;Ps=Hm(s.stateNode.containerInfo),To(s),Ps=i;break;case 22:s.memoizedState===null&&(i=s.alternate,i!==null&&i.memoizedState!==null?(i=md,md=16777216,To(s),md=i):To(s));break;default:To(s)}}function Wb(s){var i=s.alternate;if(i!==null&&(s=i.child,s!==null)){i.child=null;do i=s.sibling,s.sibling=null,s=i;while(s!==null)}}function hd(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var m=i[c];aa=m,Gb(m,s)}Wb(s)}if(s.subtreeFlags&10256)for(s=s.child;s!==null;)Kb(s),s=s.sibling}function Kb(s){switch(s.tag){case 0:case 11:case 15:hd(s),s.flags&2048&&Mi(9,s,s.return);break;case 3:hd(s);break;case 12:hd(s);break;case 22:var i=s.stateNode;s.memoizedState!==null&&i._visibility&2&&(s.return===null||s.return.tag!==13)?(i._visibility&=-3,Rm(s)):hd(s);break;default:hd(s)}}function Rm(s){var i=s.deletions;if((s.flags&16)!==0){if(i!==null)for(var c=0;c<i.length;c++){var m=i[c];aa=m,Gb(m,s)}Wb(s)}for(s=s.child;s!==null;){switch(i=s,i.tag){case 0:case 11:case 15:Mi(8,i,i.return),Rm(i);break;case 22:c=i.stateNode,c._visibility&2&&(c._visibility&=-3,Rm(i));break;default:Rm(i)}s=s.sibling}}function Gb(s,i){for(;aa!==null;){var c=aa;switch(c.tag){case 0:case 11:case 15:Mi(8,c,i);break;case 23:case 22:if(c.memoizedState!==null&&c.memoizedState.cachePool!==null){var m=c.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:Kc(c.memoizedState.cache)}if(m=c.child,m!==null)m.return=c,aa=m;else e:for(c=s;aa!==null;){m=aa;var y=m.sibling,j=m.return;if(Fb(m),m===c){aa=null;break e}if(y!==null){y.return=j,aa=y;break e}aa=j}}}var bS={getCacheForType:function(s){var i=ba(Wn),c=i.data.get(s);return c===void 0&&(c=s(),i.data.set(s,c)),c}},vS=typeof WeakMap=="function"?WeakMap:Map,Ft=0,sn=null,vt=null,Tt=0,Ut=0,Ja=null,Di=!1,Eo=!1,Up=!1,qr=0,Cn=0,Oi=0,Rl=0,Hp=0,ys=0,Mo=0,fd=null,Pa=null,qp=!1,Yp=0,Am=1/0,Dm=null,Pi=null,ha=0,Li=null,Ro=null,Ao=0,Vp=0,Zp=null,Qb=null,pd=0,Wp=null;function es(){if((Ft&2)!==0&&Tt!==0)return Tt&-Tt;if(K.T!==null){var s=bo;return s!==0?s:tg()}return oa()}function Xb(){ys===0&&(ys=(Tt&536870912)===0||dt?tt():536870912);var s=xs.current;return s!==null&&(s.flags|=32),ys}function ts(s,i,c){(s===sn&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)&&(Do(s,0),zi(s,Tt,ys,!1)),$e(s,c),((Ft&2)===0||s!==sn)&&(s===sn&&((Ft&2)===0&&(Rl|=c),Cn===4&&zi(s,Tt,ys,!1)),ar(s))}function Jb(s,i,c){if((Ft&6)!==0)throw Error(r(327));var m=!c&&(i&124)===0&&(i&s.expiredLanes)===0||Mn(s,i),y=m?NS(s,i):Qp(s,i,!0),j=m;do{if(y===0){Eo&&!m&&zi(s,i,0,!1);break}else{if(c=s.current.alternate,j&&!jS(c)){y=Qp(s,i,!1),j=!1;continue}if(y===2){if(j=i,s.errorRecoveryDisabledLanes&j)var D=0;else D=s.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){i=D;e:{var q=s;y=fd;var le=q.current.memoizedState.isDehydrated;if(le&&(Do(q,D).flags|=256),D=Qp(q,D,!1),D!==2){if(Up&&!le){q.errorRecoveryDisabledLanes|=j,Rl|=j,y=4;break e}j=Pa,Pa=y,j!==null&&(Pa===null?Pa=j:Pa.push.apply(Pa,j))}y=D}if(j=!1,y!==2)continue}}if(y===1){Do(s,0),zi(s,i,0,!0);break}e:{switch(m=s,j=y,j){case 0:case 1:throw Error(r(345));case 4:if((i&4194048)!==i)break;case 6:zi(m,i,ys,!Di);break e;case 2:Pa=null;break;case 3:case 5:break;default:throw Error(r(329))}if((i&62914560)===i&&(y=Yp+300-Fe(),10<y)){if(zi(m,i,ys,!Di),la(m,0,!0)!==0)break e;m.timeoutHandle=Tv(ev.bind(null,m,c,Pa,Dm,qp,i,ys,Rl,Mo,Di,j,2,-0,0),y);break e}ev(m,c,Pa,Dm,qp,i,ys,Rl,Mo,Di,j,0,-0,0)}}break}while(!0);ar(s)}function ev(s,i,c,m,y,j,D,q,le,xe,Se,Re,be,ve){if(s.timeoutHandle=-1,Re=i.subtreeFlags,(Re&8192||(Re&16785408)===16785408)&&(wd={stylesheets:null,count:0,unsuspend:nC},Zb(i),Re=sC(),Re!==null)){s.cancelPendingCommit=Re(lv.bind(null,s,i,j,c,m,y,D,q,le,Se,1,be,ve)),zi(s,j,D,!xe);return}lv(s,i,j,c,m,y,D,q,le)}function jS(s){for(var i=s;;){var c=i.tag;if((c===0||c===11||c===15)&&i.flags&16384&&(c=i.updateQueue,c!==null&&(c=c.stores,c!==null)))for(var m=0;m<c.length;m++){var y=c[m],j=y.getSnapshot;y=y.value;try{if(!_a(j(),y))return!1}catch{return!1}}if(c=i.child,i.subtreeFlags&16384&&c!==null)c.return=i,i=c;else{if(i===s)break;for(;i.sibling===null;){if(i.return===null||i.return===s)return!0;i=i.return}i.sibling.return=i.return,i=i.sibling}}return!0}function zi(s,i,c,m){i&=~Hp,i&=~Rl,s.suspendedLanes|=i,s.pingedLanes&=~i,m&&(s.warmLanes|=i),m=s.expirationTimes;for(var y=i;0<y;){var j=31-Le(y),D=1<<j;m[j]=-1,y&=~D}c!==0&&Yt(s,c,i)}function Om(){return(Ft&6)===0?(gd(0),!1):!0}function Kp(){if(vt!==null){if(Ut===0)var s=vt.return;else s=vt,Ds=gs=null,mp(s),So=null,id=0,s=vt;for(;s!==null;)Db(s.alternate,s),s=s.return;vt=null}}function Do(s,i){var c=s.timeoutHandle;c!==-1&&(s.timeoutHandle=-1,BS(c)),c=s.cancelPendingCommit,c!==null&&(s.cancelPendingCommit=null,c()),Kp(),sn=s,vt=c=ps(s.current,null),Tt=i,Ut=0,Ja=null,Di=!1,Eo=Mn(s,i),Up=!1,Mo=ys=Hp=Rl=Oi=Cn=0,Pa=fd=null,qp=!1,(i&8)!==0&&(i|=i&32);var m=s.entangledLanes;if(m!==0)for(s=s.entanglements,m&=i;0<m;){var y=31-Le(m),j=1<<y;i|=s[y],m&=~j}return qr=i,bl(),c}function tv(s,i){xt=null,K.H=jm,i===Qc||i===um?(i=yy(),Ut=3):i===py?(i=yy(),Ut=4):Ut=i===bb?8:i!==null&&typeof i=="object"&&typeof i.then=="function"?6:1,Ja=i,vt===null&&(Cn=1,Cm(s,Ca(i,s.current)))}function nv(){var s=K.H;return K.H=jm,s===null?jm:s}function av(){var s=K.A;return K.A=bS,s}function Gp(){Cn=4,Di||(Tt&4194048)!==Tt&&xs.current!==null||(Eo=!0),(Oi&134217727)===0&&(Rl&134217727)===0||sn===null||zi(sn,Tt,ys,!1)}function Qp(s,i,c){var m=Ft;Ft|=2;var y=nv(),j=av();(sn!==s||Tt!==i)&&(Dm=null,Do(s,i)),i=!1;var D=Cn;e:do try{if(Ut!==0&&vt!==null){var q=vt,le=Ja;switch(Ut){case 8:Kp(),D=6;break e;case 3:case 2:case 9:case 6:xs.current===null&&(i=!0);var xe=Ut;if(Ut=0,Ja=null,Oo(s,q,le,xe),c&&Eo){D=0;break e}break;default:xe=Ut,Ut=0,Ja=null,Oo(s,q,le,xe)}}wS(),D=Cn;break}catch(Se){tv(s,Se)}while(!0);return i&&s.shellSuspendCounter++,Ds=gs=null,Ft=m,K.H=y,K.A=j,vt===null&&(sn=null,Tt=0,bl()),D}function wS(){for(;vt!==null;)sv(vt)}function NS(s,i){var c=Ft;Ft|=2;var m=nv(),y=av();sn!==s||Tt!==i?(Dm=null,Am=Fe()+500,Do(s,i)):Eo=Mn(s,i);e:do try{if(Ut!==0&&vt!==null){i=vt;var j=Ja;t:switch(Ut){case 1:Ut=0,Ja=null,Oo(s,i,j,1);break;case 2:case 9:if(gy(j)){Ut=0,Ja=null,rv(i);break}i=function(){Ut!==2&&Ut!==9||sn!==s||(Ut=7),ar(s)},j.then(i,i);break e;case 3:Ut=7;break e;case 4:Ut=5;break e;case 7:gy(j)?(Ut=0,Ja=null,rv(i)):(Ut=0,Ja=null,Oo(s,i,j,7));break;case 5:var D=null;switch(vt.tag){case 26:D=vt.memoizedState;case 5:case 27:var q=vt;if(!D||$v(D)){Ut=0,Ja=null;var le=q.sibling;if(le!==null)vt=le;else{var xe=q.return;xe!==null?(vt=xe,Pm(xe)):vt=null}break t}}Ut=0,Ja=null,Oo(s,i,j,5);break;case 6:Ut=0,Ja=null,Oo(s,i,j,6);break;case 8:Kp(),Cn=6;break e;default:throw Error(r(462))}}_S();break}catch(Se){tv(s,Se)}while(!0);return Ds=gs=null,K.H=m,K.A=y,Ft=c,vt!==null?0:(sn=null,Tt=0,bl(),Cn)}function _S(){for(;vt!==null&&!it();)sv(vt)}function sv(s){var i=Rb(s.alternate,s,qr);s.memoizedProps=s.pendingProps,i===null?Pm(s):vt=i}function rv(s){var i=s,c=i.alternate;switch(i.tag){case 15:case 0:i=Sb(c,i,i.pendingProps,i.type,void 0,Tt);break;case 11:i=Sb(c,i,i.pendingProps,i.type.render,i.ref,Tt);break;case 5:mp(i);default:Db(c,i),i=vt=Zc(i,qr),i=Rb(c,i,qr)}s.memoizedProps=s.pendingProps,i===null?Pm(s):vt=i}function Oo(s,i,c,m){Ds=gs=null,mp(i),So=null,id=0;var y=i.return;try{if(hS(s,y,i,c,Tt)){Cn=1,Cm(s,Ca(c,s.current)),vt=null;return}}catch(j){if(y!==null)throw vt=y,j;Cn=1,Cm(s,Ca(c,s.current)),vt=null;return}i.flags&32768?(dt||m===1?s=!0:Eo||(Tt&536870912)!==0?s=!1:(Di=s=!0,(m===2||m===9||m===3||m===6)&&(m=xs.current,m!==null&&m.tag===13&&(m.flags|=16384))),iv(i,s)):Pm(i)}function Pm(s){var i=s;do{if((i.flags&32768)!==0){iv(i,Di);return}s=i.return;var c=pS(i.alternate,i,qr);if(c!==null){vt=c;return}if(i=i.sibling,i!==null){vt=i;return}vt=i=s}while(i!==null);Cn===0&&(Cn=5)}function iv(s,i){do{var c=gS(s.alternate,s);if(c!==null){c.flags&=32767,vt=c;return}if(c=s.return,c!==null&&(c.flags|=32768,c.subtreeFlags=0,c.deletions=null),!i&&(s=s.sibling,s!==null)){vt=s;return}vt=s=c}while(s!==null);Cn=6,vt=null}function lv(s,i,c,m,y,j,D,q,le){s.cancelPendingCommit=null;do Lm();while(ha!==0);if((Ft&6)!==0)throw Error(r(327));if(i!==null){if(i===s.current)throw Error(r(177));if(j=i.lanes|i.childLanes,j|=Ga,Qe(s,c,j,D,q,le),s===sn&&(vt=sn=null,Tt=0),Ro=i,Li=s,Ao=c,Vp=j,Zp=y,Qb=m,(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?(s.callbackNode=null,s.callbackPriority=0,TS(Ee,function(){return mv(),null})):(s.callbackNode=null,s.callbackPriority=0),m=(i.flags&13878)!==0,(i.subtreeFlags&13878)!==0||m){m=K.T,K.T=null,y=oe.p,oe.p=2,D=Ft,Ft|=4;try{xS(s,i,c)}finally{Ft=D,oe.p=y,K.T=m}}ha=1,ov(),cv(),dv()}}function ov(){if(ha===1){ha=0;var s=Li,i=Ro,c=(i.flags&13878)!==0;if((i.subtreeFlags&13878)!==0||c){c=K.T,K.T=null;var m=oe.p;oe.p=2;var y=Ft;Ft|=4;try{qb(i,s);var j=cg,D=gl(s.containerInfo),q=j.focusedElem,le=j.selectionRange;if(D!==q&&q&&q.ownerDocument&&uo(q.ownerDocument.documentElement,q)){if(le!==null&&xl(q)){var xe=le.start,Se=le.end;if(Se===void 0&&(Se=xe),"selectionStart"in q)q.selectionStart=xe,q.selectionEnd=Math.min(Se,q.value.length);else{var Re=q.ownerDocument||document,be=Re&&Re.defaultView||window;if(be.getSelection){var ve=be.getSelection(),lt=q.textContent.length,nt=Math.min(le.start,lt),Wt=le.end===void 0?nt:Math.min(le.end,lt);!ve.extend&&nt>Wt&&(D=Wt,Wt=nt,nt=D);var fe=Yc(q,nt),ue=Yc(q,Wt);if(fe&&ue&&(ve.rangeCount!==1||ve.anchorNode!==fe.node||ve.anchorOffset!==fe.offset||ve.focusNode!==ue.node||ve.focusOffset!==ue.offset)){var ge=Re.createRange();ge.setStart(fe.node,fe.offset),ve.removeAllRanges(),nt>Wt?(ve.addRange(ge),ve.extend(ue.node,ue.offset)):(ge.setEnd(ue.node,ue.offset),ve.addRange(ge))}}}}for(Re=[],ve=q;ve=ve.parentNode;)ve.nodeType===1&&Re.push({element:ve,left:ve.scrollLeft,top:ve.scrollTop});for(typeof q.focus=="function"&&q.focus(),q=0;q<Re.length;q++){var ke=Re[q];ke.element.scrollLeft=ke.left,ke.element.scrollTop=ke.top}}Wm=!!og,cg=og=null}finally{Ft=y,oe.p=m,K.T=c}}s.current=i,ha=2}}function cv(){if(ha===2){ha=0;var s=Li,i=Ro,c=(i.flags&8772)!==0;if((i.subtreeFlags&8772)!==0||c){c=K.T,K.T=null;var m=oe.p;oe.p=2;var y=Ft;Ft|=4;try{$b(s,i.alternate,i)}finally{Ft=y,oe.p=m,K.T=c}}ha=3}}function dv(){if(ha===4||ha===3){ha=0,Te();var s=Li,i=Ro,c=Ao,m=Qb;(i.subtreeFlags&10256)!==0||(i.flags&10256)!==0?ha=5:(ha=0,Ro=Li=null,uv(s,s.pendingLanes));var y=s.pendingLanes;if(y===0&&(Pi=null),_n(c),i=i.stateNode,ce&&typeof ce.onCommitFiberRoot=="function")try{ce.onCommitFiberRoot(ct,i,void 0,(i.current.flags&128)===128)}catch{}if(m!==null){i=K.T,y=oe.p,oe.p=2,K.T=null;try{for(var j=s.onRecoverableError,D=0;D<m.length;D++){var q=m[D];j(q.value,{componentStack:q.stack})}}finally{K.T=i,oe.p=y}}(Ao&3)!==0&&Lm(),ar(s),y=s.pendingLanes,(c&4194090)!==0&&(y&42)!==0?s===Wp?pd++:(pd=0,Wp=s):pd=0,gd(0)}}function uv(s,i){(s.pooledCacheLanes&=i)===0&&(i=s.pooledCache,i!=null&&(s.pooledCache=null,Kc(i)))}function Lm(s){return ov(),cv(),dv(),mv()}function mv(){if(ha!==5)return!1;var s=Li,i=Vp;Vp=0;var c=_n(Ao),m=K.T,y=oe.p;try{oe.p=32>c?32:c,K.T=null,c=Zp,Zp=null;var j=Li,D=Ao;if(ha=0,Ro=Li=null,Ao=0,(Ft&6)!==0)throw Error(r(331));var q=Ft;if(Ft|=4,Kb(j.current),Vb(j,j.current,D,c),Ft=q,gd(0,!1),ce&&typeof ce.onPostCommitFiberRoot=="function")try{ce.onPostCommitFiberRoot(ct,j)}catch{}return!0}finally{oe.p=y,K.T=m,uv(s,i)}}function hv(s,i,c){i=Ca(c,i),i=Cp(s.stateNode,i,2),s=Ci(s,i,2),s!==null&&($e(s,2),ar(s))}function Xt(s,i,c){if(s.tag===3)hv(s,s,c);else for(;i!==null;){if(i.tag===3){hv(i,s,c);break}else if(i.tag===1){var m=i.stateNode;if(typeof i.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Pi===null||!Pi.has(m))){s=Ca(c,s),c=xb(2),m=Ci(i,c,2),m!==null&&(yb(c,m,i,s),$e(m,2),ar(m));break}}i=i.return}}function Xp(s,i,c){var m=s.pingCache;if(m===null){m=s.pingCache=new vS;var y=new Set;m.set(i,y)}else y=m.get(i),y===void 0&&(y=new Set,m.set(i,y));y.has(c)||(Up=!0,y.add(c),s=SS.bind(null,s,i,c),i.then(s,s))}function SS(s,i,c){var m=s.pingCache;m!==null&&m.delete(i),s.pingedLanes|=s.suspendedLanes&c,s.warmLanes&=~c,sn===s&&(Tt&c)===c&&(Cn===4||Cn===3&&(Tt&62914560)===Tt&&300>Fe()-Yp?(Ft&2)===0&&Do(s,0):Hp|=c,Mo===Tt&&(Mo=0)),ar(s)}function fv(s,i){i===0&&(i=ne()),s=vi(s,i),s!==null&&($e(s,i),ar(s))}function CS(s){var i=s.memoizedState,c=0;i!==null&&(c=i.retryLane),fv(s,c)}function kS(s,i){var c=0;switch(s.tag){case 13:var m=s.stateNode,y=s.memoizedState;y!==null&&(c=y.retryLane);break;case 19:m=s.stateNode;break;case 22:m=s.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(i),fv(s,c)}function TS(s,i){return at(s,i)}var zm=null,Po=null,Jp=!1,Im=!1,eg=!1,Al=0;function ar(s){s!==Po&&s.next===null&&(Po===null?zm=Po=s:Po=Po.next=s),Im=!0,Jp||(Jp=!0,MS())}function gd(s,i){if(!eg&&Im){eg=!0;do for(var c=!1,m=zm;m!==null;){if(s!==0){var y=m.pendingLanes;if(y===0)var j=0;else{var D=m.suspendedLanes,q=m.pingedLanes;j=(1<<31-Le(42|s)+1)-1,j&=y&~(D&~q),j=j&201326741?j&201326741|1:j?j|2:0}j!==0&&(c=!0,yv(m,j))}else j=Tt,j=la(m,m===sn?j:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(j&3)===0||Mn(m,j)||(c=!0,yv(m,j));m=m.next}while(c);eg=!1}}function ES(){pv()}function pv(){Im=Jp=!1;var s=0;Al!==0&&(IS()&&(s=Al),Al=0);for(var i=Fe(),c=null,m=zm;m!==null;){var y=m.next,j=gv(m,i);j===0?(m.next=null,c===null?zm=y:c.next=y,y===null&&(Po=c)):(c=m,(s!==0||(j&3)!==0)&&(Im=!0)),m=y}gd(s)}function gv(s,i){for(var c=s.suspendedLanes,m=s.pingedLanes,y=s.expirationTimes,j=s.pendingLanes&-62914561;0<j;){var D=31-Le(j),q=1<<D,le=y[D];le===-1?((q&c)===0||(q&m)!==0)&&(y[D]=he(q,i)):le<=i&&(s.expiredLanes|=q),j&=~q}if(i=sn,c=Tt,c=la(s,s===i?c:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m=s.callbackNode,c===0||s===i&&(Ut===2||Ut===9)||s.cancelPendingCommit!==null)return m!==null&&m!==null&&Je(m),s.callbackNode=null,s.callbackPriority=0;if((c&3)===0||Mn(s,c)){if(i=c&-c,i===s.callbackPriority)return i;switch(m!==null&&Je(m),_n(c)){case 2:case 8:c=ut;break;case 32:c=Ee;break;case 268435456:c=qe;break;default:c=Ee}return m=xv.bind(null,s),c=at(c,m),s.callbackPriority=i,s.callbackNode=c,i}return m!==null&&m!==null&&Je(m),s.callbackPriority=2,s.callbackNode=null,2}function xv(s,i){if(ha!==0&&ha!==5)return s.callbackNode=null,s.callbackPriority=0,null;var c=s.callbackNode;if(Lm()&&s.callbackNode!==c)return null;var m=Tt;return m=la(s,s===sn?m:0,s.cancelPendingCommit!==null||s.timeoutHandle!==-1),m===0?null:(Jb(s,m,i),gv(s,Fe()),s.callbackNode!=null&&s.callbackNode===c?xv.bind(null,s):null)}function yv(s,i){if(Lm())return null;Jb(s,i,!0)}function MS(){$S(function(){(Ft&6)!==0?at(Nt,ES):pv()})}function tg(){return Al===0&&(Al=tt()),Al}function bv(s){return s==null||typeof s=="symbol"||typeof s=="boolean"?null:typeof s=="function"?s:li(""+s)}function vv(s,i){var c=i.ownerDocument.createElement("input");return c.name=i.name,c.value=i.value,s.id&&c.setAttribute("form",s.id),i.parentNode.insertBefore(c,i),s=new FormData(s),c.parentNode.removeChild(c),s}function RS(s,i,c,m,y){if(i==="submit"&&c&&c.stateNode===y){var j=bv((y[Qt]||null).action),D=m.submitter;D&&(i=(i=D[Qt]||null)?bv(i.formAction):D.getAttribute("formAction"),i!==null&&(j=i,D=null));var q=new ul("action","action",null,m,y);s.push({event:q,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(Al!==0){var le=D?vv(y,D):new FormData(y);jp(c,{pending:!0,data:le,method:y.method,action:j},null,le)}}else typeof j=="function"&&(q.preventDefault(),le=D?vv(y,D):new FormData(y),jp(c,{pending:!0,data:le,method:y.method,action:j},j,le))},currentTarget:y}]})}}for(var ng=0;ng<Dr.length;ng++){var ag=Dr[ng],AS=ag.toLowerCase(),DS=ag[0].toUpperCase()+ag.slice(1);Ka(AS,"on"+DS)}Ka(nm,"onAnimationEnd"),Ka(Wa,"onAnimationIteration"),Ka(yl,"onAnimationStart"),Ka("dblclick","onDoubleClick"),Ka("focusin","onFocus"),Ka("focusout","onBlur"),Ka(Gf,"onTransitionRun"),Ka(po,"onTransitionStart"),Ka(Qf,"onTransitionCancel"),Ka(Vc,"onTransitionEnd"),jr("onMouseEnter",["mouseout","mouseover"]),jr("onMouseLeave",["mouseout","mouseover"]),jr("onPointerEnter",["pointerout","pointerover"]),jr("onPointerLeave",["pointerout","pointerover"]),vr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),vr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),vr("onBeforeInput",["compositionend","keypress","textInput","paste"]),vr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),vr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xd="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),OS=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xd));function jv(s,i){i=(i&4)!==0;for(var c=0;c<s.length;c++){var m=s[c],y=m.event;m=m.listeners;e:{var j=void 0;if(i)for(var D=m.length-1;0<=D;D--){var q=m[D],le=q.instance,xe=q.currentTarget;if(q=q.listener,le!==j&&y.isPropagationStopped())break e;j=q,y.currentTarget=xe;try{j(y)}catch(Se){Sm(Se)}y.currentTarget=null,j=le}else for(D=0;D<m.length;D++){if(q=m[D],le=q.instance,xe=q.currentTarget,q=q.listener,le!==j&&y.isPropagationStopped())break e;j=q,y.currentTarget=xe;try{j(y)}catch(Se){Sm(Se)}y.currentTarget=null,j=le}}}}function jt(s,i){var c=i[Hn];c===void 0&&(c=i[Hn]=new Set);var m=s+"__bubble";c.has(m)||(wv(i,s,2,!1),c.add(m))}function sg(s,i,c){var m=0;i&&(m|=4),wv(c,s,m,i)}var Bm="_reactListening"+Math.random().toString(36).slice(2);function rg(s){if(!s[Bm]){s[Bm]=!0,Lu.forEach(function(c){c!=="selectionchange"&&(OS.has(c)||sg(c,!1,s),sg(c,!0,s))});var i=s.nodeType===9?s:s.ownerDocument;i===null||i[Bm]||(i[Bm]=!0,sg("selectionchange",!1,i))}}function wv(s,i,c,m){switch(Vv(i)){case 2:var y=lC;break;case 8:y=oC;break;default:y=bg}c=y.bind(null,i,c,s),y=void 0,!dl||i!=="touchstart"&&i!=="touchmove"&&i!=="wheel"||(y=!0),m?y!==void 0?s.addEventListener(i,c,{capture:!0,passive:y}):s.addEventListener(i,c,!0):y!==void 0?s.addEventListener(i,c,{passive:y}):s.addEventListener(i,c,!1)}function ig(s,i,c,m,y){var j=m;if((i&1)===0&&(i&2)===0&&m!==null)e:for(;;){if(m===null)return;var D=m.tag;if(D===3||D===4){var q=m.stateNode.containerInfo;if(q===y)break;if(D===4)for(D=m.return;D!==null;){var le=D.tag;if((le===3||le===4)&&D.stateNode.containerInfo===y)return;D=D.return}for(;q!==null;){if(D=Vs(q),D===null)return;if(le=D.tag,le===5||le===6||le===26||le===27){m=j=D;continue e}q=q.parentNode}}m=m.return}qa(function(){var xe=j,Se=oi(c),Re=[];e:{var be=am.get(s);if(be!==void 0){var ve=ul,lt=s;switch(s){case"keypress":if(Sn(c)===0)break e;case"keydown":case"keyup":ve=Uf;break;case"focusin":lt="focus",ve=Lc;break;case"focusout":lt="blur",ve=Lc;break;case"beforeblur":case"afterblur":ve=Lc;break;case"click":if(c.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ve=ui;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ve=zf;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ve=qf;break;case nm:case Wa:case yl:ve=If;break;case Vc:ve=Yf;break;case"scroll":case"scrollend":ve=Lf;break;case"wheel":ve=Zu;break;case"copy":case"cut":case"paste":ve=zc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ve=Bc;break;case"toggle":case"beforetoggle":ve=Er}var nt=(i&4)!==0,Wt=!nt&&(s==="scroll"||s==="scrollend"),fe=nt?be!==null?be+"Capture":null:be;nt=[];for(var ue=xe,ge;ue!==null;){var ke=ue;if(ge=ke.stateNode,ke=ke.tag,ke!==5&&ke!==26&&ke!==27||ge===null||fe===null||(ke=Dt(ue,fe),ke!=null&&nt.push(yd(ue,ke,ge))),Wt)break;ue=ue.return}0<nt.length&&(be=new ve(be,lt,null,c,Se),Re.push({event:be,listeners:nt}))}}if((i&7)===0){e:{if(be=s==="mouseover"||s==="pointerover",ve=s==="mouseout"||s==="pointerout",be&&c!==cl&&(lt=c.relatedTarget||c.fromElement)&&(Vs(lt)||lt[Jn]))break e;if((ve||be)&&(be=Se.window===Se?Se:(be=Se.ownerDocument)?be.defaultView||be.parentWindow:window,ve?(lt=c.relatedTarget||c.toElement,ve=xe,lt=lt?Vs(lt):null,lt!==null&&(Wt=d(lt),nt=lt.tag,lt!==Wt||nt!==5&&nt!==27&&nt!==6)&&(lt=null)):(ve=null,lt=xe),ve!==lt)){if(nt=ui,ke="onMouseLeave",fe="onMouseEnter",ue="mouse",(s==="pointerout"||s==="pointerover")&&(nt=Bc,ke="onPointerLeave",fe="onPointerEnter",ue="pointer"),Wt=ve==null?be:cs(ve),ge=lt==null?be:cs(lt),be=new nt(ke,ue+"leave",ve,c,Se),be.target=Wt,be.relatedTarget=ge,ke=null,Vs(Se)===xe&&(nt=new nt(fe,ue+"enter",lt,c,Se),nt.target=ge,nt.relatedTarget=Wt,ke=nt),Wt=ke,ve&&lt)t:{for(nt=ve,fe=lt,ue=0,ge=nt;ge;ge=Lo(ge))ue++;for(ge=0,ke=fe;ke;ke=Lo(ke))ge++;for(;0<ue-ge;)nt=Lo(nt),ue--;for(;0<ge-ue;)fe=Lo(fe),ge--;for(;ue--;){if(nt===fe||fe!==null&&nt===fe.alternate)break t;nt=Lo(nt),fe=Lo(fe)}nt=null}else nt=null;ve!==null&&Nv(Re,be,ve,nt,!1),lt!==null&&Wt!==null&&Nv(Re,Wt,lt,nt,!0)}}e:{if(be=xe?cs(xe):window,ve=be.nodeName&&be.nodeName.toLowerCase(),ve==="select"||ve==="input"&&be.type==="file")var Ze=fi;else if(Rr(be))if(Uc)Ze=Kf;else{Ze=Wf;var bt=qc}else ve=be.nodeName,!ve||ve.toLowerCase()!=="input"||be.type!=="checkbox"&&be.type!=="radio"?xe&&ol(xe.elementType)&&(Ze=fi):Ze=As;if(Ze&&(Ze=Ze(s,xe))){Xu(Re,Ze,c,Se);break e}bt&&bt(s,be,xe),s==="focusout"&&xe&&be.type==="number"&&xe.memoizedProps.value!=null&&ri(be,"number",be.value)}switch(bt=xe?cs(xe):window,s){case"focusin":(Rr(bt)||bt.contentEditable==="true")&&(Za=bt,xi=xe,Ar=null);break;case"focusout":Ar=xi=Za=null;break;case"mousedown":ho=!0;break;case"contextmenu":case"mouseup":case"dragend":ho=!1,em(Re,c,Se);break;case"selectionchange":if(mo)break;case"keydown":case"keyup":em(Re,c,Se)}var Xe;if(Mr)e:{switch(s){case"compositionstart":var st="onCompositionStart";break e;case"compositionend":st="onCompositionEnd";break e;case"compositionupdate":st="onCompositionUpdate";break e}st=void 0}else mi?oo(s,c)&&(st="onCompositionEnd"):s==="keydown"&&c.keyCode===229&&(st="onCompositionStart");st&&(Fc&&c.locale!=="ko"&&(mi||st!=="onCompositionStart"?st==="onCompositionEnd"&&mi&&(Xe=di()):(ms=Se,Ms="value"in ms?ms.value:ms.textContent,mi=!0)),bt=$m(xe,st),0<bt.length&&(st=new Ya(st,s,null,c,Se),Re.push({event:st,listeners:bt}),Xe?st.data=Xe:(Xe=Gu(c),Xe!==null&&(st.data=Xe)))),(Xe=Wu?Qu(s,c):Zf(s,c))&&(st=$m(xe,"onBeforeInput"),0<st.length&&(bt=new Ya("onBeforeInput","beforeinput",null,c,Se),Re.push({event:bt,listeners:st}),bt.data=Xe)),RS(Re,s,xe,c,Se)}jv(Re,i)})}function yd(s,i,c){return{instance:s,listener:i,currentTarget:c}}function $m(s,i){for(var c=i+"Capture",m=[];s!==null;){var y=s,j=y.stateNode;if(y=y.tag,y!==5&&y!==26&&y!==27||j===null||(y=Dt(s,c),y!=null&&m.unshift(yd(s,y,j)),y=Dt(s,i),y!=null&&m.push(yd(s,y,j))),s.tag===3)return m;s=s.return}return[]}function Lo(s){if(s===null)return null;do s=s.return;while(s&&s.tag!==5&&s.tag!==27);return s||null}function Nv(s,i,c,m,y){for(var j=i._reactName,D=[];c!==null&&c!==m;){var q=c,le=q.alternate,xe=q.stateNode;if(q=q.tag,le!==null&&le===m)break;q!==5&&q!==26&&q!==27||xe===null||(le=xe,y?(xe=Dt(c,j),xe!=null&&D.unshift(yd(c,xe,le))):y||(xe=Dt(c,j),xe!=null&&D.push(yd(c,xe,le)))),c=c.return}D.length!==0&&s.push({event:i,listeners:D})}var PS=/\r\n?/g,LS=/\u0000|\uFFFD/g;function _v(s){return(typeof s=="string"?s:""+s).replace(PS,`
`).replace(LS,"")}function Sv(s,i){return i=_v(i),_v(s)===i}function Fm(){}function Zt(s,i,c,m,y,j){switch(c){case"children":typeof m=="string"?i==="body"||i==="textarea"&&m===""||ds(s,m):(typeof m=="number"||typeof m=="bigint")&&i!=="body"&&ds(s,""+m);break;case"className":eo(s,"class",m);break;case"tabIndex":eo(s,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":eo(s,c,m);break;case"style":ii(s,m,j);break;case"data":if(i!=="object"){eo(s,"data",m);break}case"src":case"href":if(m===""&&(i!=="a"||c!=="href")){s.removeAttribute(c);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(c);break}m=li(""+m),s.setAttribute(c,m);break;case"action":case"formAction":if(typeof m=="function"){s.setAttribute(c,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof j=="function"&&(c==="formAction"?(i!=="input"&&Zt(s,i,"name",y.name,y,null),Zt(s,i,"formEncType",y.formEncType,y,null),Zt(s,i,"formMethod",y.formMethod,y,null),Zt(s,i,"formTarget",y.formTarget,y,null)):(Zt(s,i,"encType",y.encType,y,null),Zt(s,i,"method",y.method,y,null),Zt(s,i,"target",y.target,y,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){s.removeAttribute(c);break}m=li(""+m),s.setAttribute(c,m);break;case"onClick":m!=null&&(s.onclick=Fm);break;case"onScroll":m!=null&&jt("scroll",s);break;case"onScrollEnd":m!=null&&jt("scrollend",s);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"multiple":s.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":s.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){s.removeAttribute("xlink:href");break}c=li(""+m),s.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",c);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,""+m):s.removeAttribute(c);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,""):s.removeAttribute(c);break;case"capture":case"download":m===!0?s.setAttribute(c,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?s.setAttribute(c,m):s.removeAttribute(c);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?s.setAttribute(c,m):s.removeAttribute(c);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?s.removeAttribute(c):s.setAttribute(c,m);break;case"popover":jt("beforetoggle",s),jt("toggle",s),Jl(s,"popover",m);break;case"xlinkActuate":Es(s,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Es(s,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Es(s,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Es(s,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Es(s,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Es(s,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Es(s,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Es(s,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Es(s,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":Jl(s,"is",m);break;case"innerText":case"textContent":break;default:(!(2<c.length)||c[0]!=="o"&&c[0]!=="O"||c[1]!=="n"&&c[1]!=="N")&&(c=Dc.get(c)||c,Jl(s,c,m))}}function lg(s,i,c,m,y,j){switch(c){case"style":ii(s,m,j);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(c=m.__html,c!=null){if(y.children!=null)throw Error(r(60));s.innerHTML=c}}break;case"children":typeof m=="string"?ds(s,m):(typeof m=="number"||typeof m=="bigint")&&ds(s,""+m);break;case"onScroll":m!=null&&jt("scroll",s);break;case"onScrollEnd":m!=null&&jt("scrollend",s);break;case"onClick":m!=null&&(s.onclick=Fm);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!zu.hasOwnProperty(c))e:{if(c[0]==="o"&&c[1]==="n"&&(y=c.endsWith("Capture"),i=c.slice(2,y?c.length-7:void 0),j=s[Qt]||null,j=j!=null?j[c]:null,typeof j=="function"&&s.removeEventListener(i,j,y),typeof m=="function")){typeof j!="function"&&j!==null&&(c in s?s[c]=null:s.hasAttribute(c)&&s.removeAttribute(c)),s.addEventListener(i,m,y);break e}c in s?s[c]=m:m===!0?s.setAttribute(c,""):Jl(s,c,m)}}}function fa(s,i,c){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":jt("error",s),jt("load",s);var m=!1,y=!1,j;for(j in c)if(c.hasOwnProperty(j)){var D=c[j];if(D!=null)switch(j){case"src":m=!0;break;case"srcSet":y=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Zt(s,i,j,D,c,null)}}y&&Zt(s,i,"srcSet",c.srcSet,c,null),m&&Zt(s,i,"src",c.src,c,null);return;case"input":jt("invalid",s);var q=j=D=y=null,le=null,xe=null;for(m in c)if(c.hasOwnProperty(m)){var Se=c[m];if(Se!=null)switch(m){case"name":y=Se;break;case"type":D=Se;break;case"checked":le=Se;break;case"defaultChecked":xe=Se;break;case"value":j=Se;break;case"defaultValue":q=Se;break;case"children":case"dangerouslySetInnerHTML":if(Se!=null)throw Error(r(137,i));break;default:Zt(s,i,m,Se,c,null)}}Bu(s,j,q,le,xe,D,y,!1),si(s);return;case"select":jt("invalid",s),m=D=j=null;for(y in c)if(c.hasOwnProperty(y)&&(q=c[y],q!=null))switch(y){case"value":j=q;break;case"defaultValue":D=q;break;case"multiple":m=q;default:Zt(s,i,y,q,c,null)}i=j,c=D,s.multiple=!!m,i!=null?Ra(s,!!m,i,!1):c!=null&&Ra(s,!!m,c,!0);return;case"textarea":jt("invalid",s),j=y=m=null;for(D in c)if(c.hasOwnProperty(D)&&(q=c[D],q!=null))switch(D){case"value":m=q;break;case"defaultValue":y=q;break;case"children":j=q;break;case"dangerouslySetInnerHTML":if(q!=null)throw Error(r(91));break;default:Zt(s,i,D,q,c,null)}Zs(s,m,y,j),si(s);return;case"option":for(le in c)if(c.hasOwnProperty(le)&&(m=c[le],m!=null))switch(le){case"selected":s.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:Zt(s,i,le,m,c,null)}return;case"dialog":jt("beforetoggle",s),jt("toggle",s),jt("cancel",s),jt("close",s);break;case"iframe":case"object":jt("load",s);break;case"video":case"audio":for(m=0;m<xd.length;m++)jt(xd[m],s);break;case"image":jt("error",s),jt("load",s);break;case"details":jt("toggle",s);break;case"embed":case"source":case"link":jt("error",s),jt("load",s);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(xe in c)if(c.hasOwnProperty(xe)&&(m=c[xe],m!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,i));default:Zt(s,i,xe,m,c,null)}return;default:if(ol(i)){for(Se in c)c.hasOwnProperty(Se)&&(m=c[Se],m!==void 0&&lg(s,i,Se,m,c,void 0));return}}for(q in c)c.hasOwnProperty(q)&&(m=c[q],m!=null&&Zt(s,i,q,m,c,null))}function zS(s,i,c,m){switch(i){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var y=null,j=null,D=null,q=null,le=null,xe=null,Se=null;for(ve in c){var Re=c[ve];if(c.hasOwnProperty(ve)&&Re!=null)switch(ve){case"checked":break;case"value":break;case"defaultValue":le=Re;default:m.hasOwnProperty(ve)||Zt(s,i,ve,null,m,Re)}}for(var be in m){var ve=m[be];if(Re=c[be],m.hasOwnProperty(be)&&(ve!=null||Re!=null))switch(be){case"type":j=ve;break;case"name":y=ve;break;case"checked":xe=ve;break;case"defaultChecked":Se=ve;break;case"value":D=ve;break;case"defaultValue":q=ve;break;case"children":case"dangerouslySetInnerHTML":if(ve!=null)throw Error(r(137,i));break;default:ve!==Re&&Zt(s,i,be,ve,m,Re)}}xa(s,D,q,le,xe,Se,j,y);return;case"select":ve=D=q=be=null;for(j in c)if(le=c[j],c.hasOwnProperty(j)&&le!=null)switch(j){case"value":break;case"multiple":ve=le;default:m.hasOwnProperty(j)||Zt(s,i,j,null,m,le)}for(y in m)if(j=m[y],le=c[y],m.hasOwnProperty(y)&&(j!=null||le!=null))switch(y){case"value":be=j;break;case"defaultValue":q=j;break;case"multiple":D=j;default:j!==le&&Zt(s,i,y,j,m,le)}i=q,c=D,m=ve,be!=null?Ra(s,!!c,be,!1):!!m!=!!c&&(i!=null?Ra(s,!!c,i,!0):Ra(s,!!c,c?[]:"",!1));return;case"textarea":ve=be=null;for(q in c)if(y=c[q],c.hasOwnProperty(q)&&y!=null&&!m.hasOwnProperty(q))switch(q){case"value":break;case"children":break;default:Zt(s,i,q,null,m,y)}for(D in m)if(y=m[D],j=c[D],m.hasOwnProperty(D)&&(y!=null||j!=null))switch(D){case"value":be=y;break;case"defaultValue":ve=y;break;case"children":break;case"dangerouslySetInnerHTML":if(y!=null)throw Error(r(91));break;default:y!==j&&Zt(s,i,D,y,m,j)}pn(s,be,ve);return;case"option":for(var lt in c)if(be=c[lt],c.hasOwnProperty(lt)&&be!=null&&!m.hasOwnProperty(lt))switch(lt){case"selected":s.selected=!1;break;default:Zt(s,i,lt,null,m,be)}for(le in m)if(be=m[le],ve=c[le],m.hasOwnProperty(le)&&be!==ve&&(be!=null||ve!=null))switch(le){case"selected":s.selected=be&&typeof be!="function"&&typeof be!="symbol";break;default:Zt(s,i,le,be,m,ve)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var nt in c)be=c[nt],c.hasOwnProperty(nt)&&be!=null&&!m.hasOwnProperty(nt)&&Zt(s,i,nt,null,m,be);for(xe in m)if(be=m[xe],ve=c[xe],m.hasOwnProperty(xe)&&be!==ve&&(be!=null||ve!=null))switch(xe){case"children":case"dangerouslySetInnerHTML":if(be!=null)throw Error(r(137,i));break;default:Zt(s,i,xe,be,m,ve)}return;default:if(ol(i)){for(var Wt in c)be=c[Wt],c.hasOwnProperty(Wt)&&be!==void 0&&!m.hasOwnProperty(Wt)&&lg(s,i,Wt,void 0,m,be);for(Se in m)be=m[Se],ve=c[Se],!m.hasOwnProperty(Se)||be===ve||be===void 0&&ve===void 0||lg(s,i,Se,be,m,ve);return}}for(var fe in c)be=c[fe],c.hasOwnProperty(fe)&&be!=null&&!m.hasOwnProperty(fe)&&Zt(s,i,fe,null,m,be);for(Re in m)be=m[Re],ve=c[Re],!m.hasOwnProperty(Re)||be===ve||be==null&&ve==null||Zt(s,i,Re,be,m,ve)}var og=null,cg=null;function Um(s){return s.nodeType===9?s:s.ownerDocument}function Cv(s){switch(s){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function kv(s,i){if(s===0)switch(i){case"svg":return 1;case"math":return 2;default:return 0}return s===1&&i==="foreignObject"?0:s}function dg(s,i){return s==="textarea"||s==="noscript"||typeof i.children=="string"||typeof i.children=="number"||typeof i.children=="bigint"||typeof i.dangerouslySetInnerHTML=="object"&&i.dangerouslySetInnerHTML!==null&&i.dangerouslySetInnerHTML.__html!=null}var ug=null;function IS(){var s=window.event;return s&&s.type==="popstate"?s===ug?!1:(ug=s,!0):(ug=null,!1)}var Tv=typeof setTimeout=="function"?setTimeout:void 0,BS=typeof clearTimeout=="function"?clearTimeout:void 0,Ev=typeof Promise=="function"?Promise:void 0,$S=typeof queueMicrotask=="function"?queueMicrotask:typeof Ev<"u"?function(s){return Ev.resolve(null).then(s).catch(FS)}:Tv;function FS(s){setTimeout(function(){throw s})}function Ii(s){return s==="head"}function Mv(s,i){var c=i,m=0,y=0;do{var j=c.nextSibling;if(s.removeChild(c),j&&j.nodeType===8)if(c=j.data,c==="/$"){if(0<m&&8>m){c=m;var D=s.ownerDocument;if(c&1&&bd(D.documentElement),c&2&&bd(D.body),c&4)for(c=D.head,bd(c),D=c.firstChild;D;){var q=D.nextSibling,le=D.nodeName;D[os]||le==="SCRIPT"||le==="STYLE"||le==="LINK"&&D.rel.toLowerCase()==="stylesheet"||c.removeChild(D),D=q}}if(y===0){s.removeChild(j),kd(i);return}y--}else c==="$"||c==="$?"||c==="$!"?y++:m=c.charCodeAt(0)-48;else m=0;c=j}while(c);kd(i)}function mg(s){var i=s.firstChild;for(i&&i.nodeType===10&&(i=i.nextSibling);i;){var c=i;switch(i=i.nextSibling,c.nodeName){case"HTML":case"HEAD":case"BODY":mg(c),Xl(c);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(c.rel.toLowerCase()==="stylesheet")continue}s.removeChild(c)}}function US(s,i,c,m){for(;s.nodeType===1;){var y=c;if(s.nodeName.toLowerCase()!==i.toLowerCase()){if(!m&&(s.nodeName!=="INPUT"||s.type!=="hidden"))break}else if(m){if(!s[os])switch(i){case"meta":if(!s.hasAttribute("itemprop"))break;return s;case"link":if(j=s.getAttribute("rel"),j==="stylesheet"&&s.hasAttribute("data-precedence"))break;if(j!==y.rel||s.getAttribute("href")!==(y.href==null||y.href===""?null:y.href)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin)||s.getAttribute("title")!==(y.title==null?null:y.title))break;return s;case"style":if(s.hasAttribute("data-precedence"))break;return s;case"script":if(j=s.getAttribute("src"),(j!==(y.src==null?null:y.src)||s.getAttribute("type")!==(y.type==null?null:y.type)||s.getAttribute("crossorigin")!==(y.crossOrigin==null?null:y.crossOrigin))&&j&&s.hasAttribute("async")&&!s.hasAttribute("itemprop"))break;return s;default:return s}}else if(i==="input"&&s.type==="hidden"){var j=y.name==null?null:""+y.name;if(y.type==="hidden"&&s.getAttribute("name")===j)return s}else return s;if(s=Ls(s.nextSibling),s===null)break}return null}function HS(s,i,c){if(i==="")return null;for(;s.nodeType!==3;)if((s.nodeType!==1||s.nodeName!=="INPUT"||s.type!=="hidden")&&!c||(s=Ls(s.nextSibling),s===null))return null;return s}function hg(s){return s.data==="$!"||s.data==="$?"&&s.ownerDocument.readyState==="complete"}function qS(s,i){var c=s.ownerDocument;if(s.data!=="$?"||c.readyState==="complete")i();else{var m=function(){i(),c.removeEventListener("DOMContentLoaded",m)};c.addEventListener("DOMContentLoaded",m),s._reactRetry=m}}function Ls(s){for(;s!=null;s=s.nextSibling){var i=s.nodeType;if(i===1||i===3)break;if(i===8){if(i=s.data,i==="$"||i==="$!"||i==="$?"||i==="F!"||i==="F")break;if(i==="/$")return null}}return s}var fg=null;function Rv(s){s=s.previousSibling;for(var i=0;s;){if(s.nodeType===8){var c=s.data;if(c==="$"||c==="$!"||c==="$?"){if(i===0)return s;i--}else c==="/$"&&i++}s=s.previousSibling}return null}function Av(s,i,c){switch(i=Um(c),s){case"html":if(s=i.documentElement,!s)throw Error(r(452));return s;case"head":if(s=i.head,!s)throw Error(r(453));return s;case"body":if(s=i.body,!s)throw Error(r(454));return s;default:throw Error(r(451))}}function bd(s){for(var i=s.attributes;i.length;)s.removeAttributeNode(i[0]);Xl(s)}var bs=new Map,Dv=new Set;function Hm(s){return typeof s.getRootNode=="function"?s.getRootNode():s.nodeType===9?s:s.ownerDocument}var Yr=oe.d;oe.d={f:YS,r:VS,D:ZS,C:WS,L:KS,m:GS,X:XS,S:QS,M:JS};function YS(){var s=Yr.f(),i=Om();return s||i}function VS(s){var i=yr(s);i!==null&&i.tag===5&&i.type==="form"?Jy(i):Yr.r(s)}var zo=typeof document>"u"?null:document;function Ov(s,i,c){var m=zo;if(m&&typeof i=="string"&&i){var y=da(i);y='link[rel="'+s+'"][href="'+y+'"]',typeof c=="string"&&(y+='[crossorigin="'+c+'"]'),Dv.has(y)||(Dv.add(y),s={rel:s,crossOrigin:c,href:i},m.querySelector(y)===null&&(i=m.createElement("link"),fa(i,"link",s),qn(i),m.head.appendChild(i)))}}function ZS(s){Yr.D(s),Ov("dns-prefetch",s,null)}function WS(s,i){Yr.C(s,i),Ov("preconnect",s,i)}function KS(s,i,c){Yr.L(s,i,c);var m=zo;if(m&&s&&i){var y='link[rel="preload"][as="'+da(i)+'"]';i==="image"&&c&&c.imageSrcSet?(y+='[imagesrcset="'+da(c.imageSrcSet)+'"]',typeof c.imageSizes=="string"&&(y+='[imagesizes="'+da(c.imageSizes)+'"]')):y+='[href="'+da(s)+'"]';var j=y;switch(i){case"style":j=Io(s);break;case"script":j=Bo(s)}bs.has(j)||(s=v({rel:"preload",href:i==="image"&&c&&c.imageSrcSet?void 0:s,as:i},c),bs.set(j,s),m.querySelector(y)!==null||i==="style"&&m.querySelector(vd(j))||i==="script"&&m.querySelector(jd(j))||(i=m.createElement("link"),fa(i,"link",s),qn(i),m.head.appendChild(i)))}}function GS(s,i){Yr.m(s,i);var c=zo;if(c&&s){var m=i&&typeof i.as=="string"?i.as:"script",y='link[rel="modulepreload"][as="'+da(m)+'"][href="'+da(s)+'"]',j=y;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":j=Bo(s)}if(!bs.has(j)&&(s=v({rel:"modulepreload",href:s},i),bs.set(j,s),c.querySelector(y)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(c.querySelector(jd(j)))return}m=c.createElement("link"),fa(m,"link",s),qn(m),c.head.appendChild(m)}}}function QS(s,i,c){Yr.S(s,i,c);var m=zo;if(m&&s){var y=br(m).hoistableStyles,j=Io(s);i=i||"default";var D=y.get(j);if(!D){var q={loading:0,preload:null};if(D=m.querySelector(vd(j)))q.loading=5;else{s=v({rel:"stylesheet",href:s,"data-precedence":i},c),(c=bs.get(j))&&pg(s,c);var le=D=m.createElement("link");qn(le),fa(le,"link",s),le._p=new Promise(function(xe,Se){le.onload=xe,le.onerror=Se}),le.addEventListener("load",function(){q.loading|=1}),le.addEventListener("error",function(){q.loading|=2}),q.loading|=4,qm(D,i,m)}D={type:"stylesheet",instance:D,count:1,state:q},y.set(j,D)}}}function XS(s,i){Yr.X(s,i);var c=zo;if(c&&s){var m=br(c).hoistableScripts,y=Bo(s),j=m.get(y);j||(j=c.querySelector(jd(y)),j||(s=v({src:s,async:!0},i),(i=bs.get(y))&&gg(s,i),j=c.createElement("script"),qn(j),fa(j,"link",s),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},m.set(y,j))}}function JS(s,i){Yr.M(s,i);var c=zo;if(c&&s){var m=br(c).hoistableScripts,y=Bo(s),j=m.get(y);j||(j=c.querySelector(jd(y)),j||(s=v({src:s,async:!0,type:"module"},i),(i=bs.get(y))&&gg(s,i),j=c.createElement("script"),qn(j),fa(j,"link",s),c.head.appendChild(j)),j={type:"script",instance:j,count:1,state:null},m.set(y,j))}}function Pv(s,i,c,m){var y=(y=me.current)?Hm(y):null;if(!y)throw Error(r(446));switch(s){case"meta":case"title":return null;case"style":return typeof c.precedence=="string"&&typeof c.href=="string"?(i=Io(c.href),c=br(y).hoistableStyles,m=c.get(i),m||(m={type:"style",instance:null,count:0,state:null},c.set(i,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(c.rel==="stylesheet"&&typeof c.href=="string"&&typeof c.precedence=="string"){s=Io(c.href);var j=br(y).hoistableStyles,D=j.get(s);if(D||(y=y.ownerDocument||y,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},j.set(s,D),(j=y.querySelector(vd(s)))&&!j._p&&(D.instance=j,D.state.loading=5),bs.has(s)||(c={rel:"preload",as:"style",href:c.href,crossOrigin:c.crossOrigin,integrity:c.integrity,media:c.media,hrefLang:c.hrefLang,referrerPolicy:c.referrerPolicy},bs.set(s,c),j||eC(y,s,c,D.state))),i&&m===null)throw Error(r(528,""));return D}if(i&&m!==null)throw Error(r(529,""));return null;case"script":return i=c.async,c=c.src,typeof c=="string"&&i&&typeof i!="function"&&typeof i!="symbol"?(i=Bo(c),c=br(y).hoistableScripts,m=c.get(i),m||(m={type:"script",instance:null,count:0,state:null},c.set(i,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,s))}}function Io(s){return'href="'+da(s)+'"'}function vd(s){return'link[rel="stylesheet"]['+s+"]"}function Lv(s){return v({},s,{"data-precedence":s.precedence,precedence:null})}function eC(s,i,c,m){s.querySelector('link[rel="preload"][as="style"]['+i+"]")?m.loading=1:(i=s.createElement("link"),m.preload=i,i.addEventListener("load",function(){return m.loading|=1}),i.addEventListener("error",function(){return m.loading|=2}),fa(i,"link",c),qn(i),s.head.appendChild(i))}function Bo(s){return'[src="'+da(s)+'"]'}function jd(s){return"script[async]"+s}function zv(s,i,c){if(i.count++,i.instance===null)switch(i.type){case"style":var m=s.querySelector('style[data-href~="'+da(c.href)+'"]');if(m)return i.instance=m,qn(m),m;var y=v({},c,{"data-href":c.href,"data-precedence":c.precedence,href:null,precedence:null});return m=(s.ownerDocument||s).createElement("style"),qn(m),fa(m,"style",y),qm(m,c.precedence,s),i.instance=m;case"stylesheet":y=Io(c.href);var j=s.querySelector(vd(y));if(j)return i.state.loading|=4,i.instance=j,qn(j),j;m=Lv(c),(y=bs.get(y))&&pg(m,y),j=(s.ownerDocument||s).createElement("link"),qn(j);var D=j;return D._p=new Promise(function(q,le){D.onload=q,D.onerror=le}),fa(j,"link",m),i.state.loading|=4,qm(j,c.precedence,s),i.instance=j;case"script":return j=Bo(c.src),(y=s.querySelector(jd(j)))?(i.instance=y,qn(y),y):(m=c,(y=bs.get(j))&&(m=v({},c),gg(m,y)),s=s.ownerDocument||s,y=s.createElement("script"),qn(y),fa(y,"link",m),s.head.appendChild(y),i.instance=y);case"void":return null;default:throw Error(r(443,i.type))}else i.type==="stylesheet"&&(i.state.loading&4)===0&&(m=i.instance,i.state.loading|=4,qm(m,c.precedence,s));return i.instance}function qm(s,i,c){for(var m=c.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),y=m.length?m[m.length-1]:null,j=y,D=0;D<m.length;D++){var q=m[D];if(q.dataset.precedence===i)j=q;else if(j!==y)break}j?j.parentNode.insertBefore(s,j.nextSibling):(i=c.nodeType===9?c.head:c,i.insertBefore(s,i.firstChild))}function pg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.title==null&&(s.title=i.title)}function gg(s,i){s.crossOrigin==null&&(s.crossOrigin=i.crossOrigin),s.referrerPolicy==null&&(s.referrerPolicy=i.referrerPolicy),s.integrity==null&&(s.integrity=i.integrity)}var Ym=null;function Iv(s,i,c){if(Ym===null){var m=new Map,y=Ym=new Map;y.set(c,m)}else y=Ym,m=y.get(c),m||(m=new Map,y.set(c,m));if(m.has(s))return m;for(m.set(s,null),c=c.getElementsByTagName(s),y=0;y<c.length;y++){var j=c[y];if(!(j[os]||j[Gt]||s==="link"&&j.getAttribute("rel")==="stylesheet")&&j.namespaceURI!=="http://www.w3.org/2000/svg"){var D=j.getAttribute(i)||"";D=s+D;var q=m.get(D);q?q.push(j):m.set(D,[j])}}return m}function Bv(s,i,c){s=s.ownerDocument||s,s.head.insertBefore(c,i==="title"?s.querySelector("head > title"):null)}function tC(s,i,c){if(c===1||i.itemProp!=null)return!1;switch(s){case"meta":case"title":return!0;case"style":if(typeof i.precedence!="string"||typeof i.href!="string"||i.href==="")break;return!0;case"link":if(typeof i.rel!="string"||typeof i.href!="string"||i.href===""||i.onLoad||i.onError)break;switch(i.rel){case"stylesheet":return s=i.disabled,typeof i.precedence=="string"&&s==null;default:return!0}case"script":if(i.async&&typeof i.async!="function"&&typeof i.async!="symbol"&&!i.onLoad&&!i.onError&&i.src&&typeof i.src=="string")return!0}return!1}function $v(s){return!(s.type==="stylesheet"&&(s.state.loading&3)===0)}var wd=null;function nC(){}function aC(s,i,c){if(wd===null)throw Error(r(475));var m=wd;if(i.type==="stylesheet"&&(typeof c.media!="string"||matchMedia(c.media).matches!==!1)&&(i.state.loading&4)===0){if(i.instance===null){var y=Io(c.href),j=s.querySelector(vd(y));if(j){s=j._p,s!==null&&typeof s=="object"&&typeof s.then=="function"&&(m.count++,m=Vm.bind(m),s.then(m,m)),i.state.loading|=4,i.instance=j,qn(j);return}j=s.ownerDocument||s,c=Lv(c),(y=bs.get(y))&&pg(c,y),j=j.createElement("link"),qn(j);var D=j;D._p=new Promise(function(q,le){D.onload=q,D.onerror=le}),fa(j,"link",c),i.instance=j}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(i,s),(s=i.state.preload)&&(i.state.loading&3)===0&&(m.count++,i=Vm.bind(m),s.addEventListener("load",i),s.addEventListener("error",i))}}function sC(){if(wd===null)throw Error(r(475));var s=wd;return s.stylesheets&&s.count===0&&xg(s,s.stylesheets),0<s.count?function(i){var c=setTimeout(function(){if(s.stylesheets&&xg(s,s.stylesheets),s.unsuspend){var m=s.unsuspend;s.unsuspend=null,m()}},6e4);return s.unsuspend=i,function(){s.unsuspend=null,clearTimeout(c)}}:null}function Vm(){if(this.count--,this.count===0){if(this.stylesheets)xg(this,this.stylesheets);else if(this.unsuspend){var s=this.unsuspend;this.unsuspend=null,s()}}}var Zm=null;function xg(s,i){s.stylesheets=null,s.unsuspend!==null&&(s.count++,Zm=new Map,i.forEach(rC,s),Zm=null,Vm.call(s))}function rC(s,i){if(!(i.state.loading&4)){var c=Zm.get(s);if(c)var m=c.get(null);else{c=new Map,Zm.set(s,c);for(var y=s.querySelectorAll("link[data-precedence],style[data-precedence]"),j=0;j<y.length;j++){var D=y[j];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(c.set(D.dataset.precedence,D),m=D)}m&&c.set(null,m)}y=i.instance,D=y.getAttribute("data-precedence"),j=c.get(D)||m,j===m&&c.set(null,y),c.set(D,y),this.count++,m=Vm.bind(this),y.addEventListener("load",m),y.addEventListener("error",m),j?j.parentNode.insertBefore(y,j.nextSibling):(s=s.nodeType===9?s.head:s,s.insertBefore(y,s.firstChild)),i.state.loading|=4}}var Nd={$$typeof:P,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function iC(s,i,c,m,y,j,D,q){this.tag=1,this.containerInfo=s,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Me(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Me(0),this.hiddenUpdates=Me(null),this.identifierPrefix=m,this.onUncaughtError=y,this.onCaughtError=j,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=q,this.incompleteTransitions=new Map}function Fv(s,i,c,m,y,j,D,q,le,xe,Se,Re){return s=new iC(s,i,c,D,q,le,xe,Re),i=1,j===!0&&(i|=24),j=Ta(3,null,null,i),s.current=j,j.stateNode=s,i=Xf(),i.refCount++,s.pooledCache=i,i.refCount++,j.memoizedState={element:m,isDehydrated:c,cache:i},np(j),s}function Uv(s){return s?(s=Lr,s):Lr}function Hv(s,i,c,m,y,j){y=Uv(y),m.context===null?m.context=y:m.pendingContext=y,m=Si(i),m.payload={element:c},j=j===void 0?null:j,j!==null&&(m.callback=j),c=Ci(s,m,i),c!==null&&(ts(c,s,i),Jc(c,s,i))}function qv(s,i){if(s=s.memoizedState,s!==null&&s.dehydrated!==null){var c=s.retryLane;s.retryLane=c!==0&&c<i?c:i}}function yg(s,i){qv(s,i),(s=s.alternate)&&qv(s,i)}function Yv(s){if(s.tag===13){var i=vi(s,67108864);i!==null&&ts(i,s,67108864),yg(s,67108864)}}var Wm=!0;function lC(s,i,c,m){var y=K.T;K.T=null;var j=oe.p;try{oe.p=2,bg(s,i,c,m)}finally{oe.p=j,K.T=y}}function oC(s,i,c,m){var y=K.T;K.T=null;var j=oe.p;try{oe.p=8,bg(s,i,c,m)}finally{oe.p=j,K.T=y}}function bg(s,i,c,m){if(Wm){var y=vg(m);if(y===null)ig(s,i,m,Km,c),Zv(s,m);else if(dC(y,s,i,c,m))m.stopPropagation();else if(Zv(s,m),i&4&&-1<cC.indexOf(s)){for(;y!==null;){var j=yr(y);if(j!==null)switch(j.tag){case 3:if(j=j.stateNode,j.current.memoizedState.isDehydrated){var D=ln(j.pendingLanes);if(D!==0){var q=j;for(q.pendingLanes|=2,q.entangledLanes|=2;D;){var le=1<<31-Le(D);q.entanglements[1]|=le,D&=~le}ar(j),(Ft&6)===0&&(Am=Fe()+500,gd(0))}}break;case 13:q=vi(j,2),q!==null&&ts(q,j,2),Om(),yg(j,2)}if(j=vg(m),j===null&&ig(s,i,m,Km,c),j===y)break;y=j}y!==null&&m.stopPropagation()}else ig(s,i,m,null,c)}}function vg(s){return s=oi(s),jg(s)}var Km=null;function jg(s){if(Km=null,s=Vs(s),s!==null){var i=d(s);if(i===null)s=null;else{var c=i.tag;if(c===13){if(s=h(i),s!==null)return s;s=null}else if(c===3){if(i.stateNode.current.memoizedState.isDehydrated)return i.tag===3?i.stateNode.containerInfo:null;s=null}else i!==s&&(s=null)}}return Km=s,null}function Vv(s){switch(s){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(wt()){case Nt:return 2;case ut:return 8;case Ee:case Pe:return 32;case qe:return 268435456;default:return 32}default:return 32}}var wg=!1,Bi=null,$i=null,Fi=null,_d=new Map,Sd=new Map,Ui=[],cC="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function Zv(s,i){switch(s){case"focusin":case"focusout":Bi=null;break;case"dragenter":case"dragleave":$i=null;break;case"mouseover":case"mouseout":Fi=null;break;case"pointerover":case"pointerout":_d.delete(i.pointerId);break;case"gotpointercapture":case"lostpointercapture":Sd.delete(i.pointerId)}}function Cd(s,i,c,m,y,j){return s===null||s.nativeEvent!==j?(s={blockedOn:i,domEventName:c,eventSystemFlags:m,nativeEvent:j,targetContainers:[y]},i!==null&&(i=yr(i),i!==null&&Yv(i)),s):(s.eventSystemFlags|=m,i=s.targetContainers,y!==null&&i.indexOf(y)===-1&&i.push(y),s)}function dC(s,i,c,m,y){switch(i){case"focusin":return Bi=Cd(Bi,s,i,c,m,y),!0;case"dragenter":return $i=Cd($i,s,i,c,m,y),!0;case"mouseover":return Fi=Cd(Fi,s,i,c,m,y),!0;case"pointerover":var j=y.pointerId;return _d.set(j,Cd(_d.get(j)||null,s,i,c,m,y)),!0;case"gotpointercapture":return j=y.pointerId,Sd.set(j,Cd(Sd.get(j)||null,s,i,c,m,y)),!0}return!1}function Wv(s){var i=Vs(s.target);if(i!==null){var c=d(i);if(c!==null){if(i=c.tag,i===13){if(i=h(c),i!==null){s.blockedOn=i,Ma(s.priority,function(){if(c.tag===13){var m=es();m=Rn(m);var y=vi(c,m);y!==null&&ts(y,c,m),yg(c,m)}});return}}else if(i===3&&c.stateNode.current.memoizedState.isDehydrated){s.blockedOn=c.tag===3?c.stateNode.containerInfo:null;return}}}s.blockedOn=null}function Gm(s){if(s.blockedOn!==null)return!1;for(var i=s.targetContainers;0<i.length;){var c=vg(s.nativeEvent);if(c===null){c=s.nativeEvent;var m=new c.constructor(c.type,c);cl=m,c.target.dispatchEvent(m),cl=null}else return i=yr(c),i!==null&&Yv(i),s.blockedOn=c,!1;i.shift()}return!0}function Kv(s,i,c){Gm(s)&&c.delete(i)}function uC(){wg=!1,Bi!==null&&Gm(Bi)&&(Bi=null),$i!==null&&Gm($i)&&($i=null),Fi!==null&&Gm(Fi)&&(Fi=null),_d.forEach(Kv),Sd.forEach(Kv)}function Qm(s,i){s.blockedOn===i&&(s.blockedOn=null,wg||(wg=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,uC)))}var Xm=null;function Gv(s){Xm!==s&&(Xm=s,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Xm===s&&(Xm=null);for(var i=0;i<s.length;i+=3){var c=s[i],m=s[i+1],y=s[i+2];if(typeof m!="function"){if(jg(m||c)===null)continue;break}var j=yr(c);j!==null&&(s.splice(i,3),i-=3,jp(j,{pending:!0,data:y,method:c.method,action:m},m,y))}}))}function kd(s){function i(le){return Qm(le,s)}Bi!==null&&Qm(Bi,s),$i!==null&&Qm($i,s),Fi!==null&&Qm(Fi,s),_d.forEach(i),Sd.forEach(i);for(var c=0;c<Ui.length;c++){var m=Ui[c];m.blockedOn===s&&(m.blockedOn=null)}for(;0<Ui.length&&(c=Ui[0],c.blockedOn===null);)Wv(c),c.blockedOn===null&&Ui.shift();if(c=(s.ownerDocument||s).$$reactFormReplay,c!=null)for(m=0;m<c.length;m+=3){var y=c[m],j=c[m+1],D=y[Qt]||null;if(typeof j=="function")D||Gv(c);else if(D){var q=null;if(j&&j.hasAttribute("formAction")){if(y=j,D=j[Qt]||null)q=D.formAction;else if(jg(y)!==null)continue}else q=D.action;typeof q=="function"?c[m+1]=q:(c.splice(m,3),m-=3),Gv(c)}}}function Ng(s){this._internalRoot=s}Jm.prototype.render=Ng.prototype.render=function(s){var i=this._internalRoot;if(i===null)throw Error(r(409));var c=i.current,m=es();Hv(c,m,s,i,null,null)},Jm.prototype.unmount=Ng.prototype.unmount=function(){var s=this._internalRoot;if(s!==null){this._internalRoot=null;var i=s.containerInfo;Hv(s.current,2,null,s,null,null),Om(),i[Jn]=null}};function Jm(s){this._internalRoot=s}Jm.prototype.unstable_scheduleHydration=function(s){if(s){var i=oa();s={blockedOn:null,target:s,priority:i};for(var c=0;c<Ui.length&&i!==0&&i<Ui[c].priority;c++);Ui.splice(c,0,s),c===0&&Wv(s)}};var Qv=n.version;if(Qv!=="19.1.1")throw Error(r(527,Qv,"19.1.1"));oe.findDOMNode=function(s){var i=s._reactInternals;if(i===void 0)throw typeof s.render=="function"?Error(r(188)):(s=Object.keys(s).join(","),Error(r(268,s)));return s=p(i),s=s!==null?f(s):null,s=s===null?null:s.stateNode,s};var mC={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:K,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var eh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!eh.isDisabled&&eh.supportsFiber)try{ct=eh.inject(mC),ce=eh}catch{}}return Ed.createRoot=function(s,i){if(!o(s))throw Error(r(299));var c=!1,m="",y=hb,j=fb,D=pb,q=null;return i!=null&&(i.unstable_strictMode===!0&&(c=!0),i.identifierPrefix!==void 0&&(m=i.identifierPrefix),i.onUncaughtError!==void 0&&(y=i.onUncaughtError),i.onCaughtError!==void 0&&(j=i.onCaughtError),i.onRecoverableError!==void 0&&(D=i.onRecoverableError),i.unstable_transitionCallbacks!==void 0&&(q=i.unstable_transitionCallbacks)),i=Fv(s,1,!1,null,null,c,m,y,j,D,q,null),s[Jn]=i.current,rg(s),new Ng(i)},Ed.hydrateRoot=function(s,i,c){if(!o(s))throw Error(r(299));var m=!1,y="",j=hb,D=fb,q=pb,le=null,xe=null;return c!=null&&(c.unstable_strictMode===!0&&(m=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(j=c.onUncaughtError),c.onCaughtError!==void 0&&(D=c.onCaughtError),c.onRecoverableError!==void 0&&(q=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(le=c.unstable_transitionCallbacks),c.formState!==void 0&&(xe=c.formState)),i=Fv(s,1,!0,i,c??null,m,y,j,D,q,le,xe),i.context=Uv(null),c=i.current,m=es(),m=Rn(m),y=Si(m),y.callback=null,Ci(c,y,m),c=m,i.current.lanes=c,$e(i,c),ar(i),s[Jn]=i.current,rg(s),new Jm(i)},Ed.version="19.1.1",Ed}var l1;function wC(){if(l1)return Cg.exports;l1=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}return e(),Cg.exports=jC(),Cg.exports}var NC=wC();/**
 * react-router v7.7.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var o1="popstate";function _C(e={}){function n(r,o){let{pathname:d,search:h,hash:g}=r.location;return cx("",{pathname:d,search:h,hash:g},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function a(r,o){return typeof o=="string"?o:Qd(o)}return CC(n,a,null,e)}function fn(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function $s(e,n){if(!e){typeof console<"u"&&console.warn(n);try{throw new Error(n)}catch{}}}function SC(){return Math.random().toString(36).substring(2,10)}function c1(e,n){return{usr:e.state,key:e.key,idx:n}}function cx(e,n,a=null,r){return{pathname:typeof e=="string"?e:e.pathname,search:"",hash:"",...typeof n=="string"?fc(n):n,state:a,key:n&&n.key||r||SC()}}function Qd({pathname:e="/",search:n="",hash:a=""}){return n&&n!=="?"&&(e+=n.charAt(0)==="?"?n:"?"+n),a&&a!=="#"&&(e+=a.charAt(0)==="#"?a:"#"+a),e}function fc(e){let n={};if(e){let a=e.indexOf("#");a>=0&&(n.hash=e.substring(a),e=e.substring(0,a));let r=e.indexOf("?");r>=0&&(n.search=e.substring(r),e=e.substring(0,r)),e&&(n.pathname=e)}return n}function CC(e,n,a,r={}){let{window:o=document.defaultView,v5Compat:d=!1}=r,h=o.history,g="POP",p=null,f=v();f==null&&(f=0,h.replaceState({...h.state,idx:f},""));function v(){return(h.state||{idx:null}).idx}function w(){g="POP";let k=v(),R=k==null?null:k-f;f=k,p&&p({action:g,location:_.location,delta:R})}function S(k,R){g="PUSH";let O=cx(_.location,k,R);f=v()+1;let P=c1(O,f),U=_.createHref(O);try{h.pushState(P,"",U)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;o.location.assign(U)}d&&p&&p({action:g,location:_.location,delta:1})}function T(k,R){g="REPLACE";let O=cx(_.location,k,R);f=v();let P=c1(O,f),U=_.createHref(O);h.replaceState(P,"",U),d&&p&&p({action:g,location:_.location,delta:0})}function C(k){return kC(k)}let _={get action(){return g},get location(){return e(o,h)},listen(k){if(p)throw new Error("A history only accepts one active listener");return o.addEventListener(o1,w),p=k,()=>{o.removeEventListener(o1,w),p=null}},createHref(k){return n(o,k)},createURL:C,encodeLocation(k){let R=C(k);return{pathname:R.pathname,search:R.search,hash:R.hash}},push:S,replace:T,go(k){return h.go(k)}};return _}function kC(e,n=!1){let a="http://localhost";typeof window<"u"&&(a=window.location.origin!=="null"?window.location.origin:window.location.href),fn(a,"No window.location.(origin|href) available to create URL");let r=typeof e=="string"?e:Qd(e);return r=r.replace(/ $/,"%20"),!n&&r.startsWith("//")&&(r=a+r),new URL(r,a)}function Pw(e,n,a="/"){return TC(e,n,a,!1)}function TC(e,n,a,r){let o=typeof n=="string"?fc(n):n,d=Kr(o.pathname||"/",a);if(d==null)return null;let h=Lw(e);EC(h);let g=null;for(let p=0;g==null&&p<h.length;++p){let f=$C(d);g=IC(h[p],f,r)}return g}function Lw(e,n=[],a=[],r=""){let o=(d,h,g)=>{let p={relativePath:g===void 0?d.path||"":g,caseSensitive:d.caseSensitive===!0,childrenIndex:h,route:d};p.relativePath.startsWith("/")&&(fn(p.relativePath.startsWith(r),`Absolute route path "${p.relativePath}" nested under path "${r}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),p.relativePath=p.relativePath.slice(r.length));let f=Zr([r,p.relativePath]),v=a.concat(p);d.children&&d.children.length>0&&(fn(d.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${f}".`),Lw(d.children,n,v,f)),!(d.path==null&&!d.index)&&n.push({path:f,score:LC(f,d.index),routesMeta:v})};return e.forEach((d,h)=>{if(d.path===""||!d.path?.includes("?"))o(d,h);else for(let g of zw(d.path))o(d,h,g)}),n}function zw(e){let n=e.split("/");if(n.length===0)return[];let[a,...r]=n,o=a.endsWith("?"),d=a.replace(/\?$/,"");if(r.length===0)return o?[d,""]:[d];let h=zw(r.join("/")),g=[];return g.push(...h.map(p=>p===""?d:[d,p].join("/"))),o&&g.push(...h),g.map(p=>e.startsWith("/")&&p===""?"/":p)}function EC(e){e.sort((n,a)=>n.score!==a.score?a.score-n.score:zC(n.routesMeta.map(r=>r.childrenIndex),a.routesMeta.map(r=>r.childrenIndex)))}var MC=/^:[\w-]+$/,RC=3,AC=2,DC=1,OC=10,PC=-2,d1=e=>e==="*";function LC(e,n){let a=e.split("/"),r=a.length;return a.some(d1)&&(r+=PC),n&&(r+=AC),a.filter(o=>!d1(o)).reduce((o,d)=>o+(MC.test(d)?RC:d===""?DC:OC),r)}function zC(e,n){return e.length===n.length&&e.slice(0,-1).every((r,o)=>r===n[o])?e[e.length-1]-n[n.length-1]:0}function IC(e,n,a=!1){let{routesMeta:r}=e,o={},d="/",h=[];for(let g=0;g<r.length;++g){let p=r[g],f=g===r.length-1,v=d==="/"?n:n.slice(d.length)||"/",w=kh({path:p.relativePath,caseSensitive:p.caseSensitive,end:f},v),S=p.route;if(!w&&f&&a&&!r[r.length-1].route.index&&(w=kh({path:p.relativePath,caseSensitive:p.caseSensitive,end:!1},v)),!w)return null;Object.assign(o,w.params),h.push({params:o,pathname:Zr([d,w.pathname]),pathnameBase:qC(Zr([d,w.pathnameBase])),route:S}),w.pathnameBase!=="/"&&(d=Zr([d,w.pathnameBase]))}return h}function kh(e,n){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[a,r]=BC(e.path,e.caseSensitive,e.end),o=n.match(a);if(!o)return null;let d=o[0],h=d.replace(/(.)\/+$/,"$1"),g=o.slice(1);return{params:r.reduce((f,{paramName:v,isOptional:w},S)=>{if(v==="*"){let C=g[S]||"";h=d.slice(0,d.length-C.length).replace(/(.)\/+$/,"$1")}const T=g[S];return w&&!T?f[v]=void 0:f[v]=(T||"").replace(/%2F/g,"/"),f},{}),pathname:d,pathnameBase:h,pattern:e}}function BC(e,n=!1,a=!0){$s(e==="*"||!e.endsWith("*")||e.endsWith("/*"),`Route path "${e}" will be treated as if it were "${e.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${e.replace(/\*$/,"/*")}".`);let r=[],o="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(h,g,p)=>(r.push({paramName:g,isOptional:p!=null}),p?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),o+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):a?o+="\\/*$":e!==""&&e!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,n?void 0:"i"),r]}function $C(e){try{return e.split("/").map(n=>decodeURIComponent(n).replace(/\//g,"%2F")).join("/")}catch(n){return $s(!1,`The URL path "${e}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${n}).`),e}}function Kr(e,n){if(n==="/")return e;if(!e.toLowerCase().startsWith(n.toLowerCase()))return null;let a=n.endsWith("/")?n.length-1:n.length,r=e.charAt(a);return r&&r!=="/"?null:e.slice(a)||"/"}function FC(e,n="/"){let{pathname:a,search:r="",hash:o=""}=typeof e=="string"?fc(e):e;return{pathname:a?a.startsWith("/")?a:UC(a,n):n,search:YC(r),hash:VC(o)}}function UC(e,n){let a=n.replace(/\/+$/,"").split("/");return e.split("/").forEach(o=>{o===".."?a.length>1&&a.pop():o!=="."&&a.push(o)}),a.length>1?a.join("/"):"/"}function Mg(e,n,a,r){return`Cannot include a '${e}' character in a manually specified \`to.${n}\` field [${JSON.stringify(r)}].  Please separate it out to the \`to.${a}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function HC(e){return e.filter((n,a)=>a===0||n.route.path&&n.route.path.length>0)}function e0(e){let n=HC(e);return n.map((a,r)=>r===n.length-1?a.pathname:a.pathnameBase)}function t0(e,n,a,r=!1){let o;typeof e=="string"?o=fc(e):(o={...e},fn(!o.pathname||!o.pathname.includes("?"),Mg("?","pathname","search",o)),fn(!o.pathname||!o.pathname.includes("#"),Mg("#","pathname","hash",o)),fn(!o.search||!o.search.includes("#"),Mg("#","search","hash",o)));let d=e===""||o.pathname==="",h=d?"/":o.pathname,g;if(h==null)g=a;else{let w=n.length-1;if(!r&&h.startsWith("..")){let S=h.split("/");for(;S[0]==="..";)S.shift(),w-=1;o.pathname=S.join("/")}g=w>=0?n[w]:"/"}let p=FC(o,g),f=h&&h!=="/"&&h.endsWith("/"),v=(d||h===".")&&a.endsWith("/");return!p.pathname.endsWith("/")&&(f||v)&&(p.pathname+="/"),p}var Zr=e=>e.join("/").replace(/\/\/+/g,"/"),qC=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),YC=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,VC=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function ZC(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}var Iw=["POST","PUT","PATCH","DELETE"];new Set(Iw);var WC=["GET",...Iw];new Set(WC);var pc=b.createContext(null);pc.displayName="DataRouter";var Kh=b.createContext(null);Kh.displayName="DataRouterState";b.createContext(!1);var Bw=b.createContext({isTransitioning:!1});Bw.displayName="ViewTransition";var KC=b.createContext(new Map);KC.displayName="Fetchers";var GC=b.createContext(null);GC.displayName="Await";var Us=b.createContext(null);Us.displayName="Navigation";var gu=b.createContext(null);gu.displayName="Location";var Cs=b.createContext({outlet:null,matches:[],isDataRoute:!1});Cs.displayName="Route";var n0=b.createContext(null);n0.displayName="RouteError";function QC(e,{relative:n}={}){fn(gc(),"useHref() may be used only in the context of a <Router> component.");let{basename:a,navigator:r}=b.useContext(Us),{hash:o,pathname:d,search:h}=xu(e,{relative:n}),g=d;return a!=="/"&&(g=d==="/"?a:Zr([a,d])),r.createHref({pathname:g,search:h,hash:o})}function gc(){return b.useContext(gu)!=null}function Hs(){return fn(gc(),"useLocation() may be used only in the context of a <Router> component."),b.useContext(gu).location}var $w="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Fw(e){b.useContext(Us).static||b.useLayoutEffect(e)}function is(){let{isDataRoute:e}=b.useContext(Cs);return e?mk():XC()}function XC(){fn(gc(),"useNavigate() may be used only in the context of a <Router> component.");let e=b.useContext(pc),{basename:n,navigator:a}=b.useContext(Us),{matches:r}=b.useContext(Cs),{pathname:o}=Hs(),d=JSON.stringify(e0(r)),h=b.useRef(!1);return Fw(()=>{h.current=!0}),b.useCallback((p,f={})=>{if($s(h.current,$w),!h.current)return;if(typeof p=="number"){a.go(p);return}let v=t0(p,JSON.parse(d),o,f.relative==="path");e==null&&n!=="/"&&(v.pathname=v.pathname==="/"?n:Zr([n,v.pathname])),(f.replace?a.replace:a.push)(v,f.state,f)},[n,a,d,o,e])}var JC=b.createContext(null);function ek(e){let n=b.useContext(Cs).outlet;return n&&b.createElement(JC.Provider,{value:e},n)}function Gh(){let{matches:e}=b.useContext(Cs),n=e[e.length-1];return n?n.params:{}}function xu(e,{relative:n}={}){let{matches:a}=b.useContext(Cs),{pathname:r}=Hs(),o=JSON.stringify(e0(a));return b.useMemo(()=>t0(e,JSON.parse(o),r,n==="path"),[e,o,r,n])}function tk(e,n){return Uw(e,n)}function Uw(e,n,a,r){fn(gc(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:o}=b.useContext(Us),{matches:d}=b.useContext(Cs),h=d[d.length-1],g=h?h.params:{},p=h?h.pathname:"/",f=h?h.pathnameBase:"/",v=h&&h.route;{let R=v&&v.path||"";Hw(p,!v||R.endsWith("*")||R.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${p}" (under <Route path="${R}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${R}"> to <Route path="${R==="/"?"*":`${R}/*`}">.`)}let w=Hs(),S;if(n){let R=typeof n=="string"?fc(n):n;fn(f==="/"||R.pathname?.startsWith(f),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${f}" but pathname "${R.pathname}" was given in the \`location\` prop.`),S=R}else S=w;let T=S.pathname||"/",C=T;if(f!=="/"){let R=f.replace(/^\//,"").split("/");C="/"+T.replace(/^\//,"").split("/").slice(R.length).join("/")}let _=Pw(e,{pathname:C});$s(v||_!=null,`No routes matched location "${S.pathname}${S.search}${S.hash}" `),$s(_==null||_[_.length-1].route.element!==void 0||_[_.length-1].route.Component!==void 0||_[_.length-1].route.lazy!==void 0,`Matched leaf route at location "${S.pathname}${S.search}${S.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let k=ik(_&&_.map(R=>Object.assign({},R,{params:Object.assign({},g,R.params),pathname:Zr([f,o.encodeLocation?o.encodeLocation(R.pathname).pathname:R.pathname]),pathnameBase:R.pathnameBase==="/"?f:Zr([f,o.encodeLocation?o.encodeLocation(R.pathnameBase).pathname:R.pathnameBase])})),d,a,r);return n&&k?b.createElement(gu.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...S},navigationType:"POP"}},k):k}function nk(){let e=uk(),n=ZC(e)?`${e.status} ${e.statusText}`:e instanceof Error?e.message:JSON.stringify(e),a=e instanceof Error?e.stack:null,r="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:r},d={padding:"2px 4px",backgroundColor:r},h=null;return console.error("Error handled by React Router default ErrorBoundary:",e),h=b.createElement(b.Fragment,null,b.createElement("p",null,"💿 Hey developer 👋"),b.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",b.createElement("code",{style:d},"ErrorBoundary")," or"," ",b.createElement("code",{style:d},"errorElement")," prop on your route.")),b.createElement(b.Fragment,null,b.createElement("h2",null,"Unexpected Application Error!"),b.createElement("h3",{style:{fontStyle:"italic"}},n),a?b.createElement("pre",{style:o},a):null,h)}var ak=b.createElement(nk,null),sk=class extends b.Component{constructor(e){super(e),this.state={location:e.location,revalidation:e.revalidation,error:e.error}}static getDerivedStateFromError(e){return{error:e}}static getDerivedStateFromProps(e,n){return n.location!==e.location||n.revalidation!=="idle"&&e.revalidation==="idle"?{error:e.error,location:e.location,revalidation:e.revalidation}:{error:e.error!==void 0?e.error:n.error,location:n.location,revalidation:e.revalidation||n.revalidation}}componentDidCatch(e,n){console.error("React Router caught the following error during render",e,n)}render(){return this.state.error!==void 0?b.createElement(Cs.Provider,{value:this.props.routeContext},b.createElement(n0.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function rk({routeContext:e,match:n,children:a}){let r=b.useContext(pc);return r&&r.static&&r.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(r.staticContext._deepestRenderedBoundaryId=n.route.id),b.createElement(Cs.Provider,{value:e},a)}function ik(e,n=[],a=null,r=null){if(e==null){if(!a)return null;if(a.errors)e=a.matches;else if(n.length===0&&!a.initialized&&a.matches.length>0)e=a.matches;else return null}let o=e,d=a?.errors;if(d!=null){let p=o.findIndex(f=>f.route.id&&d?.[f.route.id]!==void 0);fn(p>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(d).join(",")}`),o=o.slice(0,Math.min(o.length,p+1))}let h=!1,g=-1;if(a)for(let p=0;p<o.length;p++){let f=o[p];if((f.route.HydrateFallback||f.route.hydrateFallbackElement)&&(g=p),f.route.id){let{loaderData:v,errors:w}=a,S=f.route.loader&&!v.hasOwnProperty(f.route.id)&&(!w||w[f.route.id]===void 0);if(f.route.lazy||S){h=!0,g>=0?o=o.slice(0,g+1):o=[o[0]];break}}}return o.reduceRight((p,f,v)=>{let w,S=!1,T=null,C=null;a&&(w=d&&f.route.id?d[f.route.id]:void 0,T=f.route.errorElement||ak,h&&(g<0&&v===0?(Hw("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),S=!0,C=null):g===v&&(S=!0,C=f.route.hydrateFallbackElement||null)));let _=n.concat(o.slice(0,v+1)),k=()=>{let R;return w?R=T:S?R=C:f.route.Component?R=b.createElement(f.route.Component,null):f.route.element?R=f.route.element:R=p,b.createElement(rk,{match:f,routeContext:{outlet:p,matches:_,isDataRoute:a!=null},children:R})};return a&&(f.route.ErrorBoundary||f.route.errorElement||v===0)?b.createElement(sk,{location:a.location,revalidation:a.revalidation,component:T,error:w,children:k(),routeContext:{outlet:null,matches:_,isDataRoute:!0}}):k()},null)}function a0(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function lk(e){let n=b.useContext(pc);return fn(n,a0(e)),n}function ok(e){let n=b.useContext(Kh);return fn(n,a0(e)),n}function ck(e){let n=b.useContext(Cs);return fn(n,a0(e)),n}function s0(e){let n=ck(e),a=n.matches[n.matches.length-1];return fn(a.route.id,`${e} can only be used on routes that contain a unique "id"`),a.route.id}function dk(){return s0("useRouteId")}function uk(){let e=b.useContext(n0),n=ok("useRouteError"),a=s0("useRouteError");return e!==void 0?e:n.errors?.[a]}function mk(){let{router:e}=lk("useNavigate"),n=s0("useNavigate"),a=b.useRef(!1);return Fw(()=>{a.current=!0}),b.useCallback(async(o,d={})=>{$s(a.current,$w),a.current&&(typeof o=="number"?e.navigate(o):await e.navigate(o,{fromRouteId:n,...d}))},[e,n])}var u1={};function Hw(e,n,a){!n&&!u1[e]&&(u1[e]=!0,$s(!1,a))}b.memo(hk);function hk({routes:e,future:n,state:a}){return Uw(e,void 0,a,n)}function $l({to:e,replace:n,state:a,relative:r}){fn(gc(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=b.useContext(Us);$s(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:d}=b.useContext(Cs),{pathname:h}=Hs(),g=is(),p=t0(e,e0(d),h,r==="path"),f=JSON.stringify(p);return b.useEffect(()=>{g(JSON.parse(f),{replace:n,state:a,relative:r})},[g,f,r,n,a]),null}function r0(e){return ek(e.context)}function gt(e){fn(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function fk({basename:e="/",children:n=null,location:a,navigationType:r="POP",navigator:o,static:d=!1}){fn(!gc(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let h=e.replace(/^\/*/,"/"),g=b.useMemo(()=>({basename:h,navigator:o,static:d,future:{}}),[h,o,d]);typeof a=="string"&&(a=fc(a));let{pathname:p="/",search:f="",hash:v="",state:w=null,key:S="default"}=a,T=b.useMemo(()=>{let C=Kr(p,h);return C==null?null:{location:{pathname:C,search:f,hash:v,state:w,key:S},navigationType:r}},[h,p,f,v,w,S,r]);return $s(T!=null,`<Router basename="${h}"> is not able to match the URL "${p}${f}${v}" because it does not start with the basename, so the <Router> won't render anything.`),T==null?null:b.createElement(Us.Provider,{value:g},b.createElement(gu.Provider,{children:n,value:T}))}function pk({children:e,location:n}){return tk(dx(e),n)}function dx(e,n=[]){let a=[];return b.Children.forEach(e,(r,o)=>{if(!b.isValidElement(r))return;let d=[...n,o];if(r.type===b.Fragment){a.push.apply(a,dx(r.props.children,d));return}fn(r.type===gt,`[${typeof r.type=="string"?r.type:r.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),fn(!r.props.index||!r.props.children,"An index route cannot have child routes.");let h={id:r.props.id||d.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,hydrateFallbackElement:r.props.hydrateFallbackElement,HydrateFallback:r.props.HydrateFallback,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.hasErrorBoundary===!0||r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(h.children=dx(r.props.children,d)),a.push(h)}),a}var xh="get",yh="application/x-www-form-urlencoded";function Qh(e){return e!=null&&typeof e.tagName=="string"}function gk(e){return Qh(e)&&e.tagName.toLowerCase()==="button"}function xk(e){return Qh(e)&&e.tagName.toLowerCase()==="form"}function yk(e){return Qh(e)&&e.tagName.toLowerCase()==="input"}function bk(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function vk(e,n){return e.button===0&&(!n||n==="_self")&&!bk(e)}var th=null;function jk(){if(th===null)try{new FormData(document.createElement("form"),0),th=!1}catch{th=!0}return th}var wk=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function Rg(e){return e!=null&&!wk.has(e)?($s(!1,`"${e}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${yh}"`),null):e}function Nk(e,n){let a,r,o,d,h;if(xk(e)){let g=e.getAttribute("action");r=g?Kr(g,n):null,a=e.getAttribute("method")||xh,o=Rg(e.getAttribute("enctype"))||yh,d=new FormData(e)}else if(gk(e)||yk(e)&&(e.type==="submit"||e.type==="image")){let g=e.form;if(g==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let p=e.getAttribute("formaction")||g.getAttribute("action");if(r=p?Kr(p,n):null,a=e.getAttribute("formmethod")||g.getAttribute("method")||xh,o=Rg(e.getAttribute("formenctype"))||Rg(g.getAttribute("enctype"))||yh,d=new FormData(g,e),!jk()){let{name:f,type:v,value:w}=e;if(v==="image"){let S=f?`${f}.`:"";d.append(`${S}x`,"0"),d.append(`${S}y`,"0")}else f&&d.append(f,w)}}else{if(Qh(e))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');a=xh,r=null,o=yh,h=e}return d&&o==="text/plain"&&(h=d,d=void 0),{action:r,method:a.toLowerCase(),encType:o,formData:d,body:h}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function i0(e,n){if(e===!1||e===null||typeof e>"u")throw new Error(n)}function _k(e,n,a){let r=typeof e=="string"?new URL(e,typeof window>"u"?"server://singlefetch/":window.location.origin):e;return r.pathname==="/"?r.pathname=`_root.${a}`:n&&Kr(r.pathname,n)==="/"?r.pathname=`${n.replace(/\/$/,"")}/_root.${a}`:r.pathname=`${r.pathname.replace(/\/$/,"")}.${a}`,r}async function Sk(e,n){if(e.id in n)return n[e.id];try{let a=await import(e.module);return n[e.id]=a,a}catch(a){return console.error(`Error loading route module \`${e.module}\`, reloading page...`),console.error(a),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function Ck(e){return e==null?!1:e.href==null?e.rel==="preload"&&typeof e.imageSrcSet=="string"&&typeof e.imageSizes=="string":typeof e.rel=="string"&&typeof e.href=="string"}async function kk(e,n,a){let r=await Promise.all(e.map(async o=>{let d=n.routes[o.route.id];if(d){let h=await Sk(d,a);return h.links?h.links():[]}return[]}));return Rk(r.flat(1).filter(Ck).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function m1(e,n,a,r,o,d){let h=(p,f)=>a[f]?p.route.id!==a[f].route.id:!0,g=(p,f)=>a[f].pathname!==p.pathname||a[f].route.path?.endsWith("*")&&a[f].params["*"]!==p.params["*"];return d==="assets"?n.filter((p,f)=>h(p,f)||g(p,f)):d==="data"?n.filter((p,f)=>{let v=r.routes[p.route.id];if(!v||!v.hasLoader)return!1;if(h(p,f)||g(p,f))return!0;if(p.route.shouldRevalidate){let w=p.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:a[0]?.params||{},nextUrl:new URL(e,window.origin),nextParams:p.params,defaultShouldRevalidate:!0});if(typeof w=="boolean")return w}return!0}):[]}function Tk(e,n,{includeHydrateFallback:a}={}){return Ek(e.map(r=>{let o=n.routes[r.route.id];if(!o)return[];let d=[o.module];return o.clientActionModule&&(d=d.concat(o.clientActionModule)),o.clientLoaderModule&&(d=d.concat(o.clientLoaderModule)),a&&o.hydrateFallbackModule&&(d=d.concat(o.hydrateFallbackModule)),o.imports&&(d=d.concat(o.imports)),d}).flat(1))}function Ek(e){return[...new Set(e)]}function Mk(e){let n={},a=Object.keys(e).sort();for(let r of a)n[r]=e[r];return n}function Rk(e,n){let a=new Set;return new Set(n),e.reduce((r,o)=>{let d=JSON.stringify(Mk(o));return a.has(d)||(a.add(d),r.push({key:d,link:o})),r},[])}function qw(){let e=b.useContext(pc);return i0(e,"You must render this element inside a <DataRouterContext.Provider> element"),e}function Ak(){let e=b.useContext(Kh);return i0(e,"You must render this element inside a <DataRouterStateContext.Provider> element"),e}var l0=b.createContext(void 0);l0.displayName="FrameworkContext";function Yw(){let e=b.useContext(l0);return i0(e,"You must render this element inside a <HydratedRouter> element"),e}function Dk(e,n){let a=b.useContext(l0),[r,o]=b.useState(!1),[d,h]=b.useState(!1),{onFocus:g,onBlur:p,onMouseEnter:f,onMouseLeave:v,onTouchStart:w}=n,S=b.useRef(null);b.useEffect(()=>{if(e==="render"&&h(!0),e==="viewport"){let _=R=>{R.forEach(O=>{h(O.isIntersecting)})},k=new IntersectionObserver(_,{threshold:.5});return S.current&&k.observe(S.current),()=>{k.disconnect()}}},[e]),b.useEffect(()=>{if(r){let _=setTimeout(()=>{h(!0)},100);return()=>{clearTimeout(_)}}},[r]);let T=()=>{o(!0)},C=()=>{o(!1),h(!1)};return a?e!=="intent"?[d,S,{}]:[d,S,{onFocus:Md(g,T),onBlur:Md(p,C),onMouseEnter:Md(f,T),onMouseLeave:Md(v,C),onTouchStart:Md(w,T)}]:[!1,S,{}]}function Md(e,n){return a=>{e&&e(a),a.defaultPrevented||n(a)}}function Ok({page:e,...n}){let{router:a}=qw(),r=b.useMemo(()=>Pw(a.routes,e,a.basename),[a.routes,e,a.basename]);return r?b.createElement(Lk,{page:e,matches:r,...n}):null}function Pk(e){let{manifest:n,routeModules:a}=Yw(),[r,o]=b.useState([]);return b.useEffect(()=>{let d=!1;return kk(e,n,a).then(h=>{d||o(h)}),()=>{d=!0}},[e,n,a]),r}function Lk({page:e,matches:n,...a}){let r=Hs(),{manifest:o,routeModules:d}=Yw(),{basename:h}=qw(),{loaderData:g,matches:p}=Ak(),f=b.useMemo(()=>m1(e,n,p,o,r,"data"),[e,n,p,o,r]),v=b.useMemo(()=>m1(e,n,p,o,r,"assets"),[e,n,p,o,r]),w=b.useMemo(()=>{if(e===r.pathname+r.search+r.hash)return[];let C=new Set,_=!1;if(n.forEach(R=>{let O=o.routes[R.route.id];!O||!O.hasLoader||(!f.some(P=>P.route.id===R.route.id)&&R.route.id in g&&d[R.route.id]?.shouldRevalidate||O.hasClientLoader?_=!0:C.add(R.route.id))}),C.size===0)return[];let k=_k(e,h,"data");return _&&C.size>0&&k.searchParams.set("_routes",n.filter(R=>C.has(R.route.id)).map(R=>R.route.id).join(",")),[k.pathname+k.search]},[h,g,r,o,f,n,e,d]),S=b.useMemo(()=>Tk(v,o),[v,o]),T=Pk(v);return b.createElement(b.Fragment,null,w.map(C=>b.createElement("link",{key:C,rel:"prefetch",as:"fetch",href:C,...a})),S.map(C=>b.createElement("link",{key:C,rel:"modulepreload",href:C,...a})),T.map(({key:C,link:_})=>b.createElement("link",{key:C,..._})))}function zk(...e){return n=>{e.forEach(a=>{typeof a=="function"?a(n):a!=null&&(a.current=n)})}}var Vw=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Vw&&(window.__reactRouterVersion="7.7.1")}catch{}function Ik({basename:e,children:n,window:a}){let r=b.useRef();r.current==null&&(r.current=_C({window:a,v5Compat:!0}));let o=r.current,[d,h]=b.useState({action:o.action,location:o.location}),g=b.useCallback(p=>{b.startTransition(()=>h(p))},[h]);return b.useLayoutEffect(()=>o.listen(g),[o,g]),b.createElement(fk,{basename:e,children:n,location:d.location,navigationType:d.action,navigator:o})}var Zw=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Bs=b.forwardRef(function({onClick:n,discover:a="render",prefetch:r="none",relative:o,reloadDocument:d,replace:h,state:g,target:p,to:f,preventScrollReset:v,viewTransition:w,...S},T){let{basename:C}=b.useContext(Us),_=typeof f=="string"&&Zw.test(f),k,R=!1;if(typeof f=="string"&&_&&(k=f,Vw))try{let Z=new URL(window.location.href),F=f.startsWith("//")?new URL(Z.protocol+f):new URL(f),Y=Kr(F.pathname,C);F.origin===Z.origin&&Y!=null?f=Y+F.search+F.hash:R=!0}catch{$s(!1,`<Link to="${f}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let O=QC(f,{relative:o}),[P,U,A]=Dk(r,S),$=Uk(f,{replace:h,state:g,target:p,preventScrollReset:v,relative:o,viewTransition:w});function E(Z){n&&n(Z),Z.defaultPrevented||$(Z)}let I=b.createElement("a",{...S,...A,href:k||O,onClick:R||d?n:E,ref:zk(T,U),target:p,"data-discover":!_&&a==="render"?"true":void 0});return P&&!_?b.createElement(b.Fragment,null,I,b.createElement(Ok,{page:O})):I});Bs.displayName="Link";var Bk=b.forwardRef(function({"aria-current":n="page",caseSensitive:a=!1,className:r="",end:o=!1,style:d,to:h,viewTransition:g,children:p,...f},v){let w=xu(h,{relative:f.relative}),S=Hs(),T=b.useContext(Kh),{navigator:C,basename:_}=b.useContext(Us),k=T!=null&&Zk(w)&&g===!0,R=C.encodeLocation?C.encodeLocation(w).pathname:w.pathname,O=S.pathname,P=T&&T.navigation&&T.navigation.location?T.navigation.location.pathname:null;a||(O=O.toLowerCase(),P=P?P.toLowerCase():null,R=R.toLowerCase()),P&&_&&(P=Kr(P,_)||P);const U=R!=="/"&&R.endsWith("/")?R.length-1:R.length;let A=O===R||!o&&O.startsWith(R)&&O.charAt(U)==="/",$=P!=null&&(P===R||!o&&P.startsWith(R)&&P.charAt(R.length)==="/"),E={isActive:A,isPending:$,isTransitioning:k},I=A?n:void 0,Z;typeof r=="function"?Z=r(E):Z=[r,A?"active":null,$?"pending":null,k?"transitioning":null].filter(Boolean).join(" ");let F=typeof d=="function"?d(E):d;return b.createElement(Bs,{...f,"aria-current":I,className:Z,ref:v,style:F,to:h,viewTransition:g},typeof p=="function"?p(E):p)});Bk.displayName="NavLink";var $k=b.forwardRef(({discover:e="render",fetcherKey:n,navigate:a,reloadDocument:r,replace:o,state:d,method:h=xh,action:g,onSubmit:p,relative:f,preventScrollReset:v,viewTransition:w,...S},T)=>{let C=Yk(),_=Vk(g,{relative:f}),k=h.toLowerCase()==="get"?"get":"post",R=typeof g=="string"&&Zw.test(g),O=P=>{if(p&&p(P),P.defaultPrevented)return;P.preventDefault();let U=P.nativeEvent.submitter,A=U?.getAttribute("formmethod")||h;C(U||P.currentTarget,{fetcherKey:n,method:A,navigate:a,replace:o,state:d,relative:f,preventScrollReset:v,viewTransition:w})};return b.createElement("form",{ref:T,method:k,action:_,onSubmit:r?p:O,...S,"data-discover":!R&&e==="render"?"true":void 0})});$k.displayName="Form";function Fk(e){return`${e} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ww(e){let n=b.useContext(pc);return fn(n,Fk(e)),n}function Uk(e,{target:n,replace:a,state:r,preventScrollReset:o,relative:d,viewTransition:h}={}){let g=is(),p=Hs(),f=xu(e,{relative:d});return b.useCallback(v=>{if(vk(v,n)){v.preventDefault();let w=a!==void 0?a:Qd(p)===Qd(f);g(e,{replace:w,state:r,preventScrollReset:o,relative:d,viewTransition:h})}},[p,g,f,a,r,n,e,o,d,h])}var Hk=0,qk=()=>`__${String(++Hk)}__`;function Yk(){let{router:e}=Ww("useSubmit"),{basename:n}=b.useContext(Us),a=dk();return b.useCallback(async(r,o={})=>{let{action:d,method:h,encType:g,formData:p,body:f}=Nk(r,n);if(o.navigate===!1){let v=o.fetcherKey||qk();await e.fetch(v,a,o.action||d,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||h,formEncType:o.encType||g,flushSync:o.flushSync})}else await e.navigate(o.action||d,{preventScrollReset:o.preventScrollReset,formData:p,body:f,formMethod:o.method||h,formEncType:o.encType||g,replace:o.replace,state:o.state,fromRouteId:a,flushSync:o.flushSync,viewTransition:o.viewTransition})},[e,n,a])}function Vk(e,{relative:n}={}){let{basename:a}=b.useContext(Us),r=b.useContext(Cs);fn(r,"useFormAction must be used inside a RouteContext");let[o]=r.matches.slice(-1),d={...xu(e||".",{relative:n})},h=Hs();if(e==null){d.search=h.search;let g=new URLSearchParams(d.search),p=g.getAll("index");if(p.some(v=>v==="")){g.delete("index"),p.filter(w=>w).forEach(w=>g.append("index",w));let v=g.toString();d.search=v?`?${v}`:""}}return(!e||e===".")&&o.route.index&&(d.search=d.search?d.search.replace(/^\?/,"?index&"):"?index"),a!=="/"&&(d.pathname=d.pathname==="/"?a:Zr([a,d.pathname])),Qd(d)}function Zk(e,{relative:n}={}){let a=b.useContext(Bw);fn(a!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:r}=Ww("useViewTransitionState"),o=xu(e,{relative:n});if(!a.isTransitioning)return!1;let d=Kr(a.currentLocation.pathname,r)||a.currentLocation.pathname,h=Kr(a.nextLocation.pathname,r)||a.nextLocation.pathname;return kh(o.pathname,h)!=null||kh(o.pathname,d)!=null}var ec=Ow(),xc=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},Ul=typeof window>"u"||"Deno"in globalThis;function Ea(){}function Wk(e,n){return typeof e=="function"?e(n):e}function ux(e){return typeof e=="number"&&e>=0&&e!==1/0}function Kw(e,n){return Math.max(e+(n||0)-Date.now(),0)}function tl(e,n){return typeof e=="function"?e(n):e}function js(e,n){return typeof e=="function"?e(n):e}function h1(e,n){const{type:a="all",exact:r,fetchStatus:o,predicate:d,queryKey:h,stale:g}=e;if(h){if(r){if(n.queryHash!==o0(h,n.options))return!1}else if(!Xd(n.queryKey,h))return!1}if(a!=="all"){const p=n.isActive();if(a==="active"&&!p||a==="inactive"&&p)return!1}return!(typeof g=="boolean"&&n.isStale()!==g||o&&o!==n.state.fetchStatus||d&&!d(n))}function f1(e,n){const{exact:a,status:r,predicate:o,mutationKey:d}=e;if(d){if(!n.options.mutationKey)return!1;if(a){if(Hl(n.options.mutationKey)!==Hl(d))return!1}else if(!Xd(n.options.mutationKey,d))return!1}return!(r&&n.state.status!==r||o&&!o(n))}function o0(e,n){return(n?.queryKeyHashFn||Hl)(e)}function Hl(e){return JSON.stringify(e,(n,a)=>mx(a)?Object.keys(a).sort().reduce((r,o)=>(r[o]=a[o],r),{}):a)}function Xd(e,n){return e===n?!0:typeof e!=typeof n?!1:e&&n&&typeof e=="object"&&typeof n=="object"?Object.keys(n).every(a=>Xd(e[a],n[a])):!1}function Gw(e,n){if(e===n)return e;const a=p1(e)&&p1(n);if(a||mx(e)&&mx(n)){const r=a?e:Object.keys(e),o=r.length,d=a?n:Object.keys(n),h=d.length,g=a?[]:{},p=new Set(r);let f=0;for(let v=0;v<h;v++){const w=a?v:d[v];(!a&&p.has(w)||a)&&e[w]===void 0&&n[w]===void 0?(g[w]=void 0,f++):(g[w]=Gw(e[w],n[w]),g[w]===e[w]&&e[w]!==void 0&&f++)}return o===h&&f===o?e:g}return n}function Th(e,n){if(!n||Object.keys(e).length!==Object.keys(n).length)return!1;for(const a in e)if(e[a]!==n[a])return!1;return!0}function p1(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function mx(e){if(!g1(e))return!1;const n=e.constructor;if(n===void 0)return!0;const a=n.prototype;return!(!g1(a)||!a.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function g1(e){return Object.prototype.toString.call(e)==="[object Object]"}function Kk(e){return new Promise(n=>{setTimeout(n,e)})}function hx(e,n,a){return typeof a.structuralSharing=="function"?a.structuralSharing(e,n):a.structuralSharing!==!1?Gw(e,n):n}function Gk(e,n,a=0){const r=[...e,n];return a&&r.length>a?r.slice(1):r}function Qk(e,n,a=0){const r=[n,...e];return a&&r.length>a?r.slice(0,-1):r}var c0=Symbol();function Qw(e,n){return!e.queryFn&&n?.initialPromise?()=>n.initialPromise:!e.queryFn||e.queryFn===c0?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function Xw(e,n){return typeof e=="function"?e(...n):!!e}var Xk=class extends xc{#t;#e;#n;constructor(){super(),this.#n=e=>{if(!Ul&&window.addEventListener){const n=()=>e();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#n=e,this.#e?.(),this.#e=e(n=>{typeof n=="boolean"?this.setFocused(n):this.onFocus()})}setFocused(e){this.#t!==e&&(this.#t=e,this.onFocus())}onFocus(){const e=this.isFocused();this.listeners.forEach(n=>{n(e)})}isFocused(){return typeof this.#t=="boolean"?this.#t:globalThis.document?.visibilityState!=="hidden"}},d0=new Xk,Jk=class extends xc{#t=!0;#e;#n;constructor(){super(),this.#n=e=>{if(!Ul&&window.addEventListener){const n=()=>e(!0),a=()=>e(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",a,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",a)}}}}onSubscribe(){this.#e||this.setEventListener(this.#n)}onUnsubscribe(){this.hasListeners()||(this.#e?.(),this.#e=void 0)}setEventListener(e){this.#n=e,this.#e?.(),this.#e=e(this.setOnline.bind(this))}setOnline(e){this.#t!==e&&(this.#t=e,this.listeners.forEach(a=>{a(e)}))}isOnline(){return this.#t}},Eh=new Jk;function fx(){let e,n;const a=new Promise((o,d)=>{e=o,n=d});a.status="pending",a.catch(()=>{});function r(o){Object.assign(a,o),delete a.resolve,delete a.reject}return a.resolve=o=>{r({status:"fulfilled",value:o}),e(o)},a.reject=o=>{r({status:"rejected",reason:o}),n(o)},a}function e5(e){return Math.min(1e3*2**e,3e4)}function Jw(e){return(e??"online")==="online"?Eh.isOnline():!0}var eN=class extends Error{constructor(e){super("CancelledError"),this.revert=e?.revert,this.silent=e?.silent}};function Ag(e){return e instanceof eN}function tN(e){let n=!1,a=0,r=!1,o;const d=fx(),h=_=>{r||(S(new eN(_)),e.abort?.())},g=()=>{n=!0},p=()=>{n=!1},f=()=>d0.isFocused()&&(e.networkMode==="always"||Eh.isOnline())&&e.canRun(),v=()=>Jw(e.networkMode)&&e.canRun(),w=_=>{r||(r=!0,e.onSuccess?.(_),o?.(),d.resolve(_))},S=_=>{r||(r=!0,e.onError?.(_),o?.(),d.reject(_))},T=()=>new Promise(_=>{o=k=>{(r||f())&&_(k)},e.onPause?.()}).then(()=>{o=void 0,r||e.onContinue?.()}),C=()=>{if(r)return;let _;const k=a===0?e.initialPromise:void 0;try{_=k??e.fn()}catch(R){_=Promise.reject(R)}Promise.resolve(_).then(w).catch(R=>{if(r)return;const O=e.retry??(Ul?0:3),P=e.retryDelay??e5,U=typeof P=="function"?P(a,R):P,A=O===!0||typeof O=="number"&&a<O||typeof O=="function"&&O(a,R);if(n||!A){S(R);return}a++,e.onFail?.(a,R),Kk(U).then(()=>f()?void 0:T()).then(()=>{n?S(R):C()})})};return{promise:d,cancel:h,continue:()=>(o?.(),d),cancelRetry:g,continueRetry:p,canStart:v,start:()=>(v()?C():T().then(C),d)}}var t5=e=>setTimeout(e,0);function n5(){let e=[],n=0,a=g=>{g()},r=g=>{g()},o=t5;const d=g=>{n?e.push(g):o(()=>{a(g)})},h=()=>{const g=e;e=[],g.length&&o(()=>{r(()=>{g.forEach(p=>{a(p)})})})};return{batch:g=>{let p;n++;try{p=g()}finally{n--,n||h()}return p},batchCalls:g=>(...p)=>{d(()=>{g(...p)})},schedule:d,setNotifyFunction:g=>{a=g},setBatchNotifyFunction:g=>{r=g},setScheduler:g=>{o=g}}}var Qn=n5(),nN=class{#t;destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),ux(this.gcTime)&&(this.#t=setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ul?1/0:300*1e3))}clearGcTimeout(){this.#t&&(clearTimeout(this.#t),this.#t=void 0)}},a5=class extends nN{#t;#e;#n;#a;#s;#i;#l;constructor(e){super(),this.#l=!1,this.#i=e.defaultOptions,this.setOptions(e.options),this.observers=[],this.#a=e.client,this.#n=this.#a.getQueryCache(),this.queryKey=e.queryKey,this.queryHash=e.queryHash,this.#t=s5(this.options),this.state=e.state??this.#t,this.scheduleGc()}get meta(){return this.options.meta}get promise(){return this.#s?.promise}setOptions(e){this.options={...this.#i,...e},this.updateGcTime(this.options.gcTime)}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&this.#n.remove(this)}setData(e,n){const a=hx(this.state.data,e,this.options);return this.#r({data:a,type:"success",dataUpdatedAt:n?.updatedAt,manual:n?.manual}),a}setState(e,n){this.#r({type:"setState",state:e,setStateOptions:n})}cancel(e){const n=this.#s?.promise;return this.#s?.cancel(e),n?n.then(Ea).catch(Ea):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(this.#t)}isActive(){return this.observers.some(e=>js(e.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===c0||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(e=>tl(e.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(e=>e.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(e=0){return this.state.data===void 0?!0:e==="static"?!1:this.state.isInvalidated?!0:!Kw(this.state.dataUpdatedAt,e)}onFocus(){this.observers.find(n=>n.shouldFetchOnWindowFocus())?.refetch({cancelRefetch:!1}),this.#s?.continue()}onOnline(){this.observers.find(n=>n.shouldFetchOnReconnect())?.refetch({cancelRefetch:!1}),this.#s?.continue()}addObserver(e){this.observers.includes(e)||(this.observers.push(e),this.clearGcTimeout(),this.#n.notify({type:"observerAdded",query:this,observer:e}))}removeObserver(e){this.observers.includes(e)&&(this.observers=this.observers.filter(n=>n!==e),this.observers.length||(this.#s&&(this.#l?this.#s.cancel({revert:!0}):this.#s.cancelRetry()),this.scheduleGc()),this.#n.notify({type:"observerRemoved",query:this,observer:e}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||this.#r({type:"invalidate"})}fetch(e,n){if(this.state.fetchStatus!=="idle"){if(this.state.data!==void 0&&n?.cancelRefetch)this.cancel({silent:!0});else if(this.#s)return this.#s.continueRetry(),this.#s.promise}if(e&&this.setOptions(e),!this.options.queryFn){const p=this.observers.find(f=>f.options.queryFn);p&&this.setOptions(p.options)}const a=new AbortController,r=p=>{Object.defineProperty(p,"signal",{enumerable:!0,get:()=>(this.#l=!0,a.signal)})},o=()=>{const p=Qw(this.options,n),v=(()=>{const w={client:this.#a,queryKey:this.queryKey,meta:this.meta};return r(w),w})();return this.#l=!1,this.options.persister?this.options.persister(p,v,this):p(v)},h=(()=>{const p={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:this.#a,state:this.state,fetchFn:o};return r(p),p})();this.options.behavior?.onFetch(h,this),this.#e=this.state,(this.state.fetchStatus==="idle"||this.state.fetchMeta!==h.fetchOptions?.meta)&&this.#r({type:"fetch",meta:h.fetchOptions?.meta});const g=p=>{Ag(p)&&p.silent||this.#r({type:"error",error:p}),Ag(p)||(this.#n.config.onError?.(p,this),this.#n.config.onSettled?.(this.state.data,p,this)),this.scheduleGc()};return this.#s=tN({initialPromise:n?.initialPromise,fn:h.fetchFn,abort:a.abort.bind(a),onSuccess:p=>{if(p===void 0){g(new Error(`${this.queryHash} data is undefined`));return}try{this.setData(p)}catch(f){g(f);return}this.#n.config.onSuccess?.(p,this),this.#n.config.onSettled?.(p,this.state.error,this),this.scheduleGc()},onError:g,onFail:(p,f)=>{this.#r({type:"failed",failureCount:p,error:f})},onPause:()=>{this.#r({type:"pause"})},onContinue:()=>{this.#r({type:"continue"})},retry:h.options.retry,retryDelay:h.options.retryDelay,networkMode:h.options.networkMode,canRun:()=>!0}),this.#s.start()}#r(e){const n=a=>{switch(e.type){case"failed":return{...a,fetchFailureCount:e.failureCount,fetchFailureReason:e.error};case"pause":return{...a,fetchStatus:"paused"};case"continue":return{...a,fetchStatus:"fetching"};case"fetch":return{...a,...aN(a.data,this.options),fetchMeta:e.meta??null};case"success":return this.#e=void 0,{...a,data:e.data,dataUpdateCount:a.dataUpdateCount+1,dataUpdatedAt:e.dataUpdatedAt??Date.now(),error:null,isInvalidated:!1,status:"success",...!e.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};case"error":const r=e.error;return Ag(r)&&r.revert&&this.#e?{...this.#e,fetchStatus:"idle"}:{...a,error:r,errorUpdateCount:a.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:a.fetchFailureCount+1,fetchFailureReason:r,fetchStatus:"idle",status:"error"};case"invalidate":return{...a,isInvalidated:!0};case"setState":return{...a,...e.state}}};this.state=n(this.state),Qn.batch(()=>{this.observers.forEach(a=>{a.onQueryUpdate()}),this.#n.notify({query:this,type:"updated",action:e})})}};function aN(e,n){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:Jw(n.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function s5(e){const n=typeof e.initialData=="function"?e.initialData():e.initialData,a=n!==void 0,r=a?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:n,dataUpdateCount:0,dataUpdatedAt:a?r??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:a?"success":"pending",fetchStatus:"idle"}}var r5=class extends xc{constructor(e={}){super(),this.config=e,this.#t=new Map}#t;build(e,n,a){const r=n.queryKey,o=n.queryHash??o0(r,n);let d=this.get(o);return d||(d=new a5({client:e,queryKey:r,queryHash:o,options:e.defaultQueryOptions(n),state:a,defaultOptions:e.getQueryDefaults(r)}),this.add(d)),d}add(e){this.#t.has(e.queryHash)||(this.#t.set(e.queryHash,e),this.notify({type:"added",query:e}))}remove(e){const n=this.#t.get(e.queryHash);n&&(e.destroy(),n===e&&this.#t.delete(e.queryHash),this.notify({type:"removed",query:e}))}clear(){Qn.batch(()=>{this.getAll().forEach(e=>{this.remove(e)})})}get(e){return this.#t.get(e)}getAll(){return[...this.#t.values()]}find(e){const n={exact:!0,...e};return this.getAll().find(a=>h1(n,a))}findAll(e={}){const n=this.getAll();return Object.keys(e).length>0?n.filter(a=>h1(e,a)):n}notify(e){Qn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}onFocus(){Qn.batch(()=>{this.getAll().forEach(e=>{e.onFocus()})})}onOnline(){Qn.batch(()=>{this.getAll().forEach(e=>{e.onOnline()})})}},i5=class extends nN{#t;#e;#n;constructor(e){super(),this.mutationId=e.mutationId,this.#e=e.mutationCache,this.#t=[],this.state=e.state||sN(),this.setOptions(e.options),this.scheduleGc()}setOptions(e){this.options=e,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(e){this.#t.includes(e)||(this.#t.push(e),this.clearGcTimeout(),this.#e.notify({type:"observerAdded",mutation:this,observer:e}))}removeObserver(e){this.#t=this.#t.filter(n=>n!==e),this.scheduleGc(),this.#e.notify({type:"observerRemoved",mutation:this,observer:e})}optionalRemove(){this.#t.length||(this.state.status==="pending"?this.scheduleGc():this.#e.remove(this))}continue(){return this.#n?.continue()??this.execute(this.state.variables)}async execute(e){const n=()=>{this.#a({type:"continue"})};this.#n=tN({fn:()=>this.options.mutationFn?this.options.mutationFn(e):Promise.reject(new Error("No mutationFn found")),onFail:(o,d)=>{this.#a({type:"failed",failureCount:o,error:d})},onPause:()=>{this.#a({type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>this.#e.canRun(this)});const a=this.state.status==="pending",r=!this.#n.canStart();try{if(a)n();else{this.#a({type:"pending",variables:e,isPaused:r}),await this.#e.config.onMutate?.(e,this);const d=await this.options.onMutate?.(e);d!==this.state.context&&this.#a({type:"pending",context:d,variables:e,isPaused:r})}const o=await this.#n.start();return await this.#e.config.onSuccess?.(o,e,this.state.context,this),await this.options.onSuccess?.(o,e,this.state.context),await this.#e.config.onSettled?.(o,null,this.state.variables,this.state.context,this),await this.options.onSettled?.(o,null,e,this.state.context),this.#a({type:"success",data:o}),o}catch(o){try{throw await this.#e.config.onError?.(o,e,this.state.context,this),await this.options.onError?.(o,e,this.state.context),await this.#e.config.onSettled?.(void 0,o,this.state.variables,this.state.context,this),await this.options.onSettled?.(void 0,o,e,this.state.context),o}finally{this.#a({type:"error",error:o})}}finally{this.#e.runNext(this)}}#a(e){const n=a=>{switch(e.type){case"failed":return{...a,failureCount:e.failureCount,failureReason:e.error};case"pause":return{...a,isPaused:!0};case"continue":return{...a,isPaused:!1};case"pending":return{...a,context:e.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:e.isPaused,status:"pending",variables:e.variables,submittedAt:Date.now()};case"success":return{...a,data:e.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...a,data:void 0,error:e.error,failureCount:a.failureCount+1,failureReason:e.error,isPaused:!1,status:"error"}}};this.state=n(this.state),Qn.batch(()=>{this.#t.forEach(a=>{a.onMutationUpdate(e)}),this.#e.notify({mutation:this,type:"updated",action:e})})}};function sN(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var l5=class extends xc{constructor(e={}){super(),this.config=e,this.#t=new Set,this.#e=new Map,this.#n=0}#t;#e;#n;build(e,n,a){const r=new i5({mutationCache:this,mutationId:++this.#n,options:e.defaultMutationOptions(n),state:a});return this.add(r),r}add(e){this.#t.add(e);const n=nh(e);if(typeof n=="string"){const a=this.#e.get(n);a?a.push(e):this.#e.set(n,[e])}this.notify({type:"added",mutation:e})}remove(e){if(this.#t.delete(e)){const n=nh(e);if(typeof n=="string"){const a=this.#e.get(n);if(a)if(a.length>1){const r=a.indexOf(e);r!==-1&&a.splice(r,1)}else a[0]===e&&this.#e.delete(n)}}this.notify({type:"removed",mutation:e})}canRun(e){const n=nh(e);if(typeof n=="string"){const r=this.#e.get(n)?.find(o=>o.state.status==="pending");return!r||r===e}else return!0}runNext(e){const n=nh(e);return typeof n=="string"?this.#e.get(n)?.find(r=>r!==e&&r.state.isPaused)?.continue()??Promise.resolve():Promise.resolve()}clear(){Qn.batch(()=>{this.#t.forEach(e=>{this.notify({type:"removed",mutation:e})}),this.#t.clear(),this.#e.clear()})}getAll(){return Array.from(this.#t)}find(e){const n={exact:!0,...e};return this.getAll().find(a=>f1(n,a))}findAll(e={}){return this.getAll().filter(n=>f1(e,n))}notify(e){Qn.batch(()=>{this.listeners.forEach(n=>{n(e)})})}resumePausedMutations(){const e=this.getAll().filter(n=>n.state.isPaused);return Qn.batch(()=>Promise.all(e.map(n=>n.continue().catch(Ea))))}};function nh(e){return e.options.scope?.id}function x1(e){return{onFetch:(n,a)=>{const r=n.options,o=n.fetchOptions?.meta?.fetchMore?.direction,d=n.state.data?.pages||[],h=n.state.data?.pageParams||[];let g={pages:[],pageParams:[]},p=0;const f=async()=>{let v=!1;const w=C=>{Object.defineProperty(C,"signal",{enumerable:!0,get:()=>(n.signal.aborted?v=!0:n.signal.addEventListener("abort",()=>{v=!0}),n.signal)})},S=Qw(n.options,n.fetchOptions),T=async(C,_,k)=>{if(v)return Promise.reject();if(_==null&&C.pages.length)return Promise.resolve(C);const O=(()=>{const $={client:n.client,queryKey:n.queryKey,pageParam:_,direction:k?"backward":"forward",meta:n.options.meta};return w($),$})(),P=await S(O),{maxPages:U}=n.options,A=k?Qk:Gk;return{pages:A(C.pages,P,U),pageParams:A(C.pageParams,_,U)}};if(o&&d.length){const C=o==="backward",_=C?o5:y1,k={pages:d,pageParams:h},R=_(r,k);g=await T(k,R,C)}else{const C=e??d.length;do{const _=p===0?h[0]??r.initialPageParam:y1(r,g);if(p>0&&_==null)break;g=await T(g,_),p++}while(p<C)}return g};n.options.persister?n.fetchFn=()=>n.options.persister?.(f,{client:n.client,queryKey:n.queryKey,meta:n.options.meta,signal:n.signal},a):n.fetchFn=f}}}function y1(e,{pages:n,pageParams:a}){const r=n.length-1;return n.length>0?e.getNextPageParam(n[r],n,a[r],a):void 0}function o5(e,{pages:n,pageParams:a}){return n.length>0?e.getPreviousPageParam?.(n[0],n,a[0],a):void 0}var c5=class{#t;#e;#n;#a;#s;#i;#l;#r;constructor(e={}){this.#t=e.queryCache||new r5,this.#e=e.mutationCache||new l5,this.#n=e.defaultOptions||{},this.#a=new Map,this.#s=new Map,this.#i=0}mount(){this.#i++,this.#i===1&&(this.#l=d0.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onFocus())}),this.#r=Eh.subscribe(async e=>{e&&(await this.resumePausedMutations(),this.#t.onOnline())}))}unmount(){this.#i--,this.#i===0&&(this.#l?.(),this.#l=void 0,this.#r?.(),this.#r=void 0)}isFetching(e){return this.#t.findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return this.#e.findAll({...e,status:"pending"}).length}getQueryData(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state.data}ensureQueryData(e){const n=this.defaultQueryOptions(e),a=this.#t.build(this,n),r=a.state.data;return r===void 0?this.fetchQuery(e):(e.revalidateIfStale&&a.isStaleByTime(tl(n.staleTime,a))&&this.prefetchQuery(n),Promise.resolve(r))}getQueriesData(e){return this.#t.findAll(e).map(({queryKey:n,state:a})=>{const r=a.data;return[n,r]})}setQueryData(e,n,a){const r=this.defaultQueryOptions({queryKey:e}),d=this.#t.get(r.queryHash)?.state.data,h=Wk(n,d);if(h!==void 0)return this.#t.build(this,r).setData(h,{...a,manual:!0})}setQueriesData(e,n,a){return Qn.batch(()=>this.#t.findAll(e).map(({queryKey:r})=>[r,this.setQueryData(r,n,a)]))}getQueryState(e){const n=this.defaultQueryOptions({queryKey:e});return this.#t.get(n.queryHash)?.state}removeQueries(e){const n=this.#t;Qn.batch(()=>{n.findAll(e).forEach(a=>{n.remove(a)})})}resetQueries(e,n){const a=this.#t;return Qn.batch(()=>(a.findAll(e).forEach(r=>{r.reset()}),this.refetchQueries({type:"active",...e},n)))}cancelQueries(e,n={}){const a={revert:!0,...n},r=Qn.batch(()=>this.#t.findAll(e).map(o=>o.cancel(a)));return Promise.all(r).then(Ea).catch(Ea)}invalidateQueries(e,n={}){return Qn.batch(()=>(this.#t.findAll(e).forEach(a=>{a.invalidate()}),e?.refetchType==="none"?Promise.resolve():this.refetchQueries({...e,type:e?.refetchType??e?.type??"active"},n)))}refetchQueries(e,n={}){const a={...n,cancelRefetch:n.cancelRefetch??!0},r=Qn.batch(()=>this.#t.findAll(e).filter(o=>!o.isDisabled()&&!o.isStatic()).map(o=>{let d=o.fetch(void 0,a);return a.throwOnError||(d=d.catch(Ea)),o.state.fetchStatus==="paused"?Promise.resolve():d}));return Promise.all(r).then(Ea)}fetchQuery(e){const n=this.defaultQueryOptions(e);n.retry===void 0&&(n.retry=!1);const a=this.#t.build(this,n);return a.isStaleByTime(tl(n.staleTime,a))?a.fetch(n):Promise.resolve(a.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Ea).catch(Ea)}fetchInfiniteQuery(e){return e.behavior=x1(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Ea).catch(Ea)}ensureInfiniteQueryData(e){return e.behavior=x1(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return Eh.isOnline()?this.#e.resumePausedMutations():Promise.resolve()}getQueryCache(){return this.#t}getMutationCache(){return this.#e}getDefaultOptions(){return this.#n}setDefaultOptions(e){this.#n=e}setQueryDefaults(e,n){this.#a.set(Hl(e),{queryKey:e,defaultOptions:n})}getQueryDefaults(e){const n=[...this.#a.values()],a={};return n.forEach(r=>{Xd(e,r.queryKey)&&Object.assign(a,r.defaultOptions)}),a}setMutationDefaults(e,n){this.#s.set(Hl(e),{mutationKey:e,defaultOptions:n})}getMutationDefaults(e){const n=[...this.#s.values()],a={};return n.forEach(r=>{Xd(e,r.mutationKey)&&Object.assign(a,r.defaultOptions)}),a}defaultQueryOptions(e){if(e._defaulted)return e;const n={...this.#n.queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return n.queryHash||(n.queryHash=o0(n.queryKey,n)),n.refetchOnReconnect===void 0&&(n.refetchOnReconnect=n.networkMode!=="always"),n.throwOnError===void 0&&(n.throwOnError=!!n.suspense),!n.networkMode&&n.persister&&(n.networkMode="offlineFirst"),n.queryFn===c0&&(n.enabled=!1),n}defaultMutationOptions(e){return e?._defaulted?e:{...this.#n.mutations,...e?.mutationKey&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){this.#t.clear(),this.#e.clear()}},d5=class extends xc{constructor(e,n){super(),this.options=n,this.#t=e,this.#r=null,this.#l=fx(),this.options.experimental_prefetchInRender||this.#l.reject(new Error("experimental_prefetchInRender feature flag is not enabled")),this.bindMethods(),this.setOptions(n)}#t;#e=void 0;#n=void 0;#a=void 0;#s;#i;#l;#r;#p;#m;#h;#c;#d;#o;#f=new Set;bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(this.#e.addObserver(this),b1(this.#e,this.options)?this.#u():this.updateResult(),this.#b())}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return px(this.#e,this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return px(this.#e,this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,this.#v(),this.#j(),this.#e.removeObserver(this)}setOptions(e){const n=this.options,a=this.#e;if(this.options=this.#t.defaultQueryOptions(e),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof js(this.options.enabled,this.#e)!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");this.#w(),this.#e.setOptions(this.options),n._defaulted&&!Th(this.options,n)&&this.#t.getQueryCache().notify({type:"observerOptionsUpdated",query:this.#e,observer:this});const r=this.hasListeners();r&&v1(this.#e,a,this.options,n)&&this.#u(),this.updateResult(),r&&(this.#e!==a||js(this.options.enabled,this.#e)!==js(n.enabled,this.#e)||tl(this.options.staleTime,this.#e)!==tl(n.staleTime,this.#e))&&this.#g();const o=this.#x();r&&(this.#e!==a||js(this.options.enabled,this.#e)!==js(n.enabled,this.#e)||o!==this.#o)&&this.#y(o)}getOptimisticResult(e){const n=this.#t.getQueryCache().build(this.#t,e),a=this.createResult(n,e);return m5(this,a)&&(this.#a=a,this.#i=this.options,this.#s=this.#e.state),a}getCurrentResult(){return this.#a}trackResult(e,n){return new Proxy(e,{get:(a,r)=>(this.trackProp(r),n?.(r),Reflect.get(a,r))})}trackProp(e){this.#f.add(e)}getCurrentQuery(){return this.#e}refetch({...e}={}){return this.fetch({...e})}fetchOptimistic(e){const n=this.#t.defaultQueryOptions(e),a=this.#t.getQueryCache().build(this.#t,n);return a.fetch().then(()=>this.createResult(a,n))}fetch(e){return this.#u({...e,cancelRefetch:e.cancelRefetch??!0}).then(()=>(this.updateResult(),this.#a))}#u(e){this.#w();let n=this.#e.fetch(this.options,e);return e?.throwOnError||(n=n.catch(Ea)),n}#g(){this.#v();const e=tl(this.options.staleTime,this.#e);if(Ul||this.#a.isStale||!ux(e))return;const a=Kw(this.#a.dataUpdatedAt,e)+1;this.#c=setTimeout(()=>{this.#a.isStale||this.updateResult()},a)}#x(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(this.#e):this.options.refetchInterval)??!1}#y(e){this.#j(),this.#o=e,!(Ul||js(this.options.enabled,this.#e)===!1||!ux(this.#o)||this.#o===0)&&(this.#d=setInterval(()=>{(this.options.refetchIntervalInBackground||d0.isFocused())&&this.#u()},this.#o))}#b(){this.#g(),this.#y(this.#x())}#v(){this.#c&&(clearTimeout(this.#c),this.#c=void 0)}#j(){this.#d&&(clearInterval(this.#d),this.#d=void 0)}createResult(e,n){const a=this.#e,r=this.options,o=this.#a,d=this.#s,h=this.#i,p=e!==a?e.state:this.#n,{state:f}=e;let v={...f},w=!1,S;if(n._optimisticResults){const I=this.hasListeners(),Z=!I&&b1(e,n),F=I&&v1(e,a,n,r);(Z||F)&&(v={...v,...aN(f.data,e.options)}),n._optimisticResults==="isRestoring"&&(v.fetchStatus="idle")}let{error:T,errorUpdatedAt:C,status:_}=v;S=v.data;let k=!1;if(n.placeholderData!==void 0&&S===void 0&&_==="pending"){let I;o?.isPlaceholderData&&n.placeholderData===h?.placeholderData?(I=o.data,k=!0):I=typeof n.placeholderData=="function"?n.placeholderData(this.#h?.state.data,this.#h):n.placeholderData,I!==void 0&&(_="success",S=hx(o?.data,I,n),w=!0)}if(n.select&&S!==void 0&&!k)if(o&&S===d?.data&&n.select===this.#p)S=this.#m;else try{this.#p=n.select,S=n.select(S),S=hx(o?.data,S,n),this.#m=S,this.#r=null}catch(I){this.#r=I}this.#r&&(T=this.#r,S=this.#m,C=Date.now(),_="error");const R=v.fetchStatus==="fetching",O=_==="pending",P=_==="error",U=O&&R,A=S!==void 0,E={status:_,fetchStatus:v.fetchStatus,isPending:O,isSuccess:_==="success",isError:P,isInitialLoading:U,isLoading:U,data:S,dataUpdatedAt:v.dataUpdatedAt,error:T,errorUpdatedAt:C,failureCount:v.fetchFailureCount,failureReason:v.fetchFailureReason,errorUpdateCount:v.errorUpdateCount,isFetched:v.dataUpdateCount>0||v.errorUpdateCount>0,isFetchedAfterMount:v.dataUpdateCount>p.dataUpdateCount||v.errorUpdateCount>p.errorUpdateCount,isFetching:R,isRefetching:R&&!O,isLoadingError:P&&!A,isPaused:v.fetchStatus==="paused",isPlaceholderData:w,isRefetchError:P&&A,isStale:u0(e,n),refetch:this.refetch,promise:this.#l,isEnabled:js(n.enabled,e)!==!1};if(this.options.experimental_prefetchInRender){const I=Y=>{E.status==="error"?Y.reject(E.error):E.data!==void 0&&Y.resolve(E.data)},Z=()=>{const Y=this.#l=E.promise=fx();I(Y)},F=this.#l;switch(F.status){case"pending":e.queryHash===a.queryHash&&I(F);break;case"fulfilled":(E.status==="error"||E.data!==F.value)&&Z();break;case"rejected":(E.status!=="error"||E.error!==F.reason)&&Z();break}}return E}updateResult(){const e=this.#a,n=this.createResult(this.#e,this.options);if(this.#s=this.#e.state,this.#i=this.options,this.#s.data!==void 0&&(this.#h=this.#e),Th(n,e))return;this.#a=n;const a=()=>{if(!e)return!0;const{notifyOnChangeProps:r}=this.options,o=typeof r=="function"?r():r;if(o==="all"||!o&&!this.#f.size)return!0;const d=new Set(o??this.#f);return this.options.throwOnError&&d.add("error"),Object.keys(this.#a).some(h=>{const g=h;return this.#a[g]!==e[g]&&d.has(g)})};this.#N({listeners:a()})}#w(){const e=this.#t.getQueryCache().build(this.#t,this.options);if(e===this.#e)return;const n=this.#e;this.#e=e,this.#n=e.state,this.hasListeners()&&(n?.removeObserver(this),e.addObserver(this))}onQueryUpdate(){this.updateResult(),this.hasListeners()&&this.#b()}#N(e){Qn.batch(()=>{e.listeners&&this.listeners.forEach(n=>{n(this.#a)}),this.#t.getQueryCache().notify({query:this.#e,type:"observerResultsUpdated"})})}};function u5(e,n){return js(n.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&n.retryOnMount===!1)}function b1(e,n){return u5(e,n)||e.state.data!==void 0&&px(e,n,n.refetchOnMount)}function px(e,n,a){if(js(n.enabled,e)!==!1&&tl(n.staleTime,e)!=="static"){const r=typeof a=="function"?a(e):a;return r==="always"||r!==!1&&u0(e,n)}return!1}function v1(e,n,a,r){return(e!==n||js(r.enabled,e)===!1)&&(!a.suspense||e.state.status!=="error")&&u0(e,a)}function u0(e,n){return js(n.enabled,e)!==!1&&e.isStaleByTime(tl(n.staleTime,e))}function m5(e,n){return!Th(e.getCurrentResult(),n)}var h5=class extends xc{#t;#e=void 0;#n;#a;constructor(n,a){super(),this.#t=n,this.setOptions(a),this.bindMethods(),this.#s()}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){const a=this.options;this.options=this.#t.defaultMutationOptions(n),Th(this.options,a)||this.#t.getMutationCache().notify({type:"observerOptionsUpdated",mutation:this.#n,observer:this}),a?.mutationKey&&this.options.mutationKey&&Hl(a.mutationKey)!==Hl(this.options.mutationKey)?this.reset():this.#n?.state.status==="pending"&&this.#n.setOptions(this.options)}onUnsubscribe(){this.hasListeners()||this.#n?.removeObserver(this)}onMutationUpdate(n){this.#s(),this.#i(n)}getCurrentResult(){return this.#e}reset(){this.#n?.removeObserver(this),this.#n=void 0,this.#s(),this.#i()}mutate(n,a){return this.#a=a,this.#n?.removeObserver(this),this.#n=this.#t.getMutationCache().build(this.#t,this.options),this.#n.addObserver(this),this.#n.execute(n)}#s(){const n=this.#n?.state??sN();this.#e={...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset}}#i(n){Qn.batch(()=>{if(this.#a&&this.hasListeners()){const a=this.#e.variables,r=this.#e.context;n?.type==="success"?(this.#a.onSuccess?.(n.data,a,r),this.#a.onSettled?.(n.data,null,a,r)):n?.type==="error"&&(this.#a.onError?.(n.error,a,r),this.#a.onSettled?.(void 0,n.error,a,r))}this.listeners.forEach(a=>{a(this.#e)})})}},rN=b.createContext(void 0),Bn=e=>{const n=b.useContext(rN);if(!n)throw new Error("No QueryClient set, use QueryClientProvider to set one");return n},f5=({client:e,children:n})=>(b.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),t.jsx(rN.Provider,{value:e,children:n})),iN=b.createContext(!1),p5=()=>b.useContext(iN);iN.Provider;function g5(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var x5=b.createContext(g5()),y5=()=>b.useContext(x5),b5=(e,n)=>{(e.suspense||e.throwOnError||e.experimental_prefetchInRender)&&(n.isReset()||(e.retryOnMount=!1))},v5=e=>{b.useEffect(()=>{e.clearReset()},[e])},j5=({result:e,errorResetBoundary:n,throwOnError:a,query:r,suspense:o})=>e.isError&&!n.isReset()&&!e.isFetching&&r&&(o&&e.data===void 0||Xw(a,[e.error,r])),w5=e=>{if(e.suspense){const n=r=>r==="static"?r:Math.max(r??1e3,1e3),a=e.staleTime;e.staleTime=typeof a=="function"?(...r)=>n(a(...r)):n(a),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},N5=(e,n)=>e.isLoading&&e.isFetching&&!n,_5=(e,n)=>e?.suspense&&n.isPending,j1=(e,n,a)=>n.fetchOptimistic(e).catch(()=>{a.clearReset()});function S5(e,n,a){const r=p5(),o=y5(),d=Bn(),h=d.defaultQueryOptions(e);d.getDefaultOptions().queries?._experimental_beforeQuery?.(h),h._optimisticResults=r?"isRestoring":"optimistic",w5(h),b5(h,o),v5(o);const g=!d.getQueryCache().get(h.queryHash),[p]=b.useState(()=>new n(d,h)),f=p.getOptimisticResult(h),v=!r&&e.subscribed!==!1;if(b.useSyncExternalStore(b.useCallback(w=>{const S=v?p.subscribe(Qn.batchCalls(w)):Ea;return p.updateResult(),S},[p,v]),()=>p.getCurrentResult(),()=>p.getCurrentResult()),b.useEffect(()=>{p.setOptions(h)},[h,p]),_5(h,f))throw j1(h,p,o);if(j5({result:f,errorResetBoundary:o,throwOnError:h.throwOnError,query:d.getQueryCache().get(h.queryHash),suspense:h.suspense}))throw f.error;return d.getDefaultOptions().queries?._experimental_afterQuery?.(h,f),h.experimental_prefetchInRender&&!Ul&&N5(f,r)&&(g?j1(h,p,o):d.getQueryCache().get(h.queryHash)?.promise)?.catch(Ea).finally(()=>{p.updateResult()}),h.notifyOnChangeProps?f:p.trackResult(f)}function It(e,n){return S5(e,d5)}function Be(e,n){const a=Bn(),[r]=b.useState(()=>new h5(a,e));b.useEffect(()=>{r.setOptions(e)},[r,e]);const o=b.useSyncExternalStore(b.useCallback(h=>r.subscribe(Qn.batchCalls(h)),[r]),()=>r.getCurrentResult(),()=>r.getCurrentResult()),d=b.useCallback((h,g)=>{r.mutate(h,g).catch(Ea)},[r]);if(o.error&&Xw(r.options.throwOnError,[o.error]))throw o.error;return{...o,mutate:d,mutateAsync:o.mutate}}function lN(e,n){return function(){return e.apply(n,arguments)}}const{toString:C5}=Object.prototype,{getPrototypeOf:m0}=Object,{iterator:Xh,toStringTag:oN}=Symbol,Jh=(e=>n=>{const a=C5.call(n);return e[a]||(e[a]=a.slice(8,-1).toLowerCase())})(Object.create(null)),qs=e=>(e=e.toLowerCase(),n=>Jh(n)===e),ef=e=>n=>typeof n===e,{isArray:yc}=Array,Jd=ef("undefined");function yu(e){return e!==null&&!Jd(e)&&e.constructor!==null&&!Jd(e.constructor)&&Ba(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const cN=qs("ArrayBuffer");function k5(e){let n;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?n=ArrayBuffer.isView(e):n=e&&e.buffer&&cN(e.buffer),n}const T5=ef("string"),Ba=ef("function"),dN=ef("number"),bu=e=>e!==null&&typeof e=="object",E5=e=>e===!0||e===!1,bh=e=>{if(Jh(e)!=="object")return!1;const n=m0(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(oN in e)&&!(Xh in e)},M5=e=>{if(!bu(e)||yu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},R5=qs("Date"),A5=qs("File"),D5=qs("Blob"),O5=qs("FileList"),P5=e=>bu(e)&&Ba(e.pipe),L5=e=>{let n;return e&&(typeof FormData=="function"&&e instanceof FormData||Ba(e.append)&&((n=Jh(e))==="formdata"||n==="object"&&Ba(e.toString)&&e.toString()==="[object FormData]"))},z5=qs("URLSearchParams"),[I5,B5,$5,F5]=["ReadableStream","Request","Response","Headers"].map(qs),U5=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function vu(e,n,{allOwnKeys:a=!1}={}){if(e===null||typeof e>"u")return;let r,o;if(typeof e!="object"&&(e=[e]),yc(e))for(r=0,o=e.length;r<o;r++)n.call(null,e[r],r,e);else{if(yu(e))return;const d=a?Object.getOwnPropertyNames(e):Object.keys(e),h=d.length;let g;for(r=0;r<h;r++)g=d[r],n.call(null,e[g],g,e)}}function uN(e,n){if(yu(e))return null;n=n.toLowerCase();const a=Object.keys(e);let r=a.length,o;for(;r-- >0;)if(o=a[r],n===o.toLowerCase())return o;return null}const Il=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,mN=e=>!Jd(e)&&e!==Il;function gx(){const{caseless:e}=mN(this)&&this||{},n={},a=(r,o)=>{const d=e&&uN(n,o)||o;bh(n[d])&&bh(r)?n[d]=gx(n[d],r):bh(r)?n[d]=gx({},r):yc(r)?n[d]=r.slice():n[d]=r};for(let r=0,o=arguments.length;r<o;r++)arguments[r]&&vu(arguments[r],a);return n}const H5=(e,n,a,{allOwnKeys:r}={})=>(vu(n,(o,d)=>{a&&Ba(o)?e[d]=lN(o,a):e[d]=o},{allOwnKeys:r}),e),q5=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Y5=(e,n,a,r)=>{e.prototype=Object.create(n.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:n.prototype}),a&&Object.assign(e.prototype,a)},V5=(e,n,a,r)=>{let o,d,h;const g={};if(n=n||{},e==null)return n;do{for(o=Object.getOwnPropertyNames(e),d=o.length;d-- >0;)h=o[d],(!r||r(h,e,n))&&!g[h]&&(n[h]=e[h],g[h]=!0);e=a!==!1&&m0(e)}while(e&&(!a||a(e,n))&&e!==Object.prototype);return n},Z5=(e,n,a)=>{e=String(e),(a===void 0||a>e.length)&&(a=e.length),a-=n.length;const r=e.indexOf(n,a);return r!==-1&&r===a},W5=e=>{if(!e)return null;if(yc(e))return e;let n=e.length;if(!dN(n))return null;const a=new Array(n);for(;n-- >0;)a[n]=e[n];return a},K5=(e=>n=>e&&n instanceof e)(typeof Uint8Array<"u"&&m0(Uint8Array)),G5=(e,n)=>{const r=(e&&e[Xh]).call(e);let o;for(;(o=r.next())&&!o.done;){const d=o.value;n.call(e,d[0],d[1])}},Q5=(e,n)=>{let a;const r=[];for(;(a=e.exec(n))!==null;)r.push(a);return r},X5=qs("HTMLFormElement"),J5=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(a,r,o){return r.toUpperCase()+o}),w1=(({hasOwnProperty:e})=>(n,a)=>e.call(n,a))(Object.prototype),e4=qs("RegExp"),hN=(e,n)=>{const a=Object.getOwnPropertyDescriptors(e),r={};vu(a,(o,d)=>{let h;(h=n(o,d,e))!==!1&&(r[d]=h||o)}),Object.defineProperties(e,r)},t4=e=>{hN(e,(n,a)=>{if(Ba(e)&&["arguments","caller","callee"].indexOf(a)!==-1)return!1;const r=e[a];if(Ba(r)){if(n.enumerable=!1,"writable"in n){n.writable=!1;return}n.set||(n.set=()=>{throw Error("Can not rewrite read-only method '"+a+"'")})}})},n4=(e,n)=>{const a={},r=o=>{o.forEach(d=>{a[d]=!0})};return yc(e)?r(e):r(String(e).split(n)),a},a4=()=>{},s4=(e,n)=>e!=null&&Number.isFinite(e=+e)?e:n;function r4(e){return!!(e&&Ba(e.append)&&e[oN]==="FormData"&&e[Xh])}const i4=e=>{const n=new Array(10),a=(r,o)=>{if(bu(r)){if(n.indexOf(r)>=0)return;if(yu(r))return r;if(!("toJSON"in r)){n[o]=r;const d=yc(r)?[]:{};return vu(r,(h,g)=>{const p=a(h,o+1);!Jd(p)&&(d[g]=p)}),n[o]=void 0,d}}return r};return a(e,0)},l4=qs("AsyncFunction"),o4=e=>e&&(bu(e)||Ba(e))&&Ba(e.then)&&Ba(e.catch),fN=((e,n)=>e?setImmediate:n?((a,r)=>(Il.addEventListener("message",({source:o,data:d})=>{o===Il&&d===a&&r.length&&r.shift()()},!1),o=>{r.push(o),Il.postMessage(a,"*")}))(`axios@${Math.random()}`,[]):a=>setTimeout(a))(typeof setImmediate=="function",Ba(Il.postMessage)),c4=typeof queueMicrotask<"u"?queueMicrotask.bind(Il):typeof process<"u"&&process.nextTick||fN,d4=e=>e!=null&&Ba(e[Xh]),Ne={isArray:yc,isArrayBuffer:cN,isBuffer:yu,isFormData:L5,isArrayBufferView:k5,isString:T5,isNumber:dN,isBoolean:E5,isObject:bu,isPlainObject:bh,isEmptyObject:M5,isReadableStream:I5,isRequest:B5,isResponse:$5,isHeaders:F5,isUndefined:Jd,isDate:R5,isFile:A5,isBlob:D5,isRegExp:e4,isFunction:Ba,isStream:P5,isURLSearchParams:z5,isTypedArray:K5,isFileList:O5,forEach:vu,merge:gx,extend:H5,trim:U5,stripBOM:q5,inherits:Y5,toFlatObject:V5,kindOf:Jh,kindOfTest:qs,endsWith:Z5,toArray:W5,forEachEntry:G5,matchAll:Q5,isHTMLForm:X5,hasOwnProperty:w1,hasOwnProp:w1,reduceDescriptors:hN,freezeMethods:t4,toObjectSet:n4,toCamelCase:J5,noop:a4,toFiniteNumber:s4,findKey:uN,global:Il,isContextDefined:mN,isSpecCompliantForm:r4,toJSONObject:i4,isAsyncFn:l4,isThenable:o4,setImmediate:fN,asap:c4,isIterable:d4};function ft(e,n,a,r,o){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",n&&(this.code=n),a&&(this.config=a),r&&(this.request=r),o&&(this.response=o,this.status=o.status?o.status:null)}Ne.inherits(ft,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:Ne.toJSONObject(this.config),code:this.code,status:this.status}}});const pN=ft.prototype,gN={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{gN[e]={value:e}});Object.defineProperties(ft,gN);Object.defineProperty(pN,"isAxiosError",{value:!0});ft.from=(e,n,a,r,o,d)=>{const h=Object.create(pN);return Ne.toFlatObject(e,h,function(p){return p!==Error.prototype},g=>g!=="isAxiosError"),ft.call(h,e.message,n,a,r,o),h.cause=e,h.name=e.name,d&&Object.assign(h,d),h};const u4=null;function xx(e){return Ne.isPlainObject(e)||Ne.isArray(e)}function xN(e){return Ne.endsWith(e,"[]")?e.slice(0,-2):e}function N1(e,n,a){return e?e.concat(n).map(function(o,d){return o=xN(o),!a&&d?"["+o+"]":o}).join(a?".":""):n}function m4(e){return Ne.isArray(e)&&!e.some(xx)}const h4=Ne.toFlatObject(Ne,{},null,function(n){return/^is[A-Z]/.test(n)});function tf(e,n,a){if(!Ne.isObject(e))throw new TypeError("target must be an object");n=n||new FormData,a=Ne.toFlatObject(a,{metaTokens:!0,dots:!1,indexes:!1},!1,function(_,k){return!Ne.isUndefined(k[_])});const r=a.metaTokens,o=a.visitor||v,d=a.dots,h=a.indexes,p=(a.Blob||typeof Blob<"u"&&Blob)&&Ne.isSpecCompliantForm(n);if(!Ne.isFunction(o))throw new TypeError("visitor must be a function");function f(C){if(C===null)return"";if(Ne.isDate(C))return C.toISOString();if(Ne.isBoolean(C))return C.toString();if(!p&&Ne.isBlob(C))throw new ft("Blob is not supported. Use a Buffer instead.");return Ne.isArrayBuffer(C)||Ne.isTypedArray(C)?p&&typeof Blob=="function"?new Blob([C]):Buffer.from(C):C}function v(C,_,k){let R=C;if(C&&!k&&typeof C=="object"){if(Ne.endsWith(_,"{}"))_=r?_:_.slice(0,-2),C=JSON.stringify(C);else if(Ne.isArray(C)&&m4(C)||(Ne.isFileList(C)||Ne.endsWith(_,"[]"))&&(R=Ne.toArray(C)))return _=xN(_),R.forEach(function(P,U){!(Ne.isUndefined(P)||P===null)&&n.append(h===!0?N1([_],U,d):h===null?_:_+"[]",f(P))}),!1}return xx(C)?!0:(n.append(N1(k,_,d),f(C)),!1)}const w=[],S=Object.assign(h4,{defaultVisitor:v,convertValue:f,isVisitable:xx});function T(C,_){if(!Ne.isUndefined(C)){if(w.indexOf(C)!==-1)throw Error("Circular reference detected in "+_.join("."));w.push(C),Ne.forEach(C,function(R,O){(!(Ne.isUndefined(R)||R===null)&&o.call(n,R,Ne.isString(O)?O.trim():O,_,S))===!0&&T(R,_?_.concat(O):[O])}),w.pop()}}if(!Ne.isObject(e))throw new TypeError("data must be an object");return T(e),n}function _1(e){const n={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(r){return n[r]})}function h0(e,n){this._pairs=[],e&&tf(e,this,n)}const yN=h0.prototype;yN.append=function(n,a){this._pairs.push([n,a])};yN.toString=function(n){const a=n?function(r){return n.call(this,r,_1)}:_1;return this._pairs.map(function(o){return a(o[0])+"="+a(o[1])},"").join("&")};function f4(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bN(e,n,a){if(!n)return e;const r=a&&a.encode||f4;Ne.isFunction(a)&&(a={serialize:a});const o=a&&a.serialize;let d;if(o?d=o(n,a):d=Ne.isURLSearchParams(n)?n.toString():new h0(n,a).toString(r),d){const h=e.indexOf("#");h!==-1&&(e=e.slice(0,h)),e+=(e.indexOf("?")===-1?"?":"&")+d}return e}class S1{constructor(){this.handlers=[]}use(n,a,r){return this.handlers.push({fulfilled:n,rejected:a,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(n){this.handlers[n]&&(this.handlers[n]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(n){Ne.forEach(this.handlers,function(r){r!==null&&n(r)})}}const vN={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},p4=typeof URLSearchParams<"u"?URLSearchParams:h0,g4=typeof FormData<"u"?FormData:null,x4=typeof Blob<"u"?Blob:null,y4={isBrowser:!0,classes:{URLSearchParams:p4,FormData:g4,Blob:x4},protocols:["http","https","file","blob","url","data"]},f0=typeof window<"u"&&typeof document<"u",yx=typeof navigator=="object"&&navigator||void 0,b4=f0&&(!yx||["ReactNative","NativeScript","NS"].indexOf(yx.product)<0),v4=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",j4=f0&&window.location.href||"http://localhost",w4=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:f0,hasStandardBrowserEnv:b4,hasStandardBrowserWebWorkerEnv:v4,navigator:yx,origin:j4},Symbol.toStringTag,{value:"Module"})),wa={...w4,...y4};function N4(e,n){return tf(e,new wa.classes.URLSearchParams,{visitor:function(a,r,o,d){return wa.isNode&&Ne.isBuffer(a)?(this.append(r,a.toString("base64")),!1):d.defaultVisitor.apply(this,arguments)},...n})}function _4(e){return Ne.matchAll(/\w+|\[(\w*)]/g,e).map(n=>n[0]==="[]"?"":n[1]||n[0])}function S4(e){const n={},a=Object.keys(e);let r;const o=a.length;let d;for(r=0;r<o;r++)d=a[r],n[d]=e[d];return n}function jN(e){function n(a,r,o,d){let h=a[d++];if(h==="__proto__")return!0;const g=Number.isFinite(+h),p=d>=a.length;return h=!h&&Ne.isArray(o)?o.length:h,p?(Ne.hasOwnProp(o,h)?o[h]=[o[h],r]:o[h]=r,!g):((!o[h]||!Ne.isObject(o[h]))&&(o[h]=[]),n(a,r,o[h],d)&&Ne.isArray(o[h])&&(o[h]=S4(o[h])),!g)}if(Ne.isFormData(e)&&Ne.isFunction(e.entries)){const a={};return Ne.forEachEntry(e,(r,o)=>{n(_4(r),o,a,0)}),a}return null}function C4(e,n,a){if(Ne.isString(e))try{return(n||JSON.parse)(e),Ne.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(a||JSON.stringify)(e)}const ju={transitional:vN,adapter:["xhr","http","fetch"],transformRequest:[function(n,a){const r=a.getContentType()||"",o=r.indexOf("application/json")>-1,d=Ne.isObject(n);if(d&&Ne.isHTMLForm(n)&&(n=new FormData(n)),Ne.isFormData(n))return o?JSON.stringify(jN(n)):n;if(Ne.isArrayBuffer(n)||Ne.isBuffer(n)||Ne.isStream(n)||Ne.isFile(n)||Ne.isBlob(n)||Ne.isReadableStream(n))return n;if(Ne.isArrayBufferView(n))return n.buffer;if(Ne.isURLSearchParams(n))return a.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),n.toString();let g;if(d){if(r.indexOf("application/x-www-form-urlencoded")>-1)return N4(n,this.formSerializer).toString();if((g=Ne.isFileList(n))||r.indexOf("multipart/form-data")>-1){const p=this.env&&this.env.FormData;return tf(g?{"files[]":n}:n,p&&new p,this.formSerializer)}}return d||o?(a.setContentType("application/json",!1),C4(n)):n}],transformResponse:[function(n){const a=this.transitional||ju.transitional,r=a&&a.forcedJSONParsing,o=this.responseType==="json";if(Ne.isResponse(n)||Ne.isReadableStream(n))return n;if(n&&Ne.isString(n)&&(r&&!this.responseType||o)){const h=!(a&&a.silentJSONParsing)&&o;try{return JSON.parse(n)}catch(g){if(h)throw g.name==="SyntaxError"?ft.from(g,ft.ERR_BAD_RESPONSE,this,null,this.response):g}}return n}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:wa.classes.FormData,Blob:wa.classes.Blob},validateStatus:function(n){return n>=200&&n<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};Ne.forEach(["delete","get","head","post","put","patch"],e=>{ju.headers[e]={}});const k4=Ne.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),T4=e=>{const n={};let a,r,o;return e&&e.split(`
`).forEach(function(h){o=h.indexOf(":"),a=h.substring(0,o).trim().toLowerCase(),r=h.substring(o+1).trim(),!(!a||n[a]&&k4[a])&&(a==="set-cookie"?n[a]?n[a].push(r):n[a]=[r]:n[a]=n[a]?n[a]+", "+r:r)}),n},C1=Symbol("internals");function Rd(e){return e&&String(e).trim().toLowerCase()}function vh(e){return e===!1||e==null?e:Ne.isArray(e)?e.map(vh):String(e)}function E4(e){const n=Object.create(null),a=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=a.exec(e);)n[r[1]]=r[2];return n}const M4=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Dg(e,n,a,r,o){if(Ne.isFunction(r))return r.call(this,n,a);if(o&&(n=a),!!Ne.isString(n)){if(Ne.isString(r))return n.indexOf(r)!==-1;if(Ne.isRegExp(r))return r.test(n)}}function R4(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(n,a,r)=>a.toUpperCase()+r)}function A4(e,n){const a=Ne.toCamelCase(" "+n);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+a,{value:function(o,d,h){return this[r].call(this,n,o,d,h)},configurable:!0})})}let $a=class{constructor(n){n&&this.set(n)}set(n,a,r){const o=this;function d(g,p,f){const v=Rd(p);if(!v)throw new Error("header name must be a non-empty string");const w=Ne.findKey(o,v);(!w||o[w]===void 0||f===!0||f===void 0&&o[w]!==!1)&&(o[w||p]=vh(g))}const h=(g,p)=>Ne.forEach(g,(f,v)=>d(f,v,p));if(Ne.isPlainObject(n)||n instanceof this.constructor)h(n,a);else if(Ne.isString(n)&&(n=n.trim())&&!M4(n))h(T4(n),a);else if(Ne.isObject(n)&&Ne.isIterable(n)){let g={},p,f;for(const v of n){if(!Ne.isArray(v))throw TypeError("Object iterator must return a key-value pair");g[f=v[0]]=(p=g[f])?Ne.isArray(p)?[...p,v[1]]:[p,v[1]]:v[1]}h(g,a)}else n!=null&&d(a,n,r);return this}get(n,a){if(n=Rd(n),n){const r=Ne.findKey(this,n);if(r){const o=this[r];if(!a)return o;if(a===!0)return E4(o);if(Ne.isFunction(a))return a.call(this,o,r);if(Ne.isRegExp(a))return a.exec(o);throw new TypeError("parser must be boolean|regexp|function")}}}has(n,a){if(n=Rd(n),n){const r=Ne.findKey(this,n);return!!(r&&this[r]!==void 0&&(!a||Dg(this,this[r],r,a)))}return!1}delete(n,a){const r=this;let o=!1;function d(h){if(h=Rd(h),h){const g=Ne.findKey(r,h);g&&(!a||Dg(r,r[g],g,a))&&(delete r[g],o=!0)}}return Ne.isArray(n)?n.forEach(d):d(n),o}clear(n){const a=Object.keys(this);let r=a.length,o=!1;for(;r--;){const d=a[r];(!n||Dg(this,this[d],d,n,!0))&&(delete this[d],o=!0)}return o}normalize(n){const a=this,r={};return Ne.forEach(this,(o,d)=>{const h=Ne.findKey(r,d);if(h){a[h]=vh(o),delete a[d];return}const g=n?R4(d):String(d).trim();g!==d&&delete a[d],a[g]=vh(o),r[g]=!0}),this}concat(...n){return this.constructor.concat(this,...n)}toJSON(n){const a=Object.create(null);return Ne.forEach(this,(r,o)=>{r!=null&&r!==!1&&(a[o]=n&&Ne.isArray(r)?r.join(", "):r)}),a}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([n,a])=>n+": "+a).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(n){return n instanceof this?n:new this(n)}static concat(n,...a){const r=new this(n);return a.forEach(o=>r.set(o)),r}static accessor(n){const r=(this[C1]=this[C1]={accessors:{}}).accessors,o=this.prototype;function d(h){const g=Rd(h);r[g]||(A4(o,h),r[g]=!0)}return Ne.isArray(n)?n.forEach(d):d(n),this}};$a.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);Ne.reduceDescriptors($a.prototype,({value:e},n)=>{let a=n[0].toUpperCase()+n.slice(1);return{get:()=>e,set(r){this[a]=r}}});Ne.freezeMethods($a);function Og(e,n){const a=this||ju,r=n||a,o=$a.from(r.headers);let d=r.data;return Ne.forEach(e,function(g){d=g.call(a,d,o.normalize(),n?n.status:void 0)}),o.normalize(),d}function wN(e){return!!(e&&e.__CANCEL__)}function bc(e,n,a){ft.call(this,e??"canceled",ft.ERR_CANCELED,n,a),this.name="CanceledError"}Ne.inherits(bc,ft,{__CANCEL__:!0});function NN(e,n,a){const r=a.config.validateStatus;!a.status||!r||r(a.status)?e(a):n(new ft("Request failed with status code "+a.status,[ft.ERR_BAD_REQUEST,ft.ERR_BAD_RESPONSE][Math.floor(a.status/100)-4],a.config,a.request,a))}function D4(e){const n=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return n&&n[1]||""}function O4(e,n){e=e||10;const a=new Array(e),r=new Array(e);let o=0,d=0,h;return n=n!==void 0?n:1e3,function(p){const f=Date.now(),v=r[d];h||(h=f),a[o]=p,r[o]=f;let w=d,S=0;for(;w!==o;)S+=a[w++],w=w%e;if(o=(o+1)%e,o===d&&(d=(d+1)%e),f-h<n)return;const T=v&&f-v;return T?Math.round(S*1e3/T):void 0}}function P4(e,n){let a=0,r=1e3/n,o,d;const h=(f,v=Date.now())=>{a=v,o=null,d&&(clearTimeout(d),d=null),e(...f)};return[(...f)=>{const v=Date.now(),w=v-a;w>=r?h(f,v):(o=f,d||(d=setTimeout(()=>{d=null,h(o)},r-w)))},()=>o&&h(o)]}const Mh=(e,n,a=3)=>{let r=0;const o=O4(50,250);return P4(d=>{const h=d.loaded,g=d.lengthComputable?d.total:void 0,p=h-r,f=o(p),v=h<=g;r=h;const w={loaded:h,total:g,progress:g?h/g:void 0,bytes:p,rate:f||void 0,estimated:f&&g&&v?(g-h)/f:void 0,event:d,lengthComputable:g!=null,[n?"download":"upload"]:!0};e(w)},a)},k1=(e,n)=>{const a=e!=null;return[r=>n[0]({lengthComputable:a,total:e,loaded:r}),n[1]]},T1=e=>(...n)=>Ne.asap(()=>e(...n)),L4=wa.hasStandardBrowserEnv?((e,n)=>a=>(a=new URL(a,wa.origin),e.protocol===a.protocol&&e.host===a.host&&(n||e.port===a.port)))(new URL(wa.origin),wa.navigator&&/(msie|trident)/i.test(wa.navigator.userAgent)):()=>!0,z4=wa.hasStandardBrowserEnv?{write(e,n,a,r,o,d){const h=[e+"="+encodeURIComponent(n)];Ne.isNumber(a)&&h.push("expires="+new Date(a).toGMTString()),Ne.isString(r)&&h.push("path="+r),Ne.isString(o)&&h.push("domain="+o),d===!0&&h.push("secure"),document.cookie=h.join("; ")},read(e){const n=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return n?decodeURIComponent(n[3]):null},remove(e){this.write(e,"",Date.now()-864e5)}}:{write(){},read(){return null},remove(){}};function I4(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function B4(e,n){return n?e.replace(/\/?\/$/,"")+"/"+n.replace(/^\/+/,""):e}function _N(e,n,a){let r=!I4(n);return e&&(r||a==!1)?B4(e,n):n}const E1=e=>e instanceof $a?{...e}:e;function ql(e,n){n=n||{};const a={};function r(f,v,w,S){return Ne.isPlainObject(f)&&Ne.isPlainObject(v)?Ne.merge.call({caseless:S},f,v):Ne.isPlainObject(v)?Ne.merge({},v):Ne.isArray(v)?v.slice():v}function o(f,v,w,S){if(Ne.isUndefined(v)){if(!Ne.isUndefined(f))return r(void 0,f,w,S)}else return r(f,v,w,S)}function d(f,v){if(!Ne.isUndefined(v))return r(void 0,v)}function h(f,v){if(Ne.isUndefined(v)){if(!Ne.isUndefined(f))return r(void 0,f)}else return r(void 0,v)}function g(f,v,w){if(w in n)return r(f,v);if(w in e)return r(void 0,f)}const p={url:d,method:d,data:d,baseURL:h,transformRequest:h,transformResponse:h,paramsSerializer:h,timeout:h,timeoutMessage:h,withCredentials:h,withXSRFToken:h,adapter:h,responseType:h,xsrfCookieName:h,xsrfHeaderName:h,onUploadProgress:h,onDownloadProgress:h,decompress:h,maxContentLength:h,maxBodyLength:h,beforeRedirect:h,transport:h,httpAgent:h,httpsAgent:h,cancelToken:h,socketPath:h,responseEncoding:h,validateStatus:g,headers:(f,v,w)=>o(E1(f),E1(v),w,!0)};return Ne.forEach(Object.keys({...e,...n}),function(v){const w=p[v]||o,S=w(e[v],n[v],v);Ne.isUndefined(S)&&w!==g||(a[v]=S)}),a}const SN=e=>{const n=ql({},e);let{data:a,withXSRFToken:r,xsrfHeaderName:o,xsrfCookieName:d,headers:h,auth:g}=n;n.headers=h=$a.from(h),n.url=bN(_N(n.baseURL,n.url,n.allowAbsoluteUrls),e.params,e.paramsSerializer),g&&h.set("Authorization","Basic "+btoa((g.username||"")+":"+(g.password?unescape(encodeURIComponent(g.password)):"")));let p;if(Ne.isFormData(a)){if(wa.hasStandardBrowserEnv||wa.hasStandardBrowserWebWorkerEnv)h.setContentType(void 0);else if((p=h.getContentType())!==!1){const[f,...v]=p?p.split(";").map(w=>w.trim()).filter(Boolean):[];h.setContentType([f||"multipart/form-data",...v].join("; "))}}if(wa.hasStandardBrowserEnv&&(r&&Ne.isFunction(r)&&(r=r(n)),r||r!==!1&&L4(n.url))){const f=o&&d&&z4.read(d);f&&h.set(o,f)}return n},$4=typeof XMLHttpRequest<"u",F4=$4&&function(e){return new Promise(function(a,r){const o=SN(e);let d=o.data;const h=$a.from(o.headers).normalize();let{responseType:g,onUploadProgress:p,onDownloadProgress:f}=o,v,w,S,T,C;function _(){T&&T(),C&&C(),o.cancelToken&&o.cancelToken.unsubscribe(v),o.signal&&o.signal.removeEventListener("abort",v)}let k=new XMLHttpRequest;k.open(o.method.toUpperCase(),o.url,!0),k.timeout=o.timeout;function R(){if(!k)return;const P=$a.from("getAllResponseHeaders"in k&&k.getAllResponseHeaders()),A={data:!g||g==="text"||g==="json"?k.responseText:k.response,status:k.status,statusText:k.statusText,headers:P,config:e,request:k};NN(function(E){a(E),_()},function(E){r(E),_()},A),k=null}"onloadend"in k?k.onloadend=R:k.onreadystatechange=function(){!k||k.readyState!==4||k.status===0&&!(k.responseURL&&k.responseURL.indexOf("file:")===0)||setTimeout(R)},k.onabort=function(){k&&(r(new ft("Request aborted",ft.ECONNABORTED,e,k)),k=null)},k.onerror=function(){r(new ft("Network Error",ft.ERR_NETWORK,e,k)),k=null},k.ontimeout=function(){let U=o.timeout?"timeout of "+o.timeout+"ms exceeded":"timeout exceeded";const A=o.transitional||vN;o.timeoutErrorMessage&&(U=o.timeoutErrorMessage),r(new ft(U,A.clarifyTimeoutError?ft.ETIMEDOUT:ft.ECONNABORTED,e,k)),k=null},d===void 0&&h.setContentType(null),"setRequestHeader"in k&&Ne.forEach(h.toJSON(),function(U,A){k.setRequestHeader(A,U)}),Ne.isUndefined(o.withCredentials)||(k.withCredentials=!!o.withCredentials),g&&g!=="json"&&(k.responseType=o.responseType),f&&([S,C]=Mh(f,!0),k.addEventListener("progress",S)),p&&k.upload&&([w,T]=Mh(p),k.upload.addEventListener("progress",w),k.upload.addEventListener("loadend",T)),(o.cancelToken||o.signal)&&(v=P=>{k&&(r(!P||P.type?new bc(null,e,k):P),k.abort(),k=null)},o.cancelToken&&o.cancelToken.subscribe(v),o.signal&&(o.signal.aborted?v():o.signal.addEventListener("abort",v)));const O=D4(o.url);if(O&&wa.protocols.indexOf(O)===-1){r(new ft("Unsupported protocol "+O+":",ft.ERR_BAD_REQUEST,e));return}k.send(d||null)})},U4=(e,n)=>{const{length:a}=e=e?e.filter(Boolean):[];if(n||a){let r=new AbortController,o;const d=function(f){if(!o){o=!0,g();const v=f instanceof Error?f:this.reason;r.abort(v instanceof ft?v:new bc(v instanceof Error?v.message:v))}};let h=n&&setTimeout(()=>{h=null,d(new ft(`timeout ${n} of ms exceeded`,ft.ETIMEDOUT))},n);const g=()=>{e&&(h&&clearTimeout(h),h=null,e.forEach(f=>{f.unsubscribe?f.unsubscribe(d):f.removeEventListener("abort",d)}),e=null)};e.forEach(f=>f.addEventListener("abort",d));const{signal:p}=r;return p.unsubscribe=()=>Ne.asap(g),p}},H4=function*(e,n){let a=e.byteLength;if(a<n){yield e;return}let r=0,o;for(;r<a;)o=r+n,yield e.slice(r,o),r=o},q4=async function*(e,n){for await(const a of Y4(e))yield*H4(a,n)},Y4=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const n=e.getReader();try{for(;;){const{done:a,value:r}=await n.read();if(a)break;yield r}}finally{await n.cancel()}},M1=(e,n,a,r)=>{const o=q4(e,n);let d=0,h,g=p=>{h||(h=!0,r&&r(p))};return new ReadableStream({async pull(p){try{const{done:f,value:v}=await o.next();if(f){g(),p.close();return}let w=v.byteLength;if(a){let S=d+=w;a(S)}p.enqueue(new Uint8Array(v))}catch(f){throw g(f),f}},cancel(p){return g(p),o.return()}},{highWaterMark:2})},nf=typeof fetch=="function"&&typeof Request=="function"&&typeof Response=="function",CN=nf&&typeof ReadableStream=="function",V4=nf&&(typeof TextEncoder=="function"?(e=>n=>e.encode(n))(new TextEncoder):async e=>new Uint8Array(await new Response(e).arrayBuffer())),kN=(e,...n)=>{try{return!!e(...n)}catch{return!1}},Z4=CN&&kN(()=>{let e=!1;const n=new Request(wa.origin,{body:new ReadableStream,method:"POST",get duplex(){return e=!0,"half"}}).headers.has("Content-Type");return e&&!n}),R1=64*1024,bx=CN&&kN(()=>Ne.isReadableStream(new Response("").body)),Rh={stream:bx&&(e=>e.body)};nf&&(e=>{["text","arrayBuffer","blob","formData","stream"].forEach(n=>{!Rh[n]&&(Rh[n]=Ne.isFunction(e[n])?a=>a[n]():(a,r)=>{throw new ft(`Response type '${n}' is not supported`,ft.ERR_NOT_SUPPORT,r)})})})(new Response);const W4=async e=>{if(e==null)return 0;if(Ne.isBlob(e))return e.size;if(Ne.isSpecCompliantForm(e))return(await new Request(wa.origin,{method:"POST",body:e}).arrayBuffer()).byteLength;if(Ne.isArrayBufferView(e)||Ne.isArrayBuffer(e))return e.byteLength;if(Ne.isURLSearchParams(e)&&(e=e+""),Ne.isString(e))return(await V4(e)).byteLength},K4=async(e,n)=>{const a=Ne.toFiniteNumber(e.getContentLength());return a??W4(n)},G4=nf&&(async e=>{let{url:n,method:a,data:r,signal:o,cancelToken:d,timeout:h,onDownloadProgress:g,onUploadProgress:p,responseType:f,headers:v,withCredentials:w="same-origin",fetchOptions:S}=SN(e);f=f?(f+"").toLowerCase():"text";let T=U4([o,d&&d.toAbortSignal()],h),C;const _=T&&T.unsubscribe&&(()=>{T.unsubscribe()});let k;try{if(p&&Z4&&a!=="get"&&a!=="head"&&(k=await K4(v,r))!==0){let A=new Request(n,{method:"POST",body:r,duplex:"half"}),$;if(Ne.isFormData(r)&&($=A.headers.get("content-type"))&&v.setContentType($),A.body){const[E,I]=k1(k,Mh(T1(p)));r=M1(A.body,R1,E,I)}}Ne.isString(w)||(w=w?"include":"omit");const R="credentials"in Request.prototype;C=new Request(n,{...S,signal:T,method:a.toUpperCase(),headers:v.normalize().toJSON(),body:r,duplex:"half",credentials:R?w:void 0});let O=await fetch(C,S);const P=bx&&(f==="stream"||f==="response");if(bx&&(g||P&&_)){const A={};["status","statusText","headers"].forEach(Z=>{A[Z]=O[Z]});const $=Ne.toFiniteNumber(O.headers.get("content-length")),[E,I]=g&&k1($,Mh(T1(g),!0))||[];O=new Response(M1(O.body,R1,E,()=>{I&&I(),_&&_()}),A)}f=f||"text";let U=await Rh[Ne.findKey(Rh,f)||"text"](O,e);return!P&&_&&_(),await new Promise((A,$)=>{NN(A,$,{data:U,headers:$a.from(O.headers),status:O.status,statusText:O.statusText,config:e,request:C})})}catch(R){throw _&&_(),R&&R.name==="TypeError"&&/Load failed|fetch/i.test(R.message)?Object.assign(new ft("Network Error",ft.ERR_NETWORK,e,C),{cause:R.cause||R}):ft.from(R,R&&R.code,e,C)}}),vx={http:u4,xhr:F4,fetch:G4};Ne.forEach(vx,(e,n)=>{if(e){try{Object.defineProperty(e,"name",{value:n})}catch{}Object.defineProperty(e,"adapterName",{value:n})}});const A1=e=>`- ${e}`,Q4=e=>Ne.isFunction(e)||e===null||e===!1,TN={getAdapter:e=>{e=Ne.isArray(e)?e:[e];const{length:n}=e;let a,r;const o={};for(let d=0;d<n;d++){a=e[d];let h;if(r=a,!Q4(a)&&(r=vx[(h=String(a)).toLowerCase()],r===void 0))throw new ft(`Unknown adapter '${h}'`);if(r)break;o[h||"#"+d]=r}if(!r){const d=Object.entries(o).map(([g,p])=>`adapter ${g} `+(p===!1?"is not supported by the environment":"is not available in the build"));let h=n?d.length>1?`since :
`+d.map(A1).join(`
`):" "+A1(d[0]):"as no adapter specified";throw new ft("There is no suitable adapter to dispatch the request "+h,"ERR_NOT_SUPPORT")}return r},adapters:vx};function Pg(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new bc(null,e)}function D1(e){return Pg(e),e.headers=$a.from(e.headers),e.data=Og.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),TN.getAdapter(e.adapter||ju.adapter)(e).then(function(r){return Pg(e),r.data=Og.call(e,e.transformResponse,r),r.headers=$a.from(r.headers),r},function(r){return wN(r)||(Pg(e),r&&r.response&&(r.response.data=Og.call(e,e.transformResponse,r.response),r.response.headers=$a.from(r.response.headers))),Promise.reject(r)})}const EN="1.11.0",af={};["object","boolean","number","function","string","symbol"].forEach((e,n)=>{af[e]=function(r){return typeof r===e||"a"+(n<1?"n ":" ")+e}});const O1={};af.transitional=function(n,a,r){function o(d,h){return"[Axios v"+EN+"] Transitional option '"+d+"'"+h+(r?". "+r:"")}return(d,h,g)=>{if(n===!1)throw new ft(o(h," has been removed"+(a?" in "+a:"")),ft.ERR_DEPRECATED);return a&&!O1[h]&&(O1[h]=!0,console.warn(o(h," has been deprecated since v"+a+" and will be removed in the near future"))),n?n(d,h,g):!0}};af.spelling=function(n){return(a,r)=>(console.warn(`${r} is likely a misspelling of ${n}`),!0)};function X4(e,n,a){if(typeof e!="object")throw new ft("options must be an object",ft.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let o=r.length;for(;o-- >0;){const d=r[o],h=n[d];if(h){const g=e[d],p=g===void 0||h(g,d,e);if(p!==!0)throw new ft("option "+d+" must be "+p,ft.ERR_BAD_OPTION_VALUE);continue}if(a!==!0)throw new ft("Unknown option "+d,ft.ERR_BAD_OPTION)}}const jh={assertOptions:X4,validators:af},sr=jh.validators;let Fl=class{constructor(n){this.defaults=n||{},this.interceptors={request:new S1,response:new S1}}async request(n,a){try{return await this._request(n,a)}catch(r){if(r instanceof Error){let o={};Error.captureStackTrace?Error.captureStackTrace(o):o=new Error;const d=o.stack?o.stack.replace(/^.+\n/,""):"";try{r.stack?d&&!String(r.stack).endsWith(d.replace(/^.+\n.+\n/,""))&&(r.stack+=`
`+d):r.stack=d}catch{}}throw r}}_request(n,a){typeof n=="string"?(a=a||{},a.url=n):a=n||{},a=ql(this.defaults,a);const{transitional:r,paramsSerializer:o,headers:d}=a;r!==void 0&&jh.assertOptions(r,{silentJSONParsing:sr.transitional(sr.boolean),forcedJSONParsing:sr.transitional(sr.boolean),clarifyTimeoutError:sr.transitional(sr.boolean)},!1),o!=null&&(Ne.isFunction(o)?a.paramsSerializer={serialize:o}:jh.assertOptions(o,{encode:sr.function,serialize:sr.function},!0)),a.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?a.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:a.allowAbsoluteUrls=!0),jh.assertOptions(a,{baseUrl:sr.spelling("baseURL"),withXsrfToken:sr.spelling("withXSRFToken")},!0),a.method=(a.method||this.defaults.method||"get").toLowerCase();let h=d&&Ne.merge(d.common,d[a.method]);d&&Ne.forEach(["delete","get","head","post","put","patch","common"],C=>{delete d[C]}),a.headers=$a.concat(h,d);const g=[];let p=!0;this.interceptors.request.forEach(function(_){typeof _.runWhen=="function"&&_.runWhen(a)===!1||(p=p&&_.synchronous,g.unshift(_.fulfilled,_.rejected))});const f=[];this.interceptors.response.forEach(function(_){f.push(_.fulfilled,_.rejected)});let v,w=0,S;if(!p){const C=[D1.bind(this),void 0];for(C.unshift(...g),C.push(...f),S=C.length,v=Promise.resolve(a);w<S;)v=v.then(C[w++],C[w++]);return v}S=g.length;let T=a;for(w=0;w<S;){const C=g[w++],_=g[w++];try{T=C(T)}catch(k){_.call(this,k);break}}try{v=D1.call(this,T)}catch(C){return Promise.reject(C)}for(w=0,S=f.length;w<S;)v=v.then(f[w++],f[w++]);return v}getUri(n){n=ql(this.defaults,n);const a=_N(n.baseURL,n.url,n.allowAbsoluteUrls);return bN(a,n.params,n.paramsSerializer)}};Ne.forEach(["delete","get","head","options"],function(n){Fl.prototype[n]=function(a,r){return this.request(ql(r||{},{method:n,url:a,data:(r||{}).data}))}});Ne.forEach(["post","put","patch"],function(n){function a(r){return function(d,h,g){return this.request(ql(g||{},{method:n,headers:r?{"Content-Type":"multipart/form-data"}:{},url:d,data:h}))}}Fl.prototype[n]=a(),Fl.prototype[n+"Form"]=a(!0)});let J4=class MN{constructor(n){if(typeof n!="function")throw new TypeError("executor must be a function.");let a;this.promise=new Promise(function(d){a=d});const r=this;this.promise.then(o=>{if(!r._listeners)return;let d=r._listeners.length;for(;d-- >0;)r._listeners[d](o);r._listeners=null}),this.promise.then=o=>{let d;const h=new Promise(g=>{r.subscribe(g),d=g}).then(o);return h.cancel=function(){r.unsubscribe(d)},h},n(function(d,h,g){r.reason||(r.reason=new bc(d,h,g),a(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(n){if(this.reason){n(this.reason);return}this._listeners?this._listeners.push(n):this._listeners=[n]}unsubscribe(n){if(!this._listeners)return;const a=this._listeners.indexOf(n);a!==-1&&this._listeners.splice(a,1)}toAbortSignal(){const n=new AbortController,a=r=>{n.abort(r)};return this.subscribe(a),n.signal.unsubscribe=()=>this.unsubscribe(a),n.signal}static source(){let n;return{token:new MN(function(o){n=o}),cancel:n}}};function e3(e){return function(a){return e.apply(null,a)}}function t3(e){return Ne.isObject(e)&&e.isAxiosError===!0}const jx={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(jx).forEach(([e,n])=>{jx[n]=e});function RN(e){const n=new Fl(e),a=lN(Fl.prototype.request,n);return Ne.extend(a,Fl.prototype,n,{allOwnKeys:!0}),Ne.extend(a,n,null,{allOwnKeys:!0}),a.create=function(o){return RN(ql(e,o))},a}const In=RN(ju);In.Axios=Fl;In.CanceledError=bc;In.CancelToken=J4;In.isCancel=wN;In.VERSION=EN;In.toFormData=tf;In.AxiosError=ft;In.Cancel=In.CanceledError;In.all=function(n){return Promise.all(n)};In.spread=e3;In.isAxiosError=t3;In.mergeConfig=ql;In.AxiosHeaders=$a;In.formToJSON=e=>jN(Ne.isHTMLForm(e)?new FormData(e):e);In.getAdapter=TN.getAdapter;In.HttpStatusCode=jx;In.default=In;const{Axios:dB,AxiosError:uB,CanceledError:mB,isCancel:hB,CancelToken:fB,VERSION:pB,all:gB,Cancel:xB,isAxiosError:yB,spread:bB,toFormData:vB,AxiosHeaders:jB,HttpStatusCode:wB,formToJSON:NB,getAdapter:_B,mergeConfig:SB}=In,we=In.create({baseURL:"http://localhost:5000",timeout:1e4,withCredentials:!0,headers:{"Content-Type":"application/json",Accept:"application/json","Access-Control-Allow-Origin":"*"}});we.interceptors.request.use(e=>{const n=localStorage.getItem("token");return n&&(e.headers.Authorization=`Bearer ${n}`),e},e=>Promise.reject(e));let Lg=!1,wx=[];const P1=(e,n=null)=>{wx.forEach(({resolve:a,reject:r})=>{e?r(e):a(n)}),wx=[]};we.interceptors.response.use(e=>e,async e=>{const n=e.config;if(e.response?.status===401&&!n._retry){if(Lg)return new Promise((r,o)=>{wx.push({resolve:r,reject:o})}).then(()=>we(n)).catch(r=>Promise.reject(r));n._retry=!0,Lg=!0;const a=localStorage.getItem("refreshToken");if(a)try{const r=await we.post("/api/common/auth/refresh-token",{refreshToken:a}),{token:o,refreshToken:d}=r.data.data;return localStorage.setItem("token",o),localStorage.setItem("refreshToken",d),n.headers.Authorization=`Bearer ${o}`,P1(null,o),we(n)}catch(r){return P1(r,null),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login",Promise.reject(r)}finally{Lg=!1}else localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),window.location.href="/login"}return Promise.reject(e)});const zg="/api/common/users",ac={getCurrentUser:e=>we.get(`${zg}/current`,{params:e}).then(n=>n.data),updateProfilePicture:e=>we.put(`${zg}/profile-picture`,e).then(n=>n.data),updateUserSettings:e=>we.put(`${zg}/settings`,e).then(n=>n.data)},qi="/api/common/auth",eu={login:e=>we.post(`${qi}/login`,e).then(n=>n.data),refreshToken:e=>we.post(`${qi}/refresh-token`,e).then(n=>n.data),forgotPassword:e=>we.post(`${qi}/forgot-password`,e).then(n=>n.data),resetPassword:e=>we.post(`${qi}/reset-password`,e).then(n=>n.data),resendEmailVerification:e=>we.post(`${qi}/resend-email-verification`,e).then(n=>n.data),resendPasswordResetLink:e=>we.post(`${qi}/resend-password-reset`,e).then(n=>n.data),verifyEmail:e=>we.post(`${qi}/verify-email`,e).then(n=>n.data),changePassword:e=>we.post(`${qi}/change-password`,e).then(n=>n.data)},n3=()=>{const[e,n]=b.useState(null),[a,r]=b.useState(!1),[o,d]=b.useState(!0),h=is();b.useEffect(()=>{(async()=>{const T=localStorage.getItem("token"),C=localStorage.getItem("refreshToken"),_=localStorage.getItem("user");if(T&&_){const k=JSON.parse(_);try{(await ac.getCurrentUser({})).success?(n(k),r(!0)):C?await g(C):p()}catch(R){console.error("خطأ في التحقق من الهوية:",R),C?await g(C):p()}}d(!1)})()},[]);const g=async S=>{try{const T={refreshToken:S},C=await eu.refreshToken(T);if(C.success&&C.data){const _=C.data,k={id:_.userId,name:_.userName,email:_.email,role:_.role,profileImage:_.profileImage,propertyId:_.propertyId,propertyName:_.propertyName,staffId:_.staffId,settingsJson:_.settingsJson,favoritesJson:_.favoritesJson};localStorage.setItem("token",_.accessToken),localStorage.setItem("refreshToken",_.refreshToken),localStorage.setItem("user",JSON.stringify(k)),n(k),r(!0)}else p()}catch(T){console.error("خطأ في تحديث التوكن:",T),p()}},p=()=>{localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user"),n(null),r(!1)};return{user:e,isAuthenticated:a,isLoading:o,login:(S,T,C)=>{localStorage.setItem("token",S),localStorage.setItem("refreshToken",T),localStorage.setItem("user",JSON.stringify(C)),n(C),r(!0)},logout:()=>{p(),h("/auth/login")},updateUser:S=>{if(e){const T={...e,...S};n(T),localStorage.setItem("user",JSON.stringify(T))}}}},AN=b.createContext(void 0),a3=({children:e})=>{const n=n3();return t.jsx(AN.Provider,{value:n,children:e})},DN=()=>{const e=b.useContext(AN);if(e===void 0)throw new Error("useAuthContext يجب أن يُستخدم داخل AuthProvider");return e},p0=()=>{const[e,n]=b.useState([]),a=()=>Math.random().toString(36).substr(2,9),r=b.useCallback((v,w,S,T=5e3)=>{const C=a(),_={id:C,type:v,title:S,message:w,duration:T,isVisible:!0};n(k=>[_,...k]),T>0&&setTimeout(()=>{o(C)},T)},[]),o=b.useCallback(v=>{n(w=>w.filter(S=>S.id!==v))},[]),d=b.useCallback(()=>{n([])},[]),h=b.useCallback((v,w,S)=>{r("success",v,w,S)},[r]),g=b.useCallback((v,w,S)=>{r("error",v,w,S)},[r]),p=b.useCallback((v,w,S)=>{r("warning",v,w,S)},[r]),f=b.useCallback((v,w,S)=>{r("info",v,w,S)},[r]);return{notifications:e,showSuccess:h,showError:g,showWarning:p,showInfo:f,removeNotification:o,clearAll:d}},ON=b.createContext(void 0),s3=({children:e})=>{const n=p0();return b.useEffect(()=>{const a=we.interceptors.response.use(r=>{const o=r.data;if(o&&typeof o.success=="boolean"){if(!o.success)return n.showError(o.message||"حدث خطأ في العملية"),Promise.reject(o);o.success&&o.message&&n.showSuccess(o.message)}return r},r=>(n.showError(r.message||"خطأ في الاتصال بالخادم"),Promise.reject(r)));return()=>we.interceptors.response.eject(a)},[n]),t.jsxs(ON.Provider,{value:n,children:[e,t.jsx(r3,{notifications:n.notifications,onRemove:n.removeNotification})]})},r3=({notifications:e,onRemove:n})=>e.length===0?null:t.jsx("div",{className:"fixed top-4 right-4 z-50 space-y-3 w-96",dir:"rtl",children:e.map(a=>t.jsx(i3,{notification:a,onRemove:n},a.id))}),i3=({notification:e,onRemove:n})=>{const a={success:"bg-green-50 border-green-300 text-green-900",error:"bg-red-50 border-red-300 text-red-900",warning:"bg-yellow-50 border-yellow-300 text-yellow-900",info:"bg-blue-50 border-blue-300 text-blue-900"},r={success:"text-green-500",error:"text-red-500",warning:"text-yellow-500",info:"text-blue-500"},o={success:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),error:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),warning:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),info:t.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})};return t.jsx("div",{className:`w-full bg-white shadow-xl rounded-xl pointer-events-auto ring-1 ring-black ring-opacity-10 overflow-hidden transform transition-all duration-300 ease-in-out ${a[e.type]}`,children:t.jsx("div",{className:"p-5",children:t.jsxs("div",{className:"flex items-start",children:[t.jsx("div",{className:`flex-shrink-0 ${r[e.type]}`,children:o[e.type]}),t.jsxs("div",{className:"mr-4 w-0 flex-1 pt-0.5",children:[e.title&&t.jsx("p",{className:"text-base font-semibold leading-6",children:e.title}),t.jsx("p",{className:`text-base leading-6 ${e.title?"mt-2":""}`,children:e.message})]}),t.jsx("div",{className:"mr-4 flex-shrink-0 flex",children:t.jsxs("button",{className:"bg-white rounded-md inline-flex text-gray-400 hover:text-gray-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 p-1",onClick:()=>n(e.id),children:[t.jsx("span",{className:"sr-only",children:"إغلاق"}),t.jsx("svg",{className:"h-6 w-6",viewBox:"0 0 20 20",fill:"currentColor",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})]})})]})})})},vc=()=>{const e=b.useContext(ON);if(e===void 0)throw new Error("useNotificationContext يجب أن يُستخدم داخل NotificationProvider");return e};async function l3(){const{data:e}=await we.get("/api/admin/dashboard/stats");return e}function o3(){return It({queryKey:["adminStats"],queryFn:l3,staleTime:60*1e3,refetchOnWindowFocus:!1,refetchOnMount:!0})}function ze(){return ze=Object.assign?Object.assign.bind():function(e){for(var n=1;n<arguments.length;n++){var a=arguments[n];for(var r in a)({}).hasOwnProperty.call(a,r)&&(e[r]=a[r])}return e},ze.apply(null,arguments)}function Ji(e){if(typeof e!="object"||e===null)return!1;const n=Object.getPrototypeOf(e);return(n===null||n===Object.prototype||Object.getPrototypeOf(n)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function PN(e){if(b.isValidElement(e)||!Ji(e))return e;const n={};return Object.keys(e).forEach(a=>{n[a]=PN(e[a])}),n}function hr(e,n,a={clone:!0}){const r=a.clone?ze({},e):e;return Ji(e)&&Ji(n)&&Object.keys(n).forEach(o=>{b.isValidElement(n[o])?r[o]=n[o]:Ji(n[o])&&Object.prototype.hasOwnProperty.call(e,o)&&Ji(e[o])?r[o]=hr(e[o],n[o],a):a.clone?r[o]=Ji(n[o])?PN(n[o]):n[o]:r[o]=n[o]}),r}const c3=Object.freeze(Object.defineProperty({__proto__:null,default:hr,isPlainObject:Ji},Symbol.toStringTag,{value:"Module"}));var Ig={exports:{}},Bg,L1;function d3(){if(L1)return Bg;L1=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return Bg=e,Bg}var $g,z1;function u3(){if(z1)return $g;z1=1;var e=d3();function n(){}function a(){}return a.resetWarningCache=n,$g=function(){function r(h,g,p,f,v,w){if(w!==e){var S=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw S.name="Invariant Violation",S}}r.isRequired=r;function o(){return r}var d={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:o,element:r,elementType:r,instanceOf:o,node:r,objectOf:o,oneOf:o,oneOfType:o,shape:o,exact:o,checkPropTypes:a,resetWarningCache:n};return d.PropTypes=d,d},$g}var I1;function m3(){return I1||(I1=1,Ig.exports=u3()()),Ig.exports}var h3=m3();const Jt=pu(h3);function tu(e){let n="https://mui.com/production-error/?code="+e;for(let a=1;a<arguments.length;a+=1)n+="&args[]="+encodeURIComponent(arguments[a]);return"Minified MUI error #"+e+"; visit "+n+" for the full message."}const f3=Object.freeze(Object.defineProperty({__proto__:null,default:tu},Symbol.toStringTag,{value:"Module"}));var Fg={exports:{}},Kt={};/**
 * @license React
 * react-is.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var B1;function p3(){if(B1)return Kt;B1=1;var e=Symbol.for("react.transitional.element"),n=Symbol.for("react.portal"),a=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),d=Symbol.for("react.consumer"),h=Symbol.for("react.context"),g=Symbol.for("react.forward_ref"),p=Symbol.for("react.suspense"),f=Symbol.for("react.suspense_list"),v=Symbol.for("react.memo"),w=Symbol.for("react.lazy"),S=Symbol.for("react.view_transition"),T=Symbol.for("react.client.reference");function C(_){if(typeof _=="object"&&_!==null){var k=_.$$typeof;switch(k){case e:switch(_=_.type,_){case a:case o:case r:case p:case f:case S:return _;default:switch(_=_&&_.$$typeof,_){case h:case g:case w:case v:return _;case d:return _;default:return k}}case n:return k}}}return Kt.ContextConsumer=d,Kt.ContextProvider=h,Kt.Element=e,Kt.ForwardRef=g,Kt.Fragment=a,Kt.Lazy=w,Kt.Memo=v,Kt.Portal=n,Kt.Profiler=o,Kt.StrictMode=r,Kt.Suspense=p,Kt.SuspenseList=f,Kt.isContextConsumer=function(_){return C(_)===d},Kt.isContextProvider=function(_){return C(_)===h},Kt.isElement=function(_){return typeof _=="object"&&_!==null&&_.$$typeof===e},Kt.isForwardRef=function(_){return C(_)===g},Kt.isFragment=function(_){return C(_)===a},Kt.isLazy=function(_){return C(_)===w},Kt.isMemo=function(_){return C(_)===v},Kt.isPortal=function(_){return C(_)===n},Kt.isProfiler=function(_){return C(_)===o},Kt.isStrictMode=function(_){return C(_)===r},Kt.isSuspense=function(_){return C(_)===p},Kt.isSuspenseList=function(_){return C(_)===f},Kt.isValidElementType=function(_){return typeof _=="string"||typeof _=="function"||_===a||_===o||_===r||_===p||_===f||typeof _=="object"&&_!==null&&(_.$$typeof===w||_.$$typeof===v||_.$$typeof===h||_.$$typeof===d||_.$$typeof===g||_.$$typeof===T||_.getModuleId!==void 0)},Kt.typeOf=C,Kt}var $1;function g3(){return $1||($1=1,Fg.exports=p3()),Fg.exports}var F1=g3();const x3=/^\s*function(?:\s|\s*\/\*.*\*\/\s*)+([^(\s/]*)\s*/;function LN(e){const n=`${e}`.match(x3);return n&&n[1]||""}function zN(e,n=""){return e.displayName||e.name||LN(e)||n}function U1(e,n,a){const r=zN(n);return e.displayName||(r!==""?`${a}(${r})`:a)}function y3(e){if(e!=null){if(typeof e=="string")return e;if(typeof e=="function")return zN(e,"Component");if(typeof e=="object")switch(e.$$typeof){case F1.ForwardRef:return U1(e,e.render,"ForwardRef");case F1.Memo:return U1(e,e.type,"memo");default:return}}}const b3=Object.freeze(Object.defineProperty({__proto__:null,default:y3,getFunctionName:LN},Symbol.toStringTag,{value:"Module"}));function St(e){if(typeof e!="string")throw new Error(tu(7));return e.charAt(0).toUpperCase()+e.slice(1)}const v3=Object.freeze(Object.defineProperty({__proto__:null,default:St},Symbol.toStringTag,{value:"Module"}));function j3(e,n){typeof e=="function"?e(n):e&&(e.current=n)}const IN=typeof window<"u"?b.useLayoutEffect:b.useEffect;let H1=0;function w3(e){const[n,a]=b.useState(e),r=e||n;return b.useEffect(()=>{n==null&&(H1+=1,a(`mui-${H1}`))},[n]),r}const q1=ox.useId;function N3(e){return q1!==void 0?q1():w3(e)}function BN({controlled:e,default:n,name:a,state:r="value"}){const{current:o}=b.useRef(e!==void 0),[d,h]=b.useState(n),g=o?e:d,p=b.useCallback(f=>{o||h(f)},[]);return[g,p]}function ah(e){const n=b.useRef(e);return IN(()=>{n.current=e}),b.useRef((...a)=>(0,n.current)(...a)).current}function Y1(...e){return b.useMemo(()=>e.every(n=>n==null)?null:n=>{e.forEach(a=>{j3(a,n)})},e)}const V1={};function _3(e,n){const a=b.useRef(V1);return a.current===V1&&(a.current=e(n)),a}const S3=[];function C3(e){b.useEffect(e,S3)}class sf{constructor(){this.currentId=null,this.clear=()=>{this.currentId!==null&&(clearTimeout(this.currentId),this.currentId=null)},this.disposeEffect=()=>this.clear}static create(){return new sf}start(n,a){this.clear(),this.currentId=setTimeout(()=>{this.currentId=null,a()},n)}}function k3(){const e=_3(sf.create).current;return C3(e.disposeEffect),e}let rf=!0,Nx=!1;const T3=new sf,E3={text:!0,search:!0,url:!0,tel:!0,email:!0,password:!0,number:!0,date:!0,month:!0,week:!0,time:!0,datetime:!0,"datetime-local":!0};function M3(e){const{type:n,tagName:a}=e;return!!(a==="INPUT"&&E3[n]&&!e.readOnly||a==="TEXTAREA"&&!e.readOnly||e.isContentEditable)}function R3(e){e.metaKey||e.altKey||e.ctrlKey||(rf=!0)}function Ug(){rf=!1}function A3(){this.visibilityState==="hidden"&&Nx&&(rf=!0)}function D3(e){e.addEventListener("keydown",R3,!0),e.addEventListener("mousedown",Ug,!0),e.addEventListener("pointerdown",Ug,!0),e.addEventListener("touchstart",Ug,!0),e.addEventListener("visibilitychange",A3,!0)}function O3(e){const{target:n}=e;try{return n.matches(":focus-visible")}catch{}return rf||M3(n)}function P3(){const e=b.useCallback(o=>{o!=null&&D3(o.ownerDocument)},[]),n=b.useRef(!1);function a(){return n.current?(Nx=!0,T3.start(100,()=>{Nx=!1}),n.current=!1,!0):!1}function r(o){return O3(o)?(n.current=!0,!0):!1}return{isFocusVisibleRef:n,onFocus:r,onBlur:a,ref:e}}function nu(e,n){const a=ze({},n);return Object.keys(e).forEach(r=>{if(r.toString().match(/^(components|slots)$/))a[r]=ze({},e[r],a[r]);else if(r.toString().match(/^(componentsProps|slotProps)$/)){const o=e[r]||{},d=n[r];a[r]={},!d||!Object.keys(d)?a[r]=o:!o||!Object.keys(o)?a[r]=d:(a[r]=ze({},d),Object.keys(o).forEach(h=>{a[r][h]=nu(o[h],d[h])}))}else a[r]===void 0&&(a[r]=e[r])}),a}function Jr(e,n,a=void 0){const r={};return Object.keys(e).forEach(o=>{r[o]=e[o].reduce((d,h)=>{if(h){const g=n(h);g!==""&&d.push(g),a&&a[h]&&d.push(a[h])}return d},[]).join(" ")}),r}const Z1=e=>e,L3=()=>{let e=Z1;return{configure(n){e=n},generate(n){return e(n)},reset(){e=Z1}}},$N=L3(),z3={active:"active",checked:"checked",completed:"completed",disabled:"disabled",error:"error",expanded:"expanded",focused:"focused",focusVisible:"focusVisible",open:"open",readOnly:"readOnly",required:"required",selected:"selected"};function xr(e,n,a="Mui"){const r=z3[n];return r?`${a}-${r}`:`${$N.generate(e)}-${n}`}function Ys(e,n,a="Mui"){const r={};return n.forEach(o=>{r[o]=xr(e,o,a)}),r}function I3(e,n=Number.MIN_SAFE_INTEGER,a=Number.MAX_SAFE_INTEGER){return Math.max(n,Math.min(e,a))}const B3=Object.freeze(Object.defineProperty({__proto__:null,default:I3},Symbol.toStringTag,{value:"Module"}));function wn(e,n){if(e==null)return{};var a={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(n.indexOf(r)!==-1)continue;a[r]=e[r]}return a}function FN(e){var n,a,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var o=e.length;for(n=0;n<o;n++)e[n]&&(a=FN(e[n]))&&(r&&(r+=" "),r+=a)}else for(a in e)e[a]&&(r&&(r+=" "),r+=a);return r}function Pn(){for(var e,n,a=0,r="",o=arguments.length;a<o;a++)(e=arguments[a])&&(n=FN(e))&&(r&&(r+=" "),r+=n);return r}const UN=b.createContext(void 0);function $3({value:e,children:n}){return t.jsx(UN.Provider,{value:e,children:n})}function F3(e){const{theme:n,name:a,props:r}=e;if(!n||!n.components||!n.components[a])return r;const o=n.components[a];return o.defaultProps?nu(o.defaultProps,r):!o.styleOverrides&&!o.variants?nu(o,r):r}function U3({props:e,name:n}){const a=b.useContext(UN);return F3({props:e,name:n,theme:{components:a}})}function ei(e){return U3(e)}var Dl={},Hg={exports:{}},W1;function HN(){return W1||(W1=1,function(e){function n(a){return a&&a.__esModule?a:{default:a}}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Hg)),Hg.exports}var qg={exports:{}},K1;function H3(){return K1||(K1=1,function(e){function n(){return e.exports=n=Object.assign?Object.assign.bind():function(a){for(var r=1;r<arguments.length;r++){var o=arguments[r];for(var d in o)({}).hasOwnProperty.call(o,d)&&(a[d]=o[d])}return a},e.exports.__esModule=!0,e.exports.default=e.exports,n.apply(null,arguments)}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(qg)),qg.exports}var Yg={exports:{}},G1;function q3(){return G1||(G1=1,function(e){function n(a,r){if(a==null)return{};var o={};for(var d in a)if({}.hasOwnProperty.call(a,d)){if(r.indexOf(d)!==-1)continue;o[d]=a[d]}return o}e.exports=n,e.exports.__esModule=!0,e.exports.default=e.exports}(Yg)),Yg.exports}function Y3(e){if(e.sheet)return e.sheet;for(var n=0;n<document.styleSheets.length;n++)if(document.styleSheets[n].ownerNode===e)return document.styleSheets[n]}function V3(e){var n=document.createElement("style");return n.setAttribute("data-emotion",e.key),e.nonce!==void 0&&n.setAttribute("nonce",e.nonce),n.appendChild(document.createTextNode("")),n.setAttribute("data-s",""),n}var Z3=function(){function e(a){var r=this;this._insertTag=function(o){var d;r.tags.length===0?r.insertionPoint?d=r.insertionPoint.nextSibling:r.prepend?d=r.container.firstChild:d=r.before:d=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(o,d),r.tags.push(o)},this.isSpeedy=a.speedy===void 0?!0:a.speedy,this.tags=[],this.ctr=0,this.nonce=a.nonce,this.key=a.key,this.container=a.container,this.prepend=a.prepend,this.insertionPoint=a.insertionPoint,this.before=null}var n=e.prototype;return n.hydrate=function(r){r.forEach(this._insertTag)},n.insert=function(r){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(V3(this));var o=this.tags[this.tags.length-1];if(this.isSpeedy){var d=Y3(o);try{d.insertRule(r,d.cssRules.length)}catch{}}else o.appendChild(document.createTextNode(r));this.ctr++},n.flush=function(){this.tags.forEach(function(r){var o;return(o=r.parentNode)==null?void 0:o.removeChild(r)}),this.tags=[],this.ctr=0},e}(),ja="-ms-",Ah="-moz-",Lt="-webkit-",qN="comm",g0="rule",x0="decl",W3="@import",YN="@keyframes",K3="@layer",G3=Math.abs,lf=String.fromCharCode,Q3=Object.assign;function X3(e,n){return pa(e,0)^45?(((n<<2^pa(e,0))<<2^pa(e,1))<<2^pa(e,2))<<2^pa(e,3):0}function VN(e){return e.trim()}function J3(e,n){return(e=n.exec(e))?e[0]:e}function zt(e,n,a){return e.replace(n,a)}function _x(e,n){return e.indexOf(n)}function pa(e,n){return e.charCodeAt(n)|0}function au(e,n,a){return e.slice(n,a)}function lr(e){return e.length}function y0(e){return e.length}function sh(e,n){return n.push(e),e}function eT(e,n){return e.map(n).join("")}var of=1,oc=1,ZN=0,Fa=0,Zn=0,jc="";function cf(e,n,a,r,o,d,h){return{value:e,root:n,parent:a,type:r,props:o,children:d,line:of,column:oc,length:h,return:""}}function Ad(e,n){return Q3(cf("",null,null,"",null,null,0),e,{length:-e.length},n)}function tT(){return Zn}function nT(){return Zn=Fa>0?pa(jc,--Fa):0,oc--,Zn===10&&(oc=1,of--),Zn}function rs(){return Zn=Fa<ZN?pa(jc,Fa++):0,oc++,Zn===10&&(oc=1,of++),Zn}function fr(){return pa(jc,Fa)}function wh(){return Fa}function wu(e,n){return au(jc,e,n)}function su(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function WN(e){return of=oc=1,ZN=lr(jc=e),Fa=0,[]}function KN(e){return jc="",e}function Nh(e){return VN(wu(Fa-1,Sx(e===91?e+2:e===40?e+1:e)))}function aT(e){for(;(Zn=fr())&&Zn<33;)rs();return su(e)>2||su(Zn)>3?"":" "}function sT(e,n){for(;--n&&rs()&&!(Zn<48||Zn>102||Zn>57&&Zn<65||Zn>70&&Zn<97););return wu(e,wh()+(n<6&&fr()==32&&rs()==32))}function Sx(e){for(;rs();)switch(Zn){case e:return Fa;case 34:case 39:e!==34&&e!==39&&Sx(Zn);break;case 40:e===41&&Sx(e);break;case 92:rs();break}return Fa}function rT(e,n){for(;rs()&&e+Zn!==57;)if(e+Zn===84&&fr()===47)break;return"/*"+wu(n,Fa-1)+"*"+lf(e===47?e:rs())}function iT(e){for(;!su(fr());)rs();return wu(e,Fa)}function lT(e){return KN(_h("",null,null,null,[""],e=WN(e),0,[0],e))}function _h(e,n,a,r,o,d,h,g,p){for(var f=0,v=0,w=h,S=0,T=0,C=0,_=1,k=1,R=1,O=0,P="",U=o,A=d,$=r,E=P;k;)switch(C=O,O=rs()){case 40:if(C!=108&&pa(E,w-1)==58){_x(E+=zt(Nh(O),"&","&\f"),"&\f")!=-1&&(R=-1);break}case 34:case 39:case 91:E+=Nh(O);break;case 9:case 10:case 13:case 32:E+=aT(C);break;case 92:E+=sT(wh()-1,7);continue;case 47:switch(fr()){case 42:case 47:sh(oT(rT(rs(),wh()),n,a),p);break;default:E+="/"}break;case 123*_:g[f++]=lr(E)*R;case 125*_:case 59:case 0:switch(O){case 0:case 125:k=0;case 59+v:R==-1&&(E=zt(E,/\f/g,"")),T>0&&lr(E)-w&&sh(T>32?X1(E+";",r,a,w-1):X1(zt(E," ","")+";",r,a,w-2),p);break;case 59:E+=";";default:if(sh($=Q1(E,n,a,f,v,o,g,P,U=[],A=[],w),d),O===123)if(v===0)_h(E,n,$,$,U,d,w,g,A);else switch(S===99&&pa(E,3)===110?100:S){case 100:case 108:case 109:case 115:_h(e,$,$,r&&sh(Q1(e,$,$,0,0,o,g,P,o,U=[],w),A),o,A,w,g,r?U:A);break;default:_h(E,$,$,$,[""],A,0,g,A)}}f=v=T=0,_=R=1,P=E="",w=h;break;case 58:w=1+lr(E),T=C;default:if(_<1){if(O==123)--_;else if(O==125&&_++==0&&nT()==125)continue}switch(E+=lf(O),O*_){case 38:R=v>0?1:(E+="\f",-1);break;case 44:g[f++]=(lr(E)-1)*R,R=1;break;case 64:fr()===45&&(E+=Nh(rs())),S=fr(),v=w=lr(P=E+=iT(wh())),O++;break;case 45:C===45&&lr(E)==2&&(_=0)}}return d}function Q1(e,n,a,r,o,d,h,g,p,f,v){for(var w=o-1,S=o===0?d:[""],T=y0(S),C=0,_=0,k=0;C<r;++C)for(var R=0,O=au(e,w+1,w=G3(_=h[C])),P=e;R<T;++R)(P=VN(_>0?S[R]+" "+O:zt(O,/&\f/g,S[R])))&&(p[k++]=P);return cf(e,n,a,o===0?g0:g,p,f,v)}function oT(e,n,a){return cf(e,n,a,qN,lf(tT()),au(e,2,-2),0)}function X1(e,n,a,r){return cf(e,n,a,x0,au(e,0,r),au(e,r+1,-1),r)}function sc(e,n){for(var a="",r=y0(e),o=0;o<r;o++)a+=n(e[o],o,e,n)||"";return a}function cT(e,n,a,r){switch(e.type){case K3:if(e.children.length)break;case W3:case x0:return e.return=e.return||e.value;case qN:return"";case YN:return e.return=e.value+"{"+sc(e.children,r)+"}";case g0:e.value=e.props.join(",")}return lr(a=sc(e.children,r))?e.return=e.value+"{"+a+"}":""}function dT(e){var n=y0(e);return function(a,r,o,d){for(var h="",g=0;g<n;g++)h+=e[g](a,r,o,d)||"";return h}}function uT(e){return function(n){n.root||(n=n.return)&&e(n)}}function GN(e){var n=Object.create(null);return function(a){return n[a]===void 0&&(n[a]=e(a)),n[a]}}var mT=function(n,a,r){for(var o=0,d=0;o=d,d=fr(),o===38&&d===12&&(a[r]=1),!su(d);)rs();return wu(n,Fa)},hT=function(n,a){var r=-1,o=44;do switch(su(o)){case 0:o===38&&fr()===12&&(a[r]=1),n[r]+=mT(Fa-1,a,r);break;case 2:n[r]+=Nh(o);break;case 4:if(o===44){n[++r]=fr()===58?"&\f":"",a[r]=n[r].length;break}default:n[r]+=lf(o)}while(o=rs());return n},fT=function(n,a){return KN(hT(WN(n),a))},J1=new WeakMap,pT=function(n){if(!(n.type!=="rule"||!n.parent||n.length<1)){for(var a=n.value,r=n.parent,o=n.column===r.column&&n.line===r.line;r.type!=="rule";)if(r=r.parent,!r)return;if(!(n.props.length===1&&a.charCodeAt(0)!==58&&!J1.get(r))&&!o){J1.set(n,!0);for(var d=[],h=fT(a,d),g=r.props,p=0,f=0;p<h.length;p++)for(var v=0;v<g.length;v++,f++)n.props[f]=d[p]?h[p].replace(/&\f/g,g[v]):g[v]+" "+h[p]}}},gT=function(n){if(n.type==="decl"){var a=n.value;a.charCodeAt(0)===108&&a.charCodeAt(2)===98&&(n.return="",n.value="")}};function QN(e,n){switch(X3(e,n)){case 5103:return Lt+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Lt+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Lt+e+Ah+e+ja+e+e;case 6828:case 4268:return Lt+e+ja+e+e;case 6165:return Lt+e+ja+"flex-"+e+e;case 5187:return Lt+e+zt(e,/(\w+).+(:[^]+)/,Lt+"box-$1$2"+ja+"flex-$1$2")+e;case 5443:return Lt+e+ja+"flex-item-"+zt(e,/flex-|-self/,"")+e;case 4675:return Lt+e+ja+"flex-line-pack"+zt(e,/align-content|flex-|-self/,"")+e;case 5548:return Lt+e+ja+zt(e,"shrink","negative")+e;case 5292:return Lt+e+ja+zt(e,"basis","preferred-size")+e;case 6060:return Lt+"box-"+zt(e,"-grow","")+Lt+e+ja+zt(e,"grow","positive")+e;case 4554:return Lt+zt(e,/([^-])(transform)/g,"$1"+Lt+"$2")+e;case 6187:return zt(zt(zt(e,/(zoom-|grab)/,Lt+"$1"),/(image-set)/,Lt+"$1"),e,"")+e;case 5495:case 3959:return zt(e,/(image-set\([^]*)/,Lt+"$1$`$1");case 4968:return zt(zt(e,/(.+:)(flex-)?(.*)/,Lt+"box-pack:$3"+ja+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Lt+e+e;case 4095:case 3583:case 4068:case 2532:return zt(e,/(.+)-inline(.+)/,Lt+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(lr(e)-1-n>6)switch(pa(e,n+1)){case 109:if(pa(e,n+4)!==45)break;case 102:return zt(e,/(.+:)(.+)-([^]+)/,"$1"+Lt+"$2-$3$1"+Ah+(pa(e,n+3)==108?"$3":"$2-$3"))+e;case 115:return~_x(e,"stretch")?QN(zt(e,"stretch","fill-available"),n)+e:e}break;case 4949:if(pa(e,n+1)!==115)break;case 6444:switch(pa(e,lr(e)-3-(~_x(e,"!important")&&10))){case 107:return zt(e,":",":"+Lt)+e;case 101:return zt(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Lt+(pa(e,14)===45?"inline-":"")+"box$3$1"+Lt+"$2$3$1"+ja+"$2box$3")+e}break;case 5936:switch(pa(e,n+11)){case 114:return Lt+e+ja+zt(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Lt+e+ja+zt(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Lt+e+ja+zt(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Lt+e+ja+e+e}return e}var xT=function(n,a,r,o){if(n.length>-1&&!n.return)switch(n.type){case x0:n.return=QN(n.value,n.length);break;case YN:return sc([Ad(n,{value:zt(n.value,"@","@"+Lt)})],o);case g0:if(n.length)return eT(n.props,function(d){switch(J3(d,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return sc([Ad(n,{props:[zt(d,/:(read-\w+)/,":"+Ah+"$1")]})],o);case"::placeholder":return sc([Ad(n,{props:[zt(d,/:(plac\w+)/,":"+Lt+"input-$1")]}),Ad(n,{props:[zt(d,/:(plac\w+)/,":"+Ah+"$1")]}),Ad(n,{props:[zt(d,/:(plac\w+)/,ja+"input-$1")]})],o)}return""})}},yT=[xT],XN=function(n){var a=n.key;if(a==="css"){var r=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(r,function(_){var k=_.getAttribute("data-emotion");k.indexOf(" ")!==-1&&(document.head.appendChild(_),_.setAttribute("data-s",""))})}var o=n.stylisPlugins||yT,d={},h,g=[];h=n.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+a+' "]'),function(_){for(var k=_.getAttribute("data-emotion").split(" "),R=1;R<k.length;R++)d[k[R]]=!0;g.push(_)});var p,f=[pT,gT];{var v,w=[cT,uT(function(_){v.insert(_)})],S=dT(f.concat(o,w)),T=function(k){return sc(lT(k),S)};p=function(k,R,O,P){v=O,T(k?k+"{"+R.styles+"}":R.styles),P&&(C.inserted[R.name]=!0)}}var C={key:a,sheet:new Z3({key:a,container:h,nonce:n.nonce,speedy:n.speedy,prepend:n.prepend,insertionPoint:n.insertionPoint}),nonce:n.nonce,inserted:d,registered:{},insert:p};return C.sheet.hydrate(g),C},Vg={exports:{}},$t={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ej;function bT(){if(ej)return $t;ej=1;var e=typeof Symbol=="function"&&Symbol.for,n=e?Symbol.for("react.element"):60103,a=e?Symbol.for("react.portal"):60106,r=e?Symbol.for("react.fragment"):60107,o=e?Symbol.for("react.strict_mode"):60108,d=e?Symbol.for("react.profiler"):60114,h=e?Symbol.for("react.provider"):60109,g=e?Symbol.for("react.context"):60110,p=e?Symbol.for("react.async_mode"):60111,f=e?Symbol.for("react.concurrent_mode"):60111,v=e?Symbol.for("react.forward_ref"):60112,w=e?Symbol.for("react.suspense"):60113,S=e?Symbol.for("react.suspense_list"):60120,T=e?Symbol.for("react.memo"):60115,C=e?Symbol.for("react.lazy"):60116,_=e?Symbol.for("react.block"):60121,k=e?Symbol.for("react.fundamental"):60117,R=e?Symbol.for("react.responder"):60118,O=e?Symbol.for("react.scope"):60119;function P(A){if(typeof A=="object"&&A!==null){var $=A.$$typeof;switch($){case n:switch(A=A.type,A){case p:case f:case r:case d:case o:case w:return A;default:switch(A=A&&A.$$typeof,A){case g:case v:case C:case T:case h:return A;default:return $}}case a:return $}}}function U(A){return P(A)===f}return $t.AsyncMode=p,$t.ConcurrentMode=f,$t.ContextConsumer=g,$t.ContextProvider=h,$t.Element=n,$t.ForwardRef=v,$t.Fragment=r,$t.Lazy=C,$t.Memo=T,$t.Portal=a,$t.Profiler=d,$t.StrictMode=o,$t.Suspense=w,$t.isAsyncMode=function(A){return U(A)||P(A)===p},$t.isConcurrentMode=U,$t.isContextConsumer=function(A){return P(A)===g},$t.isContextProvider=function(A){return P(A)===h},$t.isElement=function(A){return typeof A=="object"&&A!==null&&A.$$typeof===n},$t.isForwardRef=function(A){return P(A)===v},$t.isFragment=function(A){return P(A)===r},$t.isLazy=function(A){return P(A)===C},$t.isMemo=function(A){return P(A)===T},$t.isPortal=function(A){return P(A)===a},$t.isProfiler=function(A){return P(A)===d},$t.isStrictMode=function(A){return P(A)===o},$t.isSuspense=function(A){return P(A)===w},$t.isValidElementType=function(A){return typeof A=="string"||typeof A=="function"||A===r||A===f||A===d||A===o||A===w||A===S||typeof A=="object"&&A!==null&&(A.$$typeof===C||A.$$typeof===T||A.$$typeof===h||A.$$typeof===g||A.$$typeof===v||A.$$typeof===k||A.$$typeof===R||A.$$typeof===O||A.$$typeof===_)},$t.typeOf=P,$t}var tj;function vT(){return tj||(tj=1,Vg.exports=bT()),Vg.exports}var Zg,nj;function jT(){if(nj)return Zg;nj=1;var e=vT(),n={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},a={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},o={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},d={};d[e.ForwardRef]=r,d[e.Memo]=o;function h(C){return e.isMemo(C)?o:d[C.$$typeof]||n}var g=Object.defineProperty,p=Object.getOwnPropertyNames,f=Object.getOwnPropertySymbols,v=Object.getOwnPropertyDescriptor,w=Object.getPrototypeOf,S=Object.prototype;function T(C,_,k){if(typeof _!="string"){if(S){var R=w(_);R&&R!==S&&T(C,R,k)}var O=p(_);f&&(O=O.concat(f(_)));for(var P=h(C),U=h(_),A=0;A<O.length;++A){var $=O[A];if(!a[$]&&!(k&&k[$])&&!(U&&U[$])&&!(P&&P[$])){var E=v(_,$);try{g(C,$,E)}catch{}}}}return C}return Zg=T,Zg}jT();var wT=!0;function JN(e,n,a){var r="";return a.split(" ").forEach(function(o){e[o]!==void 0?n.push(e[o]+";"):o&&(r+=o+" ")}),r}var b0=function(n,a,r){var o=n.key+"-"+a.name;(r===!1||wT===!1)&&n.registered[o]===void 0&&(n.registered[o]=a.styles)},v0=function(n,a,r){b0(n,a,r);var o=n.key+"-"+a.name;if(n.inserted[a.name]===void 0){var d=a;do n.insert(a===d?"."+o:"",d,n.sheet,!0),d=d.next;while(d!==void 0)}};function NT(e){for(var n=0,a,r=0,o=e.length;o>=4;++r,o-=4)a=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,a=(a&65535)*1540483477+((a>>>16)*59797<<16),a^=a>>>24,n=(a&65535)*1540483477+((a>>>16)*59797<<16)^(n&65535)*1540483477+((n>>>16)*59797<<16);switch(o){case 3:n^=(e.charCodeAt(r+2)&255)<<16;case 2:n^=(e.charCodeAt(r+1)&255)<<8;case 1:n^=e.charCodeAt(r)&255,n=(n&65535)*1540483477+((n>>>16)*59797<<16)}return n^=n>>>13,n=(n&65535)*1540483477+((n>>>16)*59797<<16),((n^n>>>15)>>>0).toString(36)}var _T={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},ST=/[A-Z]|^ms/g,CT=/_EMO_([^_]+?)_([^]*?)_EMO_/g,e2=function(n){return n.charCodeAt(1)===45},aj=function(n){return n!=null&&typeof n!="boolean"},Wg=GN(function(e){return e2(e)?e:e.replace(ST,"-$&").toLowerCase()}),sj=function(n,a){switch(n){case"animation":case"animationName":if(typeof a=="string")return a.replace(CT,function(r,o,d){return or={name:o,styles:d,next:or},o})}return _T[n]!==1&&!e2(n)&&typeof a=="number"&&a!==0?a+"px":a};function ru(e,n,a){if(a==null)return"";var r=a;if(r.__emotion_styles!==void 0)return r;switch(typeof a){case"boolean":return"";case"object":{var o=a;if(o.anim===1)return or={name:o.name,styles:o.styles,next:or},o.name;var d=a;if(d.styles!==void 0){var h=d.next;if(h!==void 0)for(;h!==void 0;)or={name:h.name,styles:h.styles,next:or},h=h.next;var g=d.styles+";";return g}return kT(e,n,a)}case"function":{if(e!==void 0){var p=or,f=a(e);return or=p,ru(e,n,f)}break}}var v=a;if(n==null)return v;var w=n[v];return w!==void 0?w:v}function kT(e,n,a){var r="";if(Array.isArray(a))for(var o=0;o<a.length;o++)r+=ru(e,n,a[o])+";";else for(var d in a){var h=a[d];if(typeof h!="object"){var g=h;n!=null&&n[g]!==void 0?r+=d+"{"+n[g]+"}":aj(g)&&(r+=Wg(d)+":"+sj(d,g)+";")}else if(Array.isArray(h)&&typeof h[0]=="string"&&(n==null||n[h[0]]===void 0))for(var p=0;p<h.length;p++)aj(h[p])&&(r+=Wg(d)+":"+sj(d,h[p])+";");else{var f=ru(e,n,h);switch(d){case"animation":case"animationName":{r+=Wg(d)+":"+f+";";break}default:r+=d+"{"+f+"}"}}}return r}var rj=/label:\s*([^\s;{]+)\s*(;|$)/g,or;function Nu(e,n,a){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,o="";or=void 0;var d=e[0];if(d==null||d.raw===void 0)r=!1,o+=ru(a,n,d);else{var h=d;o+=h[0]}for(var g=1;g<e.length;g++)if(o+=ru(a,n,e[g]),r){var p=d;o+=p[g]}rj.lastIndex=0;for(var f="",v;(v=rj.exec(o))!==null;)f+="-"+v[1];var w=NT(o)+f;return{name:w,styles:o,next:or}}var TT=function(n){return n()},t2=ox.useInsertionEffect?ox.useInsertionEffect:!1,n2=t2||TT,ij=t2||b.useLayoutEffect,a2=b.createContext(typeof HTMLElement<"u"?XN({key:"css"}):null),ET=a2.Provider,j0=function(n){return b.forwardRef(function(a,r){var o=b.useContext(a2);return n(a,o,r)})},wc=b.createContext({}),w0={}.hasOwnProperty,Cx="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",MT=function(n,a){var r={};for(var o in a)w0.call(a,o)&&(r[o]=a[o]);return r[Cx]=n,r},RT=function(n){var a=n.cache,r=n.serialized,o=n.isStringTag;return b0(a,r,o),n2(function(){return v0(a,r,o)}),null},AT=j0(function(e,n,a){var r=e.css;typeof r=="string"&&n.registered[r]!==void 0&&(r=n.registered[r]);var o=e[Cx],d=[r],h="";typeof e.className=="string"?h=JN(n.registered,d,e.className):e.className!=null&&(h=e.className+" ");var g=Nu(d,void 0,b.useContext(wc));h+=n.key+"-"+g.name;var p={};for(var f in e)w0.call(e,f)&&f!=="css"&&f!==Cx&&(p[f]=e[f]);return p.className=h,a&&(p.ref=a),b.createElement(b.Fragment,null,b.createElement(RT,{cache:n,serialized:g,isStringTag:typeof o=="string"}),b.createElement(o,p))}),DT=AT,lj=function(n,a){var r=arguments;if(a==null||!w0.call(a,"css"))return b.createElement.apply(void 0,r);var o=r.length,d=new Array(o);d[0]=DT,d[1]=MT(n,a);for(var h=2;h<o;h++)d[h]=r[h];return b.createElement.apply(null,d)};(function(e){var n;n||(n=e.JSX||(e.JSX={}))})(lj||(lj={}));var OT=j0(function(e,n){var a=e.styles,r=Nu([a],void 0,b.useContext(wc)),o=b.useRef();return ij(function(){var d=n.key+"-global",h=new n.sheet.constructor({key:d,nonce:n.sheet.nonce,container:n.sheet.container,speedy:n.sheet.isSpeedy}),g=!1,p=document.querySelector('style[data-emotion="'+d+" "+r.name+'"]');return n.sheet.tags.length&&(h.before=n.sheet.tags[0]),p!==null&&(g=!0,p.setAttribute("data-emotion",d),h.hydrate([p])),o.current=[h,g],function(){h.flush()}},[n]),ij(function(){var d=o.current,h=d[0],g=d[1];if(g){d[1]=!1;return}if(r.next!==void 0&&v0(n,r.next,!0),h.tags.length){var p=h.tags[h.tags.length-1].nextElementSibling;h.before=p,h.flush()}n.insert("",r,h,!1)},[n,r.name]),null});function df(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return Nu(n)}function Nc(){var e=df.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}}var PT=/^((children|dangerouslySetInnerHTML|key|ref|autoFocus|defaultValue|defaultChecked|innerHTML|suppressContentEditableWarning|suppressHydrationWarning|valueLink|abbr|accept|acceptCharset|accessKey|action|allow|allowUserMedia|allowPaymentRequest|allowFullScreen|allowTransparency|alt|async|autoComplete|autoPlay|capture|cellPadding|cellSpacing|challenge|charSet|checked|cite|classID|className|cols|colSpan|content|contentEditable|contextMenu|controls|controlsList|coords|crossOrigin|data|dateTime|decoding|default|defer|dir|disabled|disablePictureInPicture|disableRemotePlayback|download|draggable|encType|enterKeyHint|fetchpriority|fetchPriority|form|formAction|formEncType|formMethod|formNoValidate|formTarget|frameBorder|headers|height|hidden|high|href|hrefLang|htmlFor|httpEquiv|id|inputMode|integrity|is|keyParams|keyType|kind|label|lang|list|loading|loop|low|marginHeight|marginWidth|max|maxLength|media|mediaGroup|method|min|minLength|multiple|muted|name|nonce|noValidate|open|optimum|pattern|placeholder|playsInline|poster|preload|profile|radioGroup|readOnly|referrerPolicy|rel|required|reversed|role|rows|rowSpan|sandbox|scope|scoped|scrolling|seamless|selected|shape|size|sizes|slot|span|spellCheck|src|srcDoc|srcLang|srcSet|start|step|style|summary|tabIndex|target|title|translate|type|useMap|value|width|wmode|wrap|about|datatype|inlist|prefix|property|resource|typeof|vocab|autoCapitalize|autoCorrect|autoSave|color|incremental|fallback|inert|itemProp|itemScope|itemType|itemID|itemRef|on|option|results|security|unselectable|accentHeight|accumulate|additive|alignmentBaseline|allowReorder|alphabetic|amplitude|arabicForm|ascent|attributeName|attributeType|autoReverse|azimuth|baseFrequency|baselineShift|baseProfile|bbox|begin|bias|by|calcMode|capHeight|clip|clipPathUnits|clipPath|clipRule|colorInterpolation|colorInterpolationFilters|colorProfile|colorRendering|contentScriptType|contentStyleType|cursor|cx|cy|d|decelerate|descent|diffuseConstant|direction|display|divisor|dominantBaseline|dur|dx|dy|edgeMode|elevation|enableBackground|end|exponent|externalResourcesRequired|fill|fillOpacity|fillRule|filter|filterRes|filterUnits|floodColor|floodOpacity|focusable|fontFamily|fontSize|fontSizeAdjust|fontStretch|fontStyle|fontVariant|fontWeight|format|from|fr|fx|fy|g1|g2|glyphName|glyphOrientationHorizontal|glyphOrientationVertical|glyphRef|gradientTransform|gradientUnits|hanging|horizAdvX|horizOriginX|ideographic|imageRendering|in|in2|intercept|k|k1|k2|k3|k4|kernelMatrix|kernelUnitLength|kerning|keyPoints|keySplines|keyTimes|lengthAdjust|letterSpacing|lightingColor|limitingConeAngle|local|markerEnd|markerMid|markerStart|markerHeight|markerUnits|markerWidth|mask|maskContentUnits|maskUnits|mathematical|mode|numOctaves|offset|opacity|operator|order|orient|orientation|origin|overflow|overlinePosition|overlineThickness|panose1|paintOrder|pathLength|patternContentUnits|patternTransform|patternUnits|pointerEvents|points|pointsAtX|pointsAtY|pointsAtZ|preserveAlpha|preserveAspectRatio|primitiveUnits|r|radius|refX|refY|renderingIntent|repeatCount|repeatDur|requiredExtensions|requiredFeatures|restart|result|rotate|rx|ry|scale|seed|shapeRendering|slope|spacing|specularConstant|specularExponent|speed|spreadMethod|startOffset|stdDeviation|stemh|stemv|stitchTiles|stopColor|stopOpacity|strikethroughPosition|strikethroughThickness|string|stroke|strokeDasharray|strokeDashoffset|strokeLinecap|strokeLinejoin|strokeMiterlimit|strokeOpacity|strokeWidth|surfaceScale|systemLanguage|tableValues|targetX|targetY|textAnchor|textDecoration|textRendering|textLength|to|transform|u1|u2|underlinePosition|underlineThickness|unicode|unicodeBidi|unicodeRange|unitsPerEm|vAlphabetic|vHanging|vIdeographic|vMathematical|values|vectorEffect|version|vertAdvY|vertOriginX|vertOriginY|viewBox|viewTarget|visibility|widths|wordSpacing|writingMode|x|xHeight|x1|x2|xChannelSelector|xlinkActuate|xlinkArcrole|xlinkHref|xlinkRole|xlinkShow|xlinkTitle|xlinkType|xmlBase|xmlns|xmlnsXlink|xmlLang|xmlSpace|y|y1|y2|yChannelSelector|z|zoomAndPan|for|class|autofocus)|(([Dd][Aa][Tt][Aa]|[Aa][Rr][Ii][Aa]|x)-.*))$/,LT=GN(function(e){return PT.test(e)||e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)<91}),zT=LT,IT=function(n){return n!=="theme"},oj=function(n){return typeof n=="string"&&n.charCodeAt(0)>96?zT:IT},cj=function(n,a,r){var o;if(a){var d=a.shouldForwardProp;o=n.__emotion_forwardProp&&d?function(h){return n.__emotion_forwardProp(h)&&d(h)}:d}return typeof o!="function"&&r&&(o=n.__emotion_forwardProp),o},BT=function(n){var a=n.cache,r=n.serialized,o=n.isStringTag;return b0(a,r,o),n2(function(){return v0(a,r,o)}),null},$T=function e(n,a){var r=n.__emotion_real===n,o=r&&n.__emotion_base||n,d,h;a!==void 0&&(d=a.label,h=a.target);var g=cj(n,a,r),p=g||oj(o),f=!p("as");return function(){var v=arguments,w=r&&n.__emotion_styles!==void 0?n.__emotion_styles.slice(0):[];if(d!==void 0&&w.push("label:"+d+";"),v[0]==null||v[0].raw===void 0)w.push.apply(w,v);else{var S=v[0];w.push(S[0]);for(var T=v.length,C=1;C<T;C++)w.push(v[C],S[C])}var _=j0(function(k,R,O){var P=f&&k.as||o,U="",A=[],$=k;if(k.theme==null){$={};for(var E in k)$[E]=k[E];$.theme=b.useContext(wc)}typeof k.className=="string"?U=JN(R.registered,A,k.className):k.className!=null&&(U=k.className+" ");var I=Nu(w.concat(A),R.registered,$);U+=R.key+"-"+I.name,h!==void 0&&(U+=" "+h);var Z=f&&g===void 0?oj(P):p,F={};for(var Y in k)f&&Y==="as"||Z(Y)&&(F[Y]=k[Y]);return F.className=U,O&&(F.ref=O),b.createElement(b.Fragment,null,b.createElement(BT,{cache:R,serialized:I,isStringTag:typeof P=="string"}),b.createElement(P,F))});return _.displayName=d!==void 0?d:"Styled("+(typeof o=="string"?o:o.displayName||o.name||"Component")+")",_.defaultProps=n.defaultProps,_.__emotion_real=_,_.__emotion_base=o,_.__emotion_styles=w,_.__emotion_forwardProp=g,Object.defineProperty(_,"toString",{value:function(){return"."+h}}),_.withComponent=function(k,R){var O=e(k,ze({},a,R,{shouldForwardProp:cj(_,R,!0)}));return O.apply(void 0,w)},_}},FT=["a","abbr","address","area","article","aside","audio","b","base","bdi","bdo","big","blockquote","body","br","button","canvas","caption","cite","code","col","colgroup","data","datalist","dd","del","details","dfn","dialog","div","dl","dt","em","embed","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","iframe","img","input","ins","kbd","keygen","label","legend","li","link","main","map","mark","marquee","menu","menuitem","meta","meter","nav","noscript","object","ol","optgroup","option","output","p","param","picture","pre","progress","q","rp","rt","ruby","s","samp","script","section","select","small","source","span","strong","style","sub","summary","sup","table","tbody","td","textarea","tfoot","th","thead","time","title","tr","track","u","ul","var","video","wbr","circle","clipPath","defs","ellipse","foreignObject","g","image","line","linearGradient","mask","path","pattern","polygon","polyline","radialGradient","rect","stop","svg","text","tspan"],kx=$T.bind(null);FT.forEach(function(e){kx[e]=kx(e)});function UT(e,n){const a=XN({key:"css",prepend:e});if(n){const r=a.insert;a.insert=(...o)=>(o[1].styles.match(/^@layer\s+[^{]*$/)||(o[1].styles=`@layer mui {${o[1].styles}}`),r(...o))}return a}const Kg=new Map;function HT(e){const{injectFirst:n,enableCssLayer:a,children:r}=e,o=b.useMemo(()=>{const d=`${n}-${a}`;if(typeof document=="object"&&Kg.has(d))return Kg.get(d);const h=UT(n,a);return Kg.set(d,h),h},[n,a]);return n||a?t.jsx(ET,{value:o,children:r}):r}function qT(e){return e==null||Object.keys(e).length===0}function s2(e){const{styles:n,defaultTheme:a={}}=e,r=typeof n=="function"?o=>n(qT(o)?a:o):n;return t.jsx(OT,{styles:r})}function r2(e,n){return kx(e,n)}const YT=(e,n)=>{Array.isArray(e.__emotion_styles)&&(e.__emotion_styles=n(e.__emotion_styles))},dj=[];function i2(e){return dj[0]=e,Nu(dj)}const VT=Object.freeze(Object.defineProperty({__proto__:null,GlobalStyles:s2,StyledEngineProvider:HT,ThemeContext:wc,css:df,default:r2,internal_processStyles:YT,internal_serializeStyles:i2,keyframes:Nc},Symbol.toStringTag,{value:"Module"})),ZT=nl(VT),WT=nl(c3),KT=nl(v3),GT=nl(b3),QT=["values","unit","step"],XT=e=>{const n=Object.keys(e).map(a=>({key:a,val:e[a]}))||[];return n.sort((a,r)=>a.val-r.val),n.reduce((a,r)=>ze({},a,{[r.key]:r.val}),{})};function l2(e){const{values:n={xs:0,sm:600,md:900,lg:1200,xl:1536},unit:a="px",step:r=5}=e,o=wn(e,QT),d=XT(n),h=Object.keys(d);function g(S){return`@media (min-width:${typeof n[S]=="number"?n[S]:S}${a})`}function p(S){return`@media (max-width:${(typeof n[S]=="number"?n[S]:S)-r/100}${a})`}function f(S,T){const C=h.indexOf(T);return`@media (min-width:${typeof n[S]=="number"?n[S]:S}${a}) and (max-width:${(C!==-1&&typeof n[h[C]]=="number"?n[h[C]]:T)-r/100}${a})`}function v(S){return h.indexOf(S)+1<h.length?f(S,h[h.indexOf(S)+1]):g(S)}function w(S){const T=h.indexOf(S);return T===0?g(h[1]):T===h.length-1?p(h[T]):f(S,h[h.indexOf(S)+1]).replace("@media","@media not all and")}return ze({keys:h,values:d,up:g,down:p,between:f,only:v,not:w,unit:a},o)}const JT={borderRadius:4};function qd(e,n){return n?hr(e,n,{clone:!1}):e}const N0={xs:0,sm:600,md:900,lg:1200,xl:1536},uj={keys:["xs","sm","md","lg","xl"],up:e=>`@media (min-width:${N0[e]}px)`};function Gr(e,n,a){const r=e.theme||{};if(Array.isArray(n)){const d=r.breakpoints||uj;return n.reduce((h,g,p)=>(h[d.up(d.keys[p])]=a(n[p]),h),{})}if(typeof n=="object"){const d=r.breakpoints||uj;return Object.keys(n).reduce((h,g)=>{if(Object.keys(d.values||N0).indexOf(g)!==-1){const p=d.up(g);h[p]=a(n[g],g)}else{const p=g;h[p]=n[p]}return h},{})}return a(n)}function eE(e={}){var n;return((n=e.keys)==null?void 0:n.reduce((r,o)=>{const d=e.up(o);return r[d]={},r},{}))||{}}function mj(e,n){return e.reduce((a,r)=>{const o=a[r];return(!o||Object.keys(o).length===0)&&delete a[r],a},n)}function uf(e,n,a=!0){if(!n||typeof n!="string")return null;if(e&&e.vars&&a){const r=`vars.${n}`.split(".").reduce((o,d)=>o&&o[d]?o[d]:null,e);if(r!=null)return r}return n.split(".").reduce((r,o)=>r&&r[o]!=null?r[o]:null,e)}function Dh(e,n,a,r=a){let o;return typeof e=="function"?o=e(a):Array.isArray(e)?o=e[a]||r:o=uf(e,a)||r,n&&(o=n(o,r,e)),o}function $n(e){const{prop:n,cssProperty:a=e.prop,themeKey:r,transform:o}=e,d=h=>{if(h[n]==null)return null;const g=h[n],p=h.theme,f=uf(p,r)||{};return Gr(h,g,w=>{let S=Dh(f,o,w);return w===S&&typeof w=="string"&&(S=Dh(f,o,`${n}${w==="default"?"":St(w)}`,w)),a===!1?S:{[a]:S}})};return d.propTypes={},d.filterProps=[n],d}function tE(e){const n={};return a=>(n[a]===void 0&&(n[a]=e(a)),n[a])}const nE={m:"margin",p:"padding"},aE={t:"Top",r:"Right",b:"Bottom",l:"Left",x:["Left","Right"],y:["Top","Bottom"]},hj={marginX:"mx",marginY:"my",paddingX:"px",paddingY:"py"},sE=tE(e=>{if(e.length>2)if(hj[e])e=hj[e];else return[e];const[n,a]=e.split(""),r=nE[n],o=aE[a]||"";return Array.isArray(o)?o.map(d=>r+d):[r+o]}),_0=["m","mt","mr","mb","ml","mx","my","margin","marginTop","marginRight","marginBottom","marginLeft","marginX","marginY","marginInline","marginInlineStart","marginInlineEnd","marginBlock","marginBlockStart","marginBlockEnd"],S0=["p","pt","pr","pb","pl","px","py","padding","paddingTop","paddingRight","paddingBottom","paddingLeft","paddingX","paddingY","paddingInline","paddingInlineStart","paddingInlineEnd","paddingBlock","paddingBlockStart","paddingBlockEnd"];[..._0,...S0];function _u(e,n,a,r){var o;const d=(o=uf(e,n,!1))!=null?o:a;return typeof d=="number"?h=>typeof h=="string"?h:d*h:Array.isArray(d)?h=>typeof h=="string"?h:d[h]:typeof d=="function"?d:()=>{}}function o2(e){return _u(e,"spacing",8)}function Su(e,n){if(typeof n=="string"||n==null)return n;const a=Math.abs(n),r=e(a);return n>=0?r:typeof r=="number"?-r:`-${r}`}function rE(e,n){return a=>e.reduce((r,o)=>(r[o]=Su(n,a),r),{})}function iE(e,n,a,r){if(n.indexOf(a)===-1)return null;const o=sE(a),d=rE(o,r),h=e[a];return Gr(e,h,d)}function c2(e,n){const a=o2(e.theme);return Object.keys(e).map(r=>iE(e,n,r,a)).reduce(qd,{})}function kn(e){return c2(e,_0)}kn.propTypes={};kn.filterProps=_0;function Tn(e){return c2(e,S0)}Tn.propTypes={};Tn.filterProps=S0;function lE(e=8){if(e.mui)return e;const n=o2({spacing:e}),a=(...r)=>(r.length===0?[1]:r).map(d=>{const h=n(d);return typeof h=="number"?`${h}px`:h}).join(" ");return a.mui=!0,a}function mf(...e){const n=e.reduce((r,o)=>(o.filterProps.forEach(d=>{r[d]=o}),r),{}),a=r=>Object.keys(r).reduce((o,d)=>n[d]?qd(o,n[d](r)):o,{});return a.propTypes={},a.filterProps=e.reduce((r,o)=>r.concat(o.filterProps),[]),a}function _s(e){return typeof e!="number"?e:`${e}px solid`}function ks(e,n){return $n({prop:e,themeKey:"borders",transform:n})}const oE=ks("border",_s),cE=ks("borderTop",_s),dE=ks("borderRight",_s),uE=ks("borderBottom",_s),mE=ks("borderLeft",_s),hE=ks("borderColor"),fE=ks("borderTopColor"),pE=ks("borderRightColor"),gE=ks("borderBottomColor"),xE=ks("borderLeftColor"),yE=ks("outline",_s),bE=ks("outlineColor"),hf=e=>{if(e.borderRadius!==void 0&&e.borderRadius!==null){const n=_u(e.theme,"shape.borderRadius",4),a=r=>({borderRadius:Su(n,r)});return Gr(e,e.borderRadius,a)}return null};hf.propTypes={};hf.filterProps=["borderRadius"];mf(oE,cE,dE,uE,mE,hE,fE,pE,gE,xE,hf,yE,bE);const ff=e=>{if(e.gap!==void 0&&e.gap!==null){const n=_u(e.theme,"spacing",8),a=r=>({gap:Su(n,r)});return Gr(e,e.gap,a)}return null};ff.propTypes={};ff.filterProps=["gap"];const pf=e=>{if(e.columnGap!==void 0&&e.columnGap!==null){const n=_u(e.theme,"spacing",8),a=r=>({columnGap:Su(n,r)});return Gr(e,e.columnGap,a)}return null};pf.propTypes={};pf.filterProps=["columnGap"];const gf=e=>{if(e.rowGap!==void 0&&e.rowGap!==null){const n=_u(e.theme,"spacing",8),a=r=>({rowGap:Su(n,r)});return Gr(e,e.rowGap,a)}return null};gf.propTypes={};gf.filterProps=["rowGap"];const vE=$n({prop:"gridColumn"}),jE=$n({prop:"gridRow"}),wE=$n({prop:"gridAutoFlow"}),NE=$n({prop:"gridAutoColumns"}),_E=$n({prop:"gridAutoRows"}),SE=$n({prop:"gridTemplateColumns"}),CE=$n({prop:"gridTemplateRows"}),kE=$n({prop:"gridTemplateAreas"}),TE=$n({prop:"gridArea"});mf(ff,pf,gf,vE,jE,wE,NE,_E,SE,CE,kE,TE);function rc(e,n){return n==="grey"?n:e}const EE=$n({prop:"color",themeKey:"palette",transform:rc}),ME=$n({prop:"bgcolor",cssProperty:"backgroundColor",themeKey:"palette",transform:rc}),RE=$n({prop:"backgroundColor",themeKey:"palette",transform:rc});mf(EE,ME,RE);function ns(e){return e<=1&&e!==0?`${e*100}%`:e}const AE=$n({prop:"width",transform:ns}),C0=e=>{if(e.maxWidth!==void 0&&e.maxWidth!==null){const n=a=>{var r,o;const d=((r=e.theme)==null||(r=r.breakpoints)==null||(r=r.values)==null?void 0:r[a])||N0[a];return d?((o=e.theme)==null||(o=o.breakpoints)==null?void 0:o.unit)!=="px"?{maxWidth:`${d}${e.theme.breakpoints.unit}`}:{maxWidth:d}:{maxWidth:ns(a)}};return Gr(e,e.maxWidth,n)}return null};C0.filterProps=["maxWidth"];const DE=$n({prop:"minWidth",transform:ns}),OE=$n({prop:"height",transform:ns}),PE=$n({prop:"maxHeight",transform:ns}),LE=$n({prop:"minHeight",transform:ns});$n({prop:"size",cssProperty:"width",transform:ns});$n({prop:"size",cssProperty:"height",transform:ns});const zE=$n({prop:"boxSizing"});mf(AE,C0,DE,OE,PE,LE,zE);const Cu={border:{themeKey:"borders",transform:_s},borderTop:{themeKey:"borders",transform:_s},borderRight:{themeKey:"borders",transform:_s},borderBottom:{themeKey:"borders",transform:_s},borderLeft:{themeKey:"borders",transform:_s},borderColor:{themeKey:"palette"},borderTopColor:{themeKey:"palette"},borderRightColor:{themeKey:"palette"},borderBottomColor:{themeKey:"palette"},borderLeftColor:{themeKey:"palette"},outline:{themeKey:"borders",transform:_s},outlineColor:{themeKey:"palette"},borderRadius:{themeKey:"shape.borderRadius",style:hf},color:{themeKey:"palette",transform:rc},bgcolor:{themeKey:"palette",cssProperty:"backgroundColor",transform:rc},backgroundColor:{themeKey:"palette",transform:rc},p:{style:Tn},pt:{style:Tn},pr:{style:Tn},pb:{style:Tn},pl:{style:Tn},px:{style:Tn},py:{style:Tn},padding:{style:Tn},paddingTop:{style:Tn},paddingRight:{style:Tn},paddingBottom:{style:Tn},paddingLeft:{style:Tn},paddingX:{style:Tn},paddingY:{style:Tn},paddingInline:{style:Tn},paddingInlineStart:{style:Tn},paddingInlineEnd:{style:Tn},paddingBlock:{style:Tn},paddingBlockStart:{style:Tn},paddingBlockEnd:{style:Tn},m:{style:kn},mt:{style:kn},mr:{style:kn},mb:{style:kn},ml:{style:kn},mx:{style:kn},my:{style:kn},margin:{style:kn},marginTop:{style:kn},marginRight:{style:kn},marginBottom:{style:kn},marginLeft:{style:kn},marginX:{style:kn},marginY:{style:kn},marginInline:{style:kn},marginInlineStart:{style:kn},marginInlineEnd:{style:kn},marginBlock:{style:kn},marginBlockStart:{style:kn},marginBlockEnd:{style:kn},displayPrint:{cssProperty:!1,transform:e=>({"@media print":{display:e}})},display:{},overflow:{},textOverflow:{},visibility:{},whiteSpace:{},flexBasis:{},flexDirection:{},flexWrap:{},justifyContent:{},alignItems:{},alignContent:{},order:{},flex:{},flexGrow:{},flexShrink:{},alignSelf:{},justifyItems:{},justifySelf:{},gap:{style:ff},rowGap:{style:gf},columnGap:{style:pf},gridColumn:{},gridRow:{},gridAutoFlow:{},gridAutoColumns:{},gridAutoRows:{},gridTemplateColumns:{},gridTemplateRows:{},gridTemplateAreas:{},gridArea:{},position:{},zIndex:{themeKey:"zIndex"},top:{},right:{},bottom:{},left:{},boxShadow:{themeKey:"shadows"},width:{transform:ns},maxWidth:{style:C0},minWidth:{transform:ns},height:{transform:ns},maxHeight:{transform:ns},minHeight:{transform:ns},boxSizing:{},fontFamily:{themeKey:"typography"},fontSize:{themeKey:"typography"},fontStyle:{themeKey:"typography"},fontWeight:{themeKey:"typography"},letterSpacing:{},textTransform:{},lineHeight:{},textAlign:{},typography:{cssProperty:!1,themeKey:"typography"}};function IE(...e){const n=e.reduce((r,o)=>r.concat(Object.keys(o)),[]),a=new Set(n);return e.every(r=>a.size===Object.keys(r).length)}function BE(e,n){return typeof e=="function"?e(n):e}function d2(){function e(a,r,o,d){const h={[a]:r,theme:o},g=d[a];if(!g)return{[a]:r};const{cssProperty:p=a,themeKey:f,transform:v,style:w}=g;if(r==null)return null;if(f==="typography"&&r==="inherit")return{[a]:r};const S=uf(o,f)||{};return w?w(h):Gr(h,r,C=>{let _=Dh(S,v,C);return C===_&&typeof C=="string"&&(_=Dh(S,v,`${a}${C==="default"?"":St(C)}`,C)),p===!1?_:{[p]:_}})}function n(a){var r;const{sx:o,theme:d={},nested:h}=a||{};if(!o)return null;const g=(r=d.unstable_sxConfig)!=null?r:Cu;function p(f){let v=f;if(typeof f=="function")v=f(d);else if(typeof f!="object")return f;if(!v)return null;const w=eE(d.breakpoints),S=Object.keys(w);let T=w;return Object.keys(v).forEach(C=>{const _=BE(v[C],d);if(_!=null)if(typeof _=="object")if(g[C])T=qd(T,e(C,_,d,g));else{const k=Gr({theme:d},_,R=>({[C]:R}));IE(k,_)?T[C]=n({sx:_,theme:d,nested:!0}):T=qd(T,k)}else T=qd(T,e(C,_,d,g))}),!h&&d.modularCssLayers?{"@layer sx":mj(S,T)}:mj(S,T)}return Array.isArray(o)?o.map(p):p(o)}return n}const ku=d2();ku.filterProps=["sx"];function u2(e,n){const a=this;return a.vars&&typeof a.getColorSchemeSelector=="function"?{[a.getColorSchemeSelector(e).replace(/(\[[^\]]+\])/,"*:where($1)")]:n}:a.palette.mode===e?n:{}}const $E=["breakpoints","palette","spacing","shape"];function k0(e={},...n){const{breakpoints:a={},palette:r={},spacing:o,shape:d={}}=e,h=wn(e,$E),g=l2(a),p=lE(o);let f=hr({breakpoints:g,direction:"ltr",components:{},palette:ze({mode:"light"},r),spacing:p,shape:ze({},JT,d)},h);return f.applyStyles=u2,f=n.reduce((v,w)=>hr(v,w),f),f.unstable_sxConfig=ze({},Cu,h?.unstable_sxConfig),f.unstable_sx=function(w){return ku({sx:w,theme:this})},f}const FE=Object.freeze(Object.defineProperty({__proto__:null,default:k0,private_createBreakpoints:l2,unstable_applyStyles:u2},Symbol.toStringTag,{value:"Module"})),UE=nl(FE),HE=["sx"],qE=e=>{var n,a;const r={systemProps:{},otherProps:{}},o=(n=e==null||(a=e.theme)==null?void 0:a.unstable_sxConfig)!=null?n:Cu;return Object.keys(e).forEach(d=>{o[d]?r.systemProps[d]=e[d]:r.otherProps[d]=e[d]}),r};function T0(e){const{sx:n}=e,a=wn(e,HE),{systemProps:r,otherProps:o}=qE(a);let d;return Array.isArray(n)?d=[r,...n]:typeof n=="function"?d=(...h)=>{const g=n(...h);return Ji(g)?ze({},r,g):r}:d=ze({},r,n),ze({},o,{sx:d})}const YE=Object.freeze(Object.defineProperty({__proto__:null,default:ku,extendSxProp:T0,unstable_createStyleFunctionSx:d2,unstable_defaultSxConfig:Cu},Symbol.toStringTag,{value:"Module"})),VE=nl(YE);var fj;function ZE(){if(fj)return Dl;fj=1;var e=HN();Object.defineProperty(Dl,"__esModule",{value:!0}),Dl.default=A,Dl.shouldForwardProp=C,Dl.systemDefaultTheme=void 0;var n=e(H3()),a=e(q3()),r=w(ZT),o=WT;e(KT),e(GT);var d=e(UE),h=e(VE);const g=["ownerState"],p=["variants"],f=["name","slot","skipVariantsResolver","skipSx","overridesResolver"];function v($){if(typeof WeakMap!="function")return null;var E=new WeakMap,I=new WeakMap;return(v=function(Z){return Z?I:E})($)}function w($,E){if($&&$.__esModule)return $;if($===null||typeof $!="object"&&typeof $!="function")return{default:$};var I=v(E);if(I&&I.has($))return I.get($);var Z={__proto__:null},F=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Y in $)if(Y!=="default"&&Object.prototype.hasOwnProperty.call($,Y)){var G=F?Object.getOwnPropertyDescriptor($,Y):null;G&&(G.get||G.set)?Object.defineProperty(Z,Y,G):Z[Y]=$[Y]}return Z.default=$,I&&I.set($,Z),Z}function S($){return Object.keys($).length===0}function T($){return typeof $=="string"&&$.charCodeAt(0)>96}function C($){return $!=="ownerState"&&$!=="theme"&&$!=="sx"&&$!=="as"}function _($,E){return E&&$&&typeof $=="object"&&$.styles&&!$.styles.startsWith("@layer")&&($.styles=`@layer ${E}{${String($.styles)}}`),$}const k=Dl.systemDefaultTheme=(0,d.default)(),R=$=>$&&$.charAt(0).toLowerCase()+$.slice(1);function O({defaultTheme:$,theme:E,themeId:I}){return S(E)?$:E[I]||E}function P($){return $?(E,I)=>I[$]:null}function U($,E,I){let{ownerState:Z}=E,F=(0,a.default)(E,g);const Y=typeof $=="function"?$((0,n.default)({ownerState:Z},F)):$;if(Array.isArray(Y))return Y.flatMap(G=>U(G,(0,n.default)({ownerState:Z},F),I));if(Y&&typeof Y=="object"&&Array.isArray(Y.variants)){const{variants:G=[]}=Y;let H=(0,a.default)(Y,p);return G.forEach(Q=>{let K=!0;if(typeof Q.props=="function"?K=Q.props((0,n.default)({ownerState:Z},F,Z)):Object.keys(Q.props).forEach(oe=>{Z?.[oe]!==Q.props[oe]&&F[oe]!==Q.props[oe]&&(K=!1)}),K){Array.isArray(H)||(H=[H]);const oe=typeof Q.style=="function"?Q.style((0,n.default)({ownerState:Z},F,Z)):Q.style;H.push(I?_((0,r.internal_serializeStyles)(oe),I):oe)}}),H}return I?_((0,r.internal_serializeStyles)(Y),I):Y}function A($={}){const{themeId:E,defaultTheme:I=k,rootShouldForwardProp:Z=C,slotShouldForwardProp:F=C}=$,Y=G=>(0,h.default)((0,n.default)({},G,{theme:O((0,n.default)({},G,{defaultTheme:I,themeId:E}))}));return Y.__mui_systemSx=!0,(G,V={})=>{(0,r.internal_processStyles)(G,Ce=>Ce.filter(de=>!(de!=null&&de.__mui_systemSx)));const{name:H,slot:Q,skipVariantsResolver:K,skipSx:oe,overridesResolver:W=P(R(Q))}=V,X=(0,a.default)(V,f),z=H&&H.startsWith("Mui")||Q?"components":"custom",J=K!==void 0?K:Q&&Q!=="Root"&&Q!=="root"||!1,se=oe||!1;let ae,ee=C;Q==="Root"||Q==="root"?ee=Z:Q?ee=F:T(G)&&(ee=void 0);const re=(0,r.default)(G,(0,n.default)({shouldForwardProp:ee,label:ae},X)),me=Ce=>typeof Ce=="function"&&Ce.__emotion_real!==Ce||(0,o.isPlainObject)(Ce)?de=>{const te=O({theme:de.theme,defaultTheme:I,themeId:E});return U(Ce,(0,n.default)({},de,{theme:te}),te.modularCssLayers?z:void 0)}:Ce,ye=(Ce,...de)=>{let te=me(Ce);const _e=de?de.map(me):[];H&&W&&_e.push(Je=>{const it=O((0,n.default)({},Je,{defaultTheme:I,themeId:E}));if(!it.components||!it.components[H]||!it.components[H].styleOverrides)return null;const Te=it.components[H].styleOverrides,Fe={};return Object.entries(Te).forEach(([wt,Nt])=>{Fe[wt]=U(Nt,(0,n.default)({},Je,{theme:it}),it.modularCssLayers?"theme":void 0)}),W(Je,Fe)}),H&&!J&&_e.push(Je=>{var it;const Te=O((0,n.default)({},Je,{defaultTheme:I,themeId:E})),Fe=Te==null||(it=Te.components)==null||(it=it[H])==null?void 0:it.variants;return U({variants:Fe},(0,n.default)({},Je,{theme:Te}),Te.modularCssLayers?"theme":void 0)}),se||_e.push(Y);const Ie=_e.length-de.length;if(Array.isArray(Ce)&&Ie>0){const Je=new Array(Ie).fill("");te=[...Ce,...Je],te.raw=[...Ce.raw,...Je]}const at=re(te,..._e);return G.muiName&&(at.muiName=G.muiName),at};return re.withConfig&&(ye.withConfig=re.withConfig),ye}}return Dl}var WE=ZE();const KE=pu(WE);function GE(e,n){return ze({toolbar:{minHeight:56,[e.up("xs")]:{"@media (orientation: landscape)":{minHeight:48}},[e.up("sm")]:{minHeight:64}}},n)}var yn={};const QE=nl(f3),XE=nl(B3);var pj;function JE(){if(pj)return yn;pj=1;var e=HN();Object.defineProperty(yn,"__esModule",{value:!0}),yn.alpha=C,yn.blend=$,yn.colorChannel=void 0,yn.darken=k,yn.decomposeColor=h,yn.emphasize=U,yn.getContrastRatio=T,yn.getLuminance=S,yn.hexToRgb=o,yn.hslToRgb=w,yn.lighten=O,yn.private_safeAlpha=_,yn.private_safeColorChannel=void 0,yn.private_safeDarken=R,yn.private_safeEmphasize=A,yn.private_safeLighten=P,yn.recomposeColor=f,yn.rgbToHex=v;var n=e(QE),a=e(XE);function r(E,I=0,Z=1){return(0,a.default)(E,I,Z)}function o(E){E=E.slice(1);const I=new RegExp(`.{1,${E.length>=6?2:1}}`,"g");let Z=E.match(I);return Z&&Z[0].length===1&&(Z=Z.map(F=>F+F)),Z?`rgb${Z.length===4?"a":""}(${Z.map((F,Y)=>Y<3?parseInt(F,16):Math.round(parseInt(F,16)/255*1e3)/1e3).join(", ")})`:""}function d(E){const I=E.toString(16);return I.length===1?`0${I}`:I}function h(E){if(E.type)return E;if(E.charAt(0)==="#")return h(o(E));const I=E.indexOf("("),Z=E.substring(0,I);if(["rgb","rgba","hsl","hsla","color"].indexOf(Z)===-1)throw new Error((0,n.default)(9,E));let F=E.substring(I+1,E.length-1),Y;if(Z==="color"){if(F=F.split(" "),Y=F.shift(),F.length===4&&F[3].charAt(0)==="/"&&(F[3]=F[3].slice(1)),["srgb","display-p3","a98-rgb","prophoto-rgb","rec-2020"].indexOf(Y)===-1)throw new Error((0,n.default)(10,Y))}else F=F.split(",");return F=F.map(G=>parseFloat(G)),{type:Z,values:F,colorSpace:Y}}const g=E=>{const I=h(E);return I.values.slice(0,3).map((Z,F)=>I.type.indexOf("hsl")!==-1&&F!==0?`${Z}%`:Z).join(" ")};yn.colorChannel=g;const p=(E,I)=>{try{return g(E)}catch{return E}};yn.private_safeColorChannel=p;function f(E){const{type:I,colorSpace:Z}=E;let{values:F}=E;return I.indexOf("rgb")!==-1?F=F.map((Y,G)=>G<3?parseInt(Y,10):Y):I.indexOf("hsl")!==-1&&(F[1]=`${F[1]}%`,F[2]=`${F[2]}%`),I.indexOf("color")!==-1?F=`${Z} ${F.join(" ")}`:F=`${F.join(", ")}`,`${I}(${F})`}function v(E){if(E.indexOf("#")===0)return E;const{values:I}=h(E);return`#${I.map((Z,F)=>d(F===3?Math.round(255*Z):Z)).join("")}`}function w(E){E=h(E);const{values:I}=E,Z=I[0],F=I[1]/100,Y=I[2]/100,G=F*Math.min(Y,1-Y),V=(K,oe=(K+Z/30)%12)=>Y-G*Math.max(Math.min(oe-3,9-oe,1),-1);let H="rgb";const Q=[Math.round(V(0)*255),Math.round(V(8)*255),Math.round(V(4)*255)];return E.type==="hsla"&&(H+="a",Q.push(I[3])),f({type:H,values:Q})}function S(E){E=h(E);let I=E.type==="hsl"||E.type==="hsla"?h(w(E)).values:E.values;return I=I.map(Z=>(E.type!=="color"&&(Z/=255),Z<=.03928?Z/12.92:((Z+.055)/1.055)**2.4)),Number((.2126*I[0]+.7152*I[1]+.0722*I[2]).toFixed(3))}function T(E,I){const Z=S(E),F=S(I);return(Math.max(Z,F)+.05)/(Math.min(Z,F)+.05)}function C(E,I){return E=h(E),I=r(I),(E.type==="rgb"||E.type==="hsl")&&(E.type+="a"),E.type==="color"?E.values[3]=`/${I}`:E.values[3]=I,f(E)}function _(E,I,Z){try{return C(E,I)}catch{return E}}function k(E,I){if(E=h(E),I=r(I),E.type.indexOf("hsl")!==-1)E.values[2]*=1-I;else if(E.type.indexOf("rgb")!==-1||E.type.indexOf("color")!==-1)for(let Z=0;Z<3;Z+=1)E.values[Z]*=1-I;return f(E)}function R(E,I,Z){try{return k(E,I)}catch{return E}}function O(E,I){if(E=h(E),I=r(I),E.type.indexOf("hsl")!==-1)E.values[2]+=(100-E.values[2])*I;else if(E.type.indexOf("rgb")!==-1)for(let Z=0;Z<3;Z+=1)E.values[Z]+=(255-E.values[Z])*I;else if(E.type.indexOf("color")!==-1)for(let Z=0;Z<3;Z+=1)E.values[Z]+=(1-E.values[Z])*I;return f(E)}function P(E,I,Z){try{return O(E,I)}catch{return E}}function U(E,I=.15){return S(E)>.5?k(E,I):O(E,I)}function A(E,I,Z){try{return U(E,I)}catch{return E}}function $(E,I,Z,F=1){const Y=(Q,K)=>Math.round((Q**(1/F)*(1-Z)+K**(1/F)*Z)**F),G=h(E),V=h(I),H=[Y(G.values[0],V.values[0]),Y(G.values[1],V.values[1]),Y(G.values[2],V.values[2])];return f({type:"rgb",values:H})}return yn}var za=JE();const iu={black:"#000",white:"#fff"},eM={50:"#fafafa",100:"#f5f5f5",200:"#eeeeee",300:"#e0e0e0",400:"#bdbdbd",500:"#9e9e9e",600:"#757575",700:"#616161",800:"#424242",900:"#212121",A100:"#f5f5f5",A200:"#eeeeee",A400:"#bdbdbd",A700:"#616161"},$o={50:"#f3e5f5",200:"#ce93d8",300:"#ba68c8",400:"#ab47bc",500:"#9c27b0",700:"#7b1fa2"},Fo={300:"#e57373",400:"#ef5350",500:"#f44336",700:"#d32f2f",800:"#c62828"},Dd={300:"#ffb74d",400:"#ffa726",500:"#ff9800",700:"#f57c00",900:"#e65100"},Uo={50:"#e3f2fd",200:"#90caf9",400:"#42a5f5",700:"#1976d2",800:"#1565c0"},Ho={300:"#4fc3f7",400:"#29b6f6",500:"#03a9f4",700:"#0288d1",900:"#01579b"},qo={300:"#81c784",400:"#66bb6a",500:"#4caf50",700:"#388e3c",800:"#2e7d32",900:"#1b5e20"},tM=["mode","contrastThreshold","tonalOffset"],gj={text:{primary:"rgba(0, 0, 0, 0.87)",secondary:"rgba(0, 0, 0, 0.6)",disabled:"rgba(0, 0, 0, 0.38)"},divider:"rgba(0, 0, 0, 0.12)",background:{paper:iu.white,default:iu.white},action:{active:"rgba(0, 0, 0, 0.54)",hover:"rgba(0, 0, 0, 0.04)",hoverOpacity:.04,selected:"rgba(0, 0, 0, 0.08)",selectedOpacity:.08,disabled:"rgba(0, 0, 0, 0.26)",disabledBackground:"rgba(0, 0, 0, 0.12)",disabledOpacity:.38,focus:"rgba(0, 0, 0, 0.12)",focusOpacity:.12,activatedOpacity:.12}},Gg={text:{primary:iu.white,secondary:"rgba(255, 255, 255, 0.7)",disabled:"rgba(255, 255, 255, 0.5)",icon:"rgba(255, 255, 255, 0.5)"},divider:"rgba(255, 255, 255, 0.12)",background:{paper:"#121212",default:"#121212"},action:{active:iu.white,hover:"rgba(255, 255, 255, 0.08)",hoverOpacity:.08,selected:"rgba(255, 255, 255, 0.16)",selectedOpacity:.16,disabled:"rgba(255, 255, 255, 0.3)",disabledBackground:"rgba(255, 255, 255, 0.12)",disabledOpacity:.38,focus:"rgba(255, 255, 255, 0.12)",focusOpacity:.12,activatedOpacity:.24}};function xj(e,n,a,r){const o=r.light||r,d=r.dark||r*1.5;e[n]||(e.hasOwnProperty(a)?e[n]=e[a]:n==="light"?e.light=za.lighten(e.main,o):n==="dark"&&(e.dark=za.darken(e.main,d)))}function nM(e="light"){return e==="dark"?{main:Uo[200],light:Uo[50],dark:Uo[400]}:{main:Uo[700],light:Uo[400],dark:Uo[800]}}function aM(e="light"){return e==="dark"?{main:$o[200],light:$o[50],dark:$o[400]}:{main:$o[500],light:$o[300],dark:$o[700]}}function sM(e="light"){return e==="dark"?{main:Fo[500],light:Fo[300],dark:Fo[700]}:{main:Fo[700],light:Fo[400],dark:Fo[800]}}function rM(e="light"){return e==="dark"?{main:Ho[400],light:Ho[300],dark:Ho[700]}:{main:Ho[700],light:Ho[500],dark:Ho[900]}}function iM(e="light"){return e==="dark"?{main:qo[400],light:qo[300],dark:qo[700]}:{main:qo[800],light:qo[500],dark:qo[900]}}function lM(e="light"){return e==="dark"?{main:Dd[400],light:Dd[300],dark:Dd[700]}:{main:"#ed6c02",light:Dd[500],dark:Dd[900]}}function oM(e){const{mode:n="light",contrastThreshold:a=3,tonalOffset:r=.2}=e,o=wn(e,tM),d=e.primary||nM(n),h=e.secondary||aM(n),g=e.error||sM(n),p=e.info||rM(n),f=e.success||iM(n),v=e.warning||lM(n);function w(_){return za.getContrastRatio(_,Gg.text.primary)>=a?Gg.text.primary:gj.text.primary}const S=({color:_,name:k,mainShade:R=500,lightShade:O=300,darkShade:P=700})=>{if(_=ze({},_),!_.main&&_[R]&&(_.main=_[R]),!_.hasOwnProperty("main"))throw new Error(tu(11,k?` (${k})`:"",R));if(typeof _.main!="string")throw new Error(tu(12,k?` (${k})`:"",JSON.stringify(_.main)));return xj(_,"light",O,r),xj(_,"dark",P,r),_.contrastText||(_.contrastText=w(_.main)),_},T={dark:Gg,light:gj};return hr(ze({common:ze({},iu),mode:n,primary:S({color:d,name:"primary"}),secondary:S({color:h,name:"secondary",mainShade:"A400",lightShade:"A200",darkShade:"A700"}),error:S({color:g,name:"error"}),warning:S({color:v,name:"warning"}),info:S({color:p,name:"info"}),success:S({color:f,name:"success"}),grey:eM,contrastThreshold:a,getContrastText:w,augmentColor:S,tonalOffset:r},T[n]),o)}const cM=["fontFamily","fontSize","fontWeightLight","fontWeightRegular","fontWeightMedium","fontWeightBold","htmlFontSize","allVariants","pxToRem"];function dM(e){return Math.round(e*1e5)/1e5}const yj={textTransform:"uppercase"},bj='"Roboto", "Helvetica", "Arial", sans-serif';function uM(e,n){const a=typeof n=="function"?n(e):n,{fontFamily:r=bj,fontSize:o=14,fontWeightLight:d=300,fontWeightRegular:h=400,fontWeightMedium:g=500,fontWeightBold:p=700,htmlFontSize:f=16,allVariants:v,pxToRem:w}=a,S=wn(a,cM),T=o/14,C=w||(R=>`${R/f*T}rem`),_=(R,O,P,U,A)=>ze({fontFamily:r,fontWeight:R,fontSize:C(O),lineHeight:P},r===bj?{letterSpacing:`${dM(U/O)}em`}:{},A,v),k={h1:_(d,96,1.167,-1.5),h2:_(d,60,1.2,-.5),h3:_(h,48,1.167,0),h4:_(h,34,1.235,.25),h5:_(h,24,1.334,0),h6:_(g,20,1.6,.15),subtitle1:_(h,16,1.75,.15),subtitle2:_(g,14,1.57,.1),body1:_(h,16,1.5,.15),body2:_(h,14,1.43,.15),button:_(g,14,1.75,.4,yj),caption:_(h,12,1.66,.4),overline:_(h,12,2.66,1,yj),inherit:{fontFamily:"inherit",fontWeight:"inherit",fontSize:"inherit",lineHeight:"inherit",letterSpacing:"inherit"}};return hr(ze({htmlFontSize:f,pxToRem:C,fontFamily:r,fontSize:o,fontWeightLight:d,fontWeightRegular:h,fontWeightMedium:g,fontWeightBold:p},k),S,{clone:!1})}const mM=.2,hM=.14,fM=.12;function un(...e){return[`${e[0]}px ${e[1]}px ${e[2]}px ${e[3]}px rgba(0,0,0,${mM})`,`${e[4]}px ${e[5]}px ${e[6]}px ${e[7]}px rgba(0,0,0,${hM})`,`${e[8]}px ${e[9]}px ${e[10]}px ${e[11]}px rgba(0,0,0,${fM})`].join(",")}const pM=["none",un(0,2,1,-1,0,1,1,0,0,1,3,0),un(0,3,1,-2,0,2,2,0,0,1,5,0),un(0,3,3,-2,0,3,4,0,0,1,8,0),un(0,2,4,-1,0,4,5,0,0,1,10,0),un(0,3,5,-1,0,5,8,0,0,1,14,0),un(0,3,5,-1,0,6,10,0,0,1,18,0),un(0,4,5,-2,0,7,10,1,0,2,16,1),un(0,5,5,-3,0,8,10,1,0,3,14,2),un(0,5,6,-3,0,9,12,1,0,3,16,2),un(0,6,6,-3,0,10,14,1,0,4,18,3),un(0,6,7,-4,0,11,15,1,0,4,20,3),un(0,7,8,-4,0,12,17,2,0,5,22,4),un(0,7,8,-4,0,13,19,2,0,5,24,4),un(0,7,9,-4,0,14,21,2,0,5,26,4),un(0,8,9,-5,0,15,22,2,0,6,28,5),un(0,8,10,-5,0,16,24,2,0,6,30,5),un(0,8,11,-5,0,17,26,2,0,6,32,5),un(0,9,11,-5,0,18,28,2,0,7,34,6),un(0,9,12,-6,0,19,29,2,0,7,36,6),un(0,10,13,-6,0,20,31,3,0,8,38,7),un(0,10,13,-6,0,21,33,3,0,8,40,7),un(0,10,14,-6,0,22,35,3,0,8,42,7),un(0,11,14,-7,0,23,36,3,0,9,44,8),un(0,11,15,-7,0,24,38,3,0,9,46,8)],gM=["duration","easing","delay"],xM={easeInOut:"cubic-bezier(0.4, 0, 0.2, 1)",easeOut:"cubic-bezier(0.0, 0, 0.2, 1)",easeIn:"cubic-bezier(0.4, 0, 1, 1)",sharp:"cubic-bezier(0.4, 0, 0.6, 1)"},yM={shortest:150,shorter:200,short:250,standard:300,complex:375,enteringScreen:225,leavingScreen:195};function vj(e){return`${Math.round(e)}ms`}function bM(e){if(!e)return 0;const n=e/36;return Math.round((4+15*n**.25+n/5)*10)}function vM(e){const n=ze({},xM,e.easing),a=ze({},yM,e.duration);return ze({getAutoHeightDuration:bM,create:(o=["all"],d={})=>{const{duration:h=a.standard,easing:g=n.easeInOut,delay:p=0}=d;return wn(d,gM),(Array.isArray(o)?o:[o]).map(f=>`${f} ${typeof h=="string"?h:vj(h)} ${g} ${typeof p=="string"?p:vj(p)}`).join(",")}},e,{easing:n,duration:a})}const jM={mobileStepper:1e3,fab:1050,speedDial:1050,appBar:1100,drawer:1200,modal:1300,snackbar:1400,tooltip:1500},wM=["breakpoints","mixins","spacing","palette","transitions","typography","shape"];function E0(e={},...n){const{mixins:a={},palette:r={},transitions:o={},typography:d={}}=e,h=wn(e,wM);if(e.vars&&e.generateCssVars===void 0)throw new Error(tu(18));const g=oM(r),p=k0(e);let f=hr(p,{mixins:GE(p.breakpoints,a),palette:g,shadows:pM.slice(),typography:uM(g,d),transitions:vM(o),zIndex:ze({},jM)});return f=hr(f,h),f=n.reduce((v,w)=>hr(v,w),f),f.unstable_sxConfig=ze({},Cu,h?.unstable_sxConfig),f.unstable_sx=function(w){return ku({sx:w,theme:this})},f}const m2=E0(),lu="$$material";function NM(e){return e!=="ownerState"&&e!=="theme"&&e!=="sx"&&e!=="as"}const xf=e=>NM(e)&&e!=="classes",Xn=KE({themeId:lu,defaultTheme:m2,rootShouldForwardProp:xf});function _M(e){return xr("MuiSvgIcon",e)}Ys("MuiSvgIcon",["root","colorPrimary","colorSecondary","colorAction","colorError","colorDisabled","fontSizeInherit","fontSizeSmall","fontSizeMedium","fontSizeLarge"]);const SM=["children","className","color","component","fontSize","htmlColor","inheritViewBox","titleAccess","viewBox"],CM=e=>{const{color:n,fontSize:a,classes:r}=e,o={root:["root",n!=="inherit"&&`color${St(n)}`,`fontSize${St(a)}`]};return Jr(o,_M,r)},kM=Xn("svg",{name:"MuiSvgIcon",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.color!=="inherit"&&n[`color${St(a.color)}`],n[`fontSize${St(a.fontSize)}`]]}})(({theme:e,ownerState:n})=>{var a,r,o,d,h,g,p,f,v,w,S,T,C;return{userSelect:"none",width:"1em",height:"1em",display:"inline-block",fill:n.hasSvgAsChild?void 0:"currentColor",flexShrink:0,transition:(a=e.transitions)==null||(r=a.create)==null?void 0:r.call(a,"fill",{duration:(o=e.transitions)==null||(o=o.duration)==null?void 0:o.shorter}),fontSize:{inherit:"inherit",small:((d=e.typography)==null||(h=d.pxToRem)==null?void 0:h.call(d,20))||"1.25rem",medium:((g=e.typography)==null||(p=g.pxToRem)==null?void 0:p.call(g,24))||"1.5rem",large:((f=e.typography)==null||(v=f.pxToRem)==null?void 0:v.call(f,35))||"2.1875rem"}[n.fontSize],color:(w=(S=(e.vars||e).palette)==null||(S=S[n.color])==null?void 0:S.main)!=null?w:{action:(T=(e.vars||e).palette)==null||(T=T.action)==null?void 0:T.active,disabled:(C=(e.vars||e).palette)==null||(C=C.action)==null?void 0:C.disabled,inherit:void 0}[n.color]}}),Tx=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiSvgIcon"}),{children:o,className:d,color:h="inherit",component:g="svg",fontSize:p="medium",htmlColor:f,inheritViewBox:v=!1,titleAccess:w,viewBox:S="0 0 24 24"}=r,T=wn(r,SM),C=b.isValidElement(o)&&o.type==="svg",_=ze({},r,{color:h,component:g,fontSize:p,instanceFontSize:n.fontSize,inheritViewBox:v,viewBox:S,hasSvgAsChild:C}),k={};v||(k.viewBox=S);const R=CM(_);return t.jsxs(kM,ze({as:g,className:Pn(R.root,d),focusable:"false",color:f,"aria-hidden":w?void 0:!0,role:w?"img":void 0,ref:a},k,T,C&&o.props,{ownerState:_,children:[C?o.props.children:o,w?t.jsx("title",{children:w}):null]}))});Tx.muiName="SvgIcon";function al(e,n){function a(r,o){return t.jsx(Tx,ze({"data-testid":`${n}Icon`,ref:o},r,{children:e}))}return a.muiName=Tx.muiName,b.memo(b.forwardRef(a))}const TM=al(t.jsx("path",{d:"M11.8 10.9c-2.27-.59-3-1.2-3-2.15 0-1.09 1.01-1.85 2.7-1.85 1.78 0 2.44.85 2.5 2.1h2.21c-.07-1.72-1.12-3.3-3.21-3.81V3h-3v2.16c-1.94.42-3.5 1.68-3.5 3.61 0 2.31 1.91 3.46 4.7 4.13 2.5.6 3 1.48 3 2.41 0 .69-.49 1.79-2.7 1.79-2.06 0-2.87-.92-2.98-2.1h-2.2c.12 2.19 1.76 3.42 3.68 3.83V21h3v-2.15c1.95-.37 3.5-1.5 3.5-3.55 0-2.84-2.43-3.81-4.7-4.4"}),"AttachMoney"),ou=({children:e})=>{const n=Hs(),a=is(),[r,o]=b.useState(!1),[d,h]=b.useState(!1),{user:g,isAuthenticated:p,isLoading:f,logout:v}=DN(),{data:w}=o3();if(f)return null;if(!p||!g)return t.jsx($l,{to:"/auth/login",replace:!0});const S=g.role==="Admin",T=g.role==="Owner",C=[{path:"/admin/dashboard",label:"لوحة التحكم",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})},{path:"/admin/users",label:"المستخدمون",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197m13.5-9a2.5 2.5 0 11-5 0 2.5 2.5 0 015 0z"})}),badge:w?w.unverifiedUsers.toString():"0"},{path:"/admin/inputs",label:"إدارة المدخلات",icon:t.jsx(TM,{className:"w-5 h-5"})},{path:"/admin/properties",label:"الكيانات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),badge:w?w.unapprovedProperties.toString():"0"},{path:"/admin/property-types",label:"أنواع الكيانات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})},{path:"/admin/units",label:"الوحدات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})},{path:"/admin/property-images",label:"صور الكيانات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h4l1-2h8l1 2h4v13H3V7z"}),t.jsx("circle",{cx:"12",cy:"13",r:"4"})]})},{path:"/admin/unit-images",label:"صور الوحدات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h4l1-2h8l1 2h4v13H3V7z"}),t.jsx("circle",{cx:"12",cy:"13",r:"4"})]})},{path:"/admin/amenities",label:"المرافق",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})})},{path:"/admin/property-services",label:"الخدمات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5L12 12l9-4.5v9L12 21l-9-4.5v-9z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 12V3.5"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7.5l9 4.5 9-4.5"})]})},{path:"/admin/bookings",label:"الحجوزات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),badge:w?w.unconfirmedBookings.toString():"0"},{path:"/admin/payments",label:"المدفوعات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},{path:"/admin/reviews",label:"التقييمات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})},{path:"/admin/notifications",label:"الإشعارات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a6 6 0 10-12 0v3l-5 5h5m7 0v1a3 3 0 01-6 0v-1m6 0H9"})}),badge:w?w.unreadNotifications.toString():"0"},{path:"/admin/reports",label:"البلاغات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})})},{path:"/admin/audit-logs",label:"سجلات النشاط",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{path:"/admin/settings",label:"الإعدادات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})},{path:"/admin/home-sections",label:"إدارة أقسام الصفحة الرئيسية",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h7v7H3V3zm11 0h7v7h-7V3zM3 14h7v7H3v-7zm11 0h7v7h-7v-7z"})})}],_=[{path:"/property-owner/dashboard",label:"لوحة التحكم",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7v10a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2H5a2 2 0 00-2-2z"})})},{path:"/property-owner/properties",label:"كياناتي",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})},{path:"/property-owner/units",label:"الوحدات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 5a1 1 0 011-1h14a1 1 0 011 1v2a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM4 13a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H5a1 1 0 01-1-1v-6zM16 13a1 1 0 011-1h2a1 1 0 011 1v6a1 1 0 01-1 1h-2a1 1 0 01-1-1v-6z"})})},{path:"/property-owner/bookings",label:"الحجوزات",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{path:"/property-owner/staff",label:"الموظفون",icon:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 20h5v-2a3 3 0 00-5.356-1.857M17 20H7m10 0v-2c0-.656-.126-1.283-.356-1.857M7 20H2v-2a3 3 0 015.356-1.857M7 20v-2c0-.656.126-1.283.356-1.857m0 0a5.002 5.002 0 019.288 0M15 7a3 3 0 11-6 0 3 3 0 016 0zm6 3a2 2 0 11-4 0 2 2 0 014 0zM7 10a2 2 0 11-4 0 2 2 0 014 0z"})})}];let k;S?k=C.filter(O=>O.label!=="صور الكيانات"&&O.label!=="صور الوحدات"):T||g?.role==="Staff"?(k=[..._],g?.propertyId&&k.push({path:`/admin/property-images/${g.propertyId}`,label:"صور الكيانات",icon:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 7h4l1-2h8l1 2h4v13H3V7z"}),t.jsx("circle",{cx:"12",cy:"13",r:"4"})]})})):k=[];const R=({item:O,isActive:P})=>t.jsxs(Bs,{to:O.path,onClick:()=>h(!1),className:`
        group relative flex items-center px-4 py-3 text-sm font-medium rounded-xl
        transition-all duration-300 ease-in-out transform
        ${P?"bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-600 text-white shadow-lg scale-105":"text-gray-700 hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 hover:text-indigo-600 hover:scale-102"}
        ${r?"justify-center":""}
      `,children:[t.jsxs("div",{className:`
        relative flex items-center justify-center w-6 h-6
        ${P?"text-white":"text-gray-400 group-hover:text-indigo-500"}
        transition-colors duration-300
      `,children:[O.icon,P&&t.jsx("div",{className:"absolute inset-0 bg-white/20 rounded-full animate-pulse"})]}),!r&&t.jsxs(t.Fragment,{children:[t.jsx("span",{className:"mr-3 font-medium",children:O.label}),O.badge&&t.jsx("span",{className:`
              ml-auto px-2 py-1 text-xs font-bold rounded-full
              ${P?"bg-white/20 text-white":"bg-indigo-100 text-indigo-600 group-hover:bg-indigo-200"}
              transition-colors duration-300
            `,children:O.badge})]}),P&&t.jsx("div",{className:"absolute right-0 top-0 bottom-0 w-1 bg-gradient-to-b from-white/50 to-white/20 rounded-l-full"})]});return t.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",dir:"rtl",children:[t.jsx("nav",{className:"fixed top-0 left-0 right-0 z-30 bg-white/80 backdrop-blur-xl border-b border-white/20 shadow-lg",children:t.jsx("div",{className:"px-4 sm:px-6 lg:px-8",children:t.jsxs("div",{className:"flex justify-between items-center h-16",children:[t.jsxs("div",{className:"flex items-center",children:[t.jsx("button",{onClick:()=>h(!d),className:"md:hidden p-2 rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200",children:t.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsx("button",{onClick:()=>o(!r),className:"hidden lg:block p-2 rounded-xl text-gray-500 hover:text-gray-900 hover:bg-gray-100 transition-colors duration-200 ml-3",children:t.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),t.jsxs("div",{className:"flex items-center ml-4",children:[t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"w-10 h-10 bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-600 rounded-2xl flex items-center justify-center shadow-lg",children:t.jsx("span",{className:"text-white text-lg font-bold",children:"B"})}),t.jsx("div",{className:"absolute -top-1 -left-1 w-3 h-3 bg-green-400 rounded-full border-2 border-white animate-pulse"})]}),t.jsxs("div",{className:"ml-3",children:[t.jsx("h1",{className:"text-2xl font-bold bg-gradient-to-r from-indigo-600 via-blue-600 to-purple-600 bg-clip-text text-transparent",children:"BookN"}),t.jsx("p",{className:"text-xs text-gray-500",children:"نظام إدارة الحجوزات"})]})]})]}),t.jsx("div",{className:"hidden md:flex flex-1 max-w-lg mx-8",children:t.jsxs("div",{className:"relative w-full",children:[t.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:t.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),t.jsx("input",{type:"text",placeholder:"بحث...",className:"w-full pl-10 pr-4 py-2 border border-gray-200 rounded-xl bg-white/50 backdrop-blur-sm focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:border-transparent transition-all duration-200"})]})}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsxs("button",{className:"relative p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors duration-200",children:[t.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 17h5l-5-5V9a6 6 0 10-12 0v3l-5 5h5m7 0v1a3 3 0 01-6 0v-1m6 0H9"})}),t.jsx("span",{className:"absolute top-1 left-1 w-3 h-3 bg-red-400 rounded-full animate-pulse"})]}),t.jsxs("button",{type:"button",onClick:()=>a("/profile"),className:"flex items-center p-2 rounded-xl hover:bg-gray-100 transition-colors duration-200",children:[g?.profileImage?t.jsx("img",{src:g.profileImage,alt:g.name,className:"w-8 h-8 rounded-xl object-cover shadow-md"}):t.jsx("div",{className:"w-8 h-8 bg-gradient-to-r from-indigo-400 to-purple-500 rounded-xl flex items-center justify-center shadow-md",children:t.jsx("span",{className:"text-white text-sm font-bold",children:g?.name?.charAt(0).toUpperCase()})}),t.jsxs("div",{className:"ml-3 hidden sm:block",children:[t.jsx("div",{className:"text-sm font-medium text-gray-900",children:g?.name}),t.jsx("div",{className:"text-xs text-gray-500",children:g?.role==="Admin"?"مدير النظام":"مالك كيان"})]})]}),t.jsx("div",{className:"relative",children:t.jsx("button",{type:"button",onClick:()=>a("/settings"),className:"p-2 text-gray-400 hover:text-gray-600 hover:bg-gray-100 rounded-xl transition-colors duration-200",children:t.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]})})}),t.jsx("button",{onClick:v,className:"p-2 text-gray-400 hover:text-red-600 hover:bg-red-50 rounded-xl transition-colors duration-200",children:t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"})})})]})]})})}),t.jsxs("div",{className:"pt-16 min-h-screen relative lg:flex",children:[t.jsx("aside",{className:`
          fixed right-0 top-16 bottom-0 z-20
          ${r?"w-20":"w-64"}
          bg-white/90 backdrop-blur-xl border-l border-white/20 shadow-xl
          transition-all duration-300 ease-in-out
          ${d?"translate-x-0":"translate-x-full lg:translate-x-0"}
          lg:static lg:z-auto
        `,children:t.jsxs("div",{className:"h-full px-3 py-6 overflow-y-auto",children:[t.jsx("nav",{className:"space-y-2",children:k.map(O=>{const P=n.pathname===O.path;return t.jsx(R,{item:O,isActive:P},O.path)})}),t.jsx("div",{className:"absolute bottom-6 left-0 right-0 px-3",children:t.jsx("div",{className:"border-t border-gray-200/50 pt-4",children:t.jsxs(Bs,{to:"/profile",className:"flex items-center px-4 py-3 text-sm text-gray-600 rounded-xl hover:bg-gradient-to-r hover:from-blue-50 hover:to-indigo-50 hover:text-indigo-600 transition-all duration-300",children:[t.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z"})}),!r&&t.jsx("span",{className:"mr-3",children:"الملف الشخصي"})]})})})]})}),d&&t.jsx("div",{className:"fixed inset-0 z-10 bg-black/40 backdrop-blur-sm md:hidden",onClick:()=>h(!1)}),t.jsx("main",{className:"w-full min-h-screen transition-all duration-300 ease-in-out lg:flex-1",children:t.jsx("div",{className:"w-full h-full p-4 md:p-6",children:e})})]})]})},EM=()=>t.jsx(ou,{children:t.jsx(r0,{})}),MM=()=>t.jsx(ou,{children:t.jsx(r0,{})}),h2=({children:e,restricted:n=!1})=>{const a=localStorage.getItem("token"),r=localStorage.getItem("user");if(n&&a)try{const o=JSON.parse(r||"{}");return o.role==="Admin"?t.jsx($l,{to:"/admin/dashboard",replace:!0}):o.role==="Owner"?t.jsx($l,{to:"/property-owner/dashboard",replace:!0}):t.jsx($l,{to:"/dashboard",replace:!0})}catch(o){console.error("خطأ في تحليل بيانات المستخدم:",o),localStorage.removeItem("token"),localStorage.removeItem("refreshToken"),localStorage.removeItem("user")}return t.jsx(t.Fragment,{children:e})},RM=()=>t.jsx(h2,{restricted:!0,children:t.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-slate-50 via-blue-50 to-indigo-100",dir:"rtl",children:t.jsxs("div",{className:"w-full max-w-md relative",children:[t.jsx("div",{className:"absolute top-0 left-0 w-72 h-72 bg-gradient-to-r from-blue-400 to-purple-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob"}),t.jsx("div",{className:"absolute top-0 right-0 w-72 h-72 bg-gradient-to-r from-indigo-400 to-pink-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-2000"}),t.jsx("div",{className:"absolute -bottom-8 left-20 w-72 h-72 bg-gradient-to-r from-yellow-400 to-red-600 rounded-full mix-blend-multiply filter blur-xl opacity-20 animate-blob animation-delay-4000"}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsxs("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gradient-to-r from-indigo-500 via-blue-500 to-purple-600 rounded-3xl shadow-2xl mb-6 relative",children:[t.jsx("span",{className:"text-white text-3xl font-bold",children:"B"}),t.jsx("div",{className:"absolute -top-1 -right-1 w-6 h-6 bg-green-400 rounded-full border-4 border-white animate-pulse"})]}),t.jsx("h1",{className:"text-4xl font-bold bg-gradient-to-r from-gray-900 via-blue-900 to-purple-900 bg-clip-text text-transparent mb-3",children:"BookN"}),t.jsx("p",{className:"text-lg text-gray-600 font-medium",children:"نظام إدارة الحجوزات المتطور"}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"منصة شاملة لإدارة الكيانات والحجوزات"})]}),t.jsx("div",{className:"glass-card shadow-2xl rounded-3xl px-8 py-8 border border-white/30",children:t.jsx(r0,{})}),t.jsx("div",{className:"text-center mt-6",children:t.jsx("p",{className:"text-xs text-gray-500",children:"© 2024 BookN. جميع الحقوق محفوظة."})})]})]})})});function Ke(...e){return e.filter(Boolean).join(" ")}const Oh=({content:e,children:n,position:a="top",delay:r=200,className:o=""})=>{const[d,h]=b.useState(!1),[g,p]=b.useState({x:0,y:0}),f=b.useRef(null),v=b.useRef(null),w=()=>{v.current=setTimeout(()=>{h(!0),T()},r)},S=()=>{v.current&&clearTimeout(v.current),h(!1)},T=()=>{if(!f.current)return;const _=f.current.getBoundingClientRect(),k={top:{x:_.left+_.width/2,y:_.top},bottom:{x:_.left+_.width/2,y:_.bottom},left:{x:_.left,y:_.top+_.height/2},right:{x:_.right,y:_.top+_.height/2}};p(k[a])};b.useEffect(()=>()=>{v.current&&clearTimeout(v.current)},[]);const C={top:"bottom-full left-1/2 -translate-x-1/2 mb-2",bottom:"top-full left-1/2 -translate-x-1/2 mt-2",left:"right-full top-1/2 -translate-y-1/2 mr-2",right:"left-full top-1/2 -translate-y-1/2 ml-2"};return t.jsxs(t.Fragment,{children:[t.jsx("div",{ref:f,onMouseEnter:w,onMouseLeave:S,className:"inline-block",children:n}),d&&t.jsx("div",{className:Ke("fixed z-50 px-2 py-1 text-xs text-white bg-gray-900 rounded shadow-lg","animate-in fade-in zoom-in-95 duration-100","pointer-events-none",C[a],o),style:{left:a==="left"||a==="right"?g.x:void 0,top:a==="top"||a==="bottom"?g.y:void 0},children:e})]})},pr=({size:e="md",text:n="",center:a=!1,className:r=""})=>{const o={sm:"w-4 h-4",md:"w-6 h-6",lg:"w-8 h-8",xl:"w-12 h-12"},d={sm:"text-xs",md:"text-sm",lg:"text-base",xl:"text-lg"},h=a?"flex flex-col items-center justify-center min-h-[200px]":"flex items-center space-x-2 space-x-reverse";return t.jsxs("div",{className:`${h} ${r}`,children:[t.jsx("div",{className:`animate-spin border-2 border-gray-300 border-t-blue-600 rounded-full ${o[e]}`}),n&&t.jsx("span",{className:`text-gray-600 ${d[e]} ${a?"mt-2":""}`,children:n})]})},rt=({onClick:e,icon:n,label:a,tooltip:r,variant:o="primary",size:d="md",loading:h=!1,disabled:g=!1,className:p="",children:f,type:v="button"})=>{const w=()=>({primary:"bg-blue-600 hover:bg-blue-700 text-white border-blue-600",secondary:"bg-gray-600 hover:bg-gray-700 text-white border-gray-600",success:"bg-green-600 hover:bg-green-700 text-white border-green-600",warning:"bg-yellow-600 hover:bg-yellow-700 text-white border-yellow-600",danger:"bg-red-600 hover:bg-red-700 text-white border-red-600",info:"bg-cyan-600 hover:bg-cyan-700 text-white border-cyan-600"})[o],S=()=>({sm:"px-3 py-1.5 text-xs",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"})[d],T=t.jsx("button",{type:v,onClick:e,disabled:g||h,className:`
        inline-flex items-center justify-center space-x-2 space-x-reverse
        border rounded-md font-medium transition-all duration-200
        focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500
        disabled:opacity-50 disabled:cursor-not-allowed
        ${w()}
        ${S()}
        ${p}
      `,children:h?t.jsx(pr,{size:"sm"}):t.jsxs(t.Fragment,{children:[n&&t.jsx("span",{className:"text-base",children:n}),t.jsx("span",{children:a}),f]})});return r?t.jsx(Oh,{content:r,children:T}):T},AM=()=>{const e=is(),{showSuccess:n,showError:a}=vc(),{login:r}=DN(),[o,d]=b.useState({email:"",password:"",rememberMe:!1}),[h,g]=b.useState(!1),[p,f]=b.useState({}),v=Be({mutationFn:eu.login,onSuccess:C=>{if(C.success&&C.data){const _=C.data;console.log("سسسسسسسسسسسسسسسسس");const k={id:_.userId,name:_.userName,email:_.email,role:_.role,profileImage:_.profileImage||void 0,propertyId:_.propertyId,propertyName:_.propertyName,staffId:_.staffId,settingsJson:_.settingsJson,favoritesJson:_.favoritesJson};console.log("hhhhhhhhhhhhhhhhhhhhhhhhhhhhh"),r(_.accessToken,_.refreshToken,k),console.log("hhhhhhhhhhhhhhhhhhhhhhhhhhhhh"),n("تم تسجيل الدخول بنجاح"),_.role==="Owner"?e("/owner/dashboard"):_.role==="Admin"?e("/admin/dashboard"):e("/dashboard")}else a(C.message||"فشل في تسجيل الدخول")},onError:C=>{console.log("Login error:",C),console.log("Error response:",C.response?.data),a(C.response?.data?.message||"حدث خطأ أثناء تسجيل الدخول")}}),w=()=>{const C={};return o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(C.email="البريد الإلكتروني غير صحيح"):C.email="البريد الإلكتروني مطلوب",o.password.trim()?o.password.length<6&&(C.password="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):C.password="كلمة المرور مطلوبة",f(C),Object.keys(C).length===0},S=C=>{C.preventDefault(),console.log("handleSubmit called with:",o),w()?(console.log("Form is valid, submitting..."),v.mutate(o)):console.log("Form validation failed")},T=(C,_)=>{d(k=>({...k,[C]:_})),p[C]&&f(k=>({...k,[C]:void 0}))};return t.jsxs("div",{children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"تسجيل الدخول"}),t.jsx("p",{className:"text-gray-600",children:"أدخل بياناتك للوصول إلى النظام"})]}),t.jsxs("form",{onSubmit:S,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:o.email,onChange:C=>T("email",C.target.value),placeholder:"admin@example.com",disabled:v.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${p.email?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),p.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:h?"text":"password",value:o.password,onChange:C=>T("password",C.target.value),placeholder:"كلمة المرور",disabled:v.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${p.password?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>g(!h),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:v.isPending,children:h?"إخفاء":"إظهار"})]}),p.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:p.password})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:o.rememberMe,onChange:C=>T("rememberMe",C.target.checked),className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:v.isPending}),t.jsx("span",{className:"mr-2 text-sm text-gray-600",children:"تذكرني"})]}),t.jsx(Bs,{to:"/auth/forgot-password",className:"text-sm text-blue-600 hover:text-blue-500",children:"نسيت كلمة المرور؟"})]}),t.jsx(rt,{type:"submit",variant:"primary",label:v.isPending?"جاري تسجيل الدخول...":"تسجيل الدخول",onClick:()=>{},className:"w-full py-3",disabled:v.isPending})]}),t.jsxs("div",{className:"mt-8 text-center space-y-4",children:[t.jsx("div",{className:"border-t border-gray-200 pt-6",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["مالك كيان جديد؟"," ",t.jsx(Bs,{to:"/auth/register",className:"font-medium text-blue-600 hover:text-blue-500",children:"سجل الآن"})]})}),t.jsx("div",{className:"text-xs text-gray-500",children:t.jsx("p",{children:"للحصول على حساب إدارة، تواصل مع الدعم الفني"})})]})]})},DM="/api/property/users",OM={registerPropertyOwner:e=>we.post(`${DM}/register`,e).then(n=>n.data)},PM="/api/admin/property-types",LM={getAll:e=>we.get(PM,{params:e}).then(n=>n.data)};function f2(e,n){const a=b.useRef(n);b.useEffect(function(){n!==a.current&&e.attributionControl!=null&&(a.current!=null&&e.attributionControl.removeAttribution(a.current),n!=null&&e.attributionControl.addAttribution(n)),a.current=n},[e,n])}const zM=1;function IM(e){return Object.freeze({__version:zM,map:e})}function BM(e,n){return Object.freeze({...e,...n})}const M0=b.createContext(null);function R0(){const e=b.use(M0);if(e==null)throw new Error("No context provided: useLeafletContext() can only be used in a descendant of <MapContainer>");return e}function $M(e){function n(a,r){const{instance:o,context:d}=e(a).current;b.useImperativeHandle(r,()=>o);const{children:h}=a;return h==null?null:We.createElement(M0,{value:d},h)}return b.forwardRef(n)}function FM(e){function n(a,r){const[o,d]=b.useState(!1),{instance:h}=e(a,d).current;b.useImperativeHandle(r,()=>h),b.useEffect(function(){o&&h.update()},[h,o,a.children]);const g=h._contentNode;return g?ec.createPortal(a.children,g):null}return b.forwardRef(n)}function UM(e){function n(a,r){const{instance:o}=e(a).current;return b.useImperativeHandle(r,()=>o),null}return b.forwardRef(n)}function p2(e,n){const a=b.useRef(void 0);b.useEffect(function(){return n!=null&&e.instance.on(n),a.current=n,function(){a.current!=null&&e.instance.off(a.current),a.current=null}},[e,n])}function A0(e,n){const a=e.pane??n.pane;return a?{...e,pane:a}:e}function HM(e,n){return function(r,o){const d=R0(),h=e(A0(r,d),d);return f2(d.map,r.attribution),p2(h.current,r.eventHandlers),n(h.current,d,r,o),h}}var Ud={exports:{}};/* @preserve
 * Leaflet 1.9.4, a JS library for interactive maps. https://leafletjs.com
 * (c) 2010-2023 Vladimir Agafonkin, (c) 2010-2011 CloudMade
 */var qM=Ud.exports,jj;function YM(){return jj||(jj=1,function(e,n){(function(a,r){r(n)})(qM,function(a){var r="1.9.4";function o(l){var u,x,N,M;for(x=1,N=arguments.length;x<N;x++){M=arguments[x];for(u in M)l[u]=M[u]}return l}var d=Object.create||function(){function l(){}return function(u){return l.prototype=u,new l}}();function h(l,u){var x=Array.prototype.slice;if(l.bind)return l.bind.apply(l,x.call(arguments,1));var N=x.call(arguments,2);return function(){return l.apply(u,N.length?N.concat(x.call(arguments)):arguments)}}var g=0;function p(l){return"_leaflet_id"in l||(l._leaflet_id=++g),l._leaflet_id}function f(l,u,x){var N,M,B,ie;return ie=function(){N=!1,M&&(B.apply(x,M),M=!1)},B=function(){N?M=arguments:(l.apply(x,arguments),setTimeout(ie,u),N=!0)},B}function v(l,u,x){var N=u[1],M=u[0],B=N-M;return l===N&&x?l:((l-M)%B+B)%B+M}function w(){return!1}function S(l,u){if(u===!1)return l;var x=Math.pow(10,u===void 0?6:u);return Math.round(l*x)/x}function T(l){return l.trim?l.trim():l.replace(/^\s+|\s+$/g,"")}function C(l){return T(l).split(/\s+/)}function _(l,u){Object.prototype.hasOwnProperty.call(l,"options")||(l.options=l.options?d(l.options):{});for(var x in u)l.options[x]=u[x];return l.options}function k(l,u,x){var N=[];for(var M in l)N.push(encodeURIComponent(x?M.toUpperCase():M)+"="+encodeURIComponent(l[M]));return(!u||u.indexOf("?")===-1?"?":"&")+N.join("&")}var R=/\{ *([\w_ -]+) *\}/g;function O(l,u){return l.replace(R,function(x,N){var M=u[N];if(M===void 0)throw new Error("No value provided for variable "+x);return typeof M=="function"&&(M=M(u)),M})}var P=Array.isArray||function(l){return Object.prototype.toString.call(l)==="[object Array]"};function U(l,u){for(var x=0;x<l.length;x++)if(l[x]===u)return x;return-1}var A="data:image/gif;base64,R0lGODlhAQABAAD/ACwAAAAAAQABAAACADs=";function $(l){return window["webkit"+l]||window["moz"+l]||window["ms"+l]}var E=0;function I(l){var u=+new Date,x=Math.max(0,16-(u-E));return E=u+x,window.setTimeout(l,x)}var Z=window.requestAnimationFrame||$("RequestAnimationFrame")||I,F=window.cancelAnimationFrame||$("CancelAnimationFrame")||$("CancelRequestAnimationFrame")||function(l){window.clearTimeout(l)};function Y(l,u,x){if(x&&Z===I)l.call(u);else return Z.call(window,h(l,u))}function G(l){l&&F.call(window,l)}var V={__proto__:null,extend:o,create:d,bind:h,get lastId(){return g},stamp:p,throttle:f,wrapNum:v,falseFn:w,formatNum:S,trim:T,splitWords:C,setOptions:_,getParamString:k,template:O,isArray:P,indexOf:U,emptyImageUrl:A,requestFn:Z,cancelFn:F,requestAnimFrame:Y,cancelAnimFrame:G};function H(){}H.extend=function(l){var u=function(){_(this),this.initialize&&this.initialize.apply(this,arguments),this.callInitHooks()},x=u.__super__=this.prototype,N=d(x);N.constructor=u,u.prototype=N;for(var M in this)Object.prototype.hasOwnProperty.call(this,M)&&M!=="prototype"&&M!=="__super__"&&(u[M]=this[M]);return l.statics&&o(u,l.statics),l.includes&&(Q(l.includes),o.apply(null,[N].concat(l.includes))),o(N,l),delete N.statics,delete N.includes,N.options&&(N.options=x.options?d(x.options):{},o(N.options,l.options)),N._initHooks=[],N.callInitHooks=function(){if(!this._initHooksCalled){x.callInitHooks&&x.callInitHooks.call(this),this._initHooksCalled=!0;for(var B=0,ie=N._initHooks.length;B<ie;B++)N._initHooks[B].call(this)}},u},H.include=function(l){var u=this.prototype.options;return o(this.prototype,l),l.options&&(this.prototype.options=u,this.mergeOptions(l.options)),this},H.mergeOptions=function(l){return o(this.prototype.options,l),this},H.addInitHook=function(l){var u=Array.prototype.slice.call(arguments,1),x=typeof l=="function"?l:function(){this[l].apply(this,u)};return this.prototype._initHooks=this.prototype._initHooks||[],this.prototype._initHooks.push(x),this};function Q(l){if(!(typeof L>"u"||!L||!L.Mixin)){l=P(l)?l:[l];for(var u=0;u<l.length;u++)l[u]===L.Mixin.Events&&console.warn("Deprecated include of L.Mixin.Events: this property will be removed in future releases, please inherit from L.Evented instead.",new Error().stack)}}var K={on:function(l,u,x){if(typeof l=="object")for(var N in l)this._on(N,l[N],u);else{l=C(l);for(var M=0,B=l.length;M<B;M++)this._on(l[M],u,x)}return this},off:function(l,u,x){if(!arguments.length)delete this._events;else if(typeof l=="object")for(var N in l)this._off(N,l[N],u);else{l=C(l);for(var M=arguments.length===1,B=0,ie=l.length;B<ie;B++)M?this._off(l[B]):this._off(l[B],u,x)}return this},_on:function(l,u,x,N){if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}if(this._listens(l,u,x)===!1){x===this&&(x=void 0);var M={fn:u,ctx:x};N&&(M.once=!0),this._events=this._events||{},this._events[l]=this._events[l]||[],this._events[l].push(M)}},_off:function(l,u,x){var N,M,B;if(this._events&&(N=this._events[l],!!N)){if(arguments.length===1){if(this._firingCount)for(M=0,B=N.length;M<B;M++)N[M].fn=w;delete this._events[l];return}if(typeof u!="function"){console.warn("wrong listener type: "+typeof u);return}var ie=this._listens(l,u,x);if(ie!==!1){var pe=N[ie];this._firingCount&&(pe.fn=w,this._events[l]=N=N.slice()),N.splice(ie,1)}}},fire:function(l,u,x){if(!this.listens(l,x))return this;var N=o({},u,{type:l,target:this,sourceTarget:u&&u.sourceTarget||this});if(this._events){var M=this._events[l];if(M){this._firingCount=this._firingCount+1||1;for(var B=0,ie=M.length;B<ie;B++){var pe=M[B],je=pe.fn;pe.once&&this.off(l,je,pe.ctx),je.call(pe.ctx||this,N)}this._firingCount--}}return x&&this._propagateEvent(N),this},listens:function(l,u,x,N){typeof l!="string"&&console.warn('"string" type argument expected');var M=u;typeof u!="function"&&(N=!!u,M=void 0,x=void 0);var B=this._events&&this._events[l];if(B&&B.length&&this._listens(l,M,x)!==!1)return!0;if(N){for(var ie in this._eventParents)if(this._eventParents[ie].listens(l,u,x,N))return!0}return!1},_listens:function(l,u,x){if(!this._events)return!1;var N=this._events[l]||[];if(!u)return!!N.length;x===this&&(x=void 0);for(var M=0,B=N.length;M<B;M++)if(N[M].fn===u&&N[M].ctx===x)return M;return!1},once:function(l,u,x){if(typeof l=="object")for(var N in l)this._on(N,l[N],u,!0);else{l=C(l);for(var M=0,B=l.length;M<B;M++)this._on(l[M],u,x,!0)}return this},addEventParent:function(l){return this._eventParents=this._eventParents||{},this._eventParents[p(l)]=l,this},removeEventParent:function(l){return this._eventParents&&delete this._eventParents[p(l)],this},_propagateEvent:function(l){for(var u in this._eventParents)this._eventParents[u].fire(l.type,o({layer:l.target,propagatedFrom:l.target},l),!0)}};K.addEventListener=K.on,K.removeEventListener=K.clearAllEventListeners=K.off,K.addOneTimeEventListener=K.once,K.fireEvent=K.fire,K.hasEventListeners=K.listens;var oe=H.extend(K);function W(l,u,x){this.x=x?Math.round(l):l,this.y=x?Math.round(u):u}var X=Math.trunc||function(l){return l>0?Math.floor(l):Math.ceil(l)};W.prototype={clone:function(){return new W(this.x,this.y)},add:function(l){return this.clone()._add(z(l))},_add:function(l){return this.x+=l.x,this.y+=l.y,this},subtract:function(l){return this.clone()._subtract(z(l))},_subtract:function(l){return this.x-=l.x,this.y-=l.y,this},divideBy:function(l){return this.clone()._divideBy(l)},_divideBy:function(l){return this.x/=l,this.y/=l,this},multiplyBy:function(l){return this.clone()._multiplyBy(l)},_multiplyBy:function(l){return this.x*=l,this.y*=l,this},scaleBy:function(l){return new W(this.x*l.x,this.y*l.y)},unscaleBy:function(l){return new W(this.x/l.x,this.y/l.y)},round:function(){return this.clone()._round()},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this},floor:function(){return this.clone()._floor()},_floor:function(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this},ceil:function(){return this.clone()._ceil()},_ceil:function(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this},trunc:function(){return this.clone()._trunc()},_trunc:function(){return this.x=X(this.x),this.y=X(this.y),this},distanceTo:function(l){l=z(l);var u=l.x-this.x,x=l.y-this.y;return Math.sqrt(u*u+x*x)},equals:function(l){return l=z(l),l.x===this.x&&l.y===this.y},contains:function(l){return l=z(l),Math.abs(l.x)<=Math.abs(this.x)&&Math.abs(l.y)<=Math.abs(this.y)},toString:function(){return"Point("+S(this.x)+", "+S(this.y)+")"}};function z(l,u,x){return l instanceof W?l:P(l)?new W(l[0],l[1]):l==null?l:typeof l=="object"&&"x"in l&&"y"in l?new W(l.x,l.y):new W(l,u,x)}function J(l,u){if(l)for(var x=u?[l,u]:l,N=0,M=x.length;N<M;N++)this.extend(x[N])}J.prototype={extend:function(l){var u,x;if(!l)return this;if(l instanceof W||typeof l[0]=="number"||"x"in l)u=x=z(l);else if(l=se(l),u=l.min,x=l.max,!u||!x)return this;return!this.min&&!this.max?(this.min=u.clone(),this.max=x.clone()):(this.min.x=Math.min(u.x,this.min.x),this.max.x=Math.max(x.x,this.max.x),this.min.y=Math.min(u.y,this.min.y),this.max.y=Math.max(x.y,this.max.y)),this},getCenter:function(l){return z((this.min.x+this.max.x)/2,(this.min.y+this.max.y)/2,l)},getBottomLeft:function(){return z(this.min.x,this.max.y)},getTopRight:function(){return z(this.max.x,this.min.y)},getTopLeft:function(){return this.min},getBottomRight:function(){return this.max},getSize:function(){return this.max.subtract(this.min)},contains:function(l){var u,x;return typeof l[0]=="number"||l instanceof W?l=z(l):l=se(l),l instanceof J?(u=l.min,x=l.max):u=x=l,u.x>=this.min.x&&x.x<=this.max.x&&u.y>=this.min.y&&x.y<=this.max.y},intersects:function(l){l=se(l);var u=this.min,x=this.max,N=l.min,M=l.max,B=M.x>=u.x&&N.x<=x.x,ie=M.y>=u.y&&N.y<=x.y;return B&&ie},overlaps:function(l){l=se(l);var u=this.min,x=this.max,N=l.min,M=l.max,B=M.x>u.x&&N.x<x.x,ie=M.y>u.y&&N.y<x.y;return B&&ie},isValid:function(){return!!(this.min&&this.max)},pad:function(l){var u=this.min,x=this.max,N=Math.abs(u.x-x.x)*l,M=Math.abs(u.y-x.y)*l;return se(z(u.x-N,u.y-M),z(x.x+N,x.y+M))},equals:function(l){return l?(l=se(l),this.min.equals(l.getTopLeft())&&this.max.equals(l.getBottomRight())):!1}};function se(l,u){return!l||l instanceof J?l:new J(l,u)}function ae(l,u){if(l)for(var x=u?[l,u]:l,N=0,M=x.length;N<M;N++)this.extend(x[N])}ae.prototype={extend:function(l){var u=this._southWest,x=this._northEast,N,M;if(l instanceof re)N=l,M=l;else if(l instanceof ae){if(N=l._southWest,M=l._northEast,!N||!M)return this}else return l?this.extend(me(l)||ee(l)):this;return!u&&!x?(this._southWest=new re(N.lat,N.lng),this._northEast=new re(M.lat,M.lng)):(u.lat=Math.min(N.lat,u.lat),u.lng=Math.min(N.lng,u.lng),x.lat=Math.max(M.lat,x.lat),x.lng=Math.max(M.lng,x.lng)),this},pad:function(l){var u=this._southWest,x=this._northEast,N=Math.abs(u.lat-x.lat)*l,M=Math.abs(u.lng-x.lng)*l;return new ae(new re(u.lat-N,u.lng-M),new re(x.lat+N,x.lng+M))},getCenter:function(){return new re((this._southWest.lat+this._northEast.lat)/2,(this._southWest.lng+this._northEast.lng)/2)},getSouthWest:function(){return this._southWest},getNorthEast:function(){return this._northEast},getNorthWest:function(){return new re(this.getNorth(),this.getWest())},getSouthEast:function(){return new re(this.getSouth(),this.getEast())},getWest:function(){return this._southWest.lng},getSouth:function(){return this._southWest.lat},getEast:function(){return this._northEast.lng},getNorth:function(){return this._northEast.lat},contains:function(l){typeof l[0]=="number"||l instanceof re||"lat"in l?l=me(l):l=ee(l);var u=this._southWest,x=this._northEast,N,M;return l instanceof ae?(N=l.getSouthWest(),M=l.getNorthEast()):N=M=l,N.lat>=u.lat&&M.lat<=x.lat&&N.lng>=u.lng&&M.lng<=x.lng},intersects:function(l){l=ee(l);var u=this._southWest,x=this._northEast,N=l.getSouthWest(),M=l.getNorthEast(),B=M.lat>=u.lat&&N.lat<=x.lat,ie=M.lng>=u.lng&&N.lng<=x.lng;return B&&ie},overlaps:function(l){l=ee(l);var u=this._southWest,x=this._northEast,N=l.getSouthWest(),M=l.getNorthEast(),B=M.lat>u.lat&&N.lat<x.lat,ie=M.lng>u.lng&&N.lng<x.lng;return B&&ie},toBBoxString:function(){return[this.getWest(),this.getSouth(),this.getEast(),this.getNorth()].join(",")},equals:function(l,u){return l?(l=ee(l),this._southWest.equals(l.getSouthWest(),u)&&this._northEast.equals(l.getNorthEast(),u)):!1},isValid:function(){return!!(this._southWest&&this._northEast)}};function ee(l,u){return l instanceof ae?l:new ae(l,u)}function re(l,u,x){if(isNaN(l)||isNaN(u))throw new Error("Invalid LatLng object: ("+l+", "+u+")");this.lat=+l,this.lng=+u,x!==void 0&&(this.alt=+x)}re.prototype={equals:function(l,u){if(!l)return!1;l=me(l);var x=Math.max(Math.abs(this.lat-l.lat),Math.abs(this.lng-l.lng));return x<=(u===void 0?1e-9:u)},toString:function(l){return"LatLng("+S(this.lat,l)+", "+S(this.lng,l)+")"},distanceTo:function(l){return Ce.distance(this,me(l))},wrap:function(){return Ce.wrapLatLng(this)},toBounds:function(l){var u=180*l/40075017,x=u/Math.cos(Math.PI/180*this.lat);return ee([this.lat-u,this.lng-x],[this.lat+u,this.lng+x])},clone:function(){return new re(this.lat,this.lng,this.alt)}};function me(l,u,x){return l instanceof re?l:P(l)&&typeof l[0]!="object"?l.length===3?new re(l[0],l[1],l[2]):l.length===2?new re(l[0],l[1]):null:l==null?l:typeof l=="object"&&"lat"in l?new re(l.lat,"lng"in l?l.lng:l.lon,l.alt):u===void 0?null:new re(l,u,x)}var ye={latLngToPoint:function(l,u){var x=this.projection.project(l),N=this.scale(u);return this.transformation._transform(x,N)},pointToLatLng:function(l,u){var x=this.scale(u),N=this.transformation.untransform(l,x);return this.projection.unproject(N)},project:function(l){return this.projection.project(l)},unproject:function(l){return this.projection.unproject(l)},scale:function(l){return 256*Math.pow(2,l)},zoom:function(l){return Math.log(l/256)/Math.LN2},getProjectedBounds:function(l){if(this.infinite)return null;var u=this.projection.bounds,x=this.scale(l),N=this.transformation.transform(u.min,x),M=this.transformation.transform(u.max,x);return new J(N,M)},infinite:!1,wrapLatLng:function(l){var u=this.wrapLng?v(l.lng,this.wrapLng,!0):l.lng,x=this.wrapLat?v(l.lat,this.wrapLat,!0):l.lat,N=l.alt;return new re(x,u,N)},wrapLatLngBounds:function(l){var u=l.getCenter(),x=this.wrapLatLng(u),N=u.lat-x.lat,M=u.lng-x.lng;if(N===0&&M===0)return l;var B=l.getSouthWest(),ie=l.getNorthEast(),pe=new re(B.lat-N,B.lng-M),je=new re(ie.lat-N,ie.lng-M);return new ae(pe,je)}},Ce=o({},ye,{wrapLng:[-180,180],R:6371e3,distance:function(l,u){var x=Math.PI/180,N=l.lat*x,M=u.lat*x,B=Math.sin((u.lat-l.lat)*x/2),ie=Math.sin((u.lng-l.lng)*x/2),pe=B*B+Math.cos(N)*Math.cos(M)*ie*ie,je=2*Math.atan2(Math.sqrt(pe),Math.sqrt(1-pe));return this.R*je}}),de=6378137,te={R:de,MAX_LATITUDE:85.0511287798,project:function(l){var u=Math.PI/180,x=this.MAX_LATITUDE,N=Math.max(Math.min(x,l.lat),-x),M=Math.sin(N*u);return new W(this.R*l.lng*u,this.R*Math.log((1+M)/(1-M))/2)},unproject:function(l){var u=180/Math.PI;return new re((2*Math.atan(Math.exp(l.y/this.R))-Math.PI/2)*u,l.x*u/this.R)},bounds:function(){var l=de*Math.PI;return new J([-l,-l],[l,l])}()};function _e(l,u,x,N){if(P(l)){this._a=l[0],this._b=l[1],this._c=l[2],this._d=l[3];return}this._a=l,this._b=u,this._c=x,this._d=N}_e.prototype={transform:function(l,u){return this._transform(l.clone(),u)},_transform:function(l,u){return u=u||1,l.x=u*(this._a*l.x+this._b),l.y=u*(this._c*l.y+this._d),l},untransform:function(l,u){return u=u||1,new W((l.x/u-this._b)/this._a,(l.y/u-this._d)/this._c)}};function Ie(l,u,x,N){return new _e(l,u,x,N)}var at=o({},Ce,{code:"EPSG:3857",projection:te,transformation:function(){var l=.5/(Math.PI*te.R);return Ie(l,.5,-l,.5)}()}),Je=o({},at,{code:"EPSG:900913"});function it(l){return document.createElementNS("http://www.w3.org/2000/svg",l)}function Te(l,u){var x="",N,M,B,ie,pe,je;for(N=0,B=l.length;N<B;N++){for(pe=l[N],M=0,ie=pe.length;M<ie;M++)je=pe[M],x+=(M?"L":"M")+je.x+" "+je.y;x+=u?Ve.svg?"z":"x":""}return x||"M0 0"}var Fe=document.documentElement.style,wt="ActiveXObject"in window,Nt=wt&&!document.addEventListener,ut="msLaunchUri"in navigator&&!("documentMode"in document),Ee=Hn("webkit"),Pe=Hn("android"),qe=Hn("android 2")||Hn("android 3"),De=parseInt(/WebKit\/([0-9]+)|$/.exec(navigator.userAgent)[1],10),He=Pe&&Hn("Google")&&De<537&&!("AudioNode"in window),ct=!!window.opera,ce=!ut&&Hn("chrome"),Oe=Hn("gecko")&&!Ee&&!ct&&!wt,Le=!ce&&Hn("safari"),Ct=Hn("phantom"),rn="OTransition"in Fe,Fn=navigator.platform.indexOf("Win")===0,Un=wt&&"transition"in Fe,Nn="WebKitCSSMatrix"in window&&"m11"in new window.WebKitCSSMatrix&&!qe,ln="MozPerspective"in Fe,la=!window.L_DISABLE_3D&&(Un||Nn||ln)&&!rn&&!Ct,Mn=typeof orientation<"u"||Hn("mobile"),he=Mn&&Ee,tt=Mn&&Nn,ne=!window.PointerEvent&&window.MSPointerEvent,Me=!!(window.PointerEvent||ne),$e="ontouchstart"in window||!!window.TouchEvent,Qe=!window.L_NO_TOUCH&&($e||Me),Yt=Mn&&ct,At=Mn&&Oe,Rn=(window.devicePixelRatio||window.screen.deviceXDPI/window.screen.logicalXDPI)>1,_n=function(){var l=!1;try{var u=Object.defineProperty({},"passive",{get:function(){l=!0}});window.addEventListener("testPassiveEventSupport",w,u),window.removeEventListener("testPassiveEventSupport",w,u)}catch{}return l}(),oa=function(){return!!document.createElement("canvas").getContext}(),Ma=!!(document.createElementNS&&it("svg").createSVGRect),Pt=!!Ma&&function(){var l=document.createElement("div");return l.innerHTML="<svg/>",(l.firstChild&&l.firstChild.namespaceURI)==="http://www.w3.org/2000/svg"}(),Gt=!Ma&&function(){try{var l=document.createElement("div");l.innerHTML='<v:shape adj="1"/>';var u=l.firstChild;return u.style.behavior="url(#default#VML)",u&&typeof u.adj=="object"}catch{return!1}}(),Qt=navigator.platform.indexOf("Mac")===0,Jn=navigator.platform.indexOf("Linux")===0;function Hn(l){return navigator.userAgent.toLowerCase().indexOf(l)>=0}var Ve={ie:wt,ielt9:Nt,edge:ut,webkit:Ee,android:Pe,android23:qe,androidStock:He,opera:ct,chrome:ce,gecko:Oe,safari:Le,phantom:Ct,opera12:rn,win:Fn,ie3d:Un,webkit3d:Nn,gecko3d:ln,any3d:la,mobile:Mn,mobileWebkit:he,mobileWebkit3d:tt,msPointer:ne,pointer:Me,touch:Qe,touchNative:$e,mobileOpera:Yt,mobileGecko:At,retina:Rn,passiveEvents:_n,canvas:oa,svg:Ma,vml:Gt,inlineSvg:Pt,mac:Qt,linux:Jn},Ha=Ve.msPointer?"MSPointerDown":"pointerdown",Ts=Ve.msPointer?"MSPointerMove":"pointermove",os=Ve.msPointer?"MSPointerUp":"pointerup",Xl=Ve.msPointer?"MSPointerCancel":"pointercancel",Vs={touchstart:Ha,touchmove:Ts,touchend:os,touchcancel:Xl},yr={touchstart:Iu,touchmove:rl,touchend:rl,touchcancel:rl},cs={},br=!1;function qn(l,u,x){return u==="touchstart"&&Of(),yr[u]?(x=yr[u].bind(this,x),l.addEventListener(Vs[u],x,!1),x):(console.warn("wrong event specified:",u),w)}function Lu(l,u,x){if(!Vs[u]){console.warn("wrong event specified:",u);return}l.removeEventListener(Vs[u],x,!1)}function zu(l){cs[l.pointerId]=l}function vr(l){cs[l.pointerId]&&(cs[l.pointerId]=l)}function jr(l){delete cs[l.pointerId]}function Of(){br||(document.addEventListener(Ha,zu,!0),document.addEventListener(Ts,vr,!0),document.addEventListener(os,jr,!0),document.addEventListener(Xl,jr,!0),br=!0)}function rl(l,u){if(u.pointerType!==(u.MSPOINTER_TYPE_MOUSE||"mouse")){u.touches=[];for(var x in cs)u.touches.push(cs[x]);u.changedTouches=[u],l(u)}}function Iu(l,u){u.MSPOINTER_TYPE_TOUCH&&u.pointerType===u.MSPOINTER_TYPE_TOUCH&&Sn(u),rl(l,u)}function Pf(l){var u={},x,N;for(N in l)x=l[N],u[N]=x&&x.bind?x.bind(l):x;return l=u,u.type="dblclick",u.detail=2,u.isTrusted=!1,u._simulated=!0,u}var Jl=200;function eo(l,u){l.addEventListener("dblclick",u);var x=0,N;function M(B){if(B.detail!==1){N=B.detail;return}if(!(B.pointerType==="mouse"||B.sourceCapabilities&&!B.sourceCapabilities.firesTouchEvents)){var ie=Oc(B);if(!(ie.some(function(je){return je instanceof HTMLLabelElement&&je.attributes.for})&&!ie.some(function(je){return je instanceof HTMLInputElement||je instanceof HTMLSelectElement}))){var pe=Date.now();pe-x<=Jl?(N++,N===2&&u(Pf(B))):N=1,x=pe}}}return l.addEventListener("click",M),{dblclick:u,simDblclick:M}}function Es(l,u){l.removeEventListener("dblclick",u.dblclick),l.removeEventListener("click",u.simDblclick)}var il=ri(["transform","webkitTransform","OTransform","MozTransform","msTransform"]),ni=ri(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),wr=ni==="webkitTransition"||ni==="OTransition"?ni+"End":"transitionend";function to(l){return typeof l=="string"?document.getElementById(l):l}function Nr(l,u){var x=l.style[u]||l.currentStyle&&l.currentStyle[u];if((!x||x==="auto")&&document.defaultView){var N=document.defaultView.getComputedStyle(l,null);x=N?N[u]:null}return x==="auto"?null:x}function kt(l,u,x){var N=document.createElement(l);return N.className=u||"",x&&x.appendChild(N),N}function tn(l){var u=l.parentNode;u&&u.removeChild(l)}function ca(l){for(;l.firstChild;)l.removeChild(l.firstChild)}function _r(l){var u=l.parentNode;u&&u.lastChild!==l&&u.appendChild(l)}function ai(l){var u=l.parentNode;u&&u.firstChild!==l&&u.insertBefore(l,u.firstChild)}function si(l,u){if(l.classList!==void 0)return l.classList.contains(u);var x=da(l);return x.length>0&&new RegExp("(^|\\s)"+u+"(\\s|$)").test(x)}function ht(l,u){if(l.classList!==void 0)for(var x=C(u),N=0,M=x.length;N<M;N++)l.classList.add(x[N]);else if(!si(l,u)){var B=da(l);Ac(l,(B?B+" ":"")+u)}}function nn(l,u){l.classList!==void 0?l.classList.remove(u):Ac(l,T((" "+da(l)+" ").replace(" "+u+" "," ")))}function Ac(l,u){l.className.baseVal===void 0?l.className=u:l.className.baseVal=u}function da(l){return l.correspondingElement&&(l=l.correspondingElement),l.className.baseVal===void 0?l.className:l.className.baseVal}function xa(l,u){"opacity"in l.style?l.style.opacity=u:"filter"in l.style&&Bu(l,u)}function Bu(l,u){var x=!1,N="DXImageTransform.Microsoft.Alpha";try{x=l.filters.item(N)}catch{if(u===1)return}u=Math.round(u*100),x?(x.Enabled=u!==100,x.Opacity=u):l.style.filter+=" progid:"+N+"(opacity="+u+")"}function ri(l){for(var u=document.documentElement.style,x=0;x<l.length;x++)if(l[x]in u)return l[x];return!1}function Ra(l,u,x){var N=u||new W(0,0);l.style[il]=(Ve.ie3d?"translate("+N.x+"px,"+N.y+"px)":"translate3d("+N.x+"px,"+N.y+"px,0)")+(x?" scale("+x+")":"")}function pn(l,u){l._leaflet_pos=u,Ve.any3d?Ra(l,u):(l.style.left=u.x+"px",l.style.top=u.y+"px")}function Zs(l){return l._leaflet_pos||new W(0,0)}var ds,ll,no;if("onselectstart"in document)ds=function(){mt(window,"selectstart",Sn)},ll=function(){Dt(window,"selectstart",Sn)};else{var ii=ri(["userSelect","WebkitUserSelect","OUserSelect","MozUserSelect","msUserSelect"]);ds=function(){if(ii){var l=document.documentElement.style;no=l[ii],l[ii]="none"}},ll=function(){ii&&(document.documentElement.style[ii]=no,no=void 0)}}function ol(){mt(window,"dragstart",Sn)}function Dc(){Dt(window,"dragstart",Sn)}var ao,li;function cl(l){for(;l.tabIndex===-1;)l=l.parentNode;l.style&&(oi(),ao=l,li=l.style.outlineStyle,l.style.outlineStyle="none",mt(window,"keydown",oi))}function oi(){ao&&(ao.style.outlineStyle=li,ao=void 0,li=void 0,Dt(window,"keydown",oi))}function Sr(l){do l=l.parentNode;while((!l.offsetWidth||!l.offsetHeight)&&l!==document.body);return l}function Ws(l){var u=l.getBoundingClientRect();return{x:u.width/l.offsetWidth||1,y:u.height/l.offsetHeight||1,boundingClientRect:u}}var $u={__proto__:null,TRANSFORM:il,TRANSITION:ni,TRANSITION_END:wr,get:to,getStyle:Nr,create:kt,remove:tn,empty:ca,toFront:_r,toBack:ai,hasClass:si,addClass:ht,removeClass:nn,setClass:Ac,getClass:da,setOpacity:xa,testProp:ri,setTransform:Ra,setPosition:pn,getPosition:Zs,get disableTextSelection(){return ds},get enableTextSelection(){return ll},disableImageDrag:ol,enableImageDrag:Dc,preventOutline:cl,restoreOutline:oi,getSizedParentNode:Sr,getScale:Ws};function mt(l,u,x,N){if(u&&typeof u=="object")for(var M in u)Cr(l,M,u[M],x);else{u=C(u);for(var B=0,ie=u.length;B<ie;B++)Cr(l,u[B],x,N)}return this}var qa="_leaflet_events";function Dt(l,u,x,N){if(arguments.length===1)us(l),delete l[qa];else if(u&&typeof u=="object")for(var M in u)ms(l,M,u[M],x);else if(u=C(u),arguments.length===2)us(l,function(pe){return U(u,pe)!==-1});else for(var B=0,ie=u.length;B<ie;B++)ms(l,u[B],x,N);return this}function us(l,u){for(var x in l[qa]){var N=x.split(/\d/)[0];(!u||u(N))&&ms(l,N,null,null,x)}}var dl={mouseenter:"mouseover",mouseleave:"mouseout",wheel:!("onwheel"in window)&&"mousewheel"};function Cr(l,u,x,N){var M=u+p(x)+(N?"_"+p(N):"");if(l[qa]&&l[qa][M])return this;var B=function(pe){return x.call(N||l,pe||window.event)},ie=B;!Ve.touchNative&&Ve.pointer&&u.indexOf("touch")===0?B=qn(l,u,B):Ve.touch&&u==="dblclick"?B=eo(l,B):"addEventListener"in l?u==="touchstart"||u==="touchmove"||u==="wheel"||u==="mousewheel"?l.addEventListener(dl[u]||u,B,Ve.passiveEvents?{passive:!1}:!1):u==="mouseenter"||u==="mouseleave"?(B=function(pe){pe=pe||window.event,Tr(l,pe)&&ie(pe)},l.addEventListener(dl[u],B,!1)):l.addEventListener(u,ie,!1):l.attachEvent("on"+u,B),l[qa]=l[qa]||{},l[qa][M]=B}function ms(l,u,x,N,M){M=M||u+p(x)+(N?"_"+p(N):"");var B=l[qa]&&l[qa][M];if(!B)return this;!Ve.touchNative&&Ve.pointer&&u.indexOf("touch")===0?Lu(l,u,B):Ve.touch&&u==="dblclick"?Es(l,B):"removeEventListener"in l?l.removeEventListener(dl[u]||u,B,!1):l.detachEvent("on"+u,B),l[qa][M]=null}function Ms(l){return l.stopPropagation?l.stopPropagation():l.originalEvent?l.originalEvent._stopped=!0:l.cancelBubble=!0,this}function ci(l){return Cr(l,"wheel",Ms),this}function di(l){return mt(l,"mousedown touchstart dblclick contextmenu",Ms),l._leaflet_disable_click=!0,this}function Sn(l){return l.preventDefault?l.preventDefault():l.returnValue=!1,this}function hs(l){return Sn(l),Ms(l),this}function Oc(l){if(l.composedPath)return l.composedPath();for(var u=[],x=l.target;x;)u.push(x),x=x.parentNode;return u}function ua(l,u){if(!u)return new W(l.clientX,l.clientY);var x=Ws(u),N=x.boundingClientRect;return new W((l.clientX-N.left)/x.x-u.clientLeft,(l.clientY-N.top)/x.y-u.clientTop)}var kr=Ve.linux&&Ve.chrome?window.devicePixelRatio:Ve.mac?window.devicePixelRatio*3:window.devicePixelRatio>0?2*window.devicePixelRatio:1;function ul(l){return Ve.edge?l.wheelDeltaY/2:l.deltaY&&l.deltaMode===0?-l.deltaY/kr:l.deltaY&&l.deltaMode===1?-l.deltaY*20:l.deltaY&&l.deltaMode===2?-l.deltaY*60:l.deltaX||l.deltaZ?0:l.wheelDelta?(l.wheelDeltaY||l.wheelDelta)/2:l.detail&&Math.abs(l.detail)<32765?-l.detail*20:l.detail?l.detail/-32765*60:0}function Tr(l,u){var x=u.relatedTarget;if(!x)return!0;try{for(;x&&x!==l;)x=x.parentNode}catch{return!1}return x!==l}var Lf={__proto__:null,on:mt,off:Dt,stopPropagation:Ms,disableScrollPropagation:ci,disableClickPropagation:di,preventDefault:Sn,stop:hs,getPropagationPath:Oc,getMousePosition:ua,getWheelDelta:ul,isExternalTarget:Tr,addListener:mt,removeListener:Dt},so=oe.extend({run:function(l,u,x,N){this.stop(),this._el=l,this._inProgress=!0,this._duration=x||.25,this._easeOutPower=1/Math.max(N||.5,.2),this._startPos=Zs(l),this._offset=u.subtract(this._startPos),this._startTime=+new Date,this.fire("start"),this._animate()},stop:function(){this._inProgress&&(this._step(!0),this._complete())},_animate:function(){this._animId=Y(this._animate,this),this._step()},_step:function(l){var u=+new Date-this._startTime,x=this._duration*1e3;u<x?this._runFrame(this._easeOut(u/x),l):(this._runFrame(1),this._complete())},_runFrame:function(l,u){var x=this._startPos.add(this._offset.multiplyBy(l));u&&x._round(),pn(this._el,x),this.fire("step")},_complete:function(){G(this._animId),this._inProgress=!1,this.fire("end")},_easeOut:function(l){return 1-Math.pow(1-l,this._easeOutPower)}}),yt=oe.extend({options:{crs:at,center:void 0,zoom:void 0,minZoom:void 0,maxZoom:void 0,layers:[],maxBounds:void 0,renderer:void 0,zoomAnimation:!0,zoomAnimationThreshold:4,fadeAnimation:!0,markerZoomAnimation:!0,transform3DLimit:8388608,zoomSnap:1,zoomDelta:1,trackResize:!0},initialize:function(l,u){u=_(this,u),this._handlers=[],this._layers={},this._zoomBoundLayers={},this._sizeChanged=!0,this._initContainer(l),this._initLayout(),this._onResize=h(this._onResize,this),this._initEvents(),u.maxBounds&&this.setMaxBounds(u.maxBounds),u.zoom!==void 0&&(this._zoom=this._limitZoom(u.zoom)),u.center&&u.zoom!==void 0&&this.setView(me(u.center),u.zoom,{reset:!0}),this.callInitHooks(),this._zoomAnimated=ni&&Ve.any3d&&!Ve.mobileOpera&&this.options.zoomAnimation,this._zoomAnimated&&(this._createAnimProxy(),mt(this._proxy,wr,this._catchTransitionEnd,this)),this._addLayers(this.options.layers)},setView:function(l,u,x){if(u=u===void 0?this._zoom:this._limitZoom(u),l=this._limitCenter(me(l),u,this.options.maxBounds),x=x||{},this._stop(),this._loaded&&!x.reset&&x!==!0){x.animate!==void 0&&(x.zoom=o({animate:x.animate},x.zoom),x.pan=o({animate:x.animate,duration:x.duration},x.pan));var N=this._zoom!==u?this._tryAnimatedZoom&&this._tryAnimatedZoom(l,u,x.zoom):this._tryAnimatedPan(l,x.pan);if(N)return clearTimeout(this._sizeTimer),this}return this._resetView(l,u,x.pan&&x.pan.noMoveStart),this},setZoom:function(l,u){return this._loaded?this.setView(this.getCenter(),l,{zoom:u}):(this._zoom=l,this)},zoomIn:function(l,u){return l=l||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom+l,u)},zoomOut:function(l,u){return l=l||(Ve.any3d?this.options.zoomDelta:1),this.setZoom(this._zoom-l,u)},setZoomAround:function(l,u,x){var N=this.getZoomScale(u),M=this.getSize().divideBy(2),B=l instanceof W?l:this.latLngToContainerPoint(l),ie=B.subtract(M).multiplyBy(1-1/N),pe=this.containerPointToLatLng(M.add(ie));return this.setView(pe,u,{zoom:x})},_getBoundsCenterZoom:function(l,u){u=u||{},l=l.getBounds?l.getBounds():ee(l);var x=z(u.paddingTopLeft||u.padding||[0,0]),N=z(u.paddingBottomRight||u.padding||[0,0]),M=this.getBoundsZoom(l,!1,x.add(N));if(M=typeof u.maxZoom=="number"?Math.min(u.maxZoom,M):M,M===1/0)return{center:l.getCenter(),zoom:M};var B=N.subtract(x).divideBy(2),ie=this.project(l.getSouthWest(),M),pe=this.project(l.getNorthEast(),M),je=this.unproject(ie.add(pe).divideBy(2).add(B),M);return{center:je,zoom:M}},fitBounds:function(l,u){if(l=ee(l),!l.isValid())throw new Error("Bounds are not valid.");var x=this._getBoundsCenterZoom(l,u);return this.setView(x.center,x.zoom,u)},fitWorld:function(l){return this.fitBounds([[-90,-180],[90,180]],l)},panTo:function(l,u){return this.setView(l,this._zoom,{pan:u})},panBy:function(l,u){if(l=z(l).round(),u=u||{},!l.x&&!l.y)return this.fire("moveend");if(u.animate!==!0&&!this.getSize().contains(l))return this._resetView(this.unproject(this.project(this.getCenter()).add(l)),this.getZoom()),this;if(this._panAnim||(this._panAnim=new so,this._panAnim.on({step:this._onPanTransitionStep,end:this._onPanTransitionEnd},this)),u.noMoveStart||this.fire("movestart"),u.animate!==!1){ht(this._mapPane,"leaflet-pan-anim");var x=this._getMapPanePos().subtract(l).round();this._panAnim.run(this._mapPane,x,u.duration||.25,u.easeLinearity)}else this._rawPanBy(l),this.fire("move").fire("moveend");return this},flyTo:function(l,u,x){if(x=x||{},x.animate===!1||!Ve.any3d)return this.setView(l,u,x);this._stop();var N=this.project(this.getCenter()),M=this.project(l),B=this.getSize(),ie=this._zoom;l=me(l),u=u===void 0?ie:u;var pe=Math.max(B.x,B.y),je=pe*this.getZoomScale(ie,u),Ae=M.distanceTo(N)||1,Ue=1.42,Ye=Ue*Ue;function Ge(cn){var gs=cn?-1:1,Ds=cn?je:pe,Js=je*je-pe*pe+gs*Ye*Ye*Ae*Ae,Os=2*Ds*Ye*Ae,_l=Js/Os,yo=Math.sqrt(_l*_l+1)-_l,Sl=yo<1e-9?-18:Math.log(yo);return Sl}function dt(cn){return(Math.exp(cn)-Math.exp(-cn))/2}function an(cn){return(Math.exp(cn)+Math.exp(-cn))/2}function gn(cn){return dt(cn)/an(cn)}var ta=Ge(0);function Aa(cn){return pe*(an(ta)/an(ta+Ue*cn))}function rm(cn){return pe*(an(ta)*gn(ta+Ue*cn)-dt(ta))/Ye}function im(cn){return 1-Math.pow(1-cn,1.5)}var Nl=Date.now(),wi=(Ge(1)-ta)/Ue,lm=x.duration?1e3*x.duration:1e3*wi*.8;function Ni(){var cn=(Date.now()-Nl)/lm,gs=im(cn)*wi;cn<=1?(this._flyToFrame=Y(Ni,this),this._move(this.unproject(N.add(M.subtract(N).multiplyBy(rm(gs)/Ae)),ie),this.getScaleZoom(pe/Aa(gs),ie),{flyTo:!0})):this._move(l,u)._moveEnd(!0)}return this._moveStart(!0,x.noMoveStart),Ni.call(this),this},flyToBounds:function(l,u){var x=this._getBoundsCenterZoom(l,u);return this.flyTo(x.center,x.zoom,u)},setMaxBounds:function(l){return l=ee(l),this.listens("moveend",this._panInsideMaxBounds)&&this.off("moveend",this._panInsideMaxBounds),l.isValid()?(this.options.maxBounds=l,this._loaded&&this._panInsideMaxBounds(),this.on("moveend",this._panInsideMaxBounds)):(this.options.maxBounds=null,this)},setMinZoom:function(l){var u=this.options.minZoom;return this.options.minZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()<this.options.minZoom)?this.setZoom(l):this},setMaxZoom:function(l){var u=this.options.maxZoom;return this.options.maxZoom=l,this._loaded&&u!==l&&(this.fire("zoomlevelschange"),this.getZoom()>this.options.maxZoom)?this.setZoom(l):this},panInsideBounds:function(l,u){this._enforcingBounds=!0;var x=this.getCenter(),N=this._limitCenter(x,this._zoom,ee(l));return x.equals(N)||this.panTo(N,u),this._enforcingBounds=!1,this},panInside:function(l,u){u=u||{};var x=z(u.paddingTopLeft||u.padding||[0,0]),N=z(u.paddingBottomRight||u.padding||[0,0]),M=this.project(this.getCenter()),B=this.project(l),ie=this.getPixelBounds(),pe=se([ie.min.add(x),ie.max.subtract(N)]),je=pe.getSize();if(!pe.contains(B)){this._enforcingBounds=!0;var Ae=B.subtract(pe.getCenter()),Ue=pe.extend(B).getSize().subtract(je);M.x+=Ae.x<0?-Ue.x:Ue.x,M.y+=Ae.y<0?-Ue.y:Ue.y,this.panTo(this.unproject(M),u),this._enforcingBounds=!1}return this},invalidateSize:function(l){if(!this._loaded)return this;l=o({animate:!1,pan:!0},l===!0?{animate:!0}:l);var u=this.getSize();this._sizeChanged=!0,this._lastCenter=null;var x=this.getSize(),N=u.divideBy(2).round(),M=x.divideBy(2).round(),B=N.subtract(M);return!B.x&&!B.y?this:(l.animate&&l.pan?this.panBy(B):(l.pan&&this._rawPanBy(B),this.fire("move"),l.debounceMoveend?(clearTimeout(this._sizeTimer),this._sizeTimer=setTimeout(h(this.fire,this,"moveend"),200)):this.fire("moveend")),this.fire("resize",{oldSize:u,newSize:x}))},stop:function(){return this.setZoom(this._limitZoom(this._zoom)),this.options.zoomSnap||this.fire("viewreset"),this._stop()},locate:function(l){if(l=this._locateOptions=o({timeout:1e4,watch:!1},l),!("geolocation"in navigator))return this._handleGeolocationError({code:0,message:"Geolocation not supported."}),this;var u=h(this._handleGeolocationResponse,this),x=h(this._handleGeolocationError,this);return l.watch?this._locationWatchId=navigator.geolocation.watchPosition(u,x,l):navigator.geolocation.getCurrentPosition(u,x,l),this},stopLocate:function(){return navigator.geolocation&&navigator.geolocation.clearWatch&&navigator.geolocation.clearWatch(this._locationWatchId),this._locateOptions&&(this._locateOptions.setView=!1),this},_handleGeolocationError:function(l){if(this._container._leaflet_id){var u=l.code,x=l.message||(u===1?"permission denied":u===2?"position unavailable":"timeout");this._locateOptions.setView&&!this._loaded&&this.fitWorld(),this.fire("locationerror",{code:u,message:"Geolocation error: "+x+"."})}},_handleGeolocationResponse:function(l){if(this._container._leaflet_id){var u=l.coords.latitude,x=l.coords.longitude,N=new re(u,x),M=N.toBounds(l.coords.accuracy*2),B=this._locateOptions;if(B.setView){var ie=this.getBoundsZoom(M);this.setView(N,B.maxZoom?Math.min(ie,B.maxZoom):ie)}var pe={latlng:N,bounds:M,timestamp:l.timestamp};for(var je in l.coords)typeof l.coords[je]=="number"&&(pe[je]=l.coords[je]);this.fire("locationfound",pe)}},addHandler:function(l,u){if(!u)return this;var x=this[l]=new u(this);return this._handlers.push(x),this.options[l]&&x.enable(),this},remove:function(){if(this._initEvents(!0),this.options.maxBounds&&this.off("moveend",this._panInsideMaxBounds),this._containerId!==this._container._leaflet_id)throw new Error("Map container is being reused by another instance");try{delete this._container._leaflet_id,delete this._containerId}catch{this._container._leaflet_id=void 0,this._containerId=void 0}this._locationWatchId!==void 0&&this.stopLocate(),this._stop(),tn(this._mapPane),this._clearControlPos&&this._clearControlPos(),this._resizeRequest&&(G(this._resizeRequest),this._resizeRequest=null),this._clearHandlers(),this._loaded&&this.fire("unload");var l;for(l in this._layers)this._layers[l].remove();for(l in this._panes)tn(this._panes[l]);return this._layers=[],this._panes=[],delete this._mapPane,delete this._renderer,this},createPane:function(l,u){var x="leaflet-pane"+(l?" leaflet-"+l.replace("Pane","")+"-pane":""),N=kt("div",x,u||this._mapPane);return l&&(this._panes[l]=N),N},getCenter:function(){return this._checkIfLoaded(),this._lastCenter&&!this._moved()?this._lastCenter.clone():this.layerPointToLatLng(this._getCenterLayerPoint())},getZoom:function(){return this._zoom},getBounds:function(){var l=this.getPixelBounds(),u=this.unproject(l.getBottomLeft()),x=this.unproject(l.getTopRight());return new ae(u,x)},getMinZoom:function(){return this.options.minZoom===void 0?this._layersMinZoom||0:this.options.minZoom},getMaxZoom:function(){return this.options.maxZoom===void 0?this._layersMaxZoom===void 0?1/0:this._layersMaxZoom:this.options.maxZoom},getBoundsZoom:function(l,u,x){l=ee(l),x=z(x||[0,0]);var N=this.getZoom()||0,M=this.getMinZoom(),B=this.getMaxZoom(),ie=l.getNorthWest(),pe=l.getSouthEast(),je=this.getSize().subtract(x),Ae=se(this.project(pe,N),this.project(ie,N)).getSize(),Ue=Ve.any3d?this.options.zoomSnap:1,Ye=je.x/Ae.x,Ge=je.y/Ae.y,dt=u?Math.max(Ye,Ge):Math.min(Ye,Ge);return N=this.getScaleZoom(dt,N),Ue&&(N=Math.round(N/(Ue/100))*(Ue/100),N=u?Math.ceil(N/Ue)*Ue:Math.floor(N/Ue)*Ue),Math.max(M,Math.min(B,N))},getSize:function(){return(!this._size||this._sizeChanged)&&(this._size=new W(this._container.clientWidth||0,this._container.clientHeight||0),this._sizeChanged=!1),this._size.clone()},getPixelBounds:function(l,u){var x=this._getTopLeftPoint(l,u);return new J(x,x.add(this.getSize()))},getPixelOrigin:function(){return this._checkIfLoaded(),this._pixelOrigin},getPixelWorldBounds:function(l){return this.options.crs.getProjectedBounds(l===void 0?this.getZoom():l)},getPane:function(l){return typeof l=="string"?this._panes[l]:l},getPanes:function(){return this._panes},getContainer:function(){return this._container},getZoomScale:function(l,u){var x=this.options.crs;return u=u===void 0?this._zoom:u,x.scale(l)/x.scale(u)},getScaleZoom:function(l,u){var x=this.options.crs;u=u===void 0?this._zoom:u;var N=x.zoom(l*x.scale(u));return isNaN(N)?1/0:N},project:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.latLngToPoint(me(l),u)},unproject:function(l,u){return u=u===void 0?this._zoom:u,this.options.crs.pointToLatLng(z(l),u)},layerPointToLatLng:function(l){var u=z(l).add(this.getPixelOrigin());return this.unproject(u)},latLngToLayerPoint:function(l){var u=this.project(me(l))._round();return u._subtract(this.getPixelOrigin())},wrapLatLng:function(l){return this.options.crs.wrapLatLng(me(l))},wrapLatLngBounds:function(l){return this.options.crs.wrapLatLngBounds(ee(l))},distance:function(l,u){return this.options.crs.distance(me(l),me(u))},containerPointToLayerPoint:function(l){return z(l).subtract(this._getMapPanePos())},layerPointToContainerPoint:function(l){return z(l).add(this._getMapPanePos())},containerPointToLatLng:function(l){var u=this.containerPointToLayerPoint(z(l));return this.layerPointToLatLng(u)},latLngToContainerPoint:function(l){return this.layerPointToContainerPoint(this.latLngToLayerPoint(me(l)))},mouseEventToContainerPoint:function(l){return ua(l,this._container)},mouseEventToLayerPoint:function(l){return this.containerPointToLayerPoint(this.mouseEventToContainerPoint(l))},mouseEventToLatLng:function(l){return this.layerPointToLatLng(this.mouseEventToLayerPoint(l))},_initContainer:function(l){var u=this._container=to(l);if(u){if(u._leaflet_id)throw new Error("Map container is already initialized.")}else throw new Error("Map container not found.");mt(u,"scroll",this._onScroll,this),this._containerId=p(u)},_initLayout:function(){var l=this._container;this._fadeAnimated=this.options.fadeAnimation&&Ve.any3d,ht(l,"leaflet-container"+(Ve.touch?" leaflet-touch":"")+(Ve.retina?" leaflet-retina":"")+(Ve.ielt9?" leaflet-oldie":"")+(Ve.safari?" leaflet-safari":"")+(this._fadeAnimated?" leaflet-fade-anim":""));var u=Nr(l,"position");u!=="absolute"&&u!=="relative"&&u!=="fixed"&&u!=="sticky"&&(l.style.position="relative"),this._initPanes(),this._initControlPos&&this._initControlPos()},_initPanes:function(){var l=this._panes={};this._paneRenderers={},this._mapPane=this.createPane("mapPane",this._container),pn(this._mapPane,new W(0,0)),this.createPane("tilePane"),this.createPane("overlayPane"),this.createPane("shadowPane"),this.createPane("markerPane"),this.createPane("tooltipPane"),this.createPane("popupPane"),this.options.markerZoomAnimation||(ht(l.markerPane,"leaflet-zoom-hide"),ht(l.shadowPane,"leaflet-zoom-hide"))},_resetView:function(l,u,x){pn(this._mapPane,new W(0,0));var N=!this._loaded;this._loaded=!0,u=this._limitZoom(u),this.fire("viewprereset");var M=this._zoom!==u;this._moveStart(M,x)._move(l,u)._moveEnd(M),this.fire("viewreset"),N&&this.fire("load")},_moveStart:function(l,u){return l&&this.fire("zoomstart"),u||this.fire("movestart"),this},_move:function(l,u,x,N){u===void 0&&(u=this._zoom);var M=this._zoom!==u;return this._zoom=u,this._lastCenter=l,this._pixelOrigin=this._getNewPixelOrigin(l),N?x&&x.pinch&&this.fire("zoom",x):((M||x&&x.pinch)&&this.fire("zoom",x),this.fire("move",x)),this},_moveEnd:function(l){return l&&this.fire("zoomend"),this.fire("moveend")},_stop:function(){return G(this._flyToFrame),this._panAnim&&this._panAnim.stop(),this},_rawPanBy:function(l){pn(this._mapPane,this._getMapPanePos().subtract(l))},_getZoomSpan:function(){return this.getMaxZoom()-this.getMinZoom()},_panInsideMaxBounds:function(){this._enforcingBounds||this.panInsideBounds(this.options.maxBounds)},_checkIfLoaded:function(){if(!this._loaded)throw new Error("Set map center and zoom first.")},_initEvents:function(l){this._targets={},this._targets[p(this._container)]=this;var u=l?Dt:mt;u(this._container,"click dblclick mousedown mouseup mouseover mouseout mousemove contextmenu keypress keydown keyup",this._handleDOMEvent,this),this.options.trackResize&&u(window,"resize",this._onResize,this),Ve.any3d&&this.options.transform3DLimit&&(l?this.off:this.on).call(this,"moveend",this._onMoveEnd)},_onResize:function(){G(this._resizeRequest),this._resizeRequest=Y(function(){this.invalidateSize({debounceMoveend:!0})},this)},_onScroll:function(){this._container.scrollTop=0,this._container.scrollLeft=0},_onMoveEnd:function(){var l=this._getMapPanePos();Math.max(Math.abs(l.x),Math.abs(l.y))>=this.options.transform3DLimit&&this._resetView(this.getCenter(),this.getZoom())},_findEventTargets:function(l,u){for(var x=[],N,M=u==="mouseout"||u==="mouseover",B=l.target||l.srcElement,ie=!1;B;){if(N=this._targets[p(B)],N&&(u==="click"||u==="preclick")&&this._draggableMoved(N)){ie=!0;break}if(N&&N.listens(u,!0)&&(M&&!Tr(B,l)||(x.push(N),M))||B===this._container)break;B=B.parentNode}return!x.length&&!ie&&!M&&this.listens(u,!0)&&(x=[this]),x},_isClickDisabled:function(l){for(;l&&l!==this._container;){if(l._leaflet_disable_click)return!0;l=l.parentNode}},_handleDOMEvent:function(l){var u=l.target||l.srcElement;if(!(!this._loaded||u._leaflet_disable_events||l.type==="click"&&this._isClickDisabled(u))){var x=l.type;x==="mousedown"&&cl(u),this._fireDOMEvent(l,x)}},_mouseEvents:["click","dblclick","mouseover","mouseout","contextmenu"],_fireDOMEvent:function(l,u,x){if(l.type==="click"){var N=o({},l);N.type="preclick",this._fireDOMEvent(N,N.type,x)}var M=this._findEventTargets(l,u);if(x){for(var B=[],ie=0;ie<x.length;ie++)x[ie].listens(u,!0)&&B.push(x[ie]);M=B.concat(M)}if(M.length){u==="contextmenu"&&Sn(l);var pe=M[0],je={originalEvent:l};if(l.type!=="keypress"&&l.type!=="keydown"&&l.type!=="keyup"){var Ae=pe.getLatLng&&(!pe._radius||pe._radius<=10);je.containerPoint=Ae?this.latLngToContainerPoint(pe.getLatLng()):this.mouseEventToContainerPoint(l),je.layerPoint=this.containerPointToLayerPoint(je.containerPoint),je.latlng=Ae?pe.getLatLng():this.layerPointToLatLng(je.layerPoint)}for(ie=0;ie<M.length;ie++)if(M[ie].fire(u,je,!0),je.originalEvent._stopped||M[ie].options.bubblingMouseEvents===!1&&U(this._mouseEvents,u)!==-1)return}},_draggableMoved:function(l){return l=l.dragging&&l.dragging.enabled()?l:this,l.dragging&&l.dragging.moved()||this.boxZoom&&this.boxZoom.moved()},_clearHandlers:function(){for(var l=0,u=this._handlers.length;l<u;l++)this._handlers[l].disable()},whenReady:function(l,u){return this._loaded?l.call(u||this,{target:this}):this.on("load",l,u),this},_getMapPanePos:function(){return Zs(this._mapPane)||new W(0,0)},_moved:function(){var l=this._getMapPanePos();return l&&!l.equals([0,0])},_getTopLeftPoint:function(l,u){var x=l&&u!==void 0?this._getNewPixelOrigin(l,u):this.getPixelOrigin();return x.subtract(this._getMapPanePos())},_getNewPixelOrigin:function(l,u){var x=this.getSize()._divideBy(2);return this.project(l,u)._subtract(x)._add(this._getMapPanePos())._round()},_latLngToNewLayerPoint:function(l,u,x){var N=this._getNewPixelOrigin(x,u);return this.project(l,u)._subtract(N)},_latLngBoundsToNewLayerBounds:function(l,u,x){var N=this._getNewPixelOrigin(x,u);return se([this.project(l.getSouthWest(),u)._subtract(N),this.project(l.getNorthWest(),u)._subtract(N),this.project(l.getSouthEast(),u)._subtract(N),this.project(l.getNorthEast(),u)._subtract(N)])},_getCenterLayerPoint:function(){return this.containerPointToLayerPoint(this.getSize()._divideBy(2))},_getCenterOffset:function(l){return this.latLngToLayerPoint(l).subtract(this._getCenterLayerPoint())},_limitCenter:function(l,u,x){if(!x)return l;var N=this.project(l,u),M=this.getSize().divideBy(2),B=new J(N.subtract(M),N.add(M)),ie=this._getBoundsOffset(B,x,u);return Math.abs(ie.x)<=1&&Math.abs(ie.y)<=1?l:this.unproject(N.add(ie),u)},_limitOffset:function(l,u){if(!u)return l;var x=this.getPixelBounds(),N=new J(x.min.add(l),x.max.add(l));return l.add(this._getBoundsOffset(N,u))},_getBoundsOffset:function(l,u,x){var N=se(this.project(u.getNorthEast(),x),this.project(u.getSouthWest(),x)),M=N.min.subtract(l.min),B=N.max.subtract(l.max),ie=this._rebound(M.x,-B.x),pe=this._rebound(M.y,-B.y);return new W(ie,pe)},_rebound:function(l,u){return l+u>0?Math.round(l-u)/2:Math.max(0,Math.ceil(l))-Math.max(0,Math.floor(u))},_limitZoom:function(l){var u=this.getMinZoom(),x=this.getMaxZoom(),N=Ve.any3d?this.options.zoomSnap:1;return N&&(l=Math.round(l/N)*N),Math.max(u,Math.min(x,l))},_onPanTransitionStep:function(){this.fire("move")},_onPanTransitionEnd:function(){nn(this._mapPane,"leaflet-pan-anim"),this.fire("moveend")},_tryAnimatedPan:function(l,u){var x=this._getCenterOffset(l)._trunc();return(u&&u.animate)!==!0&&!this.getSize().contains(x)?!1:(this.panBy(x,u),!0)},_createAnimProxy:function(){var l=this._proxy=kt("div","leaflet-proxy leaflet-zoom-animated");this._panes.mapPane.appendChild(l),this.on("zoomanim",function(u){var x=il,N=this._proxy.style[x];Ra(this._proxy,this.project(u.center,u.zoom),this.getZoomScale(u.zoom,1)),N===this._proxy.style[x]&&this._animatingZoom&&this._onZoomTransitionEnd()},this),this.on("load moveend",this._animMoveEnd,this),this._on("unload",this._destroyAnimProxy,this)},_destroyAnimProxy:function(){tn(this._proxy),this.off("load moveend",this._animMoveEnd,this),delete this._proxy},_animMoveEnd:function(){var l=this.getCenter(),u=this.getZoom();Ra(this._proxy,this.project(l,u),this.getZoomScale(u,1))},_catchTransitionEnd:function(l){this._animatingZoom&&l.propertyName.indexOf("transform")>=0&&this._onZoomTransitionEnd()},_nothingToAnimate:function(){return!this._container.getElementsByClassName("leaflet-zoom-animated").length},_tryAnimatedZoom:function(l,u,x){if(this._animatingZoom)return!0;if(x=x||{},!this._zoomAnimated||x.animate===!1||this._nothingToAnimate()||Math.abs(u-this._zoom)>this.options.zoomAnimationThreshold)return!1;var N=this.getZoomScale(u),M=this._getCenterOffset(l)._divideBy(1-1/N);return x.animate!==!0&&!this.getSize().contains(M)?!1:(Y(function(){this._moveStart(!0,x.noMoveStart||!1)._animateZoom(l,u,!0)},this),!0)},_animateZoom:function(l,u,x,N){this._mapPane&&(x&&(this._animatingZoom=!0,this._animateToCenter=l,this._animateToZoom=u,ht(this._mapPane,"leaflet-zoom-anim")),this.fire("zoomanim",{center:l,zoom:u,noUpdate:N}),this._tempFireZoomEvent||(this._tempFireZoomEvent=this._zoom!==this._animateToZoom),this._move(this._animateToCenter,this._animateToZoom,void 0,!0),setTimeout(h(this._onZoomTransitionEnd,this),250))},_onZoomTransitionEnd:function(){this._animatingZoom&&(this._mapPane&&nn(this._mapPane,"leaflet-zoom-anim"),this._animatingZoom=!1,this._move(this._animateToCenter,this._animateToZoom,void 0,!0),this._tempFireZoomEvent&&this.fire("zoom"),delete this._tempFireZoomEvent,this.fire("move"),this._moveEnd(!0))}});function ml(l,u){return new yt(l,u)}var ya=H.extend({options:{position:"topright"},initialize:function(l){_(this,l)},getPosition:function(){return this.options.position},setPosition:function(l){var u=this._map;return u&&u.removeControl(this),this.options.position=l,u&&u.addControl(this),this},getContainer:function(){return this._container},addTo:function(l){this.remove(),this._map=l;var u=this._container=this.onAdd(l),x=this.getPosition(),N=l._controlCorners[x];return ht(u,"leaflet-control"),x.indexOf("bottom")!==-1?N.insertBefore(u,N.firstChild):N.appendChild(u),this._map.on("unload",this.remove,this),this},remove:function(){return this._map?(tn(this._container),this.onRemove&&this.onRemove(this._map),this._map.off("unload",this.remove,this),this._map=null,this):this},_refocusOnMap:function(l){this._map&&l&&l.screenX>0&&l.screenY>0&&this._map.getContainer().focus()}}),ui=function(l){return new ya(l)};yt.include({addControl:function(l){return l.addTo(this),this},removeControl:function(l){return l.remove(),this},_initControlPos:function(){var l=this._controlCorners={},u="leaflet-",x=this._controlContainer=kt("div",u+"control-container",this._container);function N(M,B){var ie=u+M+" "+u+B;l[M+B]=kt("div",ie,x)}N("top","left"),N("top","right"),N("bottom","left"),N("bottom","right")},_clearControlPos:function(){for(var l in this._controlCorners)tn(this._controlCorners[l]);tn(this._controlContainer),delete this._controlCorners,delete this._controlContainer}});var Fu=ya.extend({options:{collapsed:!0,position:"topright",autoZIndex:!0,hideSingleBase:!1,sortLayers:!1,sortFunction:function(l,u,x,N){return x<N?-1:N<x?1:0}},initialize:function(l,u,x){_(this,x),this._layerControlInputs=[],this._layers=[],this._lastZIndex=0,this._handlingClick=!1,this._preventClick=!1;for(var N in l)this._addLayer(l[N],N);for(N in u)this._addLayer(u[N],N,!0)},onAdd:function(l){this._initLayout(),this._update(),this._map=l,l.on("zoomend",this._checkDisabledLayers,this);for(var u=0;u<this._layers.length;u++)this._layers[u].layer.on("add remove",this._onLayerChange,this);return this._container},addTo:function(l){return ya.prototype.addTo.call(this,l),this._expandIfNotCollapsed()},onRemove:function(){this._map.off("zoomend",this._checkDisabledLayers,this);for(var l=0;l<this._layers.length;l++)this._layers[l].layer.off("add remove",this._onLayerChange,this)},addBaseLayer:function(l,u){return this._addLayer(l,u),this._map?this._update():this},addOverlay:function(l,u){return this._addLayer(l,u,!0),this._map?this._update():this},removeLayer:function(l){l.off("add remove",this._onLayerChange,this);var u=this._getLayer(p(l));return u&&this._layers.splice(this._layers.indexOf(u),1),this._map?this._update():this},expand:function(){ht(this._container,"leaflet-control-layers-expanded"),this._section.style.height=null;var l=this._map.getSize().y-(this._container.offsetTop+50);return l<this._section.clientHeight?(ht(this._section,"leaflet-control-layers-scrollbar"),this._section.style.height=l+"px"):nn(this._section,"leaflet-control-layers-scrollbar"),this._checkDisabledLayers(),this},collapse:function(){return nn(this._container,"leaflet-control-layers-expanded"),this},_initLayout:function(){var l="leaflet-control-layers",u=this._container=kt("div",l),x=this.options.collapsed;u.setAttribute("aria-haspopup",!0),di(u),ci(u);var N=this._section=kt("section",l+"-list");x&&(this._map.on("click",this.collapse,this),mt(u,{mouseenter:this._expandSafely,mouseleave:this.collapse},this));var M=this._layersLink=kt("a",l+"-toggle",u);M.href="#",M.title="Layers",M.setAttribute("role","button"),mt(M,{keydown:function(B){B.keyCode===13&&this._expandSafely()},click:function(B){Sn(B),this._expandSafely()}},this),x||this.expand(),this._baseLayersList=kt("div",l+"-base",N),this._separator=kt("div",l+"-separator",N),this._overlaysList=kt("div",l+"-overlays",N),u.appendChild(N)},_getLayer:function(l){for(var u=0;u<this._layers.length;u++)if(this._layers[u]&&p(this._layers[u].layer)===l)return this._layers[u]},_addLayer:function(l,u,x){this._map&&l.on("add remove",this._onLayerChange,this),this._layers.push({layer:l,name:u,overlay:x}),this.options.sortLayers&&this._layers.sort(h(function(N,M){return this.options.sortFunction(N.layer,M.layer,N.name,M.name)},this)),this.options.autoZIndex&&l.setZIndex&&(this._lastZIndex++,l.setZIndex(this._lastZIndex)),this._expandIfNotCollapsed()},_update:function(){if(!this._container)return this;ca(this._baseLayersList),ca(this._overlaysList),this._layerControlInputs=[];var l,u,x,N,M=0;for(x=0;x<this._layers.length;x++)N=this._layers[x],this._addItem(N),u=u||N.overlay,l=l||!N.overlay,M+=N.overlay?0:1;return this.options.hideSingleBase&&(l=l&&M>1,this._baseLayersList.style.display=l?"":"none"),this._separator.style.display=u&&l?"":"none",this},_onLayerChange:function(l){this._handlingClick||this._update();var u=this._getLayer(p(l.target)),x=u.overlay?l.type==="add"?"overlayadd":"overlayremove":l.type==="add"?"baselayerchange":null;x&&this._map.fire(x,u)},_createRadioElement:function(l,u){var x='<input type="radio" class="leaflet-control-layers-selector" name="'+l+'"'+(u?' checked="checked"':"")+"/>",N=document.createElement("div");return N.innerHTML=x,N.firstChild},_addItem:function(l){var u=document.createElement("label"),x=this._map.hasLayer(l.layer),N;l.overlay?(N=document.createElement("input"),N.type="checkbox",N.className="leaflet-control-layers-selector",N.defaultChecked=x):N=this._createRadioElement("leaflet-base-layers_"+p(this),x),this._layerControlInputs.push(N),N.layerId=p(l.layer),mt(N,"click",this._onInputClick,this);var M=document.createElement("span");M.innerHTML=" "+l.name;var B=document.createElement("span");u.appendChild(B),B.appendChild(N),B.appendChild(M);var ie=l.overlay?this._overlaysList:this._baseLayersList;return ie.appendChild(u),this._checkDisabledLayers(),u},_onInputClick:function(){if(!this._preventClick){var l=this._layerControlInputs,u,x,N=[],M=[];this._handlingClick=!0;for(var B=l.length-1;B>=0;B--)u=l[B],x=this._getLayer(u.layerId).layer,u.checked?N.push(x):u.checked||M.push(x);for(B=0;B<M.length;B++)this._map.hasLayer(M[B])&&this._map.removeLayer(M[B]);for(B=0;B<N.length;B++)this._map.hasLayer(N[B])||this._map.addLayer(N[B]);this._handlingClick=!1,this._refocusOnMap()}},_checkDisabledLayers:function(){for(var l=this._layerControlInputs,u,x,N=this._map.getZoom(),M=l.length-1;M>=0;M--)u=l[M],x=this._getLayer(u.layerId).layer,u.disabled=x.options.minZoom!==void 0&&N<x.options.minZoom||x.options.maxZoom!==void 0&&N>x.options.maxZoom},_expandIfNotCollapsed:function(){return this._map&&!this.options.collapsed&&this.expand(),this},_expandSafely:function(){var l=this._section;this._preventClick=!0,mt(l,"click",Sn),this.expand();var u=this;setTimeout(function(){Dt(l,"click",Sn),u._preventClick=!1})}}),zf=function(l,u,x){return new Fu(l,u,x)},Pc=ya.extend({options:{position:"topleft",zoomInText:'<span aria-hidden="true">+</span>',zoomInTitle:"Zoom in",zoomOutText:'<span aria-hidden="true">&#x2212;</span>',zoomOutTitle:"Zoom out"},onAdd:function(l){var u="leaflet-control-zoom",x=kt("div",u+" leaflet-bar"),N=this.options;return this._zoomInButton=this._createButton(N.zoomInText,N.zoomInTitle,u+"-in",x,this._zoomIn),this._zoomOutButton=this._createButton(N.zoomOutText,N.zoomOutTitle,u+"-out",x,this._zoomOut),this._updateDisabled(),l.on("zoomend zoomlevelschange",this._updateDisabled,this),x},onRemove:function(l){l.off("zoomend zoomlevelschange",this._updateDisabled,this)},disable:function(){return this._disabled=!0,this._updateDisabled(),this},enable:function(){return this._disabled=!1,this._updateDisabled(),this},_zoomIn:function(l){!this._disabled&&this._map._zoom<this._map.getMaxZoom()&&this._map.zoomIn(this._map.options.zoomDelta*(l.shiftKey?3:1))},_zoomOut:function(l){!this._disabled&&this._map._zoom>this._map.getMinZoom()&&this._map.zoomOut(this._map.options.zoomDelta*(l.shiftKey?3:1))},_createButton:function(l,u,x,N,M){var B=kt("a",x,N);return B.innerHTML=l,B.href="#",B.title=u,B.setAttribute("role","button"),B.setAttribute("aria-label",u),di(B),mt(B,"click",hs),mt(B,"click",M,this),mt(B,"click",this._refocusOnMap,this),B},_updateDisabled:function(){var l=this._map,u="leaflet-disabled";nn(this._zoomInButton,u),nn(this._zoomOutButton,u),this._zoomInButton.setAttribute("aria-disabled","false"),this._zoomOutButton.setAttribute("aria-disabled","false"),(this._disabled||l._zoom===l.getMinZoom())&&(ht(this._zoomOutButton,u),this._zoomOutButton.setAttribute("aria-disabled","true")),(this._disabled||l._zoom===l.getMaxZoom())&&(ht(this._zoomInButton,u),this._zoomInButton.setAttribute("aria-disabled","true"))}});yt.mergeOptions({zoomControl:!0}),yt.addInitHook(function(){this.options.zoomControl&&(this.zoomControl=new Pc,this.addControl(this.zoomControl))});var Lc=function(l){return new Pc(l)},Uu=ya.extend({options:{position:"bottomleft",maxWidth:100,metric:!0,imperial:!0},onAdd:function(l){var u="leaflet-control-scale",x=kt("div",u),N=this.options;return this._addScales(N,u+"-line",x),l.on(N.updateWhenIdle?"moveend":"move",this._update,this),l.whenReady(this._update,this),x},onRemove:function(l){l.off(this.options.updateWhenIdle?"moveend":"move",this._update,this)},_addScales:function(l,u,x){l.metric&&(this._mScale=kt("div",u,x)),l.imperial&&(this._iScale=kt("div",u,x))},_update:function(){var l=this._map,u=l.getSize().y/2,x=l.distance(l.containerPointToLatLng([0,u]),l.containerPointToLatLng([this.options.maxWidth,u]));this._updateScales(x)},_updateScales:function(l){this.options.metric&&l&&this._updateMetric(l),this.options.imperial&&l&&this._updateImperial(l)},_updateMetric:function(l){var u=this._getRoundNum(l),x=u<1e3?u+" m":u/1e3+" km";this._updateScale(this._mScale,x,u/l)},_updateImperial:function(l){var u=l*3.2808399,x,N,M;u>5280?(x=u/5280,N=this._getRoundNum(x),this._updateScale(this._iScale,N+" mi",N/x)):(M=this._getRoundNum(u),this._updateScale(this._iScale,M+" ft",M/u))},_updateScale:function(l,u,x){l.style.width=Math.round(this.options.maxWidth*x)+"px",l.innerHTML=u},_getRoundNum:function(l){var u=Math.pow(10,(Math.floor(l)+"").length-1),x=l/u;return x=x>=10?10:x>=5?5:x>=3?3:x>=2?2:1,u*x}}),If=function(l){return new Uu(l)},Bf='<svg aria-hidden="true" xmlns="http://www.w3.org/2000/svg" width="12" height="8" viewBox="0 0 12 8" class="leaflet-attribution-flag"><path fill="#4C7BE1" d="M0 0h12v4H0z"/><path fill="#FFD500" d="M0 4h12v3H0z"/><path fill="#E0BC00" d="M0 7h12v1H0z"/></svg>',zc=ya.extend({options:{position:"bottomright",prefix:'<a href="https://leafletjs.com" title="A JavaScript library for interactive maps">'+(Ve.inlineSvg?Bf+" ":"")+"Leaflet</a>"},initialize:function(l){_(this,l),this._attributions={}},onAdd:function(l){l.attributionControl=this,this._container=kt("div","leaflet-control-attribution"),di(this._container);for(var u in l._layers)l._layers[u].getAttribution&&this.addAttribution(l._layers[u].getAttribution());return this._update(),l.on("layeradd",this._addAttribution,this),this._container},onRemove:function(l){l.off("layeradd",this._addAttribution,this)},_addAttribution:function(l){l.layer.getAttribution&&(this.addAttribution(l.layer.getAttribution()),l.layer.once("remove",function(){this.removeAttribution(l.layer.getAttribution())},this))},setPrefix:function(l){return this.options.prefix=l,this._update(),this},addAttribution:function(l){return l?(this._attributions[l]||(this._attributions[l]=0),this._attributions[l]++,this._update(),this):this},removeAttribution:function(l){return l?(this._attributions[l]&&(this._attributions[l]--,this._update()),this):this},_update:function(){if(this._map){var l=[];for(var u in this._attributions)this._attributions[u]&&l.push(u);var x=[];this.options.prefix&&x.push(this.options.prefix),l.length&&x.push(l.join(", ")),this._container.innerHTML=x.join(' <span aria-hidden="true">|</span> ')}}});yt.mergeOptions({attributionControl:!0}),yt.addInitHook(function(){this.options.attributionControl&&new zc().addTo(this)});var $f=function(l){return new zc(l)};ya.Layers=Fu,ya.Zoom=Pc,ya.Scale=Uu,ya.Attribution=zc,ui.layers=zf,ui.zoom=Lc,ui.scale=If,ui.attribution=$f;var Ya=H.extend({initialize:function(l){this._map=l},enable:function(){return this._enabled?this:(this._enabled=!0,this.addHooks(),this)},disable:function(){return this._enabled?(this._enabled=!1,this.removeHooks(),this):this},enabled:function(){return!!this._enabled}});Ya.addTo=function(l,u){return l.addHandler(u,this),this};var Ff={Events:K},Hu=Ve.touch?"touchstart mousedown":"mousedown",Ks=oe.extend({options:{clickTolerance:3},initialize:function(l,u,x,N){_(this,N),this._element=l,this._dragStartTarget=u||l,this._preventOutline=x},enable:function(){this._enabled||(mt(this._dragStartTarget,Hu,this._onDown,this),this._enabled=!0)},disable:function(){this._enabled&&(Ks._dragging===this&&this.finishDrag(!0),Dt(this._dragStartTarget,Hu,this._onDown,this),this._enabled=!1,this._moved=!1)},_onDown:function(l){if(this._enabled&&(this._moved=!1,!si(this._element,"leaflet-zoom-anim"))){if(l.touches&&l.touches.length!==1){Ks._dragging===this&&this.finishDrag();return}if(!(Ks._dragging||l.shiftKey||l.which!==1&&l.button!==1&&!l.touches)&&(Ks._dragging=this,this._preventOutline&&cl(this._element),ol(),ds(),!this._moving)){this.fire("down");var u=l.touches?l.touches[0]:l,x=Sr(this._element);this._startPoint=new W(u.clientX,u.clientY),this._startPos=Zs(this._element),this._parentScale=Ws(x);var N=l.type==="mousedown";mt(document,N?"mousemove":"touchmove",this._onMove,this),mt(document,N?"mouseup":"touchend touchcancel",this._onUp,this)}}},_onMove:function(l){if(this._enabled){if(l.touches&&l.touches.length>1){this._moved=!0;return}var u=l.touches&&l.touches.length===1?l.touches[0]:l,x=new W(u.clientX,u.clientY)._subtract(this._startPoint);!x.x&&!x.y||Math.abs(x.x)+Math.abs(x.y)<this.options.clickTolerance||(x.x/=this._parentScale.x,x.y/=this._parentScale.y,Sn(l),this._moved||(this.fire("dragstart"),this._moved=!0,ht(document.body,"leaflet-dragging"),this._lastTarget=l.target||l.srcElement,window.SVGElementInstance&&this._lastTarget instanceof window.SVGElementInstance&&(this._lastTarget=this._lastTarget.correspondingUseElement),ht(this._lastTarget,"leaflet-drag-target")),this._newPos=this._startPos.add(x),this._moving=!0,this._lastEvent=l,this._updatePosition())}},_updatePosition:function(){var l={originalEvent:this._lastEvent};this.fire("predrag",l),pn(this._element,this._newPos),this.fire("drag",l)},_onUp:function(){this._enabled&&this.finishDrag()},finishDrag:function(l){nn(document.body,"leaflet-dragging"),this._lastTarget&&(nn(this._lastTarget,"leaflet-drag-target"),this._lastTarget=null),Dt(document,"mousemove touchmove",this._onMove,this),Dt(document,"mouseup touchend touchcancel",this._onUp,this),Dc(),ll();var u=this._moved&&this._moving;this._moving=!1,Ks._dragging=!1,u&&this.fire("dragend",{noInertia:l,distance:this._newPos.distanceTo(this._startPos)})}});function qu(l,u,x){var N,M=[1,4,2,8],B,ie,pe,je,Ae,Ue,Ye,Ge;for(B=0,Ue=l.length;B<Ue;B++)l[B]._code=Er(l[B],u);for(pe=0;pe<4;pe++){for(Ye=M[pe],N=[],B=0,Ue=l.length,ie=Ue-1;B<Ue;ie=B++)je=l[B],Ae=l[ie],je._code&Ye?Ae._code&Ye||(Ge=io(Ae,je,Ye,u,x),Ge._code=Er(Ge,u),N.push(Ge)):(Ae._code&Ye&&(Ge=io(Ae,je,Ye,u,x),Ge._code=Er(Ge,u),N.push(Ge)),N.push(je));l=N}return l}function ro(l,u){var x,N,M,B,ie,pe,je,Ae,Ue;if(!l||l.length===0)throw new Error("latlngs not passed");ea(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ye=me([0,0]),Ge=ee(l),dt=Ge.getNorthWest().distanceTo(Ge.getSouthWest())*Ge.getNorthEast().distanceTo(Ge.getNorthWest());dt<1700&&(Ye=Ic(l));var an=l.length,gn=[];for(x=0;x<an;x++){var ta=me(l[x]);gn.push(u.project(me([ta.lat-Ye.lat,ta.lng-Ye.lng])))}for(pe=je=Ae=0,x=0,N=an-1;x<an;N=x++)M=gn[x],B=gn[N],ie=M.y*B.x-B.y*M.x,je+=(M.x+B.x)*ie,Ae+=(M.y+B.y)*ie,pe+=ie*3;pe===0?Ue=gn[0]:Ue=[je/pe,Ae/pe];var Aa=u.unproject(z(Ue));return me([Aa.lat+Ye.lat,Aa.lng+Ye.lng])}function Ic(l){for(var u=0,x=0,N=0,M=0;M<l.length;M++){var B=me(l[M]);u+=B.lat,x+=B.lng,N++}return me([u/N,x/N])}var Uf={__proto__:null,clipPolygon:qu,polygonCenter:ro,centroid:Ic};function Yu(l,u){if(!u||!l.length)return l.slice();var x=u*u;return l=Yf(l,x),l=qf(l,x),l}function Bc(l,u,x){return Math.sqrt(Mr(l,u,x,!0))}function Hf(l,u,x){return Mr(l,u,x)}function qf(l,u){var x=l.length,N=typeof Uint8Array<"u"?Uint8Array:Array,M=new N(x);M[0]=M[x-1]=1,$c(l,M,u,0,x-1);var B,ie=[];for(B=0;B<x;B++)M[B]&&ie.push(l[B]);return ie}function $c(l,u,x,N,M){var B=0,ie,pe,je;for(pe=N+1;pe<=M-1;pe++)je=Mr(l[pe],l[N],l[M],!0),je>B&&(ie=pe,B=je);B>x&&(u[ie]=1,$c(l,u,x,N,ie),$c(l,u,x,ie,M))}function Yf(l,u){for(var x=[l[0]],N=1,M=0,B=l.length;N<B;N++)Vf(l[N],l[M])>u&&(x.push(l[N]),M=N);return M<B-1&&x.push(l[B-1]),x}var Vu;function Zu(l,u,x,N,M){var B=N?Vu:Er(l,x),ie=Er(u,x),pe,je,Ae;for(Vu=ie;;){if(!(B|ie))return[l,u];if(B&ie)return!1;pe=B||ie,je=io(l,u,pe,x,M),Ae=Er(je,x),pe===B?(l=je,B=Ae):(u=je,ie=Ae)}}function io(l,u,x,N,M){var B=u.x-l.x,ie=u.y-l.y,pe=N.min,je=N.max,Ae,Ue;return x&8?(Ae=l.x+B*(je.y-l.y)/ie,Ue=je.y):x&4?(Ae=l.x+B*(pe.y-l.y)/ie,Ue=pe.y):x&2?(Ae=je.x,Ue=l.y+ie*(je.x-l.x)/B):x&1&&(Ae=pe.x,Ue=l.y+ie*(pe.x-l.x)/B),new W(Ae,Ue,M)}function Er(l,u){var x=0;return l.x<u.min.x?x|=1:l.x>u.max.x&&(x|=2),l.y<u.min.y?x|=4:l.y>u.max.y&&(x|=8),x}function Vf(l,u){var x=u.x-l.x,N=u.y-l.y;return x*x+N*N}function Mr(l,u,x,N){var M=u.x,B=u.y,ie=x.x-M,pe=x.y-B,je=ie*ie+pe*pe,Ae;return je>0&&(Ae=((l.x-M)*ie+(l.y-B)*pe)/je,Ae>1?(M=x.x,B=x.y):Ae>0&&(M+=ie*Ae,B+=pe*Ae)),ie=l.x-M,pe=l.y-B,N?ie*ie+pe*pe:new W(M,B)}function ea(l){return!P(l[0])||typeof l[0][0]!="object"&&typeof l[0][0]<"u"}function Wu(l){return console.warn("Deprecated use of _flat, please use L.LineUtil.isFlat instead."),ea(l)}function Fc(l,u){var x,N,M,B,ie,pe,je,Ae;if(!l||l.length===0)throw new Error("latlngs not passed");ea(l)||(console.warn("latlngs are not flat! Only the first ring will be used"),l=l[0]);var Ue=me([0,0]),Ye=ee(l),Ge=Ye.getNorthWest().distanceTo(Ye.getSouthWest())*Ye.getNorthEast().distanceTo(Ye.getNorthWest());Ge<1700&&(Ue=Ic(l));var dt=l.length,an=[];for(x=0;x<dt;x++){var gn=me(l[x]);an.push(u.project(me([gn.lat-Ue.lat,gn.lng-Ue.lng])))}for(x=0,N=0;x<dt-1;x++)N+=an[x].distanceTo(an[x+1])/2;if(N===0)Ae=an[0];else for(x=0,B=0;x<dt-1;x++)if(ie=an[x],pe=an[x+1],M=ie.distanceTo(pe),B+=M,B>N){je=(B-N)/M,Ae=[pe.x-je*(pe.x-ie.x),pe.y-je*(pe.y-ie.y)];break}var ta=u.unproject(z(Ae));return me([ta.lat+Ue.lat,ta.lng+Ue.lng])}var Ku={__proto__:null,simplify:Yu,pointToSegmentDistance:Bc,closestPointOnSegment:Hf,clipSegment:Zu,_getEdgeIntersection:io,_getBitCode:Er,_sqClosestPointOnSegment:Mr,isFlat:ea,_flat:Wu,polylineCenter:Fc},lo={project:function(l){return new W(l.lng,l.lat)},unproject:function(l){return new re(l.y,l.x)},bounds:new J([-180,-90],[180,90])},oo={R:6378137,R_MINOR:6356752314245179e-9,bounds:new J([-2003750834279e-5,-1549657073972e-5],[2003750834279e-5,1876465623138e-5]),project:function(l){var u=Math.PI/180,x=this.R,N=l.lat*u,M=this.R_MINOR/x,B=Math.sqrt(1-M*M),ie=B*Math.sin(N),pe=Math.tan(Math.PI/4-N/2)/Math.pow((1-ie)/(1+ie),B/2);return N=-x*Math.log(Math.max(pe,1e-10)),new W(l.lng*u*x,N)},unproject:function(l){for(var u=180/Math.PI,x=this.R,N=this.R_MINOR/x,M=Math.sqrt(1-N*N),B=Math.exp(-l.y/x),ie=Math.PI/2-2*Math.atan(B),pe=0,je=.1,Ae;pe<15&&Math.abs(je)>1e-7;pe++)Ae=M*Math.sin(ie),Ae=Math.pow((1-Ae)/(1+Ae),M/2),je=Math.PI/2-2*Math.atan(B*Ae)-ie,ie+=je;return new re(ie*u,l.x*u/x)}},Gu={__proto__:null,LonLat:lo,Mercator:oo,SphericalMercator:te},mi=o({},Ce,{code:"EPSG:3395",projection:oo,transformation:function(){var l=.5/(Math.PI*oo.R);return Ie(l,.5,-l,.5)}()}),Qu=o({},Ce,{code:"EPSG:4326",projection:lo,transformation:Ie(1/180,1,-1/180,.5)}),Zf=o({},ye,{projection:lo,transformation:Ie(1,0,-1,0),scale:function(l){return Math.pow(2,l)},zoom:function(l){return Math.log(l)/Math.LN2},distance:function(l,u){var x=u.lng-l.lng,N=u.lat-l.lat;return Math.sqrt(x*x+N*N)},infinite:!0});ye.Earth=Ce,ye.EPSG3395=mi,ye.EPSG3857=at,ye.EPSG900913=Je,ye.EPSG4326=Qu,ye.Simple=Zf;var Va=oe.extend({options:{pane:"overlayPane",attribution:null,bubblingMouseEvents:!0},addTo:function(l){return l.addLayer(this),this},remove:function(){return this.removeFrom(this._map||this._mapToAdd)},removeFrom:function(l){return l&&l.removeLayer(this),this},getPane:function(l){return this._map.getPane(l?this.options[l]||l:this.options.pane)},addInteractiveTarget:function(l){return this._map._targets[p(l)]=this,this},removeInteractiveTarget:function(l){return delete this._map._targets[p(l)],this},getAttribution:function(){return this.options.attribution},_layerAdd:function(l){var u=l.target;if(u.hasLayer(this)){if(this._map=u,this._zoomAnimated=u._zoomAnimated,this.getEvents){var x=this.getEvents();u.on(x,this),this.once("remove",function(){u.off(x,this)},this)}this.onAdd(u),this.fire("add"),u.fire("layeradd",{layer:this})}}});yt.include({addLayer:function(l){if(!l._layerAdd)throw new Error("The provided object is not a Layer.");var u=p(l);return this._layers[u]?this:(this._layers[u]=l,l._mapToAdd=this,l.beforeAdd&&l.beforeAdd(this),this.whenReady(l._layerAdd,l),this)},removeLayer:function(l){var u=p(l);return this._layers[u]?(this._loaded&&l.onRemove(this),delete this._layers[u],this._loaded&&(this.fire("layerremove",{layer:l}),l.fire("remove")),l._map=l._mapToAdd=null,this):this},hasLayer:function(l){return p(l)in this._layers},eachLayer:function(l,u){for(var x in this._layers)l.call(u,this._layers[x]);return this},_addLayers:function(l){l=l?P(l)?l:[l]:[];for(var u=0,x=l.length;u<x;u++)this.addLayer(l[u])},_addZoomLimit:function(l){(!isNaN(l.options.maxZoom)||!isNaN(l.options.minZoom))&&(this._zoomBoundLayers[p(l)]=l,this._updateZoomLevels())},_removeZoomLimit:function(l){var u=p(l);this._zoomBoundLayers[u]&&(delete this._zoomBoundLayers[u],this._updateZoomLevels())},_updateZoomLevels:function(){var l=1/0,u=-1/0,x=this._getZoomSpan();for(var N in this._zoomBoundLayers){var M=this._zoomBoundLayers[N].options;l=M.minZoom===void 0?l:Math.min(l,M.minZoom),u=M.maxZoom===void 0?u:Math.max(u,M.maxZoom)}this._layersMaxZoom=u===-1/0?void 0:u,this._layersMinZoom=l===1/0?void 0:l,x!==this._getZoomSpan()&&this.fire("zoomlevelschange"),this.options.maxZoom===void 0&&this._layersMaxZoom&&this.getZoom()>this._layersMaxZoom&&this.setZoom(this._layersMaxZoom),this.options.minZoom===void 0&&this._layersMinZoom&&this.getZoom()<this._layersMinZoom&&this.setZoom(this._layersMinZoom)}});var Rr=Va.extend({initialize:function(l,u){_(this,u),this._layers={};var x,N;if(l)for(x=0,N=l.length;x<N;x++)this.addLayer(l[x])},addLayer:function(l){var u=this.getLayerId(l);return this._layers[u]=l,this._map&&this._map.addLayer(l),this},removeLayer:function(l){var u=l in this._layers?l:this.getLayerId(l);return this._map&&this._layers[u]&&this._map.removeLayer(this._layers[u]),delete this._layers[u],this},hasLayer:function(l){var u=typeof l=="number"?l:this.getLayerId(l);return u in this._layers},clearLayers:function(){return this.eachLayer(this.removeLayer,this)},invoke:function(l){var u=Array.prototype.slice.call(arguments,1),x,N;for(x in this._layers)N=this._layers[x],N[l]&&N[l].apply(N,u);return this},onAdd:function(l){this.eachLayer(l.addLayer,l)},onRemove:function(l){this.eachLayer(l.removeLayer,l)},eachLayer:function(l,u){for(var x in this._layers)l.call(u,this._layers[x]);return this},getLayer:function(l){return this._layers[l]},getLayers:function(){var l=[];return this.eachLayer(l.push,l),l},setZIndex:function(l){return this.invoke("setZIndex",l)},getLayerId:function(l){return p(l)}}),Xu=function(l,u){return new Rr(l,u)},Na=Rr.extend({addLayer:function(l){return this.hasLayer(l)?this:(l.addEventParent(this),Rr.prototype.addLayer.call(this,l),this.fire("layeradd",{layer:l}))},removeLayer:function(l){return this.hasLayer(l)?(l in this._layers&&(l=this._layers[l]),l.removeEventParent(this),Rr.prototype.removeLayer.call(this,l),this.fire("layerremove",{layer:l})):this},setStyle:function(l){return this.invoke("setStyle",l)},bringToFront:function(){return this.invoke("bringToFront")},bringToBack:function(){return this.invoke("bringToBack")},getBounds:function(){var l=new ae;for(var u in this._layers){var x=this._layers[u];l.extend(x.getBounds?x.getBounds():x.getLatLng())}return l}}),hl=function(l,u){return new Na(l,u)},hi=H.extend({options:{popupAnchor:[0,0],tooltipAnchor:[0,0],crossOrigin:!1},initialize:function(l){_(this,l)},createIcon:function(l){return this._createIcon("icon",l)},createShadow:function(l){return this._createIcon("shadow",l)},_createIcon:function(l,u){var x=this._getIconUrl(l);if(!x){if(l==="icon")throw new Error("iconUrl not set in Icon options (see the docs).");return null}var N=this._createImg(x,u&&u.tagName==="IMG"?u:null);return this._setIconStyles(N,l),(this.options.crossOrigin||this.options.crossOrigin==="")&&(N.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),N},_setIconStyles:function(l,u){var x=this.options,N=x[u+"Size"];typeof N=="number"&&(N=[N,N]);var M=z(N),B=z(u==="shadow"&&x.shadowAnchor||x.iconAnchor||M&&M.divideBy(2,!0));l.className="leaflet-marker-"+u+" "+(x.className||""),B&&(l.style.marginLeft=-B.x+"px",l.style.marginTop=-B.y+"px"),M&&(l.style.width=M.x+"px",l.style.height=M.y+"px")},_createImg:function(l,u){return u=u||document.createElement("img"),u.src=l,u},_getIconUrl:function(l){return Ve.retina&&this.options[l+"RetinaUrl"]||this.options[l+"Url"]}});function co(l){return new hi(l)}var fi=hi.extend({options:{iconUrl:"marker-icon.png",iconRetinaUrl:"marker-icon-2x.png",shadowUrl:"marker-shadow.png",iconSize:[25,41],iconAnchor:[12,41],popupAnchor:[1,-34],tooltipAnchor:[16,-28],shadowSize:[41,41]},_getIconUrl:function(l){return typeof fi.imagePath!="string"&&(fi.imagePath=this._detectIconPath()),(this.options.imagePath||fi.imagePath)+hi.prototype._getIconUrl.call(this,l)},_stripUrl:function(l){var u=function(x,N,M){var B=N.exec(x);return B&&B[M]};return l=u(l,/^url\((['"])?(.+)\1\)$/,2),l&&u(l,/^(.*)marker-icon\.png$/,1)},_detectIconPath:function(){var l=kt("div","leaflet-default-icon-path",document.body),u=Nr(l,"background-image")||Nr(l,"backgroundImage");if(document.body.removeChild(l),u=this._stripUrl(u),u)return u;var x=document.querySelector('link[href$="leaflet.css"]');return x?x.href.substring(0,x.href.length-11-1):""}}),Uc=Ya.extend({initialize:function(l){this._marker=l},addHooks:function(){var l=this._marker._icon;this._draggable||(this._draggable=new Ks(l,l,!0)),this._draggable.on({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).enable(),ht(l,"leaflet-marker-draggable")},removeHooks:function(){this._draggable.off({dragstart:this._onDragStart,predrag:this._onPreDrag,drag:this._onDrag,dragend:this._onDragEnd},this).disable(),this._marker._icon&&nn(this._marker._icon,"leaflet-marker-draggable")},moved:function(){return this._draggable&&this._draggable._moved},_adjustPan:function(l){var u=this._marker,x=u._map,N=this._marker.options.autoPanSpeed,M=this._marker.options.autoPanPadding,B=Zs(u._icon),ie=x.getPixelBounds(),pe=x.getPixelOrigin(),je=se(ie.min._subtract(pe).add(M),ie.max._subtract(pe).subtract(M));if(!je.contains(B)){var Ae=z((Math.max(je.max.x,B.x)-je.max.x)/(ie.max.x-je.max.x)-(Math.min(je.min.x,B.x)-je.min.x)/(ie.min.x-je.min.x),(Math.max(je.max.y,B.y)-je.max.y)/(ie.max.y-je.max.y)-(Math.min(je.min.y,B.y)-je.min.y)/(ie.min.y-je.min.y)).multiplyBy(N);x.panBy(Ae,{animate:!1}),this._draggable._newPos._add(Ae),this._draggable._startPos._add(Ae),pn(u._icon,this._draggable._newPos),this._onDrag(l),this._panRequest=Y(this._adjustPan.bind(this,l))}},_onDragStart:function(){this._oldLatLng=this._marker.getLatLng(),this._marker.closePopup&&this._marker.closePopup(),this._marker.fire("movestart").fire("dragstart")},_onPreDrag:function(l){this._marker.options.autoPan&&(G(this._panRequest),this._panRequest=Y(this._adjustPan.bind(this,l)))},_onDrag:function(l){var u=this._marker,x=u._shadow,N=Zs(u._icon),M=u._map.layerPointToLatLng(N);x&&pn(x,N),u._latlng=M,l.latlng=M,l.oldLatLng=this._oldLatLng,u.fire("move",l).fire("drag",l)},_onDragEnd:function(l){G(this._panRequest),delete this._oldLatLng,this._marker.fire("moveend").fire("dragend",l)}}),pi=Va.extend({options:{icon:new fi,interactive:!0,keyboard:!0,title:"",alt:"Marker",zIndexOffset:0,opacity:1,riseOnHover:!1,riseOffset:250,pane:"markerPane",shadowPane:"shadowPane",bubblingMouseEvents:!1,autoPanOnFocus:!0,draggable:!1,autoPan:!1,autoPanPadding:[50,50],autoPanSpeed:10},initialize:function(l,u){_(this,u),this._latlng=me(l)},onAdd:function(l){this._zoomAnimated=this._zoomAnimated&&l.options.markerZoomAnimation,this._zoomAnimated&&l.on("zoomanim",this._animateZoom,this),this._initIcon(),this.update()},onRemove:function(l){this.dragging&&this.dragging.enabled()&&(this.options.draggable=!0,this.dragging.removeHooks()),delete this.dragging,this._zoomAnimated&&l.off("zoomanim",this._animateZoom,this),this._removeIcon(),this._removeShadow()},getEvents:function(){return{zoom:this.update,viewreset:this.update}},getLatLng:function(){return this._latlng},setLatLng:function(l){var u=this._latlng;return this._latlng=me(l),this.update(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},setZIndexOffset:function(l){return this.options.zIndexOffset=l,this.update()},getIcon:function(){return this.options.icon},setIcon:function(l){return this.options.icon=l,this._map&&(this._initIcon(),this.update()),this._popup&&this.bindPopup(this._popup,this._popup.options),this},getElement:function(){return this._icon},update:function(){if(this._icon&&this._map){var l=this._map.latLngToLayerPoint(this._latlng).round();this._setPos(l)}return this},_initIcon:function(){var l=this.options,u="leaflet-zoom-"+(this._zoomAnimated?"animated":"hide"),x=l.icon.createIcon(this._icon),N=!1;x!==this._icon&&(this._icon&&this._removeIcon(),N=!0,l.title&&(x.title=l.title),x.tagName==="IMG"&&(x.alt=l.alt||"")),ht(x,u),l.keyboard&&(x.tabIndex="0",x.setAttribute("role","button")),this._icon=x,l.riseOnHover&&this.on({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&mt(x,"focus",this._panOnFocus,this);var M=l.icon.createShadow(this._shadow),B=!1;M!==this._shadow&&(this._removeShadow(),B=!0),M&&(ht(M,u),M.alt=""),this._shadow=M,l.opacity<1&&this._updateOpacity(),N&&this.getPane().appendChild(this._icon),this._initInteraction(),M&&B&&this.getPane(l.shadowPane).appendChild(this._shadow)},_removeIcon:function(){this.options.riseOnHover&&this.off({mouseover:this._bringToFront,mouseout:this._resetZIndex}),this.options.autoPanOnFocus&&Dt(this._icon,"focus",this._panOnFocus,this),tn(this._icon),this.removeInteractiveTarget(this._icon),this._icon=null},_removeShadow:function(){this._shadow&&tn(this._shadow),this._shadow=null},_setPos:function(l){this._icon&&pn(this._icon,l),this._shadow&&pn(this._shadow,l),this._zIndex=l.y+this.options.zIndexOffset,this._resetZIndex()},_updateZIndex:function(l){this._icon&&(this._icon.style.zIndex=this._zIndex+l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center).round();this._setPos(u)},_initInteraction:function(){if(this.options.interactive&&(ht(this._icon,"leaflet-interactive"),this.addInteractiveTarget(this._icon),Uc)){var l=this.options.draggable;this.dragging&&(l=this.dragging.enabled(),this.dragging.disable()),this.dragging=new Uc(this),l&&this.dragging.enable()}},setOpacity:function(l){return this.options.opacity=l,this._map&&this._updateOpacity(),this},_updateOpacity:function(){var l=this.options.opacity;this._icon&&xa(this._icon,l),this._shadow&&xa(this._shadow,l)},_bringToFront:function(){this._updateZIndex(this.options.riseOffset)},_resetZIndex:function(){this._updateZIndex(0)},_panOnFocus:function(){var l=this._map;if(l){var u=this.options.icon.options,x=u.iconSize?z(u.iconSize):z(0,0),N=u.iconAnchor?z(u.iconAnchor):z(0,0);l.panInside(this._latlng,{paddingTopLeft:N,paddingBottomRight:x.subtract(N)})}},_getPopupAnchor:function(){return this.options.icon.options.popupAnchor},_getTooltipAnchor:function(){return this.options.icon.options.tooltipAnchor}});function Hc(l,u){return new pi(l,u)}var Rs=Va.extend({options:{stroke:!0,color:"#3388ff",weight:3,opacity:1,lineCap:"round",lineJoin:"round",dashArray:null,dashOffset:null,fill:!1,fillColor:null,fillOpacity:.2,fillRule:"evenodd",interactive:!0,bubblingMouseEvents:!0},beforeAdd:function(l){this._renderer=l.getRenderer(this)},onAdd:function(){this._renderer._initPath(this),this._reset(),this._renderer._addPath(this)},onRemove:function(){this._renderer._removePath(this)},redraw:function(){return this._map&&this._renderer._updatePath(this),this},setStyle:function(l){return _(this,l),this._renderer&&(this._renderer._updateStyle(this),this.options.stroke&&l&&Object.prototype.hasOwnProperty.call(l,"weight")&&this._updateBounds()),this},bringToFront:function(){return this._renderer&&this._renderer._bringToFront(this),this},bringToBack:function(){return this._renderer&&this._renderer._bringToBack(this),this},getElement:function(){return this._path},_reset:function(){this._project(),this._update()},_clickTolerance:function(){return(this.options.stroke?this.options.weight/2:0)+(this._renderer.options.tolerance||0)}}),fl=Rs.extend({options:{fill:!0,radius:10},initialize:function(l,u){_(this,u),this._latlng=me(l),this._radius=this.options.radius},setLatLng:function(l){var u=this._latlng;return this._latlng=me(l),this.redraw(),this.fire("move",{oldLatLng:u,latlng:this._latlng})},getLatLng:function(){return this._latlng},setRadius:function(l){return this.options.radius=this._radius=l,this.redraw()},getRadius:function(){return this._radius},setStyle:function(l){var u=l&&l.radius||this._radius;return Rs.prototype.setStyle.call(this,l),this.setRadius(u),this},_project:function(){this._point=this._map.latLngToLayerPoint(this._latlng),this._updateBounds()},_updateBounds:function(){var l=this._radius,u=this._radiusY||l,x=this._clickTolerance(),N=[l+x,u+x];this._pxBounds=new J(this._point.subtract(N),this._point.add(N))},_update:function(){this._map&&this._updatePath()},_updatePath:function(){this._renderer._updateCircle(this)},_empty:function(){return this._radius&&!this._renderer._bounds.intersects(this._pxBounds)},_containsPoint:function(l){return l.distanceTo(this._point)<=this._radius+this._clickTolerance()}});function Ju(l,u){return new fl(l,u)}var qc=fl.extend({initialize:function(l,u,x){if(typeof u=="number"&&(u=o({},x,{radius:u})),_(this,u),this._latlng=me(l),isNaN(this.options.radius))throw new Error("Circle radius cannot be NaN");this._mRadius=this.options.radius},setRadius:function(l){return this._mRadius=l,this.redraw()},getRadius:function(){return this._mRadius},getBounds:function(){var l=[this._radius,this._radiusY||this._radius];return new ae(this._map.layerPointToLatLng(this._point.subtract(l)),this._map.layerPointToLatLng(this._point.add(l)))},setStyle:Rs.prototype.setStyle,_project:function(){var l=this._latlng.lng,u=this._latlng.lat,x=this._map,N=x.options.crs;if(N.distance===Ce.distance){var M=Math.PI/180,B=this._mRadius/Ce.R/M,ie=x.project([u+B,l]),pe=x.project([u-B,l]),je=ie.add(pe).divideBy(2),Ae=x.unproject(je).lat,Ue=Math.acos((Math.cos(B*M)-Math.sin(u*M)*Math.sin(Ae*M))/(Math.cos(u*M)*Math.cos(Ae*M)))/M;(isNaN(Ue)||Ue===0)&&(Ue=B/Math.cos(Math.PI/180*u)),this._point=je.subtract(x.getPixelOrigin()),this._radius=isNaN(Ue)?0:je.x-x.project([Ae,l-Ue]).x,this._radiusY=je.y-ie.y}else{var Ye=N.unproject(N.project(this._latlng).subtract([this._mRadius,0]));this._point=x.latLngToLayerPoint(this._latlng),this._radius=this._point.x-x.latLngToLayerPoint(Ye).x}this._updateBounds()}});function Wf(l,u,x){return new qc(l,u,x)}var As=Rs.extend({options:{smoothFactor:1,noClip:!1},initialize:function(l,u){_(this,u),this._setLatLngs(l)},getLatLngs:function(){return this._latlngs},setLatLngs:function(l){return this._setLatLngs(l),this.redraw()},isEmpty:function(){return!this._latlngs.length},closestLayerPoint:function(l){for(var u=1/0,x=null,N=Mr,M,B,ie=0,pe=this._parts.length;ie<pe;ie++)for(var je=this._parts[ie],Ae=1,Ue=je.length;Ae<Ue;Ae++){M=je[Ae-1],B=je[Ae];var Ye=N(l,M,B,!0);Ye<u&&(u=Ye,x=N(l,M,B))}return x&&(x.distance=Math.sqrt(u)),x},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return Fc(this._defaultShape(),this._map.options.crs)},getBounds:function(){return this._bounds},addLatLng:function(l,u){return u=u||this._defaultShape(),l=me(l),u.push(l),this._bounds.extend(l),this.redraw()},_setLatLngs:function(l){this._bounds=new ae,this._latlngs=this._convertLatLngs(l)},_defaultShape:function(){return ea(this._latlngs)?this._latlngs:this._latlngs[0]},_convertLatLngs:function(l){for(var u=[],x=ea(l),N=0,M=l.length;N<M;N++)x?(u[N]=me(l[N]),this._bounds.extend(u[N])):u[N]=this._convertLatLngs(l[N]);return u},_project:function(){var l=new J;this._rings=[],this._projectLatlngs(this._latlngs,this._rings,l),this._bounds.isValid()&&l.isValid()&&(this._rawPxBounds=l,this._updateBounds())},_updateBounds:function(){var l=this._clickTolerance(),u=new W(l,l);this._rawPxBounds&&(this._pxBounds=new J([this._rawPxBounds.min.subtract(u),this._rawPxBounds.max.add(u)]))},_projectLatlngs:function(l,u,x){var N=l[0]instanceof re,M=l.length,B,ie;if(N){for(ie=[],B=0;B<M;B++)ie[B]=this._map.latLngToLayerPoint(l[B]),x.extend(ie[B]);u.push(ie)}else for(B=0;B<M;B++)this._projectLatlngs(l[B],u,x)},_clipPoints:function(){var l=this._renderer._bounds;if(this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}var u=this._parts,x,N,M,B,ie,pe,je;for(x=0,M=0,B=this._rings.length;x<B;x++)for(je=this._rings[x],N=0,ie=je.length;N<ie-1;N++)pe=Zu(je[N],je[N+1],l,N,!0),pe&&(u[M]=u[M]||[],u[M].push(pe[0]),(pe[1]!==je[N+1]||N===ie-2)&&(u[M].push(pe[1]),M++))}},_simplifyPoints:function(){for(var l=this._parts,u=this.options.smoothFactor,x=0,N=l.length;x<N;x++)l[x]=Yu(l[x],u)},_update:function(){this._map&&(this._clipPoints(),this._simplifyPoints(),this._updatePath())},_updatePath:function(){this._renderer._updatePoly(this)},_containsPoint:function(l,u){var x,N,M,B,ie,pe,je=this._clickTolerance();if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(x=0,B=this._parts.length;x<B;x++)for(pe=this._parts[x],N=0,ie=pe.length,M=ie-1;N<ie;M=N++)if(!(!u&&N===0)&&Bc(l,pe[M],pe[N])<=je)return!0;return!1}});function Kf(l,u){return new As(l,u)}As._flat=Wu;var gi=As.extend({options:{fill:!0},isEmpty:function(){return!this._latlngs.length||!this._latlngs[0].length},getCenter:function(){if(!this._map)throw new Error("Must add layer to map before using getCenter()");return ro(this._defaultShape(),this._map.options.crs)},_convertLatLngs:function(l){var u=As.prototype._convertLatLngs.call(this,l),x=u.length;return x>=2&&u[0]instanceof re&&u[0].equals(u[x-1])&&u.pop(),u},_setLatLngs:function(l){As.prototype._setLatLngs.call(this,l),ea(this._latlngs)&&(this._latlngs=[this._latlngs])},_defaultShape:function(){return ea(this._latlngs[0])?this._latlngs[0]:this._latlngs[0][0]},_clipPoints:function(){var l=this._renderer._bounds,u=this.options.weight,x=new W(u,u);if(l=new J(l.min.subtract(x),l.max.add(x)),this._parts=[],!(!this._pxBounds||!this._pxBounds.intersects(l))){if(this.options.noClip){this._parts=this._rings;return}for(var N=0,M=this._rings.length,B;N<M;N++)B=qu(this._rings[N],l,!0),B.length&&this._parts.push(B)}},_updatePath:function(){this._renderer._updatePoly(this,!0)},_containsPoint:function(l){var u=!1,x,N,M,B,ie,pe,je,Ae;if(!this._pxBounds||!this._pxBounds.contains(l))return!1;for(B=0,je=this._parts.length;B<je;B++)for(x=this._parts[B],ie=0,Ae=x.length,pe=Ae-1;ie<Ae;pe=ie++)N=x[ie],M=x[pe],N.y>l.y!=M.y>l.y&&l.x<(M.x-N.x)*(l.y-N.y)/(M.y-N.y)+N.x&&(u=!u);return u||As.prototype._containsPoint.call(this,l,!0)}});function _a(l,u){return new gi(l,u)}var Sa=Na.extend({initialize:function(l,u){_(this,u),this._layers={},l&&this.addData(l)},addData:function(l){var u=P(l)?l:l.features,x,N,M;if(u){for(x=0,N=u.length;x<N;x++)M=u[x],(M.geometries||M.geometry||M.features||M.coordinates)&&this.addData(M);return this}var B=this.options;if(B.filter&&!B.filter(l))return this;var ie=pl(l,B);return ie?(ie.feature=xi(l),ie.defaultOptions=ie.options,this.resetStyle(ie),B.onEachFeature&&B.onEachFeature(l,ie),this.addLayer(ie)):this},resetStyle:function(l){return l===void 0?this.eachLayer(this.resetStyle,this):(l.options=o({},l.defaultOptions),this._setLayerStyle(l,this.options.style),this)},setStyle:function(l){return this.eachLayer(function(u){this._setLayerStyle(u,l)},this)},_setLayerStyle:function(l,u){l.setStyle&&(typeof u=="function"&&(u=u(l.feature)),l.setStyle(u))}});function pl(l,u){var x=l.type==="Feature"?l.geometry:l,N=x?x.coordinates:null,M=[],B=u&&u.pointToLayer,ie=u&&u.coordsToLatLng||uo,pe,je,Ae,Ue;if(!N&&!x)return null;switch(x.type){case"Point":return pe=ie(N),Yc(B,l,pe,u);case"MultiPoint":for(Ae=0,Ue=N.length;Ae<Ue;Ae++)pe=ie(N[Ae]),M.push(Yc(B,l,pe,u));return new Na(M);case"LineString":case"MultiLineString":return je=gl(N,x.type==="LineString"?0:1,ie),new As(je,u);case"Polygon":case"MultiPolygon":return je=gl(N,x.type==="Polygon"?1:2,ie),new gi(je,u);case"GeometryCollection":for(Ae=0,Ue=x.geometries.length;Ae<Ue;Ae++){var Ye=pl({geometry:x.geometries[Ae],type:"Feature",properties:l.properties},u);Ye&&M.push(Ye)}return new Na(M);case"FeatureCollection":for(Ae=0,Ue=x.features.length;Ae<Ue;Ae++){var Ge=pl(x.features[Ae],u);Ge&&M.push(Ge)}return new Na(M);default:throw new Error("Invalid GeoJSON object.")}}function Yc(l,u,x,N){return l?l(u,x):new pi(x,N&&N.markersInheritOptions&&N)}function uo(l){return new re(l[1],l[0],l[2])}function gl(l,u,x){for(var N=[],M=0,B=l.length,ie;M<B;M++)ie=u?gl(l[M],u-1,x):(x||uo)(l[M]),N.push(ie);return N}function xl(l,u){return l=me(l),l.alt!==void 0?[S(l.lng,u),S(l.lat,u),S(l.alt,u)]:[S(l.lng,u),S(l.lat,u)]}function mo(l,u,x,N){for(var M=[],B=0,ie=l.length;B<ie;B++)M.push(u?mo(l[B],ea(l[B])?0:u-1,x,N):xl(l[B],N));return!u&&x&&M.length>0&&M.push(M[0].slice()),M}function Za(l,u){return l.feature?o({},l.feature,{geometry:u}):xi(u)}function xi(l){return l.type==="Feature"||l.type==="FeatureCollection"?l:{type:"Feature",properties:{},geometry:l}}var Ar={toGeoJSON:function(l){return Za(this,{type:"Point",coordinates:xl(this.getLatLng(),l)})}};pi.include(Ar),qc.include(Ar),fl.include(Ar),As.include({toGeoJSON:function(l){var u=!ea(this._latlngs),x=mo(this._latlngs,u?1:0,!1,l);return Za(this,{type:(u?"Multi":"")+"LineString",coordinates:x})}}),gi.include({toGeoJSON:function(l){var u=!ea(this._latlngs),x=u&&!ea(this._latlngs[0]),N=mo(this._latlngs,x?2:u?1:0,!0,l);return u||(N=[N]),Za(this,{type:(x?"Multi":"")+"Polygon",coordinates:N})}}),Rr.include({toMultiPoint:function(l){var u=[];return this.eachLayer(function(x){u.push(x.toGeoJSON(l).geometry.coordinates)}),Za(this,{type:"MultiPoint",coordinates:u})},toGeoJSON:function(l){var u=this.feature&&this.feature.geometry&&this.feature.geometry.type;if(u==="MultiPoint")return this.toMultiPoint(l);var x=u==="GeometryCollection",N=[];return this.eachLayer(function(M){if(M.toGeoJSON){var B=M.toGeoJSON(l);if(x)N.push(B.geometry);else{var ie=xi(B);ie.type==="FeatureCollection"?N.push.apply(N,ie.features):N.push(ie)}}}),x?Za(this,{geometries:N,type:"GeometryCollection"}):{type:"FeatureCollection",features:N}}});function ho(l,u){return new Sa(l,u)}var em=ho,fs=Va.extend({options:{opacity:1,alt:"",interactive:!1,crossOrigin:!1,errorOverlayUrl:"",zIndex:1,className:""},initialize:function(l,u,x){this._url=l,this._bounds=ee(u),_(this,x)},onAdd:function(){this._image||(this._initImage(),this.options.opacity<1&&this._updateOpacity()),this.options.interactive&&(ht(this._image,"leaflet-interactive"),this.addInteractiveTarget(this._image)),this.getPane().appendChild(this._image),this._reset()},onRemove:function(){tn(this._image),this.options.interactive&&this.removeInteractiveTarget(this._image)},setOpacity:function(l){return this.options.opacity=l,this._image&&this._updateOpacity(),this},setStyle:function(l){return l.opacity&&this.setOpacity(l.opacity),this},bringToFront:function(){return this._map&&_r(this._image),this},bringToBack:function(){return this._map&&ai(this._image),this},setUrl:function(l){return this._url=l,this._image&&(this._image.src=l),this},setBounds:function(l){return this._bounds=ee(l),this._map&&this._reset(),this},getEvents:function(){var l={zoom:this._reset,viewreset:this._reset};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},getBounds:function(){return this._bounds},getElement:function(){return this._image},_initImage:function(){var l=this._url.tagName==="IMG",u=this._image=l?this._url:kt("img");if(ht(u,"leaflet-image-layer"),this._zoomAnimated&&ht(u,"leaflet-zoom-animated"),this.options.className&&ht(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onload=h(this.fire,this,"load"),u.onerror=h(this._overlayOnError,this,"error"),(this.options.crossOrigin||this.options.crossOrigin==="")&&(u.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),this.options.zIndex&&this._updateZIndex(),l){this._url=u.src;return}u.src=this._url,u.alt=this.options.alt},_animateZoom:function(l){var u=this._map.getZoomScale(l.zoom),x=this._map._latLngBoundsToNewLayerBounds(this._bounds,l.zoom,l.center).min;Ra(this._image,x,u)},_reset:function(){var l=this._image,u=new J(this._map.latLngToLayerPoint(this._bounds.getNorthWest()),this._map.latLngToLayerPoint(this._bounds.getSouthEast())),x=u.getSize();pn(l,u.min),l.style.width=x.x+"px",l.style.height=x.y+"px"},_updateOpacity:function(){xa(this._image,this.options.opacity)},_updateZIndex:function(){this._image&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._image.style.zIndex=this.options.zIndex)},_overlayOnError:function(){this.fire("error");var l=this.options.errorOverlayUrl;l&&this._url!==l&&(this._url=l,this._image.src=l)},getCenter:function(){return this._bounds.getCenter()}}),yi=function(l,u,x){return new fs(l,u,x)},fo=fs.extend({options:{autoplay:!0,loop:!0,keepAspectRatio:!0,muted:!1,playsInline:!0},_initImage:function(){var l=this._url.tagName==="VIDEO",u=this._image=l?this._url:kt("video");if(ht(u,"leaflet-image-layer"),this._zoomAnimated&&ht(u,"leaflet-zoom-animated"),this.options.className&&ht(u,this.options.className),u.onselectstart=w,u.onmousemove=w,u.onloadeddata=h(this.fire,this,"load"),l){for(var x=u.getElementsByTagName("source"),N=[],M=0;M<x.length;M++)N.push(x[M].src);this._url=x.length>0?N:[u.src];return}P(this._url)||(this._url=[this._url]),!this.options.keepAspectRatio&&Object.prototype.hasOwnProperty.call(u.style,"objectFit")&&(u.style.objectFit="fill"),u.autoplay=!!this.options.autoplay,u.loop=!!this.options.loop,u.muted=!!this.options.muted,u.playsInline=!!this.options.playsInline;for(var B=0;B<this._url.length;B++){var ie=kt("source");ie.src=this._url[B],u.appendChild(ie)}}});function tm(l,u,x){return new fo(l,u,x)}var Gs=fs.extend({_initImage:function(){var l=this._image=this._url;ht(l,"leaflet-image-layer"),this._zoomAnimated&&ht(l,"leaflet-zoom-animated"),this.options.className&&ht(l,this.options.className),l.onselectstart=w,l.onmousemove=w}});function nm(l,u,x){return new Gs(l,u,x)}var Wa=Va.extend({options:{interactive:!1,offset:[0,0],className:"",pane:void 0,content:""},initialize:function(l,u){l&&(l instanceof re||P(l))?(this._latlng=me(l),_(this,u)):(_(this,l),this._source=u),this.options.content&&(this._content=this.options.content)},openOn:function(l){return l=arguments.length?l:this._source._map,l.hasLayer(this)||l.addLayer(this),this},close:function(){return this._map&&this._map.removeLayer(this),this},toggle:function(l){return this._map?this.close():(arguments.length?this._source=l:l=this._source,this._prepareOpen(),this.openOn(l._map)),this},onAdd:function(l){this._zoomAnimated=l._zoomAnimated,this._container||this._initLayout(),l._fadeAnimated&&xa(this._container,0),clearTimeout(this._removeTimeout),this.getPane().appendChild(this._container),this.update(),l._fadeAnimated&&xa(this._container,1),this.bringToFront(),this.options.interactive&&(ht(this._container,"leaflet-interactive"),this.addInteractiveTarget(this._container))},onRemove:function(l){l._fadeAnimated?(xa(this._container,0),this._removeTimeout=setTimeout(h(tn,void 0,this._container),200)):tn(this._container),this.options.interactive&&(nn(this._container,"leaflet-interactive"),this.removeInteractiveTarget(this._container))},getLatLng:function(){return this._latlng},setLatLng:function(l){return this._latlng=me(l),this._map&&(this._updatePosition(),this._adjustPan()),this},getContent:function(){return this._content},setContent:function(l){return this._content=l,this.update(),this},getElement:function(){return this._container},update:function(){this._map&&(this._container.style.visibility="hidden",this._updateContent(),this._updateLayout(),this._updatePosition(),this._container.style.visibility="",this._adjustPan())},getEvents:function(){var l={zoom:this._updatePosition,viewreset:this._updatePosition};return this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},isOpen:function(){return!!this._map&&this._map.hasLayer(this)},bringToFront:function(){return this._map&&_r(this._container),this},bringToBack:function(){return this._map&&ai(this._container),this},_prepareOpen:function(l){var u=this._source;if(!u._map)return!1;if(u instanceof Na){u=null;var x=this._source._layers;for(var N in x)if(x[N]._map){u=x[N];break}if(!u)return!1;this._source=u}if(!l)if(u.getCenter)l=u.getCenter();else if(u.getLatLng)l=u.getLatLng();else if(u.getBounds)l=u.getBounds().getCenter();else throw new Error("Unable to get source layer LatLng.");return this.setLatLng(l),this._map&&this.update(),!0},_updateContent:function(){if(this._content){var l=this._contentNode,u=typeof this._content=="function"?this._content(this._source||this):this._content;if(typeof u=="string")l.innerHTML=u;else{for(;l.hasChildNodes();)l.removeChild(l.firstChild);l.appendChild(u)}this.fire("contentupdate")}},_updatePosition:function(){if(this._map){var l=this._map.latLngToLayerPoint(this._latlng),u=z(this.options.offset),x=this._getAnchor();this._zoomAnimated?pn(this._container,l.add(x)):u=u.add(l).add(x);var N=this._containerBottom=-u.y,M=this._containerLeft=-Math.round(this._containerWidth/2)+u.x;this._container.style.bottom=N+"px",this._container.style.left=M+"px"}},_getAnchor:function(){return[0,0]}});yt.include({_initOverlay:function(l,u,x,N){var M=u;return M instanceof l||(M=new l(N).setContent(u)),x&&M.setLatLng(x),M}}),Va.include({_initOverlay:function(l,u,x,N){var M=x;return M instanceof l?(_(M,N),M._source=this):(M=u&&!N?u:new l(N,this),M.setContent(x)),M}});var yl=Wa.extend({options:{pane:"popupPane",offset:[0,7],maxWidth:300,minWidth:50,maxHeight:null,autoPan:!0,autoPanPaddingTopLeft:null,autoPanPaddingBottomRight:null,autoPanPadding:[5,5],keepInView:!1,closeButton:!0,autoClose:!0,closeOnEscapeKey:!0,className:""},openOn:function(l){return l=arguments.length?l:this._source._map,!l.hasLayer(this)&&l._popup&&l._popup.options.autoClose&&l.removeLayer(l._popup),l._popup=this,Wa.prototype.openOn.call(this,l)},onAdd:function(l){Wa.prototype.onAdd.call(this,l),l.fire("popupopen",{popup:this}),this._source&&(this._source.fire("popupopen",{popup:this},!0),this._source instanceof Rs||this._source.on("preclick",Ms))},onRemove:function(l){Wa.prototype.onRemove.call(this,l),l.fire("popupclose",{popup:this}),this._source&&(this._source.fire("popupclose",{popup:this},!0),this._source instanceof Rs||this._source.off("preclick",Ms))},getEvents:function(){var l=Wa.prototype.getEvents.call(this);return(this.options.closeOnClick!==void 0?this.options.closeOnClick:this._map.options.closePopupOnClick)&&(l.preclick=this.close),this.options.keepInView&&(l.moveend=this._adjustPan),l},_initLayout:function(){var l="leaflet-popup",u=this._container=kt("div",l+" "+(this.options.className||"")+" leaflet-zoom-animated"),x=this._wrapper=kt("div",l+"-content-wrapper",u);if(this._contentNode=kt("div",l+"-content",x),di(u),ci(this._contentNode),mt(u,"contextmenu",Ms),this._tipContainer=kt("div",l+"-tip-container",u),this._tip=kt("div",l+"-tip",this._tipContainer),this.options.closeButton){var N=this._closeButton=kt("a",l+"-close-button",u);N.setAttribute("role","button"),N.setAttribute("aria-label","Close popup"),N.href="#close",N.innerHTML='<span aria-hidden="true">&#215;</span>',mt(N,"click",function(M){Sn(M),this.close()},this)}},_updateLayout:function(){var l=this._contentNode,u=l.style;u.width="",u.whiteSpace="nowrap";var x=l.offsetWidth;x=Math.min(x,this.options.maxWidth),x=Math.max(x,this.options.minWidth),u.width=x+1+"px",u.whiteSpace="",u.height="";var N=l.offsetHeight,M=this.options.maxHeight,B="leaflet-popup-scrolled";M&&N>M?(u.height=M+"px",ht(l,B)):nn(l,B),this._containerWidth=this._container.offsetWidth},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center),x=this._getAnchor();pn(this._container,u.add(x))},_adjustPan:function(){if(this.options.autoPan){if(this._map._panAnim&&this._map._panAnim.stop(),this._autopanning){this._autopanning=!1;return}var l=this._map,u=parseInt(Nr(this._container,"marginBottom"),10)||0,x=this._container.offsetHeight+u,N=this._containerWidth,M=new W(this._containerLeft,-x-this._containerBottom);M._add(Zs(this._container));var B=l.layerPointToContainerPoint(M),ie=z(this.options.autoPanPadding),pe=z(this.options.autoPanPaddingTopLeft||ie),je=z(this.options.autoPanPaddingBottomRight||ie),Ae=l.getSize(),Ue=0,Ye=0;B.x+N+je.x>Ae.x&&(Ue=B.x+N-Ae.x+je.x),B.x-Ue-pe.x<0&&(Ue=B.x-pe.x),B.y+x+je.y>Ae.y&&(Ye=B.y+x-Ae.y+je.y),B.y-Ye-pe.y<0&&(Ye=B.y-pe.y),(Ue||Ye)&&(this.options.keepInView&&(this._autopanning=!0),l.fire("autopanstart").panBy([Ue,Ye]))}},_getAnchor:function(){return z(this._source&&this._source._getPopupAnchor?this._source._getPopupAnchor():[0,0])}}),Gf=function(l,u){return new yl(l,u)};yt.mergeOptions({closePopupOnClick:!0}),yt.include({openPopup:function(l,u,x){return this._initOverlay(yl,l,u,x).openOn(this),this},closePopup:function(l){return l=arguments.length?l:this._popup,l&&l.close(),this}}),Va.include({bindPopup:function(l,u){return this._popup=this._initOverlay(yl,this._popup,l,u),this._popupHandlersAdded||(this.on({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!0),this},unbindPopup:function(){return this._popup&&(this.off({click:this._openPopup,keypress:this._onKeyPress,remove:this.closePopup,move:this._movePopup}),this._popupHandlersAdded=!1,this._popup=null),this},openPopup:function(l){return this._popup&&(this instanceof Na||(this._popup._source=this),this._popup._prepareOpen(l||this._latlng)&&this._popup.openOn(this._map)),this},closePopup:function(){return this._popup&&this._popup.close(),this},togglePopup:function(){return this._popup&&this._popup.toggle(this),this},isPopupOpen:function(){return this._popup?this._popup.isOpen():!1},setPopupContent:function(l){return this._popup&&this._popup.setContent(l),this},getPopup:function(){return this._popup},_openPopup:function(l){if(!(!this._popup||!this._map)){hs(l);var u=l.layer||l.target;if(this._popup._source===u&&!(u instanceof Rs)){this._map.hasLayer(this._popup)?this.closePopup():this.openPopup(l.latlng);return}this._popup._source=u,this.openPopup(l.latlng)}},_movePopup:function(l){this._popup.setLatLng(l.latlng)},_onKeyPress:function(l){l.originalEvent.keyCode===13&&this._openPopup(l)}});var po=Wa.extend({options:{pane:"tooltipPane",offset:[0,0],direction:"auto",permanent:!1,sticky:!1,opacity:.9},onAdd:function(l){Wa.prototype.onAdd.call(this,l),this.setOpacity(this.options.opacity),l.fire("tooltipopen",{tooltip:this}),this._source&&(this.addEventParent(this._source),this._source.fire("tooltipopen",{tooltip:this},!0))},onRemove:function(l){Wa.prototype.onRemove.call(this,l),l.fire("tooltipclose",{tooltip:this}),this._source&&(this.removeEventParent(this._source),this._source.fire("tooltipclose",{tooltip:this},!0))},getEvents:function(){var l=Wa.prototype.getEvents.call(this);return this.options.permanent||(l.preclick=this.close),l},_initLayout:function(){var l="leaflet-tooltip",u=l+" "+(this.options.className||"")+" leaflet-zoom-"+(this._zoomAnimated?"animated":"hide");this._contentNode=this._container=kt("div",u),this._container.setAttribute("role","tooltip"),this._container.setAttribute("id","leaflet-tooltip-"+p(this))},_updateLayout:function(){},_adjustPan:function(){},_setPosition:function(l){var u,x,N=this._map,M=this._container,B=N.latLngToContainerPoint(N.getCenter()),ie=N.layerPointToContainerPoint(l),pe=this.options.direction,je=M.offsetWidth,Ae=M.offsetHeight,Ue=z(this.options.offset),Ye=this._getAnchor();pe==="top"?(u=je/2,x=Ae):pe==="bottom"?(u=je/2,x=0):pe==="center"?(u=je/2,x=Ae/2):pe==="right"?(u=0,x=Ae/2):pe==="left"?(u=je,x=Ae/2):ie.x<B.x?(pe="right",u=0,x=Ae/2):(pe="left",u=je+(Ue.x+Ye.x)*2,x=Ae/2),l=l.subtract(z(u,x,!0)).add(Ue).add(Ye),nn(M,"leaflet-tooltip-right"),nn(M,"leaflet-tooltip-left"),nn(M,"leaflet-tooltip-top"),nn(M,"leaflet-tooltip-bottom"),ht(M,"leaflet-tooltip-"+pe),pn(M,l)},_updatePosition:function(){var l=this._map.latLngToLayerPoint(this._latlng);this._setPosition(l)},setOpacity:function(l){this.options.opacity=l,this._container&&xa(this._container,l)},_animateZoom:function(l){var u=this._map._latLngToNewLayerPoint(this._latlng,l.zoom,l.center);this._setPosition(u)},_getAnchor:function(){return z(this._source&&this._source._getTooltipAnchor&&!this.options.sticky?this._source._getTooltipAnchor():[0,0])}}),Qf=function(l,u){return new po(l,u)};yt.include({openTooltip:function(l,u,x){return this._initOverlay(po,l,u,x).openOn(this),this},closeTooltip:function(l){return l.close(),this}}),Va.include({bindTooltip:function(l,u){return this._tooltip&&this.isTooltipOpen()&&this.unbindTooltip(),this._tooltip=this._initOverlay(po,this._tooltip,l,u),this._initTooltipInteractions(),this._tooltip.options.permanent&&this._map&&this._map.hasLayer(this)&&this.openTooltip(),this},unbindTooltip:function(){return this._tooltip&&(this._initTooltipInteractions(!0),this.closeTooltip(),this._tooltip=null),this},_initTooltipInteractions:function(l){if(!(!l&&this._tooltipHandlersAdded)){var u=l?"off":"on",x={remove:this.closeTooltip,move:this._moveTooltip};this._tooltip.options.permanent?x.add=this._openTooltip:(x.mouseover=this._openTooltip,x.mouseout=this.closeTooltip,x.click=this._openTooltip,this._map?this._addFocusListeners():x.add=this._addFocusListeners),this._tooltip.options.sticky&&(x.mousemove=this._moveTooltip),this[u](x),this._tooltipHandlersAdded=!l}},openTooltip:function(l){return this._tooltip&&(this instanceof Na||(this._tooltip._source=this),this._tooltip._prepareOpen(l)&&(this._tooltip.openOn(this._map),this.getElement?this._setAriaDescribedByOnLayer(this):this.eachLayer&&this.eachLayer(this._setAriaDescribedByOnLayer,this))),this},closeTooltip:function(){if(this._tooltip)return this._tooltip.close()},toggleTooltip:function(){return this._tooltip&&this._tooltip.toggle(this),this},isTooltipOpen:function(){return this._tooltip.isOpen()},setTooltipContent:function(l){return this._tooltip&&this._tooltip.setContent(l),this},getTooltip:function(){return this._tooltip},_addFocusListeners:function(){this.getElement?this._addFocusListenersOnLayer(this):this.eachLayer&&this.eachLayer(this._addFocusListenersOnLayer,this)},_addFocusListenersOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&(mt(u,"focus",function(){this._tooltip._source=l,this.openTooltip()},this),mt(u,"blur",this.closeTooltip,this))},_setAriaDescribedByOnLayer:function(l){var u=typeof l.getElement=="function"&&l.getElement();u&&u.setAttribute("aria-describedby",this._tooltip._container.id)},_openTooltip:function(l){if(!(!this._tooltip||!this._map)){if(this._map.dragging&&this._map.dragging.moving()&&!this._openOnceFlag){this._openOnceFlag=!0;var u=this;this._map.once("moveend",function(){u._openOnceFlag=!1,u._openTooltip(l)});return}this._tooltip._source=l.layer||l.target,this.openTooltip(this._tooltip.options.sticky?l.latlng:void 0)}},_moveTooltip:function(l){var u=l.latlng,x,N;this._tooltip.options.sticky&&l.originalEvent&&(x=this._map.mouseEventToContainerPoint(l.originalEvent),N=this._map.containerPointToLayerPoint(x),u=this._map.layerPointToLatLng(N)),this._tooltip.setLatLng(u)}});var Vc=hi.extend({options:{iconSize:[12,12],html:!1,bgPos:null,className:"leaflet-div-icon"},createIcon:function(l){var u=l&&l.tagName==="DIV"?l:document.createElement("div"),x=this.options;if(x.html instanceof Element?(ca(u),u.appendChild(x.html)):u.innerHTML=x.html!==!1?x.html:"",x.bgPos){var N=z(x.bgPos);u.style.backgroundPosition=-N.x+"px "+-N.y+"px"}return this._setIconStyles(u,"icon"),u},createShadow:function(){return null}});function am(l){return new Vc(l)}hi.Default=fi;var Dr=Va.extend({options:{tileSize:256,opacity:1,updateWhenIdle:Ve.mobile,updateWhenZooming:!0,updateInterval:200,zIndex:1,bounds:null,minZoom:0,maxZoom:void 0,maxNativeZoom:void 0,minNativeZoom:void 0,noWrap:!1,pane:"tilePane",className:"",keepBuffer:2},initialize:function(l){_(this,l)},onAdd:function(){this._initContainer(),this._levels={},this._tiles={},this._resetView()},beforeAdd:function(l){l._addZoomLimit(this)},onRemove:function(l){this._removeAllTiles(),tn(this._container),l._removeZoomLimit(this),this._container=null,this._tileZoom=void 0},bringToFront:function(){return this._map&&(_r(this._container),this._setAutoZIndex(Math.max)),this},bringToBack:function(){return this._map&&(ai(this._container),this._setAutoZIndex(Math.min)),this},getContainer:function(){return this._container},setOpacity:function(l){return this.options.opacity=l,this._updateOpacity(),this},setZIndex:function(l){return this.options.zIndex=l,this._updateZIndex(),this},isLoading:function(){return this._loading},redraw:function(){if(this._map){this._removeAllTiles();var l=this._clampZoom(this._map.getZoom());l!==this._tileZoom&&(this._tileZoom=l,this._updateLevels()),this._update()}return this},getEvents:function(){var l={viewprereset:this._invalidateAll,viewreset:this._resetView,zoom:this._resetView,moveend:this._onMoveEnd};return this.options.updateWhenIdle||(this._onMove||(this._onMove=f(this._onMoveEnd,this.options.updateInterval,this)),l.move=this._onMove),this._zoomAnimated&&(l.zoomanim=this._animateZoom),l},createTile:function(){return document.createElement("div")},getTileSize:function(){var l=this.options.tileSize;return l instanceof W?l:new W(l,l)},_updateZIndex:function(){this._container&&this.options.zIndex!==void 0&&this.options.zIndex!==null&&(this._container.style.zIndex=this.options.zIndex)},_setAutoZIndex:function(l){for(var u=this.getPane().children,x=-l(-1/0,1/0),N=0,M=u.length,B;N<M;N++)B=u[N].style.zIndex,u[N]!==this._container&&B&&(x=l(x,+B));isFinite(x)&&(this.options.zIndex=x+l(-1,1),this._updateZIndex())},_updateOpacity:function(){if(this._map&&!Ve.ielt9){xa(this._container,this.options.opacity);var l=+new Date,u=!1,x=!1;for(var N in this._tiles){var M=this._tiles[N];if(!(!M.current||!M.loaded)){var B=Math.min(1,(l-M.loaded)/200);xa(M.el,B),B<1?u=!0:(M.active?x=!0:this._onOpaqueTile(M),M.active=!0)}}x&&!this._noPrune&&this._pruneTiles(),u&&(G(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this))}},_onOpaqueTile:w,_initContainer:function(){this._container||(this._container=kt("div","leaflet-layer "+(this.options.className||"")),this._updateZIndex(),this.options.opacity<1&&this._updateOpacity(),this.getPane().appendChild(this._container))},_updateLevels:function(){var l=this._tileZoom,u=this.options.maxZoom;if(l!==void 0){for(var x in this._levels)x=Number(x),this._levels[x].el.children.length||x===l?(this._levels[x].el.style.zIndex=u-Math.abs(l-x),this._onUpdateLevel(x)):(tn(this._levels[x].el),this._removeTilesAtZoom(x),this._onRemoveLevel(x),delete this._levels[x]);var N=this._levels[l],M=this._map;return N||(N=this._levels[l]={},N.el=kt("div","leaflet-tile-container leaflet-zoom-animated",this._container),N.el.style.zIndex=u,N.origin=M.project(M.unproject(M.getPixelOrigin()),l).round(),N.zoom=l,this._setZoomTransform(N,M.getCenter(),M.getZoom()),w(N.el.offsetWidth),this._onCreateLevel(N)),this._level=N,N}},_onUpdateLevel:w,_onRemoveLevel:w,_onCreateLevel:w,_pruneTiles:function(){if(this._map){var l,u,x=this._map.getZoom();if(x>this.options.maxZoom||x<this.options.minZoom){this._removeAllTiles();return}for(l in this._tiles)u=this._tiles[l],u.retain=u.current;for(l in this._tiles)if(u=this._tiles[l],u.current&&!u.active){var N=u.coords;this._retainParent(N.x,N.y,N.z,N.z-5)||this._retainChildren(N.x,N.y,N.z,N.z+2)}for(l in this._tiles)this._tiles[l].retain||this._removeTile(l)}},_removeTilesAtZoom:function(l){for(var u in this._tiles)this._tiles[u].coords.z===l&&this._removeTile(u)},_removeAllTiles:function(){for(var l in this._tiles)this._removeTile(l)},_invalidateAll:function(){for(var l in this._levels)tn(this._levels[l].el),this._onRemoveLevel(Number(l)),delete this._levels[l];this._removeAllTiles(),this._tileZoom=void 0},_retainParent:function(l,u,x,N){var M=Math.floor(l/2),B=Math.floor(u/2),ie=x-1,pe=new W(+M,+B);pe.z=+ie;var je=this._tileCoordsToKey(pe),Ae=this._tiles[je];return Ae&&Ae.active?(Ae.retain=!0,!0):(Ae&&Ae.loaded&&(Ae.retain=!0),ie>N?this._retainParent(M,B,ie,N):!1)},_retainChildren:function(l,u,x,N){for(var M=2*l;M<2*l+2;M++)for(var B=2*u;B<2*u+2;B++){var ie=new W(M,B);ie.z=x+1;var pe=this._tileCoordsToKey(ie),je=this._tiles[pe];if(je&&je.active){je.retain=!0;continue}else je&&je.loaded&&(je.retain=!0);x+1<N&&this._retainChildren(M,B,x+1,N)}},_resetView:function(l){var u=l&&(l.pinch||l.flyTo);this._setView(this._map.getCenter(),this._map.getZoom(),u,u)},_animateZoom:function(l){this._setView(l.center,l.zoom,!0,l.noUpdate)},_clampZoom:function(l){var u=this.options;return u.minNativeZoom!==void 0&&l<u.minNativeZoom?u.minNativeZoom:u.maxNativeZoom!==void 0&&u.maxNativeZoom<l?u.maxNativeZoom:l},_setView:function(l,u,x,N){var M=Math.round(u);this.options.maxZoom!==void 0&&M>this.options.maxZoom||this.options.minZoom!==void 0&&M<this.options.minZoom?M=void 0:M=this._clampZoom(M);var B=this.options.updateWhenZooming&&M!==this._tileZoom;(!N||B)&&(this._tileZoom=M,this._abortLoading&&this._abortLoading(),this._updateLevels(),this._resetGrid(),M!==void 0&&this._update(l),x||this._pruneTiles(),this._noPrune=!!x),this._setZoomTransforms(l,u)},_setZoomTransforms:function(l,u){for(var x in this._levels)this._setZoomTransform(this._levels[x],l,u)},_setZoomTransform:function(l,u,x){var N=this._map.getZoomScale(x,l.zoom),M=l.origin.multiplyBy(N).subtract(this._map._getNewPixelOrigin(u,x)).round();Ve.any3d?Ra(l.el,M,N):pn(l.el,M)},_resetGrid:function(){var l=this._map,u=l.options.crs,x=this._tileSize=this.getTileSize(),N=this._tileZoom,M=this._map.getPixelWorldBounds(this._tileZoom);M&&(this._globalTileRange=this._pxBoundsToTileRange(M)),this._wrapX=u.wrapLng&&!this.options.noWrap&&[Math.floor(l.project([0,u.wrapLng[0]],N).x/x.x),Math.ceil(l.project([0,u.wrapLng[1]],N).x/x.y)],this._wrapY=u.wrapLat&&!this.options.noWrap&&[Math.floor(l.project([u.wrapLat[0],0],N).y/x.x),Math.ceil(l.project([u.wrapLat[1],0],N).y/x.y)]},_onMoveEnd:function(){!this._map||this._map._animatingZoom||this._update()},_getTiledPixelBounds:function(l){var u=this._map,x=u._animatingZoom?Math.max(u._animateToZoom,u.getZoom()):u.getZoom(),N=u.getZoomScale(x,this._tileZoom),M=u.project(l,this._tileZoom).floor(),B=u.getSize().divideBy(N*2);return new J(M.subtract(B),M.add(B))},_update:function(l){var u=this._map;if(u){var x=this._clampZoom(u.getZoom());if(l===void 0&&(l=u.getCenter()),this._tileZoom!==void 0){var N=this._getTiledPixelBounds(l),M=this._pxBoundsToTileRange(N),B=M.getCenter(),ie=[],pe=this.options.keepBuffer,je=new J(M.getBottomLeft().subtract([pe,-pe]),M.getTopRight().add([pe,-pe]));if(!(isFinite(M.min.x)&&isFinite(M.min.y)&&isFinite(M.max.x)&&isFinite(M.max.y)))throw new Error("Attempted to load an infinite number of tiles");for(var Ae in this._tiles){var Ue=this._tiles[Ae].coords;(Ue.z!==this._tileZoom||!je.contains(new W(Ue.x,Ue.y)))&&(this._tiles[Ae].current=!1)}if(Math.abs(x-this._tileZoom)>1){this._setView(l,x);return}for(var Ye=M.min.y;Ye<=M.max.y;Ye++)for(var Ge=M.min.x;Ge<=M.max.x;Ge++){var dt=new W(Ge,Ye);if(dt.z=this._tileZoom,!!this._isValidTile(dt)){var an=this._tiles[this._tileCoordsToKey(dt)];an?an.current=!0:ie.push(dt)}}if(ie.sort(function(ta,Aa){return ta.distanceTo(B)-Aa.distanceTo(B)}),ie.length!==0){this._loading||(this._loading=!0,this.fire("loading"));var gn=document.createDocumentFragment();for(Ge=0;Ge<ie.length;Ge++)this._addTile(ie[Ge],gn);this._level.el.appendChild(gn)}}}},_isValidTile:function(l){var u=this._map.options.crs;if(!u.infinite){var x=this._globalTileRange;if(!u.wrapLng&&(l.x<x.min.x||l.x>x.max.x)||!u.wrapLat&&(l.y<x.min.y||l.y>x.max.y))return!1}if(!this.options.bounds)return!0;var N=this._tileCoordsToBounds(l);return ee(this.options.bounds).overlaps(N)},_keyToBounds:function(l){return this._tileCoordsToBounds(this._keyToTileCoords(l))},_tileCoordsToNwSe:function(l){var u=this._map,x=this.getTileSize(),N=l.scaleBy(x),M=N.add(x),B=u.unproject(N,l.z),ie=u.unproject(M,l.z);return[B,ie]},_tileCoordsToBounds:function(l){var u=this._tileCoordsToNwSe(l),x=new ae(u[0],u[1]);return this.options.noWrap||(x=this._map.wrapLatLngBounds(x)),x},_tileCoordsToKey:function(l){return l.x+":"+l.y+":"+l.z},_keyToTileCoords:function(l){var u=l.split(":"),x=new W(+u[0],+u[1]);return x.z=+u[2],x},_removeTile:function(l){var u=this._tiles[l];u&&(tn(u.el),delete this._tiles[l],this.fire("tileunload",{tile:u.el,coords:this._keyToTileCoords(l)}))},_initTile:function(l){ht(l,"leaflet-tile");var u=this.getTileSize();l.style.width=u.x+"px",l.style.height=u.y+"px",l.onselectstart=w,l.onmousemove=w,Ve.ielt9&&this.options.opacity<1&&xa(l,this.options.opacity)},_addTile:function(l,u){var x=this._getTilePos(l),N=this._tileCoordsToKey(l),M=this.createTile(this._wrapCoords(l),h(this._tileReady,this,l));this._initTile(M),this.createTile.length<2&&Y(h(this._tileReady,this,l,null,M)),pn(M,x),this._tiles[N]={el:M,coords:l,current:!0},u.appendChild(M),this.fire("tileloadstart",{tile:M,coords:l})},_tileReady:function(l,u,x){u&&this.fire("tileerror",{error:u,tile:x,coords:l});var N=this._tileCoordsToKey(l);x=this._tiles[N],x&&(x.loaded=+new Date,this._map._fadeAnimated?(xa(x.el,0),G(this._fadeFrame),this._fadeFrame=Y(this._updateOpacity,this)):(x.active=!0,this._pruneTiles()),u||(ht(x.el,"leaflet-tile-loaded"),this.fire("tileload",{tile:x.el,coords:l})),this._noTilesToLoad()&&(this._loading=!1,this.fire("load"),Ve.ielt9||!this._map._fadeAnimated?Y(this._pruneTiles,this):setTimeout(h(this._pruneTiles,this),250)))},_getTilePos:function(l){return l.scaleBy(this.getTileSize()).subtract(this._level.origin)},_wrapCoords:function(l){var u=new W(this._wrapX?v(l.x,this._wrapX):l.x,this._wrapY?v(l.y,this._wrapY):l.y);return u.z=l.z,u},_pxBoundsToTileRange:function(l){var u=this.getTileSize();return new J(l.min.unscaleBy(u).floor(),l.max.unscaleBy(u).ceil().subtract([1,1]))},_noTilesToLoad:function(){for(var l in this._tiles)if(!this._tiles[l].loaded)return!1;return!0}});function Ka(l){return new Dr(l)}var Or=Dr.extend({options:{minZoom:0,maxZoom:18,subdomains:"abc",errorTileUrl:"",zoomOffset:0,tms:!1,zoomReverse:!1,detectRetina:!1,crossOrigin:!1,referrerPolicy:!1},initialize:function(l,u){this._url=l,u=_(this,u),u.detectRetina&&Ve.retina&&u.maxZoom>0?(u.tileSize=Math.floor(u.tileSize/2),u.zoomReverse?(u.zoomOffset--,u.minZoom=Math.min(u.maxZoom,u.minZoom+1)):(u.zoomOffset++,u.maxZoom=Math.max(u.minZoom,u.maxZoom-1)),u.minZoom=Math.max(0,u.minZoom)):u.zoomReverse?u.minZoom=Math.min(u.maxZoom,u.minZoom):u.maxZoom=Math.max(u.minZoom,u.maxZoom),typeof u.subdomains=="string"&&(u.subdomains=u.subdomains.split("")),this.on("tileunload",this._onTileRemove)},setUrl:function(l,u){return this._url===l&&u===void 0&&(u=!0),this._url=l,u||this.redraw(),this},createTile:function(l,u){var x=document.createElement("img");return mt(x,"load",h(this._tileOnLoad,this,u,x)),mt(x,"error",h(this._tileOnError,this,u,x)),(this.options.crossOrigin||this.options.crossOrigin==="")&&(x.crossOrigin=this.options.crossOrigin===!0?"":this.options.crossOrigin),typeof this.options.referrerPolicy=="string"&&(x.referrerPolicy=this.options.referrerPolicy),x.alt="",x.src=this.getTileUrl(l),x},getTileUrl:function(l){var u={r:Ve.retina?"@2x":"",s:this._getSubdomain(l),x:l.x,y:l.y,z:this._getZoomForUrl()};if(this._map&&!this._map.options.crs.infinite){var x=this._globalTileRange.max.y-l.y;this.options.tms&&(u.y=x),u["-y"]=x}return O(this._url,o(u,this.options))},_tileOnLoad:function(l,u){Ve.ielt9?setTimeout(h(l,this,null,u),0):l(null,u)},_tileOnError:function(l,u,x){var N=this.options.errorTileUrl;N&&u.getAttribute("src")!==N&&(u.src=N),l(x,u)},_onTileRemove:function(l){l.tile.onload=null},_getZoomForUrl:function(){var l=this._tileZoom,u=this.options.maxZoom,x=this.options.zoomReverse,N=this.options.zoomOffset;return x&&(l=u-l),l+N},_getSubdomain:function(l){var u=Math.abs(l.x+l.y)%this.options.subdomains.length;return this.options.subdomains[u]},_abortLoading:function(){var l,u;for(l in this._tiles)if(this._tiles[l].coords.z!==this._tileZoom&&(u=this._tiles[l].el,u.onload=w,u.onerror=w,!u.complete)){u.src=A;var x=this._tiles[l].coords;tn(u),delete this._tiles[l],this.fire("tileabort",{tile:u,coords:x})}},_removeTile:function(l){var u=this._tiles[l];if(u)return u.el.setAttribute("src",A),Dr.prototype._removeTile.call(this,l)},_tileReady:function(l,u,x){if(!(!this._map||x&&x.getAttribute("src")===A))return Dr.prototype._tileReady.call(this,l,u,x)}});function Ca(l,u){return new Or(l,u)}var ka=Or.extend({defaultWmsParams:{service:"WMS",request:"GetMap",layers:"",styles:"",format:"image/jpeg",transparent:!1,version:"1.1.1"},options:{crs:null,uppercase:!1},initialize:function(l,u){this._url=l;var x=o({},this.defaultWmsParams);for(var N in u)N in this.options||(x[N]=u[N]);u=_(this,u);var M=u.detectRetina&&Ve.retina?2:1,B=this.getTileSize();x.width=B.x*M,x.height=B.y*M,this.wmsParams=x},onAdd:function(l){this._crs=this.options.crs||l.options.crs,this._wmsVersion=parseFloat(this.wmsParams.version);var u=this._wmsVersion>=1.3?"crs":"srs";this.wmsParams[u]=this._crs.code,Or.prototype.onAdd.call(this,l)},getTileUrl:function(l){var u=this._tileCoordsToNwSe(l),x=this._crs,N=se(x.project(u[0]),x.project(u[1])),M=N.min,B=N.max,ie=(this._wmsVersion>=1.3&&this._crs===Qu?[M.y,M.x,B.y,B.x]:[M.x,M.y,B.x,B.y]).join(","),pe=Or.prototype.getTileUrl.call(this,l);return pe+k(this.wmsParams,pe,this.options.uppercase)+(this.options.uppercase?"&BBOX=":"&bbox=")+ie},setParams:function(l,u){return o(this.wmsParams,l),u||this.redraw(),this}});function bi(l,u){return new ka(l,u)}Or.WMS=ka,Ca.wms=bi;var Ga=Va.extend({options:{padding:.1},initialize:function(l){_(this,l),p(this),this._layers=this._layers||{}},onAdd:function(){this._container||(this._initContainer(),ht(this._container,"leaflet-zoom-animated")),this.getPane().appendChild(this._container),this._update(),this.on("update",this._updatePaths,this)},onRemove:function(){this.off("update",this._updatePaths,this),this._destroyContainer()},getEvents:function(){var l={viewreset:this._reset,zoom:this._onZoom,moveend:this._update,zoomend:this._onZoomEnd};return this._zoomAnimated&&(l.zoomanim=this._onAnimZoom),l},_onAnimZoom:function(l){this._updateTransform(l.center,l.zoom)},_onZoom:function(){this._updateTransform(this._map.getCenter(),this._map.getZoom())},_updateTransform:function(l,u){var x=this._map.getZoomScale(u,this._zoom),N=this._map.getSize().multiplyBy(.5+this.options.padding),M=this._map.project(this._center,u),B=N.multiplyBy(-x).add(M).subtract(this._map._getNewPixelOrigin(l,u));Ve.any3d?Ra(this._container,B,x):pn(this._container,B)},_reset:function(){this._update(),this._updateTransform(this._center,this._zoom);for(var l in this._layers)this._layers[l]._reset()},_onZoomEnd:function(){for(var l in this._layers)this._layers[l]._project()},_updatePaths:function(){for(var l in this._layers)this._layers[l]._update()},_update:function(){var l=this.options.padding,u=this._map.getSize(),x=this._map.containerPointToLayerPoint(u.multiplyBy(-l)).round();this._bounds=new J(x,x.add(u.multiplyBy(1+l*2)).round()),this._center=this._map.getCenter(),this._zoom=this._map.getZoom()}}),bl=Ga.extend({options:{tolerance:0},getEvents:function(){var l=Ga.prototype.getEvents.call(this);return l.viewprereset=this._onViewPreReset,l},_onViewPreReset:function(){this._postponeUpdatePaths=!0},onAdd:function(){Ga.prototype.onAdd.call(this),this._draw()},_initContainer:function(){var l=this._container=document.createElement("canvas");mt(l,"mousemove",this._onMouseMove,this),mt(l,"click dblclick mousedown mouseup contextmenu",this._onClick,this),mt(l,"mouseout",this._handleMouseOut,this),l._leaflet_disable_events=!0,this._ctx=l.getContext("2d")},_destroyContainer:function(){G(this._redrawRequest),delete this._ctx,tn(this._container),Dt(this._container),delete this._container},_updatePaths:function(){if(!this._postponeUpdatePaths){var l;this._redrawBounds=null;for(var u in this._layers)l=this._layers[u],l._update();this._redraw()}},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ga.prototype._update.call(this);var l=this._bounds,u=this._container,x=l.getSize(),N=Ve.retina?2:1;pn(u,l.min),u.width=N*x.x,u.height=N*x.y,u.style.width=x.x+"px",u.style.height=x.y+"px",Ve.retina&&this._ctx.scale(2,2),this._ctx.translate(-l.min.x,-l.min.y),this.fire("update")}},_reset:function(){Ga.prototype._reset.call(this),this._postponeUpdatePaths&&(this._postponeUpdatePaths=!1,this._updatePaths())},_initPath:function(l){this._updateDashArray(l),this._layers[p(l)]=l;var u=l._order={layer:l,prev:this._drawLast,next:null};this._drawLast&&(this._drawLast.next=u),this._drawLast=u,this._drawFirst=this._drawFirst||this._drawLast},_addPath:function(l){this._requestRedraw(l)},_removePath:function(l){var u=l._order,x=u.next,N=u.prev;x?x.prev=N:this._drawLast=N,N?N.next=x:this._drawFirst=x,delete l._order,delete this._layers[p(l)],this._requestRedraw(l)},_updatePath:function(l){this._extendRedrawBounds(l),l._project(),l._update(),this._requestRedraw(l)},_updateStyle:function(l){this._updateDashArray(l),this._requestRedraw(l)},_updateDashArray:function(l){if(typeof l.options.dashArray=="string"){var u=l.options.dashArray.split(/[, ]+/),x=[],N,M;for(M=0;M<u.length;M++){if(N=Number(u[M]),isNaN(N))return;x.push(N)}l.options._dashArray=x}else l.options._dashArray=l.options.dashArray},_requestRedraw:function(l){this._map&&(this._extendRedrawBounds(l),this._redrawRequest=this._redrawRequest||Y(this._redraw,this))},_extendRedrawBounds:function(l){if(l._pxBounds){var u=(l.options.weight||0)+1;this._redrawBounds=this._redrawBounds||new J,this._redrawBounds.extend(l._pxBounds.min.subtract([u,u])),this._redrawBounds.extend(l._pxBounds.max.add([u,u]))}},_redraw:function(){this._redrawRequest=null,this._redrawBounds&&(this._redrawBounds.min._floor(),this._redrawBounds.max._ceil()),this._clear(),this._draw(),this._redrawBounds=null},_clear:function(){var l=this._redrawBounds;if(l){var u=l.getSize();this._ctx.clearRect(l.min.x,l.min.y,u.x,u.y)}else this._ctx.save(),this._ctx.setTransform(1,0,0,1,0,0),this._ctx.clearRect(0,0,this._container.width,this._container.height),this._ctx.restore()},_draw:function(){var l,u=this._redrawBounds;if(this._ctx.save(),u){var x=u.getSize();this._ctx.beginPath(),this._ctx.rect(u.min.x,u.min.y,x.x,x.y),this._ctx.clip()}this._drawing=!0;for(var N=this._drawFirst;N;N=N.next)l=N.layer,(!u||l._pxBounds&&l._pxBounds.intersects(u))&&l._updatePath();this._drawing=!1,this._ctx.restore()},_updatePoly:function(l,u){if(this._drawing){var x,N,M,B,ie=l._parts,pe=ie.length,je=this._ctx;if(pe){for(je.beginPath(),x=0;x<pe;x++){for(N=0,M=ie[x].length;N<M;N++)B=ie[x][N],je[N?"lineTo":"moveTo"](B.x,B.y);u&&je.closePath()}this._fillStroke(je,l)}}},_updateCircle:function(l){if(!(!this._drawing||l._empty())){var u=l._point,x=this._ctx,N=Math.max(Math.round(l._radius),1),M=(Math.max(Math.round(l._radiusY),1)||N)/N;M!==1&&(x.save(),x.scale(1,M)),x.beginPath(),x.arc(u.x,u.y/M,N,0,Math.PI*2,!1),M!==1&&x.restore(),this._fillStroke(x,l)}},_fillStroke:function(l,u){var x=u.options;x.fill&&(l.globalAlpha=x.fillOpacity,l.fillStyle=x.fillColor||x.color,l.fill(x.fillRule||"evenodd")),x.stroke&&x.weight!==0&&(l.setLineDash&&l.setLineDash(u.options&&u.options._dashArray||[]),l.globalAlpha=x.opacity,l.lineWidth=x.weight,l.strokeStyle=x.color,l.lineCap=x.lineCap,l.lineJoin=x.lineJoin,l.stroke())},_onClick:function(l){for(var u=this._map.mouseEventToLayerPoint(l),x,N,M=this._drawFirst;M;M=M.next)x=M.layer,x.options.interactive&&x._containsPoint(u)&&(!(l.type==="click"||l.type==="preclick")||!this._map._draggableMoved(x))&&(N=x);this._fireEvent(N?[N]:!1,l)},_onMouseMove:function(l){if(!(!this._map||this._map.dragging.moving()||this._map._animatingZoom)){var u=this._map.mouseEventToLayerPoint(l);this._handleMouseHover(l,u)}},_handleMouseOut:function(l){var u=this._hoveredLayer;u&&(nn(this._container,"leaflet-interactive"),this._fireEvent([u],l,"mouseout"),this._hoveredLayer=null,this._mouseHoverThrottled=!1)},_handleMouseHover:function(l,u){if(!this._mouseHoverThrottled){for(var x,N,M=this._drawFirst;M;M=M.next)x=M.layer,x.options.interactive&&x._containsPoint(u)&&(N=x);N!==this._hoveredLayer&&(this._handleMouseOut(l),N&&(ht(this._container,"leaflet-interactive"),this._fireEvent([N],l,"mouseover"),this._hoveredLayer=N)),this._fireEvent(this._hoveredLayer?[this._hoveredLayer]:!1,l),this._mouseHoverThrottled=!0,setTimeout(h(function(){this._mouseHoverThrottled=!1},this),32)}},_fireEvent:function(l,u,x){this._map._fireDOMEvent(u,x||u.type,l)},_bringToFront:function(l){var u=l._order;if(u){var x=u.next,N=u.prev;if(x)x.prev=N;else return;N?N.next=x:x&&(this._drawFirst=x),u.prev=this._drawLast,this._drawLast.next=u,u.next=null,this._drawLast=u,this._requestRedraw(l)}},_bringToBack:function(l){var u=l._order;if(u){var x=u.next,N=u.prev;if(N)N.next=x;else return;x?x.prev=N:N&&(this._drawLast=N),u.prev=null,u.next=this._drawFirst,this._drawFirst.prev=u,this._drawFirst=u,this._requestRedraw(l)}}});function vl(l){return Ve.canvas?new bl(l):null}var Pr=function(){try{return document.namespaces.add("lvml","urn:schemas-microsoft-com:vml"),function(l){return document.createElement("<lvml:"+l+' class="lvml">')}}catch{}return function(l){return document.createElement("<"+l+' xmlns="urn:schemas-microsoft.com:vml" class="lvml">')}}(),vi={_initContainer:function(){this._container=kt("div","leaflet-vml-container")},_update:function(){this._map._animatingZoom||(Ga.prototype._update.call(this),this.fire("update"))},_initPath:function(l){var u=l._container=Pr("shape");ht(u,"leaflet-vml-shape "+(this.options.className||"")),u.coordsize="1 1",l._path=Pr("path"),u.appendChild(l._path),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){var u=l._container;this._container.appendChild(u),l.options.interactive&&l.addInteractiveTarget(u)},_removePath:function(l){var u=l._container;tn(u),l.removeInteractiveTarget(u),delete this._layers[p(l)]},_updateStyle:function(l){var u=l._stroke,x=l._fill,N=l.options,M=l._container;M.stroked=!!N.stroke,M.filled=!!N.fill,N.stroke?(u||(u=l._stroke=Pr("stroke")),M.appendChild(u),u.weight=N.weight+"px",u.color=N.color,u.opacity=N.opacity,N.dashArray?u.dashStyle=P(N.dashArray)?N.dashArray.join(" "):N.dashArray.replace(/( *, *)/g," "):u.dashStyle="",u.endcap=N.lineCap.replace("butt","flat"),u.joinstyle=N.lineJoin):u&&(M.removeChild(u),l._stroke=null),N.fill?(x||(x=l._fill=Pr("fill")),M.appendChild(x),x.color=N.fillColor||N.color,x.opacity=N.fillOpacity):x&&(M.removeChild(x),l._fill=null)},_updateCircle:function(l){var u=l._point.round(),x=Math.round(l._radius),N=Math.round(l._radiusY||x);this._setPath(l,l._empty()?"M0 0":"AL "+u.x+","+u.y+" "+x+","+N+" 0,"+65535*360)},_setPath:function(l,u){l._path.v=u},_bringToFront:function(l){_r(l._container)},_bringToBack:function(l){ai(l._container)}},jl=Ve.vml?Pr:it,Qs=Ga.extend({_initContainer:function(){this._container=jl("svg"),this._container.setAttribute("pointer-events","none"),this._rootGroup=jl("g"),this._container.appendChild(this._rootGroup)},_destroyContainer:function(){tn(this._container),Dt(this._container),delete this._container,delete this._rootGroup,delete this._svgSize},_update:function(){if(!(this._map._animatingZoom&&this._bounds)){Ga.prototype._update.call(this);var l=this._bounds,u=l.getSize(),x=this._container;(!this._svgSize||!this._svgSize.equals(u))&&(this._svgSize=u,x.setAttribute("width",u.x),x.setAttribute("height",u.y)),pn(x,l.min),x.setAttribute("viewBox",[l.min.x,l.min.y,u.x,u.y].join(" ")),this.fire("update")}},_initPath:function(l){var u=l._path=jl("path");l.options.className&&ht(u,l.options.className),l.options.interactive&&ht(u,"leaflet-interactive"),this._updateStyle(l),this._layers[p(l)]=l},_addPath:function(l){this._rootGroup||this._initContainer(),this._rootGroup.appendChild(l._path),l.addInteractiveTarget(l._path)},_removePath:function(l){tn(l._path),l.removeInteractiveTarget(l._path),delete this._layers[p(l)]},_updatePath:function(l){l._project(),l._update()},_updateStyle:function(l){var u=l._path,x=l.options;u&&(x.stroke?(u.setAttribute("stroke",x.color),u.setAttribute("stroke-opacity",x.opacity),u.setAttribute("stroke-width",x.weight),u.setAttribute("stroke-linecap",x.lineCap),u.setAttribute("stroke-linejoin",x.lineJoin),x.dashArray?u.setAttribute("stroke-dasharray",x.dashArray):u.removeAttribute("stroke-dasharray"),x.dashOffset?u.setAttribute("stroke-dashoffset",x.dashOffset):u.removeAttribute("stroke-dashoffset")):u.setAttribute("stroke","none"),x.fill?(u.setAttribute("fill",x.fillColor||x.color),u.setAttribute("fill-opacity",x.fillOpacity),u.setAttribute("fill-rule",x.fillRule||"evenodd")):u.setAttribute("fill","none"))},_updatePoly:function(l,u){this._setPath(l,Te(l._parts,u))},_updateCircle:function(l){var u=l._point,x=Math.max(Math.round(l._radius),1),N=Math.max(Math.round(l._radiusY),1)||x,M="a"+x+","+N+" 0 1,0 ",B=l._empty()?"M0 0":"M"+(u.x-x)+","+u.y+M+x*2+",0 "+M+-x*2+",0 ";this._setPath(l,B)},_setPath:function(l,u){l._path.setAttribute("d",u)},_bringToFront:function(l){_r(l._path)},_bringToBack:function(l){ai(l._path)}});Ve.vml&&Qs.include(vi);function Lr(l){return Ve.svg||Ve.vml?new Qs(l):null}yt.include({getRenderer:function(l){var u=l.options.renderer||this._getPaneRenderer(l.options.pane)||this.options.renderer||this._renderer;return u||(u=this._renderer=this._createRenderer()),this.hasLayer(u)||this.addLayer(u),u},_getPaneRenderer:function(l){if(l==="overlayPane"||l===void 0)return!1;var u=this._paneRenderers[l];return u===void 0&&(u=this._createRenderer({pane:l}),this._paneRenderers[l]=u),u},_createRenderer:function(l){return this.options.preferCanvas&&vl(l)||Lr(l)}});var sm=gi.extend({initialize:function(l,u){gi.prototype.initialize.call(this,this._boundsToLatLngs(l),u)},setBounds:function(l){return this.setLatLngs(this._boundsToLatLngs(l))},_boundsToLatLngs:function(l){return l=ee(l),[l.getSouthWest(),l.getNorthWest(),l.getNorthEast(),l.getSouthEast()]}});function Ta(l,u){return new sm(l,u)}Qs.create=jl,Qs.pointsToPath=Te,Sa.geometryToLayer=pl,Sa.coordsToLatLng=uo,Sa.coordsToLatLngs=gl,Sa.latLngToCoords=xl,Sa.latLngsToCoords=mo,Sa.getFeature=Za,Sa.asFeature=xi,yt.mergeOptions({boxZoom:!0});var go=Ya.extend({initialize:function(l){this._map=l,this._container=l._container,this._pane=l._panes.overlayPane,this._resetStateTimeout=0,l.on("unload",this._destroy,this)},addHooks:function(){mt(this._container,"mousedown",this._onMouseDown,this)},removeHooks:function(){Dt(this._container,"mousedown",this._onMouseDown,this)},moved:function(){return this._moved},_destroy:function(){tn(this._pane),delete this._pane},_resetState:function(){this._resetStateTimeout=0,this._moved=!1},_clearDeferredResetState:function(){this._resetStateTimeout!==0&&(clearTimeout(this._resetStateTimeout),this._resetStateTimeout=0)},_onMouseDown:function(l){if(!l.shiftKey||l.which!==1&&l.button!==1)return!1;this._clearDeferredResetState(),this._resetState(),ds(),ol(),this._startPoint=this._map.mouseEventToContainerPoint(l),mt(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseMove:function(l){this._moved||(this._moved=!0,this._box=kt("div","leaflet-zoom-box",this._container),ht(this._container,"leaflet-crosshair"),this._map.fire("boxzoomstart")),this._point=this._map.mouseEventToContainerPoint(l);var u=new J(this._point,this._startPoint),x=u.getSize();pn(this._box,u.min),this._box.style.width=x.x+"px",this._box.style.height=x.y+"px"},_finish:function(){this._moved&&(tn(this._box),nn(this._container,"leaflet-crosshair")),ll(),Dc(),Dt(document,{contextmenu:hs,mousemove:this._onMouseMove,mouseup:this._onMouseUp,keydown:this._onKeyDown},this)},_onMouseUp:function(l){if(!(l.which!==1&&l.button!==1)&&(this._finish(),!!this._moved)){this._clearDeferredResetState(),this._resetStateTimeout=setTimeout(h(this._resetState,this),0);var u=new ae(this._map.containerPointToLatLng(this._startPoint),this._map.containerPointToLatLng(this._point));this._map.fitBounds(u).fire("boxzoomend",{boxZoomBounds:u})}},_onKeyDown:function(l){l.keyCode===27&&(this._finish(),this._clearDeferredResetState(),this._resetState())}});yt.addInitHook("addHandler","boxZoom",go),yt.mergeOptions({doubleClickZoom:!0});var ps=Ya.extend({addHooks:function(){this._map.on("dblclick",this._onDoubleClick,this)},removeHooks:function(){this._map.off("dblclick",this._onDoubleClick,this)},_onDoubleClick:function(l){var u=this._map,x=u.getZoom(),N=u.options.zoomDelta,M=l.originalEvent.shiftKey?x-N:x+N;u.options.doubleClickZoom==="center"?u.setZoom(M):u.setZoomAround(l.containerPoint,M)}});yt.addInitHook("addHandler","doubleClickZoom",ps),yt.mergeOptions({dragging:!0,inertia:!0,inertiaDeceleration:3400,inertiaMaxSpeed:1/0,easeLinearity:.2,worldCopyJump:!1,maxBoundsViscosity:0});var Zc=Ya.extend({addHooks:function(){if(!this._draggable){var l=this._map;this._draggable=new Ks(l._mapPane,l._container),this._draggable.on({dragstart:this._onDragStart,drag:this._onDrag,dragend:this._onDragEnd},this),this._draggable.on("predrag",this._onPreDragLimit,this),l.options.worldCopyJump&&(this._draggable.on("predrag",this._onPreDragWrap,this),l.on("zoomend",this._onZoomEnd,this),l.whenReady(this._onZoomEnd,this))}ht(this._map._container,"leaflet-grab leaflet-touch-drag"),this._draggable.enable(),this._positions=[],this._times=[]},removeHooks:function(){nn(this._map._container,"leaflet-grab"),nn(this._map._container,"leaflet-touch-drag"),this._draggable.disable()},moved:function(){return this._draggable&&this._draggable._moved},moving:function(){return this._draggable&&this._draggable._moving},_onDragStart:function(){var l=this._map;if(l._stop(),this._map.options.maxBounds&&this._map.options.maxBoundsViscosity){var u=ee(this._map.options.maxBounds);this._offsetLimit=se(this._map.latLngToContainerPoint(u.getNorthWest()).multiplyBy(-1),this._map.latLngToContainerPoint(u.getSouthEast()).multiplyBy(-1).add(this._map.getSize())),this._viscosity=Math.min(1,Math.max(0,this._map.options.maxBoundsViscosity))}else this._offsetLimit=null;l.fire("movestart").fire("dragstart"),l.options.inertia&&(this._positions=[],this._times=[])},_onDrag:function(l){if(this._map.options.inertia){var u=this._lastTime=+new Date,x=this._lastPos=this._draggable._absPos||this._draggable._newPos;this._positions.push(x),this._times.push(u),this._prunePositions(u)}this._map.fire("move",l).fire("drag",l)},_prunePositions:function(l){for(;this._positions.length>1&&l-this._times[0]>50;)this._positions.shift(),this._times.shift()},_onZoomEnd:function(){var l=this._map.getSize().divideBy(2),u=this._map.latLngToLayerPoint([0,0]);this._initialWorldOffset=u.subtract(l).x,this._worldWidth=this._map.getPixelWorldBounds().getSize().x},_viscousLimit:function(l,u){return l-(l-u)*this._viscosity},_onPreDragLimit:function(){if(!(!this._viscosity||!this._offsetLimit)){var l=this._draggable._newPos.subtract(this._draggable._startPos),u=this._offsetLimit;l.x<u.min.x&&(l.x=this._viscousLimit(l.x,u.min.x)),l.y<u.min.y&&(l.y=this._viscousLimit(l.y,u.min.y)),l.x>u.max.x&&(l.x=this._viscousLimit(l.x,u.max.x)),l.y>u.max.y&&(l.y=this._viscousLimit(l.y,u.max.y)),this._draggable._newPos=this._draggable._startPos.add(l)}},_onPreDragWrap:function(){var l=this._worldWidth,u=Math.round(l/2),x=this._initialWorldOffset,N=this._draggable._newPos.x,M=(N-u+x)%l+u-x,B=(N+u+x)%l-u-x,ie=Math.abs(M+x)<Math.abs(B+x)?M:B;this._draggable._absPos=this._draggable._newPos.clone(),this._draggable._newPos.x=ie},_onDragEnd:function(l){var u=this._map,x=u.options,N=!x.inertia||l.noInertia||this._times.length<2;if(u.fire("dragend",l),N)u.fire("moveend");else{this._prunePositions(+new Date);var M=this._lastPos.subtract(this._positions[0]),B=(this._lastTime-this._times[0])/1e3,ie=x.easeLinearity,pe=M.multiplyBy(ie/B),je=pe.distanceTo([0,0]),Ae=Math.min(x.inertiaMaxSpeed,je),Ue=pe.multiplyBy(Ae/je),Ye=Ae/(x.inertiaDeceleration*ie),Ge=Ue.multiplyBy(-Ye/2).round();!Ge.x&&!Ge.y?u.fire("moveend"):(Ge=u._limitOffset(Ge,u.options.maxBounds),Y(function(){u.panBy(Ge,{duration:Ye,easeLinearity:ie,noMoveStart:!0,animate:!0})}))}}});yt.addInitHook("addHandler","dragging",Zc),yt.mergeOptions({keyboard:!0,keyboardPanDelta:80});var wl=Ya.extend({keyCodes:{left:[37],right:[39],down:[40],up:[38],zoomIn:[187,107,61,171],zoomOut:[189,109,54,173]},initialize:function(l){this._map=l,this._setPanDelta(l.options.keyboardPanDelta),this._setZoomDelta(l.options.zoomDelta)},addHooks:function(){var l=this._map._container;l.tabIndex<=0&&(l.tabIndex="0"),mt(l,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.on({focus:this._addHooks,blur:this._removeHooks},this)},removeHooks:function(){this._removeHooks(),Dt(this._map._container,{focus:this._onFocus,blur:this._onBlur,mousedown:this._onMouseDown},this),this._map.off({focus:this._addHooks,blur:this._removeHooks},this)},_onMouseDown:function(){if(!this._focused){var l=document.body,u=document.documentElement,x=l.scrollTop||u.scrollTop,N=l.scrollLeft||u.scrollLeft;this._map._container.focus(),window.scrollTo(N,x)}},_onFocus:function(){this._focused=!0,this._map.fire("focus")},_onBlur:function(){this._focused=!1,this._map.fire("blur")},_setPanDelta:function(l){var u=this._panKeys={},x=this.keyCodes,N,M;for(N=0,M=x.left.length;N<M;N++)u[x.left[N]]=[-1*l,0];for(N=0,M=x.right.length;N<M;N++)u[x.right[N]]=[l,0];for(N=0,M=x.down.length;N<M;N++)u[x.down[N]]=[0,l];for(N=0,M=x.up.length;N<M;N++)u[x.up[N]]=[0,-1*l]},_setZoomDelta:function(l){var u=this._zoomKeys={},x=this.keyCodes,N,M;for(N=0,M=x.zoomIn.length;N<M;N++)u[x.zoomIn[N]]=l;for(N=0,M=x.zoomOut.length;N<M;N++)u[x.zoomOut[N]]=-l},_addHooks:function(){mt(document,"keydown",this._onKeyDown,this)},_removeHooks:function(){Dt(document,"keydown",this._onKeyDown,this)},_onKeyDown:function(l){if(!(l.altKey||l.ctrlKey||l.metaKey)){var u=l.keyCode,x=this._map,N;if(u in this._panKeys){if(!x._panAnim||!x._panAnim._inProgress)if(N=this._panKeys[u],l.shiftKey&&(N=z(N).multiplyBy(3)),x.options.maxBounds&&(N=x._limitOffset(z(N),x.options.maxBounds)),x.options.worldCopyJump){var M=x.wrapLatLng(x.unproject(x.project(x.getCenter()).add(N)));x.panTo(M)}else x.panBy(N)}else if(u in this._zoomKeys)x.setZoom(x.getZoom()+(l.shiftKey?3:1)*this._zoomKeys[u]);else if(u===27&&x._popup&&x._popup.options.closeOnEscapeKey)x.closePopup();else return;hs(l)}}});yt.addInitHook("addHandler","keyboard",wl),yt.mergeOptions({scrollWheelZoom:!0,wheelDebounceTime:40,wheelPxPerZoomLevel:60});var Xs=Ya.extend({addHooks:function(){mt(this._map._container,"wheel",this._onWheelScroll,this),this._delta=0},removeHooks:function(){Dt(this._map._container,"wheel",this._onWheelScroll,this)},_onWheelScroll:function(l){var u=ul(l),x=this._map.options.wheelDebounceTime;this._delta+=u,this._lastMousePos=this._map.mouseEventToContainerPoint(l),this._startTime||(this._startTime=+new Date);var N=Math.max(x-(+new Date-this._startTime),0);clearTimeout(this._timer),this._timer=setTimeout(h(this._performZoom,this),N),hs(l)},_performZoom:function(){var l=this._map,u=l.getZoom(),x=this._map.options.zoomSnap||0;l._stop();var N=this._delta/(this._map.options.wheelPxPerZoomLevel*4),M=4*Math.log(2/(1+Math.exp(-Math.abs(N))))/Math.LN2,B=x?Math.ceil(M/x)*x:M,ie=l._limitZoom(u+(this._delta>0?B:-B))-u;this._delta=0,this._startTime=null,ie&&(l.options.scrollWheelZoom==="center"?l.setZoom(u+ie):l.setZoomAround(this._lastMousePos,u+ie))}});yt.addInitHook("addHandler","scrollWheelZoom",Xs);var Wc=600;yt.mergeOptions({tapHold:Ve.touchNative&&Ve.safari&&Ve.mobile,tapTolerance:15});var xo=Ya.extend({addHooks:function(){mt(this._map._container,"touchstart",this._onDown,this)},removeHooks:function(){Dt(this._map._container,"touchstart",this._onDown,this)},_onDown:function(l){if(clearTimeout(this._holdTimeout),l.touches.length===1){var u=l.touches[0];this._startPos=this._newPos=new W(u.clientX,u.clientY),this._holdTimeout=setTimeout(h(function(){this._cancel(),this._isTapValid()&&(mt(document,"touchend",Sn),mt(document,"touchend touchcancel",this._cancelClickPrevent),this._simulateEvent("contextmenu",u))},this),Wc),mt(document,"touchend touchcancel contextmenu",this._cancel,this),mt(document,"touchmove",this._onMove,this)}},_cancelClickPrevent:function l(){Dt(document,"touchend",Sn),Dt(document,"touchend touchcancel",l)},_cancel:function(){clearTimeout(this._holdTimeout),Dt(document,"touchend touchcancel contextmenu",this._cancel,this),Dt(document,"touchmove",this._onMove,this)},_onMove:function(l){var u=l.touches[0];this._newPos=new W(u.clientX,u.clientY)},_isTapValid:function(){return this._newPos.distanceTo(this._startPos)<=this._map.options.tapTolerance},_simulateEvent:function(l,u){var x=new MouseEvent(l,{bubbles:!0,cancelable:!0,view:window,screenX:u.screenX,screenY:u.screenY,clientX:u.clientX,clientY:u.clientY});x._simulated=!0,u.target.dispatchEvent(x)}});yt.addInitHook("addHandler","tapHold",xo),yt.mergeOptions({touchZoom:Ve.touch,bounceAtZoomLimits:!0});var zr=Ya.extend({addHooks:function(){ht(this._map._container,"leaflet-touch-zoom"),mt(this._map._container,"touchstart",this._onTouchStart,this)},removeHooks:function(){nn(this._map._container,"leaflet-touch-zoom"),Dt(this._map._container,"touchstart",this._onTouchStart,this)},_onTouchStart:function(l){var u=this._map;if(!(!l.touches||l.touches.length!==2||u._animatingZoom||this._zooming)){var x=u.mouseEventToContainerPoint(l.touches[0]),N=u.mouseEventToContainerPoint(l.touches[1]);this._centerPoint=u.getSize()._divideBy(2),this._startLatLng=u.containerPointToLatLng(this._centerPoint),u.options.touchZoom!=="center"&&(this._pinchStartLatLng=u.containerPointToLatLng(x.add(N)._divideBy(2))),this._startDist=x.distanceTo(N),this._startZoom=u.getZoom(),this._moved=!1,this._zooming=!0,u._stop(),mt(document,"touchmove",this._onTouchMove,this),mt(document,"touchend touchcancel",this._onTouchEnd,this),Sn(l)}},_onTouchMove:function(l){if(!(!l.touches||l.touches.length!==2||!this._zooming)){var u=this._map,x=u.mouseEventToContainerPoint(l.touches[0]),N=u.mouseEventToContainerPoint(l.touches[1]),M=x.distanceTo(N)/this._startDist;if(this._zoom=u.getScaleZoom(M,this._startZoom),!u.options.bounceAtZoomLimits&&(this._zoom<u.getMinZoom()&&M<1||this._zoom>u.getMaxZoom()&&M>1)&&(this._zoom=u._limitZoom(this._zoom)),u.options.touchZoom==="center"){if(this._center=this._startLatLng,M===1)return}else{var B=x._add(N)._divideBy(2)._subtract(this._centerPoint);if(M===1&&B.x===0&&B.y===0)return;this._center=u.unproject(u.project(this._pinchStartLatLng,this._zoom).subtract(B),this._zoom)}this._moved||(u._moveStart(!0,!1),this._moved=!0),G(this._animRequest);var ie=h(u._move,u,this._center,this._zoom,{pinch:!0,round:!1},void 0);this._animRequest=Y(ie,this,!0),Sn(l)}},_onTouchEnd:function(){if(!this._moved||!this._zooming){this._zooming=!1;return}this._zooming=!1,G(this._animRequest),Dt(document,"touchmove",this._onTouchMove,this),Dt(document,"touchend touchcancel",this._onTouchEnd,this),this._map.options.zoomAnimation?this._map._animateZoom(this._center,this._map._limitZoom(this._zoom),!0,this._map.options.zoomSnap):this._map._resetView(this._center,this._map._limitZoom(this._zoom))}});yt.addInitHook("addHandler","touchZoom",zr),yt.BoxZoom=go,yt.DoubleClickZoom=ps,yt.Drag=Zc,yt.Keyboard=wl,yt.ScrollWheelZoom=Xs,yt.TapHold=xo,yt.TouchZoom=zr,a.Bounds=J,a.Browser=Ve,a.CRS=ye,a.Canvas=bl,a.Circle=qc,a.CircleMarker=fl,a.Class=H,a.Control=ya,a.DivIcon=Vc,a.DivOverlay=Wa,a.DomEvent=Lf,a.DomUtil=$u,a.Draggable=Ks,a.Evented=oe,a.FeatureGroup=Na,a.GeoJSON=Sa,a.GridLayer=Dr,a.Handler=Ya,a.Icon=hi,a.ImageOverlay=fs,a.LatLng=re,a.LatLngBounds=ae,a.Layer=Va,a.LayerGroup=Rr,a.LineUtil=Ku,a.Map=yt,a.Marker=pi,a.Mixin=Ff,a.Path=Rs,a.Point=W,a.PolyUtil=Uf,a.Polygon=gi,a.Polyline=As,a.Popup=yl,a.PosAnimation=so,a.Projection=Gu,a.Rectangle=sm,a.Renderer=Ga,a.SVG=Qs,a.SVGOverlay=Gs,a.TileLayer=Or,a.Tooltip=po,a.Transformation=_e,a.Util=V,a.VideoOverlay=fo,a.bind=h,a.bounds=se,a.canvas=vl,a.circle=Wf,a.circleMarker=Ju,a.control=ui,a.divIcon=am,a.extend=o,a.featureGroup=hl,a.geoJSON=ho,a.geoJson=em,a.gridLayer=Ka,a.icon=co,a.imageOverlay=yi,a.latLng=me,a.latLngBounds=ee,a.layerGroup=Xu,a.map=ml,a.marker=Hc,a.point=z,a.polygon=_a,a.polyline=Kf,a.popup=Gf,a.rectangle=Ta,a.setOptions=_,a.stamp=p,a.svg=Lr,a.svgOverlay=nm,a.tileLayer=Ca,a.tooltip=Qf,a.transformation=Ie,a.version=r,a.videoOverlay=tm;var ji=window.L;a.noConflict=function(){return window.L=ji,this},window.L=a})}(Ud,Ud.exports)),Ud.exports}var Tu=YM();const _c=pu(Tu);function D0(e,n,a){return Object.freeze({instance:e,context:n,container:a})}function O0(e,n){return n==null?function(r,o){const d=b.useRef(void 0);return d.current||(d.current=e(r,o)),d}:function(r,o){const d=b.useRef(void 0);d.current||(d.current=e(r,o));const h=b.useRef(r),{instance:g}=d.current;return b.useEffect(function(){h.current!==r&&(n(g,r,h.current),h.current=r)},[g,r,n]),d}}function VM(e,n){b.useEffect(function(){return(n.layerContainer??n.map).addLayer(e.instance),function(){n.layerContainer?.removeLayer(e.instance),n.map.removeLayer(e.instance)}},[n,e])}function g2(e){return function(a){const r=R0(),o=e(A0(a,r),r);return f2(r.map,a.attribution),p2(o.current,a.eventHandlers),VM(o.current,r),o}}function ZM(e,n){const a=O0(e,n),r=g2(a);return $M(r)}function WM(e,n){const a=O0(e),r=HM(a,n);return FM(r)}function KM(e,n){const a=O0(e,n),r=g2(a);return UM(r)}function GM(e,n,a){const{opacity:r,zIndex:o}=n;r!=null&&r!==a.opacity&&e.setOpacity(r),o!=null&&o!==a.zIndex&&e.setZIndex(o)}function x2(){return R0().map}function y2(e){const n=x2();return b.useEffect(function(){return n.on(e),function(){n.off(e)}},[n,e]),n}function QM({bounds:e,boundsOptions:n,center:a,children:r,className:o,id:d,placeholder:h,style:g,whenReady:p,zoom:f,...v},w){const[S]=b.useState({className:o,id:d,style:g}),[T,C]=b.useState(null),_=b.useRef(void 0);b.useImperativeHandle(w,()=>T?.map??null,[T]);const k=b.useCallback(O=>{if(O!==null&&!_.current){const P=new Tu.Map(O,v);_.current=P,a!=null&&f!=null?P.setView(a,f):e!=null&&P.fitBounds(e,n),p!=null&&P.whenReady(p),C(IM(P))}},[]);b.useEffect(()=>()=>{T?.map.remove()},[T]);const R=T?We.createElement(M0,{value:T},r):h??null;return We.createElement("div",{...S,ref:k},R)}const b2=b.forwardRef(QM),Ex=ZM(function({position:n,...a},r){const o=new Tu.Marker(n,a);return D0(o,BM(r,{overlayContainer:o}))},function(n,a,r){a.position!==r.position&&n.setLatLng(a.position),a.icon!=null&&a.icon!==r.icon&&n.setIcon(a.icon),a.zIndexOffset!=null&&a.zIndexOffset!==r.zIndexOffset&&n.setZIndexOffset(a.zIndexOffset),a.opacity!=null&&a.opacity!==r.opacity&&n.setOpacity(a.opacity),n.dragging!=null&&a.draggable!==r.draggable&&(a.draggable===!0?n.dragging.enable():n.dragging.disable())}),wj=WM(function(n,a){const r=new Tu.Popup(n,a.overlayContainer);return D0(r,a)},function(n,a,{position:r},o){b.useEffect(function(){const{instance:h}=n;function g(f){f.popup===h&&(h.update(),o(!0))}function p(f){f.popup===h&&o(!1)}return a.map.on({popupopen:g,popupclose:p}),a.overlayContainer==null?(r!=null&&h.setLatLng(r),h.openOn(a.map)):a.overlayContainer.bindPopup(h),function(){a.map.off({popupopen:g,popupclose:p}),a.overlayContainer?.unbindPopup(),a.map.removeLayer(h)}},[n,a,o,r])}),v2=KM(function({url:n,...a},r){const o=new Tu.TileLayer(n,A0(a,r));return D0(o,r)},function(n,a,r){GM(n,a,r);const{url:o}=a;o!=null&&o!==r.url&&n.setUrl(o)});delete _c.Icon.Default.prototype._getIconUrl;_c.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const Mx=({latitude:e=15.279272,longitude:n=44.227494,onChange:a,className:r="",disabled:o=!1,showMap:d=!0,allowManualInput:h=!0,placeholder:g="حدد الموقع",required:p=!1})=>{const[f,v]=b.useState(e),[w,S]=b.useState(n),[T,C]=b.useState(""),[_,k]=b.useState(!1),[R,O]=b.useState(!1),[P,U]=b.useState("");b.useRef(null),b.useEffect(()=>{v(e),S(n)},[e,n]);const A=async(G,V)=>{try{O(!0),U("");const H=await fetch(`https://nominatim.openstreetmap.org/reverse?format=json&lat=${G}&lon=${V}&accept-language=ar`);if(H.ok){const K=(await H.json()).display_name||`${G.toFixed(6)}, ${V.toFixed(6)}`;return C(K),K}}catch(H){console.error("خطأ في الحصول على العنوان:",H),U("لا يمكن الحصول على العنوان")}finally{O(!1)}return`${G.toFixed(6)}, ${V.toFixed(6)}`},$=async G=>{try{O(!0),U("");const V=await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${encodeURIComponent(G)}&countrycodes=ye&limit=1&accept-language=ar`);if(V.ok){const H=await V.json();if(H&&H.length>0){const Q=H[0],K=parseFloat(Q.lat),oe=parseFloat(Q.lon);return v(K),S(oe),C(Q.display_name),a(K,oe,Q.display_name),{lat:K,lng:oe,address:Q.display_name}}else U("لم يتم العثور على الموقع")}}catch(V){console.error("خطأ في البحث:",V),U("خطأ في البحث عن الموقع")}finally{O(!1)}return null},E=()=>{if(!navigator.geolocation){U("الجهاز لا يدعم تحديد الموقع");return}O(!0),U(""),navigator.geolocation.getCurrentPosition(async G=>{const V=G.coords.latitude,H=G.coords.longitude;v(V),S(H);const Q=await A(V,H);a(V,H,Q),O(!1)},G=>{console.error("خطأ في تحديد الموقع:",G),U("لا يمكن تحديد موقعك الحالي"),O(!1)},{enableHighAccuracy:!0,timeout:1e4,maximumAge:3e5})},I=(G,V)=>{const H=parseFloat(V);isNaN(H)||(G==="lat"?(v(H),a(H,w)):(S(H),a(f,H)))},Z=G=>{G.preventDefault();const H=new FormData(G.currentTarget).get("search");H.trim()&&$(H.trim())},F=()=>{k(!_)},Y=()=>(y2({click:async G=>{const V=G.latlng.lat,H=G.latlng.lng;v(V),S(H);const Q=await A(V,H);a(V,H,Q)}}),null);return t.jsxs("div",{className:`space-y-3 ${r}`,children:[t.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-md border",children:[t.jsx("div",{className:"flex-1",children:R?t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("span",{className:"text-sm text-gray-600",children:"جارٍ التحديد..."})]}):T?t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:T}),t.jsxs("p",{className:"text-xs text-gray-500",children:["📍 ",f.toFixed(6),", ",w.toFixed(6)]})]}):t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-gray-500",children:g}),t.jsxs("p",{className:"text-xs text-gray-400",children:["📍 ",f.toFixed(6),", ",w.toFixed(6)]})]})}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[d&&t.jsx("button",{type:"button",onClick:F,disabled:o,className:"p-2 text-blue-600 hover:bg-blue-50 rounded-md transition-colors",title:_?"إخفاء الخريطة":"عرض الخريطة",children:"🗺️"}),t.jsx("button",{type:"button",onClick:E,disabled:o||R,className:"p-2 text-green-600 hover:bg-green-50 rounded-md transition-colors",title:"موقعي الحالي",children:"📍"})]})]}),t.jsxs("form",{onSubmit:Z,className:"flex space-x-2 space-x-reverse",children:[t.jsx("input",{type:"text",name:"search",placeholder:"ابحث عن موقع (مثل: صنعاء، الاصبحي شارع المقالح)",disabled:o,className:"flex-1 px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),t.jsx("button",{type:"submit",disabled:o||R,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 transition-colors",children:"🔍"})]}),h&&t.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"خط العرض (Latitude)"}),t.jsx("input",{type:"number",step:"0.000001",value:f,onChange:G=>I("lat",G.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"15.279272",min:"-90",max:"90"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"خط الطول (Longitude)"}),t.jsx("input",{type:"number",step:"0.000001",value:w,onChange:G=>I("lng",G.target.value),disabled:o,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",placeholder:"44.227494",min:"-180",max:"180"})]})]}),P&&t.jsx("div",{className:"p-3 bg-red-50 border border-red-200 rounded-md",children:t.jsxs("p",{className:"text-sm text-red-800",children:["⚠️ ",P]})}),p&&(!f||!w)&&t.jsx("div",{className:"p-2 bg-yellow-50 border border-yellow-200 rounded-md",children:t.jsx("p",{className:"text-xs text-yellow-800",children:"⚠️ تحديد الموقع مطلوب"})}),_&&t.jsxs("div",{className:"border border-gray-300 rounded-md overflow-hidden",children:[t.jsx("div",{className:"h-64 w-full",children:t.jsxs(b2,{center:[f,w],zoom:13,style:{height:"100%",width:"100%"},scrollWheelZoom:!0,children:[t.jsx(v2,{url:"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.jsx(Ex,{position:[f,w]}),t.jsx(Y,{})]})}),t.jsx("div",{className:"p-2 bg-gray-50 border-t border-gray-200",children:t.jsx("p",{className:"text-xs text-gray-600 text-center",children:"💡 اضغط على أي مكان في الخريطة لتحديد الموقع"})})]}),t.jsxs("div",{className:"text-xs text-gray-500 space-y-1",children:[t.jsx("p",{children:"💡 نصائح:"}),t.jsxs("ul",{className:"list-disc list-inside space-y-1 mr-4",children:[t.jsx("li",{children:"اضغط على 📍 للحصول على موقعك الحالي"}),t.jsx("li",{children:"ابحث بالاسم أو العنوان للعثور على الموقع"}),t.jsx("li",{children:"يمكنك إدخال الإحداثيات يدوياً بدقة 6 خانات عشرية"}),t.jsx("li",{children:"اضغط على 🗺️ لعرض/إخفاء الخريطة التفاعلية"}),t.jsx("li",{children:"اضغط على أي مكان في الخريطة لتحديد موقع جديد"})]})]})]})},XM=()=>{const e=is(),{showSuccess:n,showError:a}=vc(),[r,o]=b.useState(""),[d,h]=b.useState(!1),[g,p]=b.useState({name:"",email:"",password:"",phone:"",propertyTypeId:"",propertyName:"",description:"",address:"",city:"",latitude:void 0,longitude:void 0,starRating:3}),[f,v]=b.useState(""),[w,S]=b.useState(!1),[T,C]=b.useState(!1),[_,k]=b.useState({}),[R,O]=b.useState(!1),P={hotel:{gradient:"from-blue-500 via-purple-500 to-pink-500",bgImage:"bg-gradient-to-br from-blue-50 via-purple-50 to-pink-50",icon:"🏨",title:"انضم إلى شبكة الفنادق الرائدة",subtitle:"اجعل فندقك وجهة مفضلة للمسافرين والزوار",benefits:["إدارة ذكية للحجوزات","تحليلات متقدمة للإيرادات","نظام تقييم موثوق","دعم فني 24/7"],cta:"ابدأ رحلتك في صناعة الضيافة",animation:"animate-pulse"},"car-rental":{gradient:"from-green-500 via-emerald-500 to-teal-500",bgImage:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50",icon:"🚗",title:"قد أسطول سياراتك نحو النجاح",subtitle:"منصة متطورة لإدارة تأجير السيارات بكفاءة عالية",benefits:["تتبع دقيق للمركبات","إدارة عقود التأجير","تقارير مالية شاملة","صيانة مجدولة"],cta:"احجز مكانك في سوق تأجير السيارات",animation:"animate-bounce"},chalet:{gradient:"from-orange-500 via-amber-500 to-yellow-500",bgImage:"bg-gradient-to-br from-orange-50 via-amber-50 to-yellow-50",icon:"🏡",title:"اجعل شاليهك ومزرعتك واحة للاسترخاء",subtitle:"منصة حصرية لإدارة الشاليهات والمزارع السياحية",benefits:["حجوزات المناسبات الخاصة","إدارة المرافق والخدمات","تسويق موسمي ذكي","ضمان الجودة"],cta:"حول ممتلكاتك إلى مصدر دخل مستدام",animation:"animate-swing"},"sports-lounge":{gradient:"from-red-500 via-rose-500 to-pink-500",bgImage:"bg-gradient-to-br from-red-50 via-rose-50 to-pink-50",icon:"⚽",title:"ناديك الرياضي.. مركز للإثارة والمتعة",subtitle:"إدارة احترافية للنوادي الرياضية ومراكز الترفيه",benefits:["جدولة الفعاليات الرياضية","إدارة الملاعب والمرافق","نظام العضويات","تنظيم البطولات"],cta:"كن شريكنا وضاعف ربحك من ناديك الرياضي",animation:"animate-ping"},majlis:{gradient:"from-green-500 via-emerald-500 to-teal-500",bgImage:"bg-gradient-to-br from-green-50 via-emerald-50 to-teal-50",icon:"🍃",title:"مجلسك التراثي.. أصالة وضيافة",subtitle:"منصة مخصصة لإدارة حجوزات المجالس والطيرمانات",benefits:["حجوزات جمعات الاصدقاء","إدارة الخدمات التقليدية","الحفاظ على الطابع الأصيل","ضيافة راقية"],cta:"بوابتك الاوسع لجلب ضيوفك",animation:"animate-sway"}};b.useEffect(()=>{if(r){h(!0);const H=setTimeout(()=>h(!1),800);return()=>clearTimeout(H)}},[r]);const{data:U,isLoading:A,error:$}=It({queryKey:["property-types"],queryFn:()=>LM.getAll({pageNumber:1,pageSize:100})}),E=Be({mutationFn:OM.registerPropertyOwner,onSuccess:H=>{H.success?(n("تم إنشاء الحساب بنجاح! سيتم توجيهك لتسجيل الدخول"),e("/auth/login")):a(H.message||"فشل في إنشاء الحساب")},onError:H=>{a(H.response?.data?.message||"حدث خطأ أثناء إنشاء الحساب")}}),I=()=>{const H={};return g.name.trim()||(H.name="الاسم مطلوب"),g.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(g.email)||(H.email="البريد الإلكتروني غير صحيح"):H.email="البريد الإلكتروني مطلوب",g.phone.trim()?/^[0-9+\-\s()]+$/.test(g.phone)||(H.phone="رقم الهاتف غير صحيح"):H.phone="رقم الهاتف مطلوب",g.password.trim()?g.password.length<6&&(H.password="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):H.password="كلمة المرور مطلوبة",f.trim()?g.password!==f&&(H.confirmPassword="كلمة المرور غير متطابقة"):H.confirmPassword="تأكيد كلمة المرور مطلوب",g.propertyTypeId||(H.propertyTypeId="نوع الكيان مطلوب"),g.propertyName.trim()||(H.propertyName="اسم الكيان مطلوب"),g.address.trim()||(H.address="عنوان الكيان مطلوب"),g.city.trim()||(H.city="المدينة مطلوبة"),R?(k(H),Object.keys(H).length===0):(a("يجب الموافقة على الشروط والأحكام"),!1)},Z=H=>{H.preventDefault(),I()&&E.mutate(g)},F=(H,Q)=>{if(p(K=>({...K,[H]:Q})),H==="propertyTypeId"){const K=U?.items.find(oe=>oe.id===Q);if(K){const oe=Y(K.name);o(oe)}}_[H]&&k(K=>({...K,[H]:void 0}))},Y=H=>{const Q=H.toLowerCase();return Q.includes("فند")||Q.includes("hotel")?"hotel":Q.includes("سيار")||Q.includes("car")?"car-rental":Q.includes("شال")||Q.includes("مزرع")||Q.includes("chalet")?"chalet":Q.includes("رياض")||Q.includes("sport")?"sports-lounge":Q.includes("مجل")||Q.includes("قات")||Q.includes("majlis")?"majlis":"hotel"},V=P[r]||P.hotel;return t.jsx(h2,{restricted:!0,children:t.jsxs("div",{className:"min-h-screen bg-white flex flex-col lg:flex-row",children:[t.jsx("div",{className:"lg:hidden w-full bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden py-6 px-4",children:t.jsx("div",{className:"relative z-10 text-center",children:r?t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-r ${V.gradient} text-white text-2xl shadow-lg transform transition-all duration-500 ${V.animation}`,children:V.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white mb-1 leading-tight",children:V.title}),t.jsx("p",{className:"text-sm text-blue-100 leading-relaxed",children:V.subtitle})]})]}):t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-xl bg-gradient-to-r from-blue-600 to-purple-600 text-white text-2xl shadow-lg",children:"🏢"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-lg font-bold text-white mb-1",children:"منصة BookN"}),t.jsx("p",{className:"text-sm text-blue-100",children:"حلول ذكية وشاملة لإدارة جميع أنواع خدمات الحجوزات والتأجير"})]})]})})}),t.jsxs("div",{className:"w-full lg:w-1/2 flex flex-col justify-center px-4 sm:px-8 lg:px-12 py-4 lg:py-8 bg-white relative overflow-hidden",children:[t.jsx("div",{className:"absolute inset-0 opacity-5",children:t.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23000000' fill-opacity='0.1'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`}})}),t.jsxs("div",{className:"relative z-10 max-w-md mx-auto w-full",children:[t.jsxs("div",{className:"text-center mb-6 lg:mb-8",children:[t.jsx("div",{className:"w-12 h-12 sm:w-16 sm:h-16 bg-gradient-to-r from-blue-600 to-purple-600 rounded-2xl flex items-center justify-center text-white text-lg sm:text-2xl font-bold mx-auto mb-3 sm:mb-4 shadow-lg",children:"B"}),t.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 mb-2",children:"إنشاء حساب جديد"}),t.jsx("p",{className:"text-sm sm:text-base text-gray-600",children:"انضم إلى منصة BookN واستمتع بإدارة احترافية"})]}),t.jsxs("form",{onSubmit:Z,className:"space-y-4 lg:space-y-6",children:[t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"البيانات الشخصية"}),t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم الكامل"}),t.jsx("input",{type:"text",value:g.name,onChange:H=>F("name",H.target.value),placeholder:"أدخل اسمك الكامل",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${_.name?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),_.name&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),t.jsx("input",{type:"tel",value:g.phone,onChange:H=>F("phone",H.target.value),placeholder:"781272968",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${_.phone?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),_.phone&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.phone})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:g.email,onChange:H=>F("email",H.target.value),placeholder:"owner@example.com",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${_.email?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),_.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.email})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:w?"text":"password",value:g.password,onChange:H=>F("password",H.target.value),placeholder:"كلمة المرور",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 pr-10 lg:pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${_.password?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>S(!w),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:E.isPending,children:w?"إخفاء":"إظهار"})]}),_.password&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.password})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:T?"text":"password",value:f,onChange:H=>{v(H.target.value),_.confirmPassword&&k(Q=>({...Q,confirmPassword:void 0}))},placeholder:"تأكيد كلمة المرور",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 pr-10 lg:pr-12 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors text-left ${_.confirmPassword?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>C(!T),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:E.isPending,children:T?"إخفاء":"إظهار"})]}),_.confirmPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.confirmPassword})]})]})]})]}),t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsx("h3",{className:"text-base lg:text-lg font-semibold text-gray-800 border-b border-gray-200 pb-2",children:"بيانات الكيان"}),t.jsxs("div",{className:"space-y-3 lg:space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الكيان"}),t.jsxs("select",{value:g.propertyTypeId,onChange:H=>F("propertyTypeId",H.target.value),disabled:E.isPending||A,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${_.propertyTypeId?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`,children:[t.jsx("option",{value:"",children:"اختر نوع الكيان"}),U?.items.map(H=>t.jsx("option",{value:H.id,children:H.name},H.id))]}),$&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:"خطأ في تحميل أنواع الكيانات"}),_.propertyTypeId&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.propertyTypeId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الكيان"}),t.jsx("input",{type:"text",value:g.propertyName,onChange:H=>F("propertyName",H.target.value),placeholder:"فندق الراحة",disabled:E.isPending,className:`w-full px-4 py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${_.propertyName?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),_.propertyName&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.propertyName})]}),t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3 lg:gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المدينة"}),t.jsx("input",{type:"text",value:g.city,onChange:H=>F("city",H.target.value),placeholder:"صنعاء",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${_.city?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),_.city&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.city})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"التقييم الأولي"}),t.jsxs("select",{value:g.starRating,onChange:H=>F("starRating",parseInt(H.target.value)),disabled:E.isPending,className:"w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors",children:[t.jsx("option",{value:1,children:"نجمة واحدة"}),t.jsx("option",{value:2,children:"نجمتان"}),t.jsx("option",{value:3,children:"3 نجوم"}),t.jsx("option",{value:4,children:"4 نجوم"}),t.jsx("option",{value:5,children:"5 نجوم"})]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عنوان الكيان"}),t.jsx("input",{type:"text",value:g.address,onChange:H=>F("address",H.target.value),placeholder:"مثل : الاصبحي شارع المقالح",disabled:E.isPending,className:`w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors ${_.address?"border-red-300 focus:ring-red-500 focus:border-red-500":""}`}),_.address&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:_.address})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموقع الجغرافي"}),t.jsx(Mx,{latitude:g.latitude,longitude:g.longitude,onChange:(H,Q)=>{F("latitude",H),F("longitude",Q)},placeholder:"حدد موقع الكيان",disabled:E.isPending,showMap:!0,allowManualInput:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف الكيان (اختياري)"}),t.jsx("textarea",{value:g.description||"",onChange:H=>F("description",H.target.value),placeholder:"وصف مختصر عن الكيان وخدماته",disabled:E.isPending,rows:3,className:"w-full px-3 py-2 lg:px-4 lg:py-3 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-colors"})]})]})]}),t.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[t.jsx("input",{type:"checkbox",checked:R,onChange:H=>O(H.target.checked),className:"mt-1 rounded border-gray-300 text-blue-600 focus:ring-blue-500",disabled:E.isPending}),t.jsx("div",{className:"text-sm",children:t.jsxs("p",{className:"text-gray-700",children:["أوافق على"," ",t.jsx(Bs,{to:"/terms",className:"text-blue-600 hover:text-blue-500 font-medium",children:"الشروط والأحكام"})," ","و"," ",t.jsx(Bs,{to:"/privacy",className:"text-blue-600 hover:text-blue-500 font-medium",children:"سياسة الخصوصية"})]})})]}),t.jsx("button",{type:"submit",disabled:E.isPending||!R,className:"w-full bg-gradient-to-r from-blue-600 to-purple-600 text-white py-2.5 sm:py-3 px-4 rounded-lg font-medium hover:from-blue-700 hover:to-purple-700 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?t.jsxs("div",{className:"flex items-center justify-center",children:[t.jsx("div",{className:"w-5 h-5 border-2 border-white/30 border-t-white rounded-full animate-spin ml-2"}),"جاري إنشاء الحساب..."]}):"إنشاء الحساب"})]}),t.jsx("div",{className:"mt-6 text-center",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["لديك حساب بالفعل؟"," ",t.jsx(Bs,{to:"/auth/login",className:"text-blue-600 hover:text-blue-500 font-medium",children:"سجل الدخول"})]})})]})]}),t.jsxs("div",{className:"hidden lg:flex w-1/2 bg-gradient-to-br from-slate-900 via-blue-900 to-indigo-900 relative overflow-hidden items-center justify-center",children:[t.jsxs("div",{className:"absolute inset-0",children:[t.jsx("div",{className:"absolute top-10 left-10 w-32 h-32 bg-blue-500/20 rounded-full blur-xl animate-pulse"}),t.jsx("div",{className:"absolute top-1/3 right-20 w-48 h-48 bg-purple-500/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"1s"}}),t.jsx("div",{className:"absolute bottom-20 left-1/3 w-40 h-40 bg-indigo-500/20 rounded-full blur-xl animate-pulse",style:{animationDelay:"2s"}}),t.jsx("div",{className:"absolute inset-0 opacity-10",children:t.jsx("div",{className:"absolute inset-0",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='40' height='40' viewBox='0 0 40 40' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='white' fill-opacity='0.1'%3E%3Cpath d='M0 0h40v1H0zm0 20h40v1H0z'/%3E%3Cpath d='M0 0v40h1V0zm20 0v40h1V0z'/%3E%3C/g%3E%3C/svg%3E")`}})})]}),t.jsx("div",{className:"relative z-10 text-center px-12 max-w-lg",children:r?t.jsxs("div",{className:"space-y-8 animate-fadeIn",children:[t.jsx("div",{className:`inline-flex items-center justify-center w-24 h-24 rounded-2xl bg-gradient-to-r ${V.gradient} text-white text-4xl shadow-2xl transform transition-all duration-500 ${V.animation}`,children:V.icon}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-4xl font-bold text-white mb-4 leading-tight",children:V.title}),t.jsx("p",{className:"text-xl text-blue-100 leading-relaxed",children:V.subtitle})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:V.benefits.map((H,Q)=>t.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20 transform hover:scale-105 transition-all duration-300",style:{animationDelay:`${Q*.1}s`},children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:`w-8 h-8 mx-auto mb-2 bg-gradient-to-r ${V.gradient} rounded-full flex items-center justify-center`,children:t.jsx("span",{className:"text-white text-sm",children:"✓"})}),t.jsx("p",{className:"text-sm font-medium text-white",children:H})]})},Q))}),t.jsx("div",{className:`inline-block px-8 py-4 bg-gradient-to-r ${V.gradient} text-white rounded-xl shadow-xl text-lg font-semibold transform hover:scale-105 transition-all duration-300`,children:V.cta})]}):t.jsxs("div",{className:"space-y-8",children:[t.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 rounded-2xl bg-gradient-to-r from-blue-600 to-purple-600 text-white text-4xl shadow-2xl",children:"🏢"}),t.jsxs("div",{children:[t.jsx("h2",{className:"text-4xl font-bold text-white mb-4 leading-tight",children:"منصة BookN"}),t.jsx("p",{className:"text-xl text-blue-100 leading-relaxed",children:"حلول ذكية وشاملة لإدارة جميع أنواع خدمات الحجوزات والتأجير"})]}),t.jsx("div",{className:"grid grid-cols-2 gap-4",children:["إدارة ذكية للحجوزات","تحليلات متقدمة","نظام مدفوعات آمن","دعم فني 24/7"].map((H,Q)=>t.jsx("div",{className:"bg-white/10 backdrop-blur-sm p-4 rounded-xl border border-white/20 transform hover:scale-105 transition-all duration-300",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"w-8 h-8 mx-auto mb-2 bg-gradient-to-r from-blue-600 to-purple-600 rounded-full flex items-center justify-center",children:t.jsx("span",{className:"text-white text-sm",children:"✓"})}),t.jsx("p",{className:"text-sm font-medium text-white",children:H})]})},Q))}),t.jsx("div",{className:"text-blue-100 text-lg",children:"اختر نوع الكيان لرؤية المزايا المخصصة"})]})})]}),t.jsx("style",{children:`
        @keyframes fadeIn {
          from { opacity: 0; transform: translateY(20px); }
          to { opacity: 1; transform: translateY(0); }
        }
        .animate-fadeIn {
          animation: fadeIn 0.8s ease-out forwards;
        }
        @keyframes sway {
          0%, 100% { transform: rotate(-3deg) scale(1); }
          50% { transform: rotate(3deg) scale(1.05); }
        }
        .animate-sway {
          animation: sway 2s ease-in-out infinite;
        }
      `})]})})},Nj=e=>{let n;const a=new Set,r=(f,v)=>{const w=typeof f=="function"?f(n):f;if(!Object.is(w,n)){const S=n;n=v??(typeof w!="object"||w===null)?w:Object.assign({},n,w),a.forEach(T=>T(n,S))}},o=()=>n,g={setState:r,getState:o,getInitialState:()=>p,subscribe:f=>(a.add(f),()=>a.delete(f))},p=n=e(r,o,g);return g},JM=e=>e?Nj(e):Nj,eR=e=>e;function tR(e,n=eR){const a=We.useSyncExternalStore(e.subscribe,We.useCallback(()=>n(e.getState()),[e,n]),We.useCallback(()=>n(e.getInitialState()),[e,n]));return We.useDebugValue(a),a}const nR=e=>{const n=JM(e),a=r=>tR(n,r);return Object.assign(a,n),a},aR=e=>nR;function sR(e,n){let a;try{a=e()}catch{return}return{getItem:o=>{var d;const h=p=>p===null?null:JSON.parse(p,void 0),g=(d=a.getItem(o))!=null?d:null;return g instanceof Promise?g.then(h):h(g)},setItem:(o,d)=>a.setItem(o,JSON.stringify(d,void 0)),removeItem:o=>a.removeItem(o)}}const Rx=e=>n=>{try{const a=e(n);return a instanceof Promise?a:{then(r){return Rx(r)(a)},catch(r){return this}}}catch(a){return{then(r){return this},catch(r){return Rx(r)(a)}}}},rR=(e,n)=>(a,r,o)=>{let d={storage:sR(()=>localStorage),partialize:_=>_,version:0,merge:(_,k)=>({...k,..._}),...n},h=!1;const g=new Set,p=new Set;let f=d.storage;if(!f)return e((..._)=>{console.warn(`[zustand persist middleware] Unable to update item '${d.name}', the given storage is currently unavailable.`),a(..._)},r,o);const v=()=>{const _=d.partialize({...r()});return f.setItem(d.name,{state:_,version:d.version})},w=o.setState;o.setState=(_,k)=>{w(_,k),v()};const S=e((..._)=>{a(..._),v()},r,o);o.getInitialState=()=>S;let T;const C=()=>{var _,k;if(!f)return;h=!1,g.forEach(O=>{var P;return O((P=r())!=null?P:S)});const R=((k=d.onRehydrateStorage)==null?void 0:k.call(d,(_=r())!=null?_:S))||void 0;return Rx(f.getItem.bind(f))(d.name).then(O=>{if(O)if(typeof O.version=="number"&&O.version!==d.version){if(d.migrate){const P=d.migrate(O.state,O.version);return P instanceof Promise?P.then(U=>[!0,U]):[!0,P]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,O.state];return[!1,void 0]}).then(O=>{var P;const[U,A]=O;if(T=d.merge(A,(P=r())!=null?P:S),a(T,!0),U)return v()}).then(()=>{R?.(T,void 0),T=r(),h=!0,p.forEach(O=>O(T))}).catch(O=>{R?.(void 0,O)})};return o.persist={setOptions:_=>{d={...d,..._},_.storage&&(f=_.storage)},clearStorage:()=>{f?.removeItem(d.name)},getOptions:()=>d,rehydrate:()=>C(),hasHydrated:()=>h,onHydrate:_=>(g.add(_),()=>{g.delete(_)}),onFinishHydration:_=>(p.add(_),()=>{p.delete(_)})},d.skipHydration||C(),T||S},iR=rR,Od={currentUser:null,settings:{theme:"light",language:"ar",currency:"YER",timezone:"Asia/Riyadh",pageSize:20,dateFormat:"DD/MM/YYYY",notifications:{email:!0,push:!0,sms:!1}},ui:{sidebarCollapsed:!1,loading:!1,error:null,success:null,activeModal:null,breadcrumbs:[]},cache:{properties:[],users:[],unitTypes:[],lastUpdated:{}}},Yd=aR()(iR((e,n)=>({...Od,setCurrentUser:a=>e(r=>({currentUser:a,ui:{...r.ui,error:null}})),logout:()=>e(a=>({currentUser:null,cache:Od.cache,ui:{...a.ui,activeModal:null,error:null,success:null}})),updateSettings:a=>e(r=>({settings:{...r.settings,...a}})),setSidebarCollapsed:a=>e(r=>({ui:{...r.ui,sidebarCollapsed:a}})),setLoading:a=>e(r=>({ui:{...r.ui,loading:a}})),setError:a=>e(r=>({ui:{...r.ui,error:a,success:a?null:r.ui.success}})),setSuccess:a=>e(r=>({ui:{...r.ui,success:a,error:a?null:r.ui.error}})),setActiveModal:a=>e(r=>({ui:{...r.ui,activeModal:a}})),setBreadcrumbs:a=>e(r=>({ui:{...r.ui,breadcrumbs:a}})),updateCache:(a,r)=>e(o=>({cache:{...o.cache,[a]:r,lastUpdated:{...o.cache.lastUpdated,[a]:Date.now()}}})),clearCache:a=>e(r=>{if(a){const o={...r.cache};return o[a]=Od.cache[a],delete o.lastUpdated[a],{cache:o}}else return{cache:Od.cache}}),clearNotifications:()=>e(a=>({ui:{...a.ui,error:null,success:null}})),resetState:()=>e(Od)}),{name:"bookn-app-store",partialize:e=>({currentUser:e.currentUser,settings:e.settings,ui:{sidebarCollapsed:e.ui.sidebarCollapsed}})})),lR=()=>Yd(e=>e.ui.error),oR=()=>Yd(e=>e.ui.success),j2=()=>{const e=Yd(g=>g.setError),n=Yd(g=>g.setSuccess),a=Yd(g=>g.clearNotifications),r=lR(),o=oR();return{error:r,success:o,showError:g=>e(g),showSuccess:g=>n(g),clearNotifications:a}},Rt=({isOpen:e,onClose:n,title:a,children:r,size:o="md",footer:d,closable:h=!0,maskClosable:g=!0})=>{const p={sm:"max-w-md",md:"max-w-lg",lg:"max-w-2xl",xl:"max-w-4xl","2xl":"max-w-6xl"};return b.useEffect(()=>(e?document.body.style.overflow="hidden":document.body.style.overflow="unset",()=>{document.body.style.overflow="unset"}),[e]),b.useEffect(()=>{const f=v=>{v.key==="Escape"&&h&&n()};return e&&document.addEventListener("keydown",f),()=>{document.removeEventListener("keydown",f)}},[e,h,n]),e?t.jsx("div",{className:"fixed inset-0 z-[10000] overflow-y-auto",children:t.jsxs("div",{className:"flex items-end justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[t.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:g?n:void 0}),t.jsx("span",{className:"hidden sm:inline-block sm:align-middle sm:h-screen","aria-hidden":"true",children:"​"}),t.jsxs("div",{className:`inline-block align-bottom bg-white rounded-lg text-right overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle w-full ${p[o]}`,children:[t.jsx("div",{className:"bg-white px-6 py-4 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900",children:a}),h&&t.jsx("button",{onClick:n,className:"text-gray-400 hover:text-gray-600 transition-colors",children:t.jsx("span",{className:"text-xl",children:"×"})})]})}),t.jsx("div",{className:"bg-white px-6 py-4 max-h-96 overflow-y-auto",children:r}),d&&t.jsx("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200",children:d})]})]})}):null},w2=({isOpen:e,onClose:n,onConfirm:a,title:r,message:o,confirmText:d="تأكيد",cancelText:h="إلغاء",type:g="info",loading:p=!1})=>{const f=()=>{switch(g){case"danger":return"🗑️";case"warning":return"⚠️";case"info":return"ℹ️";default:return"ℹ️"}},w=(()=>{switch(g){case"danger":return{bg:"bg-red-50",border:"border-red-200",icon:"text-red-400",title:"text-red-800",message:"text-red-700",button:"bg-red-600 hover:bg-red-700 text-white"};case"warning":return{bg:"bg-yellow-50",border:"border-yellow-200",icon:"text-yellow-400",title:"text-yellow-800",message:"text-yellow-700",button:"bg-yellow-600 hover:bg-yellow-700 text-white"};case"info":return{bg:"bg-blue-50",border:"border-blue-200",icon:"text-blue-400",title:"text-blue-800",message:"text-blue-700",button:"bg-blue-600 hover:bg-blue-700 text-white"};default:return{bg:"bg-gray-50",border:"border-gray-200",icon:"text-gray-400",title:"text-gray-800",message:"text-gray-700",button:"bg-gray-600 hover:bg-gray-700 text-white"}}})();return t.jsx(Rt,{isOpen:e,onClose:n,title:"",size:"sm",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:n,disabled:p,className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50 disabled:opacity-50",children:h}),t.jsx("button",{onClick:a,disabled:p,className:`px-4 py-2 rounded-md disabled:opacity-50 transition-colors ${w.button}`,children:p?t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("div",{className:"animate-spin w-4 h-4 border-2 border-white border-t-transparent rounded-full"}),t.jsx("span",{children:"جارٍ التنفيذ..."})]}):d})]}),children:t.jsx("div",{className:`rounded-md p-4 ${w.bg} ${w.border} border`,children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:`text-2xl ${w.icon}`,children:f()})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:`text-lg font-medium ${w.title}`,children:r}),t.jsx("div",{className:`mt-2 text-sm ${w.message}`,children:t.jsx("p",{children:o})})]})]})})})},Ph=({icon:e="📋",title:n,description:a,actionLabel:r,onAction:o,className:d="",size:h="md"})=>{const p=(()=>{switch(h){case"sm":return{container:"py-8",icon:"text-4xl",title:"text-lg",description:"text-sm"};case"lg":return{container:"py-16",icon:"text-8xl",title:"text-2xl",description:"text-lg"};default:return{container:"py-12",icon:"text-6xl",title:"text-xl",description:"text-base"}}})();return t.jsxs("div",{className:`text-center ${p.container} ${d}`,children:[t.jsx("div",{className:`${p.icon} mb-4`,children:e}),t.jsx("h3",{className:`${p.title} font-semibold text-gray-900 mb-2`,children:n}),a&&t.jsx("p",{className:`${p.description} text-gray-600 mb-6 max-w-md mx-auto`,children:a}),r&&o&&t.jsx(rt,{onClick:o,label:r,variant:"primary",size:h==="lg"?"lg":"md"})]})},Wr=({status:e,variant:n="default",size:a="md",className:r=""})=>{const o=()=>({sm:"px-2 py-0.5 text-xs",md:"px-2 py-1 text-xs",lg:"px-3 py-1.5 text-sm"})[a],h=(()=>{const g={booking:{Pending:{label:"معلق",color:"bg-yellow-100 text-yellow-800",icon:"⏳"},Confirmed:{label:"مؤكد",color:"bg-blue-100 text-blue-800",icon:"✅"},Cancelled:{label:"ملغي",color:"bg-red-100 text-red-800",icon:"❌"},Completed:{label:"مكتمل",color:"bg-green-100 text-green-800",icon:"🏁"},CheckedIn:{label:"تم تسجيل الدخول",color:"bg-purple-100 text-purple-800",icon:"🚪"},CheckedOut:{label:"تم تسجيل الخروج",color:"bg-gray-100 text-gray-800",icon:"🚶‍♂️"}},payment:{Successful:{label:"ناجح",color:"bg-green-100 text-green-800",icon:"✅"},Failed:{label:"فاشل",color:"bg-red-100 text-red-800",icon:"❌"},Pending:{label:"معلق",color:"bg-yellow-100 text-yellow-800",icon:"⏳"},Refunded:{label:"مسترد",color:"bg-blue-100 text-blue-800",icon:"↩️"},Voided:{label:"ملغي",color:"bg-gray-100 text-gray-800",icon:"🚫"},PartiallyRefunded:{label:"مسترد جزئياً",color:"bg-purple-100 text-purple-800",icon:"↪️"}},user:{Active:{label:"نشط",color:"bg-green-100 text-green-800",icon:"✅"},Inactive:{label:"غير نشط",color:"bg-gray-100 text-gray-800",icon:"⭕"},Suspended:{label:"معلق",color:"bg-red-100 text-red-800",icon:"🚫"},Pending:{label:"في الانتظار",color:"bg-yellow-100 text-yellow-800",icon:"⏳"}},property:{Available:{label:"متاح",color:"bg-green-100 text-green-800",icon:"✅"},Occupied:{label:"مشغول",color:"bg-red-100 text-red-800",icon:"🔴"},Maintenance:{label:"صيانة",color:"bg-yellow-100 text-yellow-800",icon:"🔧"},Unavailable:{label:"غير متاح",color:"bg-gray-100 text-gray-800",icon:"⭕"}},default:{active:{label:"نشط",color:"bg-green-100 text-green-800",icon:"✅"},inactive:{label:"غير نشط",color:"bg-gray-100 text-gray-800",icon:"⭕"},pending:{label:"معلق",color:"bg-yellow-100 text-yellow-800",icon:"⏳"},success:{label:"نجح",color:"bg-green-100 text-green-800",icon:"✅"},error:{label:"خطأ",color:"bg-red-100 text-red-800",icon:"❌"},warning:{label:"تحذير",color:"bg-yellow-100 text-yellow-800",icon:"⚠️"},info:{label:"معلومات",color:"bg-blue-100 text-blue-800",icon:"ℹ️"}}};return(g[n]||g.default)[e]||{label:e,color:"bg-gray-100 text-gray-800",icon:"📍"}})();return t.jsxs("span",{className:`
        inline-flex items-center space-x-1 space-x-reverse font-medium rounded-full
        ${o()}
        ${h.color}
        ${r}
      `,children:[t.jsx("span",{children:h.icon}),t.jsx("span",{children:h.label})]})},Ia=({variant:e="default",padding:n="md",hover:a=!1,className:r="",children:o,...d})=>{const h={default:"bg-white border border-gray-200",bordered:"bg-white border-2 border-gray-300",shadow:"bg-white shadow-lg",ghost:"bg-gray-50 border border-gray-100"},g={none:"",sm:"p-3",md:"p-4",lg:"p-6"};return t.jsx("div",{className:Ke("rounded-lg transition-all duration-200",h[e],g[n],a&&"hover:shadow-md hover:border-gray-300 cursor-pointer",r),...d,children:o})},cR=({currentImage:e,onImageUpload:n,onImageDelete:a,isUploading:r=!1,disabled:o=!1,size:d="md",showDeleteButton:h=!0,acceptedTypes:g=["image/jpeg","image/png","image/jpg"],maxFileSize:p=2,placeholder:f})=>{const[v,w]=b.useState(!1),S=b.useRef(null),T={sm:"w-16 h-16",md:"w-24 h-24",lg:"w-32 h-32"},C=U=>{if(!U)return;if(!g.includes(U.type)){alert(`نوع الملف غير مدعوم. الأنواع المدعومة: ${g.join(", ")}`);return}const A=p*1024*1024;if(U.size>A){alert(`حجم الملف كبير جداً. الحد الأقصى: ${p}MB`);return}n(U)},_=U=>{U.preventDefault(),w(!0)},k=U=>{U.preventDefault(),w(!1)},R=U=>{U.preventDefault(),w(!1);const A=U.dataTransfer.files;A&&A[0]&&C(A[0])},O=U=>{const A=U.target.files;A&&A[0]&&C(A[0])},P=()=>{!o&&!r&&S.current&&S.current.click()};return t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center space-x-6 space-x-reverse",children:[t.jsxs("div",{className:`${T[d]} bg-gray-200 rounded-full flex items-center justify-center overflow-hidden relative cursor-pointer border-2 border-dashed transition-colors ${v?"border-blue-500 bg-blue-50":"border-gray-300"} ${o||r?"opacity-50 cursor-not-allowed":"hover:border-blue-400"}`,onDragOver:_,onDragLeave:k,onDrop:R,onClick:P,children:[e?t.jsx("img",{src:e,alt:"الصورة الحالية",className:"w-full h-full object-cover"}):t.jsx("div",{className:"text-center",children:r?t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600 mx-auto"}):t.jsxs("div",{className:"text-gray-400",children:[t.jsx("svg",{className:"w-6 h-6 mx-auto mb-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),t.jsx("p",{className:"text-xs",children:f||"اختر صورة"})]})}),e&&!r&&t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center opacity-0 hover:opacity-100 transition-opacity",children:t.jsxs("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("input",{ref:S,type:"file",accept:g.join(","),onChange:O,className:"hidden",disabled:o||r}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(rt,{variant:"secondary",label:r?"جاري الرفع...":e?"تغيير الصورة":"اختيار صورة",onClick:P,disabled:o||r,className:"text-sm"}),e&&h&&a&&t.jsx(rt,{variant:"danger",label:"حذف الصورة",onClick:a,disabled:o||r,className:"text-sm"})]}),t.jsxs("p",{className:"text-xs text-gray-500",children:[g.includes("image/jpeg")?"JPG":"",g.includes("image/png")?" أو PNG":"",". حد أقصى ",p,"MB"]})]})]}),!e&&t.jsxs("div",{className:`border-2 border-dashed rounded-lg p-6 text-center transition-colors ${v?"border-blue-500 bg-blue-50":"border-gray-300"} ${o||r?"opacity-50 cursor-not-allowed":"hover:border-blue-400 cursor-pointer"}`,onDragOver:_,onDragLeave:k,onDrop:R,onClick:P,children:[t.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),t.jsx("p",{className:"text-gray-600 mb-2",children:"اسحب وأفلت الصورة هنا"}),t.jsx("p",{className:"text-gray-500 text-sm",children:"أو انقر للاختيار من الجهاز"})]})]})},Ax=({actions:e,size:n="md"})=>{const[a,r]=b.useState(!1),o=b.useRef(null);b.useEffect(()=>{const p=f=>{o.current&&!o.current.contains(f.target)&&r(!1)};return document.addEventListener("mousedown",p),()=>{document.removeEventListener("mousedown",p)}},[]);const d=p=>{p.disabled||(p.onClick(),r(!1))},h=n==="sm"?"p-1.5 text-xs":"p-2 text-sm",g=n==="sm"?"text-xs py-1":"text-sm py-2";return t.jsxs("div",{className:"relative inline-block",ref:o,children:[t.jsx("button",{onClick:()=>r(!a),className:`${h} text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-md transition-colors focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-1`,"aria-label":"إجراءات",children:t.jsx("svg",{className:`${n==="sm"?"w-4 h-4":"w-5 h-5"}`,fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M10 6a2 2 0 110-4 2 2 0 010 4zM10 12a2 2 0 110-4 2 2 0 010 4zM10 18a2 2 0 110-4 2 2 0 010 4z"})})}),a&&t.jsx("div",{className:`absolute left-0 mt-1 ${n==="sm"?"w-32":"w-40"} bg-white rounded-md shadow-lg border border-gray-200 z-50`,children:t.jsx("div",{className:`${g}`,children:e.map((p,f)=>t.jsxs("button",{onClick:()=>d(p),disabled:p.disabled,className:`
                  w-full text-right px-3 py-2 flex items-center gap-2 transition-colors
                  ${p.disabled?"text-gray-400 cursor-not-allowed":p.variant==="danger"?"text-red-600 hover:bg-red-50 hover:text-red-700":"text-gray-700 hover:bg-gray-50 hover:text-gray-900"}
                  ${f!==e.length-1?"border-b border-gray-100":""}
                `,children:[t.jsx("span",{className:"text-base",children:p.icon}),t.jsx("span",{className:"flex-1",children:p.label})]},f))})})]})},dR=()=>{const{showSuccess:e,showError:n}=vc(),[a,r]=b.useState(""),[o,d]=b.useState(""),[h,g]=b.useState(!1),p=Be({mutationFn:eu.forgotPassword,onSuccess:C=>{C.success?(g(!0),e("تم إرسال رابط إعادة تعيين كلمة المرور إلى بريدك الإلكتروني")):n(C.message||"فشل في إرسال البريد الإلكتروني")},onError:C=>{n(C.response?.data?.message||"حدث خطأ أثناء إرسال البريد الإلكتروني")}}),f=Be({mutationFn:eu.resendPasswordResetLink,onSuccess:C=>{C.success?e("تم إعادة إرسال الرابط بنجاح"):n(C.message||"فشل في إعادة الإرسال")},onError:C=>{n(C.response?.data?.message||"حدث خطأ أثناء إعادة الإرسال")}}),v=()=>{if(a.trim()){if(!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(a))return d("البريد الإلكتروني غير صحيح"),!1}else return d("البريد الإلكتروني مطلوب"),!1;return d(""),!0},w=C=>{if(C.preventDefault(),v()){const _={email:a};p.mutate(_)}},S=()=>{const C={email:a};f.mutate(C)},T=C=>{r(C),o&&d("")};return t.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center p-4",children:t.jsxs(Ia,{className:"w-full max-w-md p-8 shadow-xl",children:[t.jsxs("div",{className:"text-center mb-8",children:[t.jsx("div",{className:"mx-auto w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-white text-2xl font-bold",children:"B"})}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"BookN"}),t.jsx("p",{className:"text-gray-600",children:h?"تم إرسال البريد الإلكتروني":"نسيت كلمة المرور؟"})]}),h?t.jsxs("div",{className:"text-center space-y-6",children:[t.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:t.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"تم إرسال البريد الإلكتروني"}),t.jsx("p",{className:"text-gray-600 text-sm mb-4",children:"تم إرسال رابط إعادة تعيين كلمة المرور إلى:"}),t.jsx("p",{className:"font-medium text-gray-900 text-sm mb-6",children:a}),t.jsx("p",{className:"text-gray-500 text-xs mb-6",children:"تحقق من صندوق الوارد أو مجلد الرسائل غير المرغوب فيها"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsx(rt,{variant:"secondary",label:f.isPending?"جاري الإرسال...":"إعادة إرسال البريد",onClick:S,className:"w-full",disabled:f.isPending}),t.jsx(rt,{variant:"secondary",label:"تغيير البريد الإلكتروني",onClick:()=>{g(!1),r("")},className:"w-full"})]})]}):t.jsxs("div",{children:[t.jsx("div",{className:"mb-6 text-center",children:t.jsx("p",{className:"text-gray-600 text-sm",children:"أدخل بريدك الإلكتروني وسنرسل لك رابط لإعادة تعيين كلمة المرور"})}),t.jsxs("form",{onSubmit:w,className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:a,onChange:C=>T(C.target.value),placeholder:"admin@example.com",disabled:p.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${o?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),o&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:o})]}),t.jsx(rt,{type:"submit",variant:"primary",label:p.isPending?"جاري الإرسال...":"إرسال رابط إعادة التعيين",onClick:()=>{},className:"w-full py-3",disabled:p.isPending})]})]}),t.jsxs("div",{className:"mt-8 text-center space-y-4",children:[t.jsx("div",{className:"border-t border-gray-200 pt-6",children:t.jsxs("p",{className:"text-sm text-gray-600",children:["تذكرت كلمة المرور؟"," ",t.jsx(Bs,{to:"/auth/login",className:"font-medium text-blue-600 hover:text-blue-500",children:"تسجيل الدخول"})]})}),t.jsxs("div",{className:"text-xs text-gray-500",children:[t.jsx("p",{children:"هل تحتاج مساعدة؟"}),t.jsx(Bs,{to:"/contact",className:"text-blue-600 hover:text-blue-500",children:"تواصل مع الدعم الفني"})]})]})]})})},uR=()=>t.jsx("div",{className:"w-full bg-gradient-to-br from-blue-50 to-indigo-100",dir:"rtl",children:t.jsxs("div",{className:"w-full space-y-6",children:[t.jsx("h1",{className:"text-4xl font-bold text-center text-gray-800 mb-8",children:"اختبار التصاميم"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6 hover:shadow-xl transition-shadow duration-300",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"بطاقة بسيطة"}),t.jsx("p",{className:"text-gray-600",children:"هذا نص تجريبي للتأكد من أن التصاميم تعمل بشكل صحيح"})]}),t.jsxs("div",{className:"bg-gradient-to-r from-blue-500 to-purple-600 rounded-2xl shadow-lg p-6 text-white",children:[t.jsx("h3",{className:"text-xl font-bold mb-3",children:"بطاقة متدرجة"}),t.jsx("p",{children:"تصميم بخلفية متدرجة ونص أبيض"})]}),t.jsxs("div",{className:"glass-card rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-3",children:"بطاقة زجاجية"}),t.jsx("p",{className:"text-gray-600",children:"تأثير الزجاج المطلوب"})]})]}),t.jsxs("div",{className:"flex flex-wrap gap-4 justify-center",children:[t.jsx("button",{className:"bg-blue-500 hover:bg-blue-600 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"زر أزرق"}),t.jsx("button",{className:"bg-gradient-to-r from-green-500 to-green-600 hover:from-green-600 hover:to-green-700 text-white px-6 py-3 rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 transform hover:scale-105",children:"زر أخضر متدرج"}),t.jsx("button",{className:"bg-transparent border-2 border-gray-300 hover:border-blue-500 text-gray-700 hover:text-blue-500 px-6 py-3 rounded-xl transition-all duration-300",children:"زر شفاف"})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"أيقونات واختبارات"}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("div",{className:"w-12 h-12 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),t.jsx("div",{className:"w-12 h-12 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),t.jsx("div",{className:"w-12 h-12 bg-yellow-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-6 h-6 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-2.5L13.732 4c-.77-.833-1.964-.833-2.732 0L3.998 16.5c-.77.833.192 2.5 1.732 2.5z"})})})]})]}),t.jsxs("div",{className:"bg-white rounded-2xl shadow-lg p-6",children:[t.jsx("h3",{className:"text-xl font-bold text-gray-800 mb-4",children:"نموذج اختبار"}),t.jsxs("form",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم"}),t.jsx("input",{type:"text",placeholder:"أدخل اسمك",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",placeholder:"example@domain.com",className:"w-full px-4 py-2 border border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",dir:"ltr"})]}),t.jsx("button",{type:"submit",className:"w-full bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-xl font-medium transition-colors duration-300",children:"إرسال"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[1,2,3,4,5,6,7,8].map(e=>t.jsx("div",{className:"bg-gray-100 hover:bg-gray-200 rounded-lg p-4 text-center transition-colors duration-300",children:t.jsx("div",{className:"text-2xl font-bold text-gray-600",children:e})},e))})]})}),mR=()=>{const{showSuccess:e,showError:n}=p0(),[a,r]=b.useState("profile"),[o,d]=b.useState({name:"",email:"",phone:"",profileImage:""}),[h,g]=b.useState({userId:"",currentPassword:"",newPassword:""}),[p,f]=b.useState(""),[v,w]=b.useState(!1),[S,T]=b.useState(!1),[C,_]=b.useState(!1),[k,R]=b.useState({}),[O,P]=b.useState({}),{data:U,isLoading:A,refetch:$}=It({queryKey:["current-user"],queryFn:()=>ac.getCurrentUser({})}),E=Be({mutationFn:ac.updateProfilePicture,onSuccess:X=>{X.success?(e("تم تحديث الصورة الشخصية بنجاح"),$()):n(X.message||"فشل في تحديث الصورة الشخصية")},onError:X=>{n(X.response?.data?.message||"حدث خطأ أثناء تحديث الصورة الشخصية")}}),I=Be({mutationFn:ac.updateUserSettings,onSuccess:X=>{X.success?(e("تم تحديث الملف الشخصي بنجاح"),$()):n(X.message||"فشل في تحديث الملف الشخصي")},onError:X=>{n(X.response?.data?.message||"حدث خطأ أثناء تحديث الملف الشخصي")}}),Z=Be({mutationFn:eu.changePassword,onSuccess:X=>{X.success?(e("تم تغيير كلمة المرور بنجاح"),g({userId:h.userId,currentPassword:"",newPassword:""}),f("")):n(X.message||"فشل في تغيير كلمة المرور")},onError:X=>{n(X.response?.data?.message||"حدث خطأ أثناء تغيير كلمة المرور")}});b.useEffect(()=>{const X=U?.data;X&&(d({name:X.name||"",email:X.email||"",phone:X.phone||"",profileImage:X.profileImage||""}),g(z=>({...z,userId:X.id})))},[U]);const F=()=>{const X={};return o.name.trim()||(X.name="الاسم مطلوب"),o.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(o.email)||(X.email="البريد الإلكتروني غير صحيح"):X.email="البريد الإلكتروني مطلوب",o.phone.trim()?/^[0-9+\-\s()]+$/.test(o.phone)||(X.phone="رقم الهاتف غير صحيح"):X.phone="رقم الهاتف مطلوب",R(X),Object.keys(X).length===0},Y=()=>{const X={};return h.currentPassword.trim()||(X.currentPassword="كلمة المرور الحالية مطلوبة"),h.newPassword.trim()?h.newPassword.length<6&&(X.newPassword="كلمة المرور يجب أن تكون 6 أحرف على الأقل"):X.newPassword="كلمة المرور الجديدة مطلوبة",p.trim()?h.newPassword!==p&&(X.confirmPassword="كلمة المرور غير متطابقة"):X.confirmPassword="تأكيد كلمة المرور مطلوب",h.currentPassword===h.newPassword&&(X.newPassword="كلمة المرور الجديدة يجب أن تكون مختلفة عن الحالية"),P(X),Object.keys(X).length===0},G=X=>{if(X.preventDefault(),F()){const z={settingsJson:JSON.stringify(o)};I.mutate(z)}},V=X=>{X.preventDefault(),Y()&&Z.mutate(h)},H=(X,z)=>{d(J=>({...J,[X]:z})),k[X]&&R(J=>({...J,[X]:void 0}))},Q=(X,z)=>{g(J=>({...J,[X]:z})),O[X]&&P(J=>({...J,[X]:void 0}))},K=async X=>{try{const z=await W(X),J=U?.data;if(J?.id){const se={userId:J.id,profileImageUrl:z};E.mutate(se)}}catch{n("حدث خطأ أثناء معالجة الصورة")}},oe=()=>{const X=U?.data;if(X?.id){const z={userId:X.id,profileImageUrl:""};E.mutate(z)}},W=X=>new Promise((z,J)=>{const se=new FileReader;se.onload=()=>{se.result?z(se.result):J(new Error("فشل في قراءة الملف"))},se.onerror=()=>J(new Error("فشل في قراءة الملف")),se.readAsDataURL(X)});return A?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"جارٍ تحميل بيانات الملف الشخصي..."})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"الملف الشخصي"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"إدارة بياناتك الشخصية وإعدادات الحساب"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 space-x-reverse px-6",children:[t.jsx("button",{onClick:()=>r("profile"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="profile"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"البيانات الشخصية"}),t.jsx("button",{onClick:()=>r("password"),className:`py-4 px-1 border-b-2 font-medium text-sm ${a==="password"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"تغيير كلمة المرور"})]})}),t.jsxs("div",{className:"p-6",children:[a==="profile"&&t.jsxs("form",{onSubmit:G,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-4",children:"صورة الملف الشخصي"}),t.jsx(cR,{currentImage:o.profileImage,onImageUpload:K,onImageDelete:oe,isUploading:E.isPending,disabled:I.isPending,size:"md",placeholder:o.name.charAt(0).toUpperCase(),maxFileSize:2,acceptedTypes:["image/jpeg","image/png","image/jpg"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الاسم الكامل"}),t.jsx("input",{type:"text",value:o.name,onChange:X=>H("name",X.target.value),disabled:I.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 ${k.name?"border-red-300 focus:ring-red-500":"border-gray-300"}`}),k.name&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:o.email,onChange:X=>H("email",X.target.value),disabled:I.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${k.email?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),k.email&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"رقم الهاتف"}),t.jsx("input",{type:"tel",value:o.phone,onChange:X=>H("phone",X.target.value),disabled:I.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left ${k.phone?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),k.phone&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:k.phone})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"ملاحظة مهمة"}),t.jsx("div",{className:"mt-2 text-sm text-blue-700",children:t.jsx("p",{children:"تغيير البريد الإلكتروني قد يتطلب التحقق من العنوان الجديد. ستتلقى رسالة تأكيد على البريد الجديد."})})]})]})})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(rt,{type:"submit",variant:"primary",label:I.isPending?"جارٍ الحفظ...":"حفظ التغييرات",onClick:()=>{},disabled:I.isPending})})]}),a==="password"&&t.jsxs("form",{onSubmit:V,className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الحالية"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:v?"text":"password",value:h.currentPassword,onChange:X=>Q("currentPassword",X.target.value),disabled:Z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${O.currentPassword?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>w(!v),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:Z.isPending,children:v?"إخفاء":"إظهار"})]}),O.currentPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.currentPassword})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"كلمة المرور الجديدة"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:S?"text":"password",value:h.newPassword,onChange:X=>Q("newPassword",X.target.value),disabled:Z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${O.newPassword?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>T(!S),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:Z.isPending,children:S?"إخفاء":"إظهار"})]}),O.newPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.newPassword})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تأكيد كلمة المرور الجديدة"}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:C?"text":"password",value:p,onChange:X=>{f(X.target.value),O.confirmPassword&&P(z=>({...z,confirmPassword:void 0}))},disabled:Z.isPending,className:`w-full px-3 py-2 border rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500 text-left pr-10 ${O.confirmPassword?"border-red-300 focus:ring-red-500":"border-gray-300"}`,dir:"ltr"}),t.jsx("button",{type:"button",onClick:()=>_(!C),className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 hover:text-gray-600",disabled:Z.isPending,children:C?"إخفاء":"إظهار"})]}),O.confirmPassword&&t.jsx("p",{className:"mt-1 text-sm text-red-600",children:O.confirmPassword})]}),t.jsx("div",{className:"md:col-span-2",children:t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-yellow-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"نصائح لكلمة مرور قوية"}),t.jsx("div",{className:"mt-2 text-sm text-yellow-700",children:t.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[t.jsx("li",{children:"استخدم على الأقل 8 أحرف"}),t.jsx("li",{children:"امزج بين الأحرف الكبيرة والصغيرة"}),t.jsx("li",{children:"أضف أرقام ورموز خاصة"}),t.jsx("li",{children:"تجنب استخدام معلومات شخصية"})]})})]})]})})})]}),t.jsx("div",{className:"flex justify-end",children:t.jsx(rt,{type:"submit",variant:"primary",label:Z.isPending?"جارٍ التغيير...":"تغيير كلمة المرور",onClick:()=>{},disabled:Z.isPending})})]})]})]})]})})},hR=()=>{const{showSuccess:e,showError:n}=p0(),[a,r]=b.useState({language:"ar",theme:"light",notifications:{email:!0,sms:!0,push:!0,marketing:!1},privacy:{profileVisibility:"public",showEmail:!1,showPhone:!1},preferences:{dateFormat:"dd/mm/yyyy",currency:"YER",timezone:"Asia/Riyadh"}}),[o,d]=b.useState("general"),{data:h,isLoading:g}=It({queryKey:["current-user"],queryFn:()=>ac.getCurrentUser({})}),p=Be({mutationFn:ac.updateUserSettings,onSuccess:w=>{w.success?e("تم حفظ الإعدادات بنجاح"):n(w.message||"فشل في حفظ الإعدادات")},onError:w=>{n(w.response?.data?.message||"حدث خطأ أثناء حفظ الإعدادات")}});b.useEffect(()=>{if(h?.data?.settingsJson)try{const w=JSON.parse(h.data.settingsJson);r(S=>Object.assign({},S,w))}catch(w){console.error("خطأ في تحليل الإعدادات المحفوظة:",w)}},[h]);const f=(w,S,T)=>{r(C=>w==="notifications"||w==="privacy"||w==="preferences"?{...C,[w]:{...C[w],[S]:T}}:{...C,[w]:T})},v=()=>{if(h?.data?.id){const w={userId:h.data.id,settingsJson:JSON.stringify(a)};p.mutate(w)}};return g?t.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto mb-4"}),t.jsx("p",{className:"text-gray-600",children:"جارٍ تحميل الإعدادات..."})]})}):t.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4",children:t.jsxs("div",{className:"max-w-4xl mx-auto",children:[t.jsxs("div",{className:"mb-8",children:[t.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"الإعدادات"}),t.jsx("p",{className:"text-gray-600 mt-2",children:"إدارة تفضيلاتك وإعدادات التطبيق"})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsxs("nav",{className:"flex space-x-8 space-x-reverse px-6 overflow-x-auto",children:[t.jsx("button",{onClick:()=>d("general"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="general"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"الإعدادات العامة"}),t.jsx("button",{onClick:()=>d("notifications"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="notifications"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"الإشعارات"}),t.jsx("button",{onClick:()=>d("privacy"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="privacy"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"الخصوصية"}),t.jsx("button",{onClick:()=>d("preferences"),className:`py-4 px-1 border-b-2 font-medium text-sm whitespace-nowrap ${o==="preferences"?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700"}`,children:"التفضيلات"})]})}),t.jsxs("div",{className:"p-6",children:[o==="general"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"الإعدادات العامة"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اللغة"}),t.jsxs("select",{value:a.language,onChange:w=>f("language","",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"ar",children:"العربية"}),t.jsx("option",{value:"en",children:"English"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المظهر"}),t.jsxs("select",{value:a.theme,onChange:w=>f("theme","",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"light",children:"فاتح"}),t.jsx("option",{value:"dark",children:"داكن"}),t.jsx("option",{value:"system",children:"تلقائي (حسب النظام)"})]})]})]})]})}),o==="notifications"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"إعدادات الإشعارات"}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إشعارات البريد الإلكتروني"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي الإشعارات عبر البريد الإلكتروني"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.email,onChange:w=>f("notifications","email",w.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إشعارات الرسائل النصية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي الإشعارات عبر الرسائل النصية"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.sms,onChange:w=>f("notifications","sms",w.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"الإشعارات الفورية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي الإشعارات الفورية على المتصفح"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.push,onChange:w=>f("notifications","push",w.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"الإشعارات التسويقية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"تلقي إشعارات العروض والأخبار"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.notifications.marketing,onChange:w=>f("notifications","marketing",w.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})}),o==="privacy"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"إعدادات الخصوصية"}),t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مستوى ظهور الملف الشخصي"}),t.jsxs("select",{value:a.privacy.profileVisibility,onChange:w=>f("privacy","profileVisibility",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"public",children:"عام - يمكن للجميع رؤيته"}),t.jsx("option",{value:"contacts",children:"جهات الاتصال فقط"}),t.jsx("option",{value:"private",children:"خاص - لا يظهر للآخرين"})]})]}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إظهار البريد الإلكتروني"}),t.jsx("p",{className:"text-sm text-gray-500",children:"السماح للآخرين برؤية بريدك الإلكتروني"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.privacy.showEmail,onChange:w=>f("privacy","showEmail",w.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]}),t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"إظهار رقم الهاتف"}),t.jsx("p",{className:"text-sm text-gray-500",children:"السماح للآخرين برؤية رقم هاتفك"})]}),t.jsxs("label",{className:"relative inline-flex items-center cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:a.privacy.showPhone,onChange:w=>f("privacy","showPhone",w.target.checked),className:"sr-only peer"}),t.jsx("div",{className:"w-11 h-6 bg-gray-200 peer-focus:outline-none peer-focus:ring-4 peer-focus:ring-blue-300 rounded-full peer peer-checked:after:translate-x-full peer-checked:after:border-white after:content-[''] after:absolute after:top-[2px] after:left-[2px] after:bg-white after:border-gray-300 after:border after:rounded-full after:h-5 after:w-5 after:transition-all peer-checked:bg-blue-600"})]})]})]})]})]})}),o==="preferences"&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"التفضيلات"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صيغة التاريخ"}),t.jsxs("select",{value:a.preferences.dateFormat,onChange:w=>f("preferences","dateFormat",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"dd/mm/yyyy",children:"يوم/شهر/سنة (31/12/2023)"}),t.jsx("option",{value:"mm/dd/yyyy",children:"شهر/يوم/سنة (12/31/2023)"}),t.jsx("option",{value:"yyyy-mm-dd",children:"سنة-شهر-يوم (2023-12-31)"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"العملة المفضلة"}),t.jsxs("select",{value:a.preferences.currency,onChange:w=>f("preferences","currency",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"YER",children:"ريال يمني (YER)"}),t.jsx("option",{value:"USD",children:"دولار أمريكي (USD)"}),t.jsx("option",{value:"EUR",children:"يورو (EUR)"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"المنطقة الزمنية"}),t.jsxs("select",{value:a.preferences.timezone,onChange:w=>f("preferences","timezone",w.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",children:[t.jsx("option",{value:"Asia/Riyadh",children:"صنعاء (GMT+3)"}),t.jsx("option",{value:"Asia/Dubai",children:"دبي (GMT+4)"}),t.jsx("option",{value:"Europe/London",children:"لندن (GMT+0)"}),t.jsx("option",{value:"America/New_York",children:"نيويورك (GMT-5)"})]})]})]})]})}),t.jsx("div",{className:"mt-8 pt-6 border-t border-gray-200",children:t.jsx("div",{className:"flex justify-end",children:t.jsx(rt,{variant:"primary",label:p.isPending?"جارٍ الحفظ...":"حفظ الإعدادات",onClick:v,disabled:p.isPending})})})]})]}),t.jsx(Ia,{className:"p-6",children:t.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("svg",{className:"h-5 w-5 text-blue-400",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a1 1 0 000 2v3a1 1 0 001 1h1a1 1 0 100-2v-3a1 1 0 00-1-1H9z",clipRule:"evenodd"})})}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-gray-900",children:"ملاحظة حول الإعدادات"}),t.jsx("div",{className:"mt-2 text-sm text-gray-600",children:t.jsx("p",{children:"يتم حفظ إعداداتك تلقائياً في حسابك. بعض التغييرات قد تتطلب إعادة تسجيل الدخول لتظهر بشكل كامل. في حالة واجهت أي مشاكل، يمكنك التواصل مع الدعم الفني."})})]})]})})]})})},Yo=({title:e,value:n,icon:a,color:r,change:o,changeType:d,prefix:h,suffix:g})=>{const p=v=>({blue:"bg-blue-50 text-blue-600 border-blue-200",green:"bg-green-50 text-green-600 border-green-200",purple:"bg-purple-50 text-purple-600 border-purple-200",yellow:"bg-yellow-50 text-yellow-600 border-yellow-200",indigo:"bg-indigo-50 text-indigo-600 border-indigo-200",red:"bg-red-50 text-red-600 border-red-200"})[v],f=v=>new Intl.NumberFormat("ar-SA").format(v);return t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:e}),t.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[h&&t.jsx("span",{className:"text-sm font-normal ml-1",children:h}),f(n),g&&t.jsx("span",{className:"text-sm font-normal mr-1",children:g})]}),o&&t.jsx("p",{className:`text-sm mt-1 ${d==="increase"?"text-green-600":"text-red-600"}`,children:t.jsxs("span",{className:"inline-flex items-center",children:[d==="increase"?"↗️":"↘️",t.jsx("span",{className:"mr-1",children:o})]})})]}),t.jsx("div",{className:`w-12 h-12 rounded-lg flex items-center justify-center ${p(r)}`,children:t.jsx("span",{className:"text-xl",children:a})})]})})},fR=({activities:e})=>{const n=r=>{const o={booking:"📝",property:"🏢",payment:"💰",review:"⭐",user:"👤",default:"📋"};return o[r]||o.default},a=r=>{const o={booking:"bg-blue-50 text-blue-600",property:"bg-green-50 text-green-600",payment:"bg-yellow-50 text-yellow-600",review:"bg-purple-50 text-purple-600",user:"bg-indigo-50 text-indigo-600",default:"bg-gray-50 text-gray-600"};return o[r]||o.default};return t.jsxs("div",{className:"space-y-4",children:[e.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أنشطة حديثة"})}):e.map(r=>t.jsxs("div",{className:"flex items-start space-x-3 space-x-reverse",children:[t.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${a(r.type)}`,children:t.jsx("span",{className:"text-sm",children:n(r.type)})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:r.message}),t.jsxs("div",{className:"flex items-center text-xs text-gray-500 mt-1",children:[t.jsx("span",{children:r.user}),t.jsx("span",{className:"mx-2",children:"•"}),t.jsx("span",{children:r.time})]})]})]},r.id)),e.length>0&&t.jsx("div",{className:"text-center pt-4 border-t border-gray-200",children:t.jsx("button",{className:"text-sm text-blue-600 hover:text-blue-700 font-medium",children:"عرض جميع الأنشطة"})})]})},_j=()=>{const[e,n]=b.useState({totalUsers:0,totalProperties:0,totalBookings:0,totalRevenue:0,activeBookings:0,pendingApprovals:0}),[a,r]=b.useState(!0);b.useEffect(()=>{(async()=>{r(!0),setTimeout(()=>{n({totalUsers:1284,totalProperties:456,totalBookings:2341,totalRevenue:847650,activeBookings:89,pendingApprovals:12}),r(!1)},1e3)})()},[]);const o=[{id:1,type:"booking",message:"حجز جديد في فندق الريتز",time:"منذ 5 دقائق",user:"أحمد محمد"},{id:2,type:"property",message:"تم إضافة كيان جديد للمراجعة",time:"منذ 15 دقيقة",user:"سارة أحمد"},{id:3,type:"payment",message:"تم استلام دفعة بقيمة 2,500 ريال",time:"منذ 30 دقيقة",user:"محمد عبدالله"},{id:4,type:"review",message:"تقييم جديد يحتاج للمراجعة",time:"منذ ساعة",user:"فاطمة علي"}];return a?t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"لوحة المعلومات الإدارية"}),t.jsx("p",{className:"text-gray-600",children:"مرحباً بك في لوحة التحكم الرئيسية لإدارة نظام الحجوزات"})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6 gap-6",children:[t.jsx(Yo,{title:"إجمالي المستخدمين",value:e.totalUsers,icon:"👥",color:"blue",change:"+12%",changeType:"increase"}),t.jsx(Yo,{title:"الكيانات المسجلة",value:e.totalProperties,icon:"🏢",color:"green",change:"+8%",changeType:"increase"}),t.jsx(Yo,{title:"إجمالي الحجوزات",value:e.totalBookings,icon:"📝",color:"purple",change:"+15%",changeType:"increase"}),t.jsx(Yo,{title:"الإيرادات الإجمالية",value:e.totalRevenue,icon:"💰",color:"yellow",change:"+23%",changeType:"increase",prefix:"ريال"}),t.jsx(Yo,{title:"الحجوزات النشطة",value:e.activeBookings,icon:"📅",color:"indigo",change:"-3%",changeType:"decrease"}),t.jsx(Yo,{title:"في انتظار الموافقة",value:e.pendingApprovals,icon:"⏳",color:"red",change:"+2",changeType:"increase"})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"الإيرادات الشهرية"}),t.jsx("div",{className:"h-64 flex items-center justify-center text-gray-500",children:t.jsx("p",{children:"مخطط الإيرادات سيتم إضافته هنا"})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"النشاطات الأخيرة"}),t.jsx(fR,{activities:o})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"إجراءات سريعة"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("button",{className:"p-4 bg-blue-50 rounded-lg text-center hover:bg-blue-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"👤"}),t.jsx("div",{className:"text-sm font-medium text-blue-700",children:"إضافة مستخدم"})]}),t.jsxs("button",{className:"p-4 bg-green-50 rounded-lg text-center hover:bg-green-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"🏢"}),t.jsx("div",{className:"text-sm font-medium text-green-700",children:"موافقة على كيان"})]}),t.jsxs("button",{className:"p-4 bg-purple-50 rounded-lg text-center hover:bg-purple-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"📊"}),t.jsx("div",{className:"text-sm font-medium text-purple-700",children:"عرض التقارير"})]}),t.jsxs("button",{className:"p-4 bg-orange-50 rounded-lg text-center hover:bg-orange-100 transition-colors",children:[t.jsx("div",{className:"text-2xl mb-2",children:"⚙️"}),t.jsx("div",{className:"text-sm font-medium text-orange-700",children:"إعدادات النظام"})]})]})]})]})},Xo={getAll:e=>we.get("/api/admin/Users",{params:e}).then(n=>n.data),create:e=>we.post("/api/admin/Users",e).then(n=>n.data),update:(e,n)=>we.put(`/api/admin/Users/${e}`,n).then(a=>a.data),activate:e=>we.post(`/api/admin/Users/${e}/activate`).then(n=>n.data),deactivate:e=>we.post(`/api/admin/Users/${e}/deactivate`).then(n=>n.data),assignRole:e=>we.post(`/api/admin/Users/${e.userId}/assign-role`,e).then(n=>n.data),getByRole:e=>we.get("/api/admin/Users/by-role",{params:e}).then(n=>n.data),getLifetimeStats:e=>we.get(`/api/admin/Users/${e.userId}/lifetime-stats`).then(n=>n.data),getNotifications:e=>{const{userId:n,...a}=e;return we.get(`/api/admin/Users/${n}/notifications`,{params:a}).then(r=>r.data)},getDetails:e=>we.get(`/api/admin/Users/${e}/details`).then(n=>n.data)},P0=e=>{const n=Bn(),a=["admin-users",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>Xo.getAll(e)}),h=Be({mutationFn:v=>Xo.create(v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}}),g=Be({mutationFn:({userId:v,data:w})=>Xo.update(v,w),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}}),p=Be({mutationFn:v=>Xo.activate(v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}}),f=Be({mutationFn:v=>Xo.deactivate(v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]})}});return{usersData:r,isLoading:o,error:d,createUser:h,updateUser:g,activateUser:p,deactivateUser:f}},pR=e=>{const n=["user-details",e],{data:a,isLoading:r,error:o,refetch:d}=It({queryKey:n,queryFn:()=>Xo.getDetails(e),enabled:!!e});return{userDetails:a?.data||null,isLoading:r,error:o,refetch:d,isSuccess:a?.success||!1,message:a?.message||null}},ls=({data:e,columns:n,loading:a=!1,pagination:r,onRowClick:o,rowSelection:d,actions:h,mobileCardTitle:g,mobileCardSubtitle:p,mobileCardImage:f})=>{const[v,w]=b.useState(""),[S,T]=b.useState("asc"),[C,_]=b.useState("table"),[k,R]=b.useState(!1);b.useEffect(()=>{const E=()=>{R(window.innerWidth<768),window.innerWidth<768&&_("cards")};return E(),window.addEventListener("resize",E),()=>window.removeEventListener("resize",E)},[]);const O=E=>{v===E?T(S==="asc"?"desc":"asc"):(w(E),T("asc"))},P=E=>v!==E?"⚬":S==="asc"?"↑":"↓",U=E=>{const I={blue:"text-blue-600 hover:text-blue-800 hover:bg-blue-50",green:"text-green-600 hover:text-green-800 hover:bg-green-50",red:"text-red-600 hover:text-red-800 hover:bg-red-50",yellow:"text-yellow-600 hover:text-yellow-800 hover:bg-yellow-50",orange:"text-orange-600 hover:text-orange-800 hover:bg-orange-50"};return I[E]||I.blue},A=()=>n.filter(E=>!E.hideOnMobile).sort((E,I)=>{const Z={high:1,medium:2,low:3},F=Z[E.priority||"medium"],Y=Z[I.priority||"medium"];return F-Y}).slice(0,4),$=()=>{const E=A();return t.jsx("div",{className:"space-y-4 p-4",children:e.map((I,Z)=>t.jsx("div",{className:`bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden transition-all duration-200 ${o?"cursor-pointer hover:shadow-md hover:border-blue-300":""}`,onClick:()=>o?.(I,Z),children:t.jsxs("div",{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsxs("div",{className:"flex items-center space-x-3 space-x-reverse",children:[f&&t.jsx("div",{className:"w-12 h-12 rounded-lg bg-gradient-to-br from-blue-50 to-indigo-50 flex items-center justify-center overflow-hidden",children:f(I)?t.jsx("img",{src:f(I),alt:"صورة",className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-blue-600 text-xl",children:"📄"})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 truncate",children:g?g(I):`عنصر ${Z+1}`}),p&&t.jsx("p",{className:"text-sm text-gray-500 truncate",children:p(I)})]})]}),d&&t.jsx("div",{className:"flex items-center",children:t.jsx("input",{type:"checkbox",className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded",checked:d.selectedRowKeys.includes(Z.toString()),onChange:F=>{F.stopPropagation();const Y=Z.toString();F.target.checked?d.onChange([...d.selectedRowKeys,Y],[...d.selectedRowKeys.map(G=>e[parseInt(G)]),I]):d.onChange(d.selectedRowKeys.filter(G=>G!==Y),d.selectedRowKeys.filter(G=>G!==Y).map(G=>e[parseInt(G)]))}})})]}),t.jsx("div",{className:"grid grid-cols-1 gap-3",children:E.map((F,Y)=>{const G=I[F.key],V=F.render?F.render(G,I,Z):G;return t.jsxs("div",{className:"flex items-center justify-between py-2 border-b border-gray-100 last:border-b-0",children:[t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("span",{className:"text-sm font-medium text-gray-600",children:[F.mobileLabel||F.title,":"]})}),t.jsx("div",{className:"text-sm text-gray-900 font-medium text-left",children:V})]},Y)})}),h&&h.length>0&&t.jsx("div",{className:"mt-4 pt-3 border-t border-gray-100",children:t.jsxs("div",{className:"flex items-center justify-end space-x-2 space-x-reverse",children:[h.filter(F=>!F.show||F.show(I)).slice(0,3).map((F,Y)=>t.jsxs("button",{onClick:G=>{G.stopPropagation(),F.onClick(I)},className:`px-3 py-1.5 text-xs font-medium rounded-lg transition-colors ${U(F.color||"blue")}`,children:[F.icon&&t.jsx("span",{className:"ml-1",children:F.icon}),F.label]},Y)),h.filter(F=>!F.show||F.show(I)).length>3&&t.jsx("div",{onClick:F=>F.stopPropagation(),children:t.jsx(Ax,{actions:h.filter(F=>!F.show||F.show(I)).slice(3).map(F=>({label:F.label,icon:F.icon||"",onClick:()=>F.onClick(I),variant:F.color==="red"?"danger":"default"}))})})]})})]})},Z))})};return a?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[k&&t.jsx("div",{className:"bg-gray-50 px-4 py-3 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"عرض البيانات"}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("button",{onClick:()=>_("table"),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${C==="table"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"📊 جدول"}),t.jsx("button",{onClick:()=>_("cards"),className:`px-3 py-1.5 text-sm font-medium rounded-lg transition-colors ${C==="cards"?"bg-blue-600 text-white":"bg-white text-gray-600 hover:bg-gray-100"}`,children:"📱 بطاقات"})]})]})}),k&&C==="cards"&&t.jsx("div",{children:e.length===0?t.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4",children:[t.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mb-4",children:t.jsx("span",{className:"text-3xl",children:"📄"})}),t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"لا توجد بيانات"}),t.jsx("p",{className:"text-sm text-gray-500 text-center",children:"لا توجد بيانات لعرضها في الوقت الحالي"})]}):$()}),(!k||C==="table")&&t.jsx("div",{className:"overflow-x-auto",children:t.jsxs("table",{className:"min-w-full",children:[t.jsx("thead",{className:"bg-gray-50",children:t.jsxs("tr",{children:[d&&t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:t.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",onChange:E=>{if(E.target.checked){const I=e.map((Z,F)=>F.toString());d.onChange(I,e)}else d.onChange([],[])},checked:d.selectedRowKeys.length===e.length&&e.length>0})}),n.map((E,I)=>t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",style:{width:E.width},children:t.jsxs("div",{className:`flex items-center justify-${E.align||"right"}`,children:[t.jsx("span",{children:E.title}),E.sortable&&t.jsx("button",{onClick:()=>O(E.key),className:"mr-2 text-gray-400 hover:text-gray-600",children:P(E.key)})]})},I)),h&&h.length>0&&t.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"الإجراءات"})]})}),t.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:e.length===0?t.jsx("tr",{children:t.jsx("td",{colSpan:n.length+(d?1:0)+(h?1:0),className:"px-6 py-12 text-center text-gray-500",children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-4xl mb-2",children:"📄"}),t.jsx("p",{children:"لا توجد بيانات للعرض"})]})})}):e.map((E,I)=>t.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${o?"cursor-pointer":""}`,onClick:()=>o?.(E,I),children:[d&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:t.jsx("input",{type:"checkbox",className:"rounded border-gray-300 text-blue-600 focus:ring-blue-500",checked:d.selectedRowKeys.includes(I.toString()),onChange:Z=>{const F=I.toString();Z.target.checked?d.onChange([...d.selectedRowKeys,F],[...d.selectedRowKeys.map(Y=>e[parseInt(Y)]),E]):d.onChange(d.selectedRowKeys.filter(Y=>Y!==F),d.selectedRowKeys.filter(Y=>Y!==F).map(Y=>e[parseInt(Y)]))},onClick:Z=>Z.stopPropagation()})}),n.map((Z,F)=>t.jsx("td",{className:`px-6 py-4 whitespace-nowrap text-sm text-gray-900 text-${Z.align||"right"}`,children:Z.render?Z.render(E[Z.key],E,I):E[Z.key]},F)),h&&h.length>0&&t.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium",onClick:Z=>Z.stopPropagation(),children:t.jsx(Ax,{actions:h.filter(Z=>!Z.show||Z.show(E)).map(Z=>({label:Z.label,icon:Z.icon||"",onClick:()=>Z.onClick(E),variant:Z.color==="red"?"danger":"default"}))})})]},I))})]})}),r&&t.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border-t border-gray-200 sm:px-6",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>r.onChange(r.current-1,r.pageSize),disabled:r.current<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),t.jsx("button",{onClick:()=>r.onChange(r.current+1,r.pageSize),disabled:r.current*r.pageSize>=r.total,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["عرض"," ",t.jsx("span",{className:"font-medium",children:(r.current-1)*r.pageSize+1})," ","إلى"," ",t.jsx("span",{className:"font-medium",children:Math.min(r.current*r.pageSize,r.total)})," ","من"," ",t.jsx("span",{className:"font-medium",children:r.total})," نتيجة"]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsx("button",{onClick:()=>r.onChange(r.current-1,r.pageSize),disabled:r.current<=1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"}),Array.from({length:Math.ceil(r.total/r.pageSize)},(E,I)=>I+1).slice(Math.max(0,r.current-3),Math.min(Math.ceil(r.total/r.pageSize),r.current+2)).map(E=>t.jsx("button",{onClick:()=>r.onChange(E,r.pageSize),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${E===r.current?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:E},E)),t.jsx("button",{onClick:()=>r.onChange(r.current+1,r.pageSize),disabled:r.current*r.pageSize>=r.total,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"})]})})]})]})]})},ti=({searchPlaceholder:e="البحث...",searchValue:n,onSearchChange:a,filters:r=[],filterValues:o,onFilterChange:d,onReset:h,showAdvanced:g=!1,onToggleAdvanced:p})=>{const[f,v]=b.useState(n),w=C=>{C.preventDefault(),a(f)},S=C=>{const _=o[C.key];switch(C.type){case"select":return t.jsxs("select",{value:_||"",onChange:k=>d(C.key,k.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"جميع الخيارات"}),C.options?.map(k=>t.jsx("option",{value:k.value,children:k.label},k.value))]});case"boolean":return t.jsxs("select",{value:_!==void 0?_.toString():"",onChange:k=>{const R=k.target.value;d(C.key,R===""?void 0:R==="true")},className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[t.jsx("option",{value:"",children:"جميع الحالات"}),t.jsx("option",{value:"true",children:"نعم"}),t.jsx("option",{value:"false",children:"لا"})]});case"date":return t.jsx("input",{type:"date",value:_||"",onChange:k=>d(C.key,k.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"});case"number":return t.jsx("input",{type:"number",value:_||"",onChange:k=>d(C.key,k.target.value?Number(k.target.value):""),placeholder:C.placeholder,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"});case"text":return t.jsx("input",{type:"text",value:_||"",onChange:k=>d(C.key,k.target.value),placeholder:C.placeholder,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"});case"dateRange":return t.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[t.jsx("input",{type:"date",value:_?.from||"",onChange:k=>d(C.key,{..._,from:k.target.value}),placeholder:"من",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),t.jsx("input",{type:"date",value:_?.to||"",onChange:k=>d(C.key,{..._,to:k.target.value}),placeholder:"إلى",className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]});case"custom":return C.render?C.render(_,k=>d(C.key,k)):null;default:return null}},T=Object.values(o).some(C=>C!==void 0&&C!==""&&C!==null);return t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[t.jsx("form",{onSubmit:w,className:"mb-4",children:t.jsxs("div",{className:"flex gap-4",children:[t.jsx("div",{className:"flex-1",children:t.jsx("input",{type:"text",value:f,onChange:C=>v(C.target.value),placeholder:e,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})}),t.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"🔍 بحث"}),r.length>0&&p&&t.jsxs("button",{type:"button",onClick:p,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:["⚙️ ",g?"إخفاء الفلاتر":"فلاتر متقدمة"]})]})}),g&&r.length>0&&t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4 mb-4",children:r.map(C=>t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:C.label}),S(C)]},C.key))}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>a(f),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"✓ تطبيق الفلاتر"}),t.jsx("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"🔄 إعادة تعيين"})]}),T&&t.jsx("span",{className:"text-sm text-blue-600 font-medium",children:"✓ تم تطبيق فلاتر"})]})]})]})};class mn{static BASE_URL="/api/images";static async uploadImage(n,a){const r=new FormData;return r.append("file",n.file),n.propertyId&&r.append("propertyId",n.propertyId),n.unitId&&r.append("unitId",n.unitId),r.append("category",n.category),n.alt&&r.append("alt",n.alt),n.isPrimary!==void 0&&r.append("isPrimary",String(n.isPrimary)),n.order!==void 0&&r.append("order",String(n.order)),n.tags&&r.append("tags",JSON.stringify(n.tags)),(await we.post(`${this.BASE_URL}/upload`,r,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:d=>{if(a&&d.total){const h=Math.round(d.loaded*100/d.total);a(h)}}})).data}static async uploadMultipleImages(n,a){const r=n.map(o=>this.uploadImage({...a,file:o}));return Promise.all(r)}static async getImages(n={}){const a=new URLSearchParams;return n.propertyId&&a.append("propertyId",n.propertyId),n.unitId&&a.append("unitId",n.unitId),n.category&&a.append("category",n.category),n.page&&a.append("page",String(n.page)),n.limit&&a.append("limit",String(n.limit)),n.sortBy&&a.append("sortBy",n.sortBy),n.sortOrder&&a.append("sortOrder",n.sortOrder),n.search&&a.append("search",n.search),(await we.get(`${this.BASE_URL}?${a.toString()}`)).data}static async getImage(n){return(await we.get(`${this.BASE_URL}/${n}`)).data}static async updateImage(n){const{id:a,...r}=n;return(await we.put(`${this.BASE_URL}/${a}`,r)).data}static async deleteImage(n,a=!1){await we.delete(`${this.BASE_URL}/${n}?permanent=${a}`)}static async deleteImages(n){await we.post(`${mn.BASE_URL}/bulk-delete`,n)}static async reorderImages(n){await we.post(`${mn.BASE_URL}/reorder`,n)}static async setPrimaryImage(n,a,r){await we.post(`${mn.BASE_URL}/${n}/set-primary`,{propertyId:a,unitId:r})}static async getImageStatistics(n,a){const r=new URLSearchParams;return n&&r.append("propertyId",n),a&&r.append("unitId",a),(await we.get(`${this.BASE_URL}/statistics?${r.toString()}`)).data}static async searchImages(n){return(await we.post(`${this.BASE_URL}/search`,n)).data}static async getUploadProgress(n){return(await we.get(`${this.BASE_URL}/upload-progress/${n}`)).data}static async getDownloadUrl(n,a){const r=a?`?size=${a}`:"";return(await we.get(`${this.BASE_URL}/${n}/download${r}`)).data.url}static async optimizeImage(n,a){return(await we.post(`${this.BASE_URL}/${n}/optimize`,a)).data}static async generateThumbnails(n,a){return(await we.post(`${this.BASE_URL}/${n}/thumbnails`,{sizes:a})).data}static async copyImage(n,a,r){return(await we.post(`${this.BASE_URL}/${n}/copy`,{targetPropertyId:a,targetUnitId:r})).data}static async convertImageFormat(n,a,r){return(await we.post(`${this.BASE_URL}/${n}/convert`,{format:a,quality:r})).data}static async addWatermark(n,a,r="bottom-right"){return(await we.post(`${this.BASE_URL}/${n}/watermark`,{text:a,position:r})).data}static async rotateImage(n,a){return(await we.post(`${this.BASE_URL}/${n}/rotate`,{degrees:a})).data}static async flipImage(n,a){return(await we.post(`${this.BASE_URL}/${n}/flip`,{direction:a})).data}static async cropImage(n,a){return(await we.post(`${this.BASE_URL}/${n}/crop`,a)).data}static async applyFilter(n,a,r=50){return(await we.post(`${this.BASE_URL}/${n}/filter`,{filter:a,intensity:r})).data}static async restoreOriginal(n){return(await we.post(`${this.BASE_URL}/${n}/restore`)).data}static async getEditHistory(n){return(await we.get(`${this.BASE_URL}/${n}/history`)).data}static validateImageFile(n){if(!["image/jpeg","image/png","image/webp","image/gif"].includes(n.type))return{valid:!1,error:"نوع الملف غير مدعوم. يرجى اختيار صورة بصيغة JPEG أو PNG أو WebP أو GIF"};const r=10*1024*1024;return n.size>r?{valid:!1,error:"حجم الملف كبير جداً. الحد الأقصى هو 10 ميجابايت"}:{valid:!0}}static async compressImage(n,a=.8){return new Promise(r=>{const o=document.createElement("canvas"),d=o.getContext("2d"),h=new Image;h.onload=()=>{let{width:f,height:v}=h;f>1920&&(v=v*1920/f,f=1920),v>1080&&(f=f*1080/v,v=1080),o.width=f,o.height=v,d?.drawImage(h,0,0,f,v),o.toBlob(w=>{if(w){const S=new File([w],n.name,{type:n.type,lastModified:Date.now()});r(S)}else r(n)},n.type,a)},h.src=URL.createObjectURL(n)})}}const Yl=({value:e="",onChange:n,multiple:a=!1,maxFiles:r=10,maxSize:o=5,acceptedFormats:d=["jpg","jpeg","png","gif","webp"],showPreview:h=!0,className:g="",disabled:p=!1,required:f=!1,placeholder:v="اضغط لاختيار الصور أو اسحبها هنا",uploadEndpoint:w="/api/upload/images"})=>{const[S,T]=b.useState([]),[C,_]=b.useState(!1),[k,R]=b.useState(!1),O=b.useRef(null),P=Array.isArray(e)?e:e?[e]:[],U=H=>{if(H.size>o*1024*1024)return`حجم الملف كبير جداً (الحد الأقصى ${o}MB)`;const Q=H.name.split(".").pop()?.toLowerCase();return!Q||!d.includes(Q)?`نوع الملف غير مدعوم (المدعوم: ${d.join(", ")})`:!a&&P.length+S.length>=1?"يمكن رفع صورة واحدة فقط":P.length+S.length>=r?`تم الوصول للحد الأقصى (${r} صور)`:null},A=b.useCallback(H=>{const Q=[];Array.from(H).forEach(K=>{const oe=U(K),W={file:K,url:URL.createObjectURL(K),uploading:!1,uploaded:!1,error:oe||void 0,progress:0};Q.push(W)}),T(K=>[...K,...Q])},[P.length,S.length,r,a]),$=async()=>{if(S.length===0)return;R(!0);const H=[...P];T(K=>K.map(oe=>({...oe,uploading:!0,error:void 0})));for(let K=0;K<S.length;K++){const oe=S[K];if(!oe.error)try{const W=await mn.uploadImage({file:oe.file,category:"gallery"},X=>{T(z=>z.map((J,se)=>se===K?{...J,progress:X}:J))});W&&(H.push(W.image?.url||""),T(X=>X.map((z,J)=>J===K?{...z,uploading:!1,uploaded:!0,progress:100}:z)))}catch{T(X=>X.map((z,J)=>J===K?{...z,uploading:!1,error:"فشل في رفع الصورة"}:z))}}const Q=a?H:H[H.length-1]||"";n(Q),T(K=>K.filter(oe=>!oe.uploaded)),R(!1)},E=H=>{T(Q=>{const K=[...Q];return URL.revokeObjectURL(K[H].url),K.splice(H,1),K})},I=H=>{const Q=[...P];Q.splice(H,1);const K=a?Q:Q[0]||"";n(K)},Z=H=>{H.preventDefault(),_(!0)},F=H=>{H.preventDefault(),_(!1)},Y=H=>{if(H.preventDefault(),_(!1),p)return;const Q=H.dataTransfer.files;Q.length>0&&A(Q)},G=H=>{const Q=H.target.files;Q&&Q.length>0&&A(Q),H.target.value=""},V=()=>{!p&&O.current&&O.current.click()};return t.jsxs("div",{className:`space-y-4 ${g}`,children:[t.jsxs("div",{onDragOver:Z,onDragLeave:F,onDrop:Y,onClick:V,className:`
          relative border-2 border-dashed rounded-lg p-6 text-center cursor-pointer transition-colors
          ${C?"border-blue-500 bg-blue-50":"border-gray-300 hover:border-gray-400"}
          ${p?"opacity-50 cursor-not-allowed":""}
          ${f&&P.length===0&&S.length===0?"border-red-300 bg-red-50":""}
        `,children:[t.jsx("input",{ref:O,type:"file",multiple:a,accept:d.map(H=>`.${H}`).join(","),onChange:G,disabled:p,className:"hidden"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx("div",{className:"text-4xl",children:"📸"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:v}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["الأنواع المدعومة: ",d.join(", ")," • الحد الأقصى: ",o,"MB"]}),a&&t.jsxs("p",{className:"text-xs text-gray-400",children:["يمكن رفع حتى ",r," صور"]})]})]})]}),h&&P.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"الصور الحالية:"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:P.map((H,Q)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:H,alt:`صورة ${Q+1}`,className:"w-full h-24 object-cover rounded-lg border border-gray-200"}),!p&&t.jsx("button",{type:"button",onClick:()=>I(Q),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"×"})]},Q))})]}),h&&S.length>0&&t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-900",children:"صور جديدة:"}),t.jsx("button",{type:"button",onClick:$,disabled:p||k||S.every(H=>H.error),className:"px-3 py-1 bg-blue-600 text-white text-sm rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed",children:k?"جارٍ الرفع...":"رفع الصور"})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:S.map((H,Q)=>t.jsxs("div",{className:"relative group",children:[t.jsx("img",{src:H.url,alt:`معاينة ${Q+1}`,className:`
                    w-full h-24 object-cover rounded-lg border-2
                    ${H.error?"border-red-300":"border-gray-200"}
                    ${H.uploading?"opacity-50":""}
                  `}),t.jsxs("div",{className:"absolute inset-0 flex flex-col items-center justify-center space-y-1",children:[H.uploading&&t.jsxs(t.Fragment,{children:[t.jsx("progress",{value:H.progress||0,max:100,className:"w-10 h-2"}),t.jsxs("span",{className:"text-white text-xs",children:[H.progress||0,"%"]})]}),H.uploaded&&t.jsx("div",{className:"w-6 h-6 bg-green-500 text-white rounded-full flex items-center justify-center text-xs",children:"✓"}),H.error&&t.jsx("div",{className:"w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs",children:"✗"})]}),!p&&!H.uploading&&t.jsx("button",{type:"button",onClick:()=>E(Q),className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full text-xs hover:bg-red-600 opacity-0 group-hover:opacity-100 transition-opacity",children:"×"}),H.error&&t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-red-500 text-white text-xs p-1 rounded-b-lg",children:H.error})]},Q))})]}),f&&P.length===0&&S.length===0&&t.jsx("div",{className:"text-sm text-red-600",children:"⚠️ رفع صورة واحدة على الأقل مطلوب"}),(P.length>0||S.length>0)&&t.jsxs("div",{className:"text-xs text-gray-500 text-center",children:["الصور الحالية: ",P.length," • صور جديدة: ",S.length," • المجموع: ",P.length+S.length,"/",r]})]})},gR=()=>{const e=is(),[n,a]=b.useState(""),[r,o]=b.useState(!1),[d,h]=b.useState(1),[g,p]=b.useState(20),[f,v]=b.useState({roleId:"",isActive:void 0,createdAfter:"",createdBefore:""}),[w,S]=b.useState(!1),[T,C]=b.useState(!1),[_,k]=b.useState(null),[R,O]=b.useState([]),[P,U]=b.useState({name:"",email:"",password:"",phone:"",profileImage:""}),[A,$]=b.useState({userId:"",name:"",email:"",phone:"",profileImage:""}),E={pageNumber:d,pageSize:g,searchTerm:n||void 0,roleId:f.roleId||void 0,isActive:f.isActive,createdAfter:f.createdAfter||void 0,createdBefore:f.createdBefore||void 0},{usersData:I,isLoading:Z,error:F,createUser:Y,updateUser:G,activateUser:V,deactivateUser:H}=P0(E),Q=ae=>{k(ae),$({userId:ae.id,name:ae.name,email:ae.email,phone:ae.phone,profileImage:ae.profileImage}),C(!0)},K=ae=>{ae.isActive?H.mutate(ae.id):V.mutate(ae.id)},oe=(ae,ee)=>{v(re=>({...re,[ae]:ee})),h(1)},W=()=>{v({roleId:"",isActive:void 0,createdAfter:"",createdBefore:""}),a(""),h(1)},X=[{key:"roleId",label:"الدور",type:"select",options:[{value:"ADMIN",label:"مدير"},{value:"HOTEL_OWNER",label:"مالك كيان"},{value:"HOTEL_MANAGER",label:"مدير كيان"},{value:"RECEPTIONIST",label:"موظف استقبال"},{value:"CUSTOMER",label:"عميل"}]},{key:"isActive",label:"الحالة",type:"boolean"},{key:"createdAfter",label:"تاريخ التسجيل من",type:"date"},{key:"createdBefore",label:"تاريخ التسجيل إلى",type:"date"}],z=[{key:"profileImage",title:"الصورة",width:"80px",priority:"high",mobileLabel:"الصورة",render:(ae,ee)=>t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:ae?t.jsx("img",{src:ae,alt:ee.name,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-gray-500 text-sm",children:ee.name.charAt(0).toUpperCase()})})},{key:"name",title:"الاسم",sortable:!0,priority:"high",mobileLabel:"الاسم"},{key:"email",title:"البريد الإلكتروني",sortable:!0,priority:"medium",mobileLabel:"البريد"},{key:"phone",title:"رقم الهاتف",priority:"medium",mobileLabel:"الهاتف"},{key:"isActive",title:"الحالة",priority:"high",mobileLabel:"الحالة",render:ae=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ae?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ae?"نشط":"غير نشط"})},{key:"createdAt",title:"تاريخ التسجيل",sortable:!0,priority:"low",mobileLabel:"التاريخ",hideOnMobile:!0,render:ae=>new Date(ae).toLocaleDateString("ar-SA")}],J=ae=>{e(`/admin/users/${ae.id}`)},se=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:J},{label:"تعديل",icon:"✏️",color:"blue",onClick:Q},{label:"تفعيل/إلغاء تفعيل",icon:"🔄",color:"yellow",onClick:K},{label:"أدوار",icon:"👤",color:"green",onClick:ae=>{}}];return F?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات المستخدمين. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المستخدمين"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع المستخدمين في النظام وتعيين الأدوار والصلاحيات"})]}),t.jsx("div",{className:"flex gap-3",children:t.jsx("button",{onClick:()=>S(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة مستخدم جديد"})})]})}),t.jsx(ti,{searchPlaceholder:"البحث في المستخدمين...",searchValue:n,onSearchChange:a,filters:X,filterValues:f,onFilterChange:oe,onReset:W,showAdvanced:r,onToggleAdvanced:()=>o(!r)}),t.jsx(ls,{data:I?.items||[],columns:z,loading:Z,pagination:{current:d,total:I?.totalCount||0,pageSize:g,onChange:(ae,ee)=>{h(ae),p(ee)}},rowSelection:{selectedRowKeys:R,onChange:O},actions:se,onRowClick:ae=>J(ae),mobileCardTitle:ae=>ae.name,mobileCardSubtitle:ae=>ae.email,mobileCardImage:ae=>ae.profileImage}),t.jsx(Rt,{isOpen:w,onClose:()=>S(!1),title:"إضافة مستخدم جديد",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>S(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>Y.mutate(P),disabled:Y.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:Y.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الكامل *"}),t.jsx("input",{type:"text",value:P.name,onChange:ae=>U(ee=>({...ee,name:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل الاسم الكامل"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني *"}),t.jsx("input",{type:"email",value:P.email,onChange:ae=>U(ee=>({...ee,email:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل البريد الإلكتروني"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"كلمة المرور *"}),t.jsx("input",{type:"password",value:P.password,onChange:ae=>U(ee=>({...ee,password:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل كلمة المرور"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الهاتف *"}),t.jsx("input",{type:"tel",value:P.phone,onChange:ae=>U(ee=>({...ee,phone:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل رقم الهاتف"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة الشخصية"}),t.jsx(Yl,{value:P.profileImage,onChange:ae=>U(ee=>({...ee,profileImage:Array.isArray(ae)?ae[0]:ae})),multiple:!1,maxFiles:1,maxSize:2,showPreview:!0,placeholder:"اضغط لرفع الصورة الشخصية أو اسحبها هنا",uploadEndpoint:"/api/upload/profile-images"})]})]})}),t.jsx(Rt,{isOpen:T,onClose:()=>{C(!1),k(null)},title:"تعديل بيانات المستخدم",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{C(!1),k(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>G.mutate({userId:A.userId,data:A}),disabled:G.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:G.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:_&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم الكامل"}),t.jsx("input",{type:"text",value:A.name,onChange:ae=>$(ee=>({...ee,name:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البريد الإلكتروني"}),t.jsx("input",{type:"email",value:A.email,onChange:ae=>$(ee=>({...ee,email:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"رقم الهاتف"}),t.jsx("input",{type:"tel",value:A.phone,onChange:ae=>$(ee=>({...ee,phone:ae.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الصورة الشخصية"}),t.jsx(Yl,{value:A.profileImage,onChange:ae=>$(ee=>({...ee,profileImage:Array.isArray(ae)?ae[0]:ae})),multiple:!1,maxFiles:1,maxSize:2,showPreview:!0,placeholder:"اضغط لرفع صورة جديدة أو اسحبها هنا",uploadEndpoint:"/api/upload/profile-images"})]})]})})]})},Yi="/api/admin/Properties",Wi={create:e=>we.post(Yi,e).then(n=>n.data),update:(e,n)=>we.put(`${Yi}/${e}`,n).then(a=>a.data),delete:e=>we.delete(`${Yi}/${e}`).then(n=>n.data),getAll:e=>we.get(`${Yi}`,{params:e}).then(n=>n.data),approve:e=>we.post(`${Yi}/${e}/approve`).then(n=>n.data),reject:e=>we.post(`${Yi}/${e}/reject`).then(n=>n.data),getPending:e=>we.get(`${Yi}/pending`,{params:e}).then(n=>n.data),getDetails:e=>we.get(`${Yi}/${e.propertyId}/details`,{params:{includeUnits:e.includeUnits}}).then(n=>n.data),addPropertyToSections:(e,n)=>we.post(`/api/admin/properties/${e}/sections`,{sectionIds:n}).then(a=>a.data)},Sc=e=>{const n=Bn(),a=["admin-properties",e],r=["admin-properties-pending"],{data:o,isLoading:d,error:h}=It({queryKey:a,queryFn:()=>Wi.getAll(e)}),{data:g}=It({queryKey:r,queryFn:()=>Wi.getPending({pageNumber:1,pageSize:50})}),p=Be({mutationFn:T=>Wi.create(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),f=Be({mutationFn:({propertyId:T,data:C})=>Wi.update(T,C),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),v=Be({mutationFn:T=>Wi.approve(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),w=Be({mutationFn:T=>Wi.reject(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}}),S=Be({mutationFn:T=>Wi.delete(T),onSuccess:()=>{n.invalidateQueries({queryKey:a}),n.invalidateQueries({queryKey:r})}});return{propertiesData:o,pendingPropertiesData:g,isLoading:d,error:h,createProperty:p,updateProperty:f,approveProperty:v,rejectProperty:w,deleteProperty:S}},rh="/api/admin/property-types",ih={create:e=>we.post(rh,e).then(n=>n.data),update:(e,n)=>we.put(`${rh}/${e}`,n).then(a=>a.data),delete:e=>we.delete(`${rh}/${e}`).then(n=>n.data),getAll:e=>we.get(`${rh}`,{params:e}).then(n=>n.data)},N2=e=>{const n=Bn(),a=["admin-property-types",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>ih.getAll(e)}),h=Be({mutationFn:f=>ih.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Be({mutationFn:({propertyTypeId:f,data:v})=>ih.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Be({mutationFn:f=>ih.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{propertyTypesData:r,isLoading:o,error:d,createPropertyType:h,updatePropertyType:g,deletePropertyType:p}},_2=({data:e,loading:n=!1,renderCard:a,emptyMessage:r="لا توجد بيانات للعرض",emptyIcon:o="📄",columns:d=3,pagination:h})=>{const g=p=>{const f={1:"grid-cols-1",2:"grid-cols-1 md:grid-cols-2",3:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3",4:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4",5:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-5",6:"grid-cols-1 md:grid-cols-2 lg:grid-cols-3 xl:grid-cols-6"};return f[p]||f[3]};return n?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})})}):e.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:o}),t.jsx("p",{className:"text-gray-500",children:r})]})}):t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:t.jsx("div",{className:`grid ${g(d)} gap-6`,children:e.map((p,f)=>t.jsx("div",{className:"animate-fade-in",children:a(p,f)},f))})}),h&&t.jsxs("div",{className:"bg-white px-4 py-3 flex items-center justify-between border border-gray-200 rounded-lg shadow-sm sm:px-6",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>h.onChange(h.current-1,h.pageSize),disabled:h.current<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),t.jsx("button",{onClick:()=>h.onChange(h.current+1,h.pageSize),disabled:h.current*h.pageSize>=h.total,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["عرض"," ",t.jsx("span",{className:"font-medium",children:(h.current-1)*h.pageSize+1})," ","إلى"," ",t.jsx("span",{className:"font-medium",children:Math.min(h.current*h.pageSize,h.total)})," ","من"," ",t.jsx("span",{className:"font-medium",children:h.total})," نتيجة"]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsx("button",{onClick:()=>h.onChange(h.current-1,h.pageSize),disabled:h.current<=1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"}),Array.from({length:Math.ceil(h.total/h.pageSize)},(p,f)=>f+1).slice(Math.max(0,h.current-3),Math.min(Math.ceil(h.total/h.pageSize),h.current+2)).map(p=>t.jsx("button",{onClick:()=>h.onChange(p,h.pageSize),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${p===h.current?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:p},p)),t.jsx("button",{onClick:()=>h.onChange(h.current+1,h.pageSize),disabled:h.current*h.pageSize>=h.total,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"})]})})]})]})]})};class Gi{static NOMINATIM_BASE_URL="https://nominatim.openstreetmap.org";static ROUTING_BASE_URL="https://router.project-osrm.org";static async geocodeAddress(n){try{const a=new URLSearchParams({q:n.query,format:"jsonv2",addressdetails:"1",limit:(n.limit||5).toString(),"accept-language":n.language||"ar,en"});if(n.bounds){const{northeast:d,southwest:h}=n.bounds;a.append("viewbox",`${h.longitude},${h.latitude},${d.longitude},${d.latitude}`),a.append("bounded","1")}n.country&&a.append("countrycodes",n.country);const r=await fetch(`${this.NOMINATIM_BASE_URL}/search?${a}`);if(!r.ok)throw new Error(`خطأ في البحث الجغرافي: ${r.status}`);return(await r.json()).map(d=>({displayName:d.display_name,coordinates:{latitude:parseFloat(d.lat),longitude:parseFloat(d.lon)},bounds:d.boundingbox?{northeast:{latitude:parseFloat(d.boundingbox[1]),longitude:parseFloat(d.boundingbox[3])},southwest:{latitude:parseFloat(d.boundingbox[0]),longitude:parseFloat(d.boundingbox[2])}}:void 0,type:d.type||"unknown",importance:parseFloat(d.importance||"0"),details:{country:d.address?.country,state:d.address?.state,city:d.address?.city||d.address?.town||d.address?.village,district:d.address?.suburb||d.address?.neighbourhood,street:d.address?.road,houseNumber:d.address?.house_number,postcode:d.address?.postcode}}))}catch(a){throw console.error("خطأ في البحث الجغرافي:",a),new Error("فشل في البحث الجغرافي. تحقق من الاتصال بالإنترنت.")}}static async reverseGeocode(n,a="ar,en"){try{const r=new URLSearchParams({lat:n.latitude.toString(),lon:n.longitude.toString(),format:"jsonv2",addressdetails:"1","accept-language":a}),o=await fetch(`${this.NOMINATIM_BASE_URL}/reverse?${r}`);if(!o.ok)throw new Error(`خطأ في البحث العكسي: ${o.status}`);const d=await o.json();return!d||d.error?null:{displayName:d.display_name,coordinates:{latitude:parseFloat(d.lat),longitude:parseFloat(d.lon)},bounds:d.boundingbox?{northeast:{latitude:parseFloat(d.boundingbox[1]),longitude:parseFloat(d.boundingbox[3])},southwest:{latitude:parseFloat(d.boundingbox[0]),longitude:parseFloat(d.boundingbox[2])}}:void 0,type:d.type||"unknown",importance:parseFloat(d.importance||"0"),details:{country:d.address?.country,state:d.address?.state,city:d.address?.city||d.address?.town||d.address?.village,district:d.address?.suburb||d.address?.neighbourhood,street:d.address?.road,houseNumber:d.address?.house_number,postcode:d.address?.postcode}}}catch(r){throw console.error("خطأ في البحث العكسي:",r),new Error("فشل في تحديد العنوان. تحقق من الاتصال بالإنترنت.")}}static async calculateRoute(n){try{const{start:a,end:r,transportMode:o="driving"}=n,d=o==="walking"?"foot":o==="cycling"?"bike":"car",h=`${this.ROUTING_BASE_URL}/route/v1/${d}/${a.longitude},${a.latitude};${r.longitude},${r.latitude}?overview=full&steps=true&geometries=geojson`,g=await fetch(h);if(!g.ok)throw new Error(`خطأ في حساب المسار: ${g.status}`);const p=await g.json();if(p.code!=="Ok"||!p.routes||p.routes.length===0)throw new Error("لم يتم العثور على مسار مناسب");const f=p.routes[0],v=f.legs[0];return{distance:Math.round(f.distance/1e3*100)/100,duration:Math.round(f.duration/60),geometry:f.geometry.coordinates.map(([w,S])=>({latitude:S,longitude:w})),steps:v.steps.map(w=>({instruction:this.translateInstruction(w.maneuver.type,n.language),distance:Math.round(w.distance),duration:Math.round(w.duration/60),startLocation:{latitude:w.maneuver.location[1],longitude:w.maneuver.location[0]},endLocation:{latitude:w.geometry.coordinates[w.geometry.coordinates.length-1][1],longitude:w.geometry.coordinates[w.geometry.coordinates.length-1][0]},maneuver:w.maneuver.type})),summary:{totalDistance:`${Math.round(f.distance/1e3*100)/100} كم`,totalDuration:this.formatDuration(Math.round(f.duration/60)),transportMode:this.translateTransportMode(o)}}}catch(a){throw console.error("خطأ في حساب المسار:",a),new Error("فشل في حساب المسار. تحقق من الاتصال بالإنترنت.")}}static calculateDistance(n,a){const o=this.toRadians(a.latitude-n.latitude),d=this.toRadians(a.longitude-n.longitude),h=Math.sin(o/2)*Math.sin(o/2)+Math.cos(this.toRadians(n.latitude))*Math.cos(this.toRadians(a.latitude))*Math.sin(d/2)*Math.sin(d/2),g=2*Math.atan2(Math.sqrt(h),Math.sqrt(1-h));return Math.round(6371*g*100)/100}static async getCurrentLocation(n=!0){return new Promise((a,r)=>{if(!navigator.geolocation){r(new Error("خدمة تحديد الموقع غير مدعومة في هذا المتصفح"));return}navigator.geolocation.getCurrentPosition(o=>{a({latitude:o.coords.latitude,longitude:o.coords.longitude})},o=>{let d="فشل في تحديد الموقع الحالي";switch(o.code){case o.PERMISSION_DENIED:d="تم رفض الإذن للوصول إلى الموقع";break;case o.POSITION_UNAVAILABLE:d="معلومات الموقع غير متاحة";break;case o.TIMEOUT:d="انتهت مهلة طلب الموقع";break}r(new Error(d))},{enableHighAccuracy:n,timeout:1e4,maximumAge:3e5})})}static watchLocation(n,a={}){if(!navigator.geolocation)throw new Error("خدمة تحديد الموقع غير مدعومة في هذا المتصفح");return navigator.geolocation.watchPosition(r=>{n({latitude:r.coords.latitude,longitude:r.coords.longitude})},r=>{console.error("خطأ في مراقبة الموقع:",r)},{enableHighAccuracy:a.highAccuracy??!0,timeout:a.timeout??1e4,maximumAge:a.maximumAge??6e4})}static clearLocationWatch(n){navigator.geolocation.clearWatch(n)}static calculateBounds(n){if(n.length===0)return null;let a=n[0].latitude,r=n[0].latitude,o=n[0].longitude,d=n[0].longitude;n.forEach(p=>{a=Math.min(a,p.latitude),r=Math.max(r,p.latitude),o=Math.min(o,p.longitude),d=Math.max(d,p.longitude)});const h=(r-a)*.1,g=(d-o)*.1;return{northeast:{latitude:r+h,longitude:d+g},southwest:{latitude:a-h,longitude:o-g}}}static toRadians(n){return n*(Math.PI/180)}static translateInstruction(n,a){return{"turn-straight":"استمر مباشرة","turn-slight-right":"انعطف يميناً قليلاً","turn-right":"انعطف يميناً","turn-sharp-right":"انعطف يميناً بشدة","turn-slight-left":"انعطف يساراً قليلاً","turn-left":"انعطف يساراً","turn-sharp-left":"انعطف يساراً بشدة",uturn:"اعكس الاتجاه",arrive:"وصلت إلى الوجهة",depart:"ابدأ الرحلة",merge:"ادمج مع الطريق الرئيسي","on-ramp":"ادخل إلى الطريق السريع","off-ramp":"اخرج من الطريق السريع",fork:"خذ التفرع",roundabout:"ادخل الدوار"}[n]||"تابع المسار"}static translateTransportMode(n){return{driving:"بالسيارة",walking:"سيراً على الأقدام",cycling:"بالدراجة",transit:"بالمواصلات العامة"}[n]||n}static formatDuration(n){if(n<60)return`${n} دقيقة`;const a=Math.floor(n/60),r=n%60;return r===0?`${a} ساعة`:`${a} ساعة و ${r} دقيقة`}}const Sj=()=>{const[e,n]=b.useState(null),[a,r]=b.useState(null),[o,d]=b.useState(!1),h=b.useRef(null),g=b.useCallback(async(S=!0)=>{d(!0),r(null);try{const T=await Gi.getCurrentLocation(S);return n(T),T}catch(T){const C=T instanceof Error?T.message:"خطأ في تحديد الموقع";throw r(C),T}finally{d(!1)}},[]),p=b.useCallback((S,T)=>{try{h.current&&Gi.clearLocationWatch(h.current),h.current=Gi.watchLocation(C=>{n(C),S?.(C)},T)}catch(C){const _=C instanceof Error?C.message:"خطأ في مراقبة الموقع";r(_)}},[]),f=b.useCallback(()=>{h.current&&(Gi.clearLocationWatch(h.current),h.current=null)},[]);b.useEffect(()=>()=>{f()},[f]);const v=b.useCallback((S,T)=>Gi.calculateDistance(S,T),[]),w=b.useCallback(S=>{const T=S.filter(C=>C.coordinates).map(C=>C.coordinates);return Gi.calculateBounds(T)},[]);return{currentLocation:e,locationError:a,isLocationLoading:o,getCurrentLocation:g,startLocationWatch:p,stopLocationWatch:f,calculateDistance:v,calculateBounds:w}},xR=()=>{const e=Be({mutationFn:o=>Gi.geocodeAddress(o)}),n=Be({mutationFn:({coordinates:o,language:d})=>Gi.reverseGeocode(o,d)}),a=b.useCallback(async(o,d)=>e.mutateAsync({query:o,...d}),[e]),r=b.useCallback(async(o,d)=>n.mutateAsync({coordinates:o,language:d}),[n]);return{isSearching:e.isPending||n.isPending,searchError:e.error||n.error,searchByText:a,searchByCoordinates:r,resetSearch:()=>{e.reset(),n.reset()}}};delete _c.Icon.Default.prototype._getIconUrl;_c.Icon.Default.mergeOptions({iconRetinaUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon-2x.png",iconUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-icon.png",shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png"});const yR=e=>{const n=e.color||"#3B82F6",a=e.type==="property"?32:24,r=`
    <svg width="${a}" height="${a}" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
      <path d="M12 2C8.13 2 5 5.13 5 9c0 5.25 7 13 7 13s7-7.75 7-13c0-3.87-3.13-7-7-7z" fill="${n}" stroke="white" stroke-width="2"/>
      <circle cx="12" cy="9" r="3" fill="white"/>
      ${e.icon?`<text x="12" y="13" text-anchor="middle" fill="${n}" font-size="8">${e.icon}</text>`:""}
    </svg>
  `;return new _c.Icon({iconUrl:`data:image/svg+xml;base64,${btoa(r)}`,iconSize:[a,a],iconAnchor:[a/2,a],popupAnchor:[0,-a],shadowUrl:"https://cdnjs.cloudflare.com/ajax/libs/leaflet/1.7.1/images/marker-shadow.png",shadowSize:[a*1.5,a],shadowAnchor:[a*.75,a]})},bR=({onMapClick:e,onZoomChange:n,onMoveEnd:a})=>{const r=y2({click:o=>{e&&e({latitude:o.latlng.lat,longitude:o.latlng.lng})},zoomend:()=>{n&&n(r.getZoom())},moveend:()=>{if(a){const o=r.getCenter(),d=r.getBounds();a({latitude:o.lat,longitude:o.lng},d)}}});return null},vR=({center:e,zoom:n,bounds:a})=>{const r=x2();return b.useEffect(()=>{a?r.fitBounds(a,{padding:[20,20]}):e&&r.setView([e.latitude,e.longitude],n||r.getZoom())},[r,e,n,a]),null},jR=({onLocationSelect:e,placeholder:n="ابحث عن موقع..."})=>{const[a,r]=b.useState(""),[o,d]=b.useState([]),[h,g]=b.useState(!1),{searchByText:p}=xR(),f=b.useCallback(async w=>{if(w.length<3){d([]),g(!1);return}try{const S=await p(w,{language:"ar,en",limit:5});d(S),g(!0)}catch(S){console.error("خطأ في البحث:",S),d([]),g(!1)}},[p]),v=w=>{e(w.coordinates),r(w.displayName),g(!1)};return t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"text",value:a,onChange:w=>{r(w.target.value),f(w.target.value)},placeholder:n,className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500"}),h&&o.length>0&&t.jsx("div",{className:"absolute z-[9999] w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg max-h-60 overflow-y-auto",children:o.map((w,S)=>t.jsxs("button",{onClick:()=>v(w),className:"w-full px-3 py-2 text-right hover:bg-gray-50 border-b border-gray-100 last:border-b-0",children:[t.jsx("p",{className:"font-medium text-gray-900 truncate",children:w.displayName}),t.jsx("p",{className:"text-xs text-gray-500",children:w.type})]},S))})]})},S2=({markers:e=[],center:n={latitude:15.279272,longitude:44.227494},zoom:a=10,height:r="500px",width:o="100%",interactive:d=!0,onMarkerClick:h,onLocationChange:g,onZoomChange:p,showCurrentLocation:f=!0,showControls:v=!0,emptyMessage:w="لا توجد مواقع لعرضها على الخريطة",enableClustering:S=!1,mapStyle:T="default",pagination:C})=>{const[_,k]=b.useState(n),[R,O]=b.useState(a),[P,U]=b.useState(null),[A,$]=b.useState(!1),{currentLocation:E,getCurrentLocation:I}=Sj(),{calculateBounds:Z}=Sj(),F=e.filter(W=>W.coordinates&&W.coordinates.latitude!==0&&W.coordinates.longitude!==0),Y=()=>{switch(T){case"satellite":return"https://{s}.tile.openstreetmap.fr/hot/{z}/{x}/{y}.png";case"terrain":return"https://{s}.tile.opentopomap.org/{z}/{x}/{y}.png";default:return"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png"}},G=b.useCallback(async()=>{try{const W=await I();k(W),O(15),g?.(W)}catch(W){console.error("خطأ في تحديد الموقع:",W)}},[I,g]),V=b.useCallback(()=>{if(F.length>0){const W=Z(F);if(W){const X=(W.northeast.latitude+W.southwest.latitude)/2,z=(W.northeast.longitude+W.southwest.longitude)/2;k({latitude:X,longitude:z})}}},[F,Z]),H=b.useCallback(W=>{U(W),h?.(W)},[h]),Q=b.useCallback(W=>{U(null),g?.(W)},[g]),K=b.useCallback(W=>{O(W),p?.(W)},[p]),oe=b.useCallback(W=>{k(W),O(15),$(!1),g?.(W)},[g]);return F.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",style:{height:r,width:o},children:t.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center p-8",children:[t.jsx("div",{className:"text-6xl mb-4",children:"🗺️"}),t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"لا توجد مواقع للعرض"}),t.jsx("p",{className:"text-gray-500",children:w})]})}):t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",style:{width:o},children:[v&&t.jsx("div",{className:"p-4 bg-gray-50 border-b border-gray-200",children:t.jsxs("div",{className:"flex items-center gap-3",children:[A?t.jsx("div",{className:"flex-1",children:t.jsx(jR,{onLocationSelect:oe})}):t.jsx("div",{className:"flex-1",children:t.jsxs("span",{className:"text-sm text-gray-600",children:["عدد المواقع: ",F.length]})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(rt,{label:A?"إخفاء البحث":"بحث",variant:"secondary",onClick:()=>$(!A)}),f&&t.jsx(rt,{label:"موقعي",variant:"secondary",onClick:G}),t.jsx(rt,{label:"عرض الكل",variant:"secondary",onClick:V})]})]})}),t.jsx("div",{style:{height:r,position:"relative"},children:t.jsxs(b2,{center:[_.latitude,_.longitude],zoom:R,style:{height:"100%",width:"100%"},scrollWheelZoom:d,dragging:d,touchZoom:d,doubleClickZoom:d,boxZoom:d,keyboard:d,zoomControl:!1,children:[t.jsx(v2,{url:Y(),attribution:'© <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}),t.jsx(vR,{center:_,zoom:R}),t.jsx(bR,{onMapClick:Q,onZoomChange:K}),F.map(W=>t.jsx(Ex,{position:[W.coordinates.latitude,W.coordinates.longitude],icon:yR(W),eventHandlers:{click:()=>H(W)},children:t.jsx(wj,{children:t.jsxs("div",{className:"p-2 min-w-48 text-right",children:[t.jsx("h4",{className:"font-medium text-gray-900 mb-1",children:W.name}),W.address&&t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:W.address}),W.description&&t.jsx("p",{className:"text-xs text-gray-500 mb-2",children:W.description}),W.price&&t.jsxs("p",{className:"text-sm font-medium text-blue-600",children:[W.price.amount," ",W.price.currency]}),W.rating&&t.jsxs("p",{className:"text-xs text-yellow-600",children:[W.rating,"/5 تقييم"]})]})})},W.id)),E&&f&&t.jsx(Ex,{position:[E.latitude,E.longitude],icon:new _c.Icon({iconUrl:"data:image/svg+xml;base64,"+btoa(`
                  <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                    <circle cx="12" cy="12" r="8" fill="#3B82F6" stroke="white" stroke-width="3"/>
                    <circle cx="12" cy="12" r="3" fill="white"/>
                  </svg>
                `),iconSize:[16,16],iconAnchor:[8,8]}),children:t.jsx(wj,{children:t.jsxs("div",{className:"p-2 text-right",children:[t.jsx("h4",{className:"font-medium text-gray-900",children:"موقعك الحالي"}),t.jsxs("p",{className:"text-xs text-gray-500",children:[E.latitude.toFixed(6),", ",E.longitude.toFixed(6)]})]})})})]})}),C&&t.jsx("div",{className:"p-4 bg-gray-50 border-t border-gray-200",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[t.jsx("button",{onClick:()=>C.onChange(C.current-1,C.pageSize),disabled:C.current<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"السابق"}),t.jsx("button",{onClick:()=>C.onChange(C.current+1,C.pageSize),disabled:C.current*C.pageSize>=C.total,className:"mr-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"التالي"})]}),t.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[t.jsx("div",{children:t.jsxs("p",{className:"text-sm text-gray-700",children:["عرض"," ",t.jsx("span",{className:"font-medium",children:(C.current-1)*C.pageSize+1})," ","إلى"," ",t.jsx("span",{className:"font-medium",children:Math.min(C.current*C.pageSize,C.total)})," ","من"," ",t.jsx("span",{className:"font-medium",children:C.total})," موقع"]})}),t.jsx("div",{children:t.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[t.jsx("button",{onClick:()=>C.onChange(C.current-1,C.pageSize),disabled:C.current<=1,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"→"}),Array.from({length:Math.ceil(C.total/C.pageSize)},(W,X)=>X+1).slice(Math.max(0,C.current-3),Math.min(Math.ceil(C.total/C.pageSize),C.current+2)).map(W=>t.jsx("button",{onClick:()=>C.onChange(W,C.pageSize),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${W===C.current?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:W},W)),t.jsx("button",{onClick:()=>C.onChange(C.current+1,C.pageSize),disabled:C.current*C.pageSize>=C.total,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"←"})]})})]})]})})]})},C2=({currentView:e,onViewChange:n,availableViews:a=["table","cards","map"],className:r=""})=>{const d=[{type:"table",label:"جدول",icon:"📋"},{type:"cards",label:"كروت",icon:"🎴"},{type:"map",label:"خريطة",icon:"🗺️"}].filter(h=>a.includes(h.type));return t.jsx("div",{className:`inline-flex rounded-lg border border-gray-300 bg-white ${r}`,children:d.map((h,g)=>t.jsx("button",{onClick:()=>n(h.type),className:`px-4 py-2 text-sm font-medium transition-colors ${e===h.type?"bg-blue-50 text-blue-700 border-blue-200":"text-gray-700 hover:text-gray-900 hover:bg-gray-50"} ${g===0?"rounded-r-md border-l-0":g===d.length-1?"rounded-l-md border-r-0":"border-l-0 border-r-0"}`,title:h.label,children:t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{children:h.icon}),t.jsx("span",{children:h.label})]})},h.type))})},Vl=({value:e="",onChange:n,placeholder:a="اختر المستخدم",className:r="",disabled:o=!1,activeOnly:d=!1,showAvatar:h=!0,required:g=!1})=>{const[p,f]=b.useState(!1),[v,w]=b.useState(""),[S,T]=b.useState(null),C=b.useRef(null),_={pageNumber:1,pageSize:50,nameContains:v||void 0},{usersData:k,isLoading:R}=P0(_),O=k?.items?.filter(E=>!d||E.isActive)||[];b.useEffect(()=>{if(e&&k?.items){const E=k.items.find(I=>I.id===e);T(E||null)}else T(null)},[e,k]),b.useEffect(()=>{const E=I=>{C.current&&!C.current.contains(I.target)&&f(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const P=E=>{T(E),n(E.id,E),f(!1),w("")},U=()=>{T(null),n(""),w("")},A=E=>E?"نشط":"غير نشط",$=E=>E?"bg-green-100 text-green-800":"bg-red-100 text-red-800";return t.jsxs("div",{className:`relative ${r}`,ref:C,children:[t.jsxs("button",{type:"button",onClick:()=>f(!p),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!S&&g?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:S?t.jsxs(t.Fragment,{children:[h&&t.jsx("div",{className:"flex-shrink-0",children:S.profileImage?t.jsx("img",{src:S.profileImage,alt:S.name,className:"w-8 h-8 rounded-full object-cover"}):t.jsx("div",{className:"w-8 h-8 rounded-full bg-gray-300 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-gray-600",children:S.name?.[0]?.toUpperCase()})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:S.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${$(S.isActive)}`,children:A(S.isActive)})]}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:S.email})]})]}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[S&&!o&&t.jsx("span",{role:"button",tabIndex:0,onClick:E=>{E.stopPropagation(),E.preventDefault(),U()},onKeyDown:E=>{(E.key==="Enter"||E.key===" ")&&(E.preventDefault(),E.stopPropagation(),U())},className:"p-1 hover:bg-gray-100 rounded cursor-pointer",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:p?"▲":"▼"})]})]}),p&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:v,onChange:E=>w(E.target.value),placeholder:"البحث في المستخدمين...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:R?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):O.length>0?O.map(E=>t.jsxs("button",{type:"button",onClick:()=>P(E),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[h&&t.jsx("div",{className:"flex-shrink-0 ml-3",children:E.profileImage?t.jsx("img",{src:E.profileImage,alt:E.name,className:"w-10 h-10 rounded-full object-cover"}):t.jsx("div",{className:"w-10 h-10 rounded-full bg-gray-300 flex items-center justify-center",children:t.jsx("span",{className:"text-sm font-medium text-gray-600",children:E.name?.[0]?.toUpperCase()})})}),t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:E.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${$(E.isActive)}`,children:A(E.isActive)})]}),t.jsx("p",{className:"text-sm text-gray-500 truncate",children:E.email}),E.phone&&t.jsx("p",{className:"text-xs text-gray-400 truncate",children:E.phone})]})]},E.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:v?`لا توجد نتائج للبحث "${v}"`:"لا توجد مستخدمين"})}),O.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[O.length," من ",k?.totalCount||0," مستخدم"]})]})]})};var bn=(e=>(e.SINGLE_PROPERTY_AD="SINGLE_PROPERTY_AD",e.FEATURED_PROPERTY_AD="FEATURED_PROPERTY_AD",e.MULTI_PROPERTY_AD="MULTI_PROPERTY_AD",e.UNIT_SHOWCASE_AD="UNIT_SHOWCASE_AD",e.SINGLE_PROPERTY_OFFER="SINGLE_PROPERTY_OFFER",e.LIMITED_TIME_OFFER="LIMITED_TIME_OFFER",e.SEASONAL_OFFER="SEASONAL_OFFER",e.MULTI_PROPERTY_OFFERS_GRID="MULTI_PROPERTY_OFFERS_GRID",e.OFFERS_CAROUSEL="OFFERS_CAROUSEL",e.FLASH_DEALS="FLASH_DEALS",e.HORIZONTAL_PROPERTY_LIST="HORIZONTAL_PROPERTY_LIST",e.VERTICAL_PROPERTY_GRID="VERTICAL_PROPERTY_GRID",e.MIXED_LAYOUT_LIST="MIXED_LAYOUT_LIST",e.COMPACT_PROPERTY_LIST="COMPACT_PROPERTY_LIST",e.FEATURED_PROPERTIES_SHOWCASE="FEATURED_PROPERTIES_SHOWCASE",e.CITY_CARDS_GRID="CITY_CARDS_GRID",e.DESTINATION_CAROUSEL="DESTINATION_CAROUSEL",e.EXPLORE_CITIES="EXPLORE_CITIES",e.PREMIUM_CAROUSEL="PREMIUM_CAROUSEL",e.INTERACTIVE_SHOWCASE="INTERACTIVE_SHOWCASE",e))(bn||{}),Is=(e=>(e.PROPERTIES="PROPERTIES",e.UNITS="UNITS",e))(Is||{});const Pd="/api/admin/sections",Cj=e=>{switch(e){case bn.SINGLE_PROPERTY_AD:return"SinglePropertyAd";case bn.MULTI_PROPERTY_AD:return"MultiPropertyAd";case bn.UNIT_SHOWCASE_AD:return"UnitShowcaseAd";case bn.SINGLE_PROPERTY_OFFER:return"SinglePropertyOffer";case bn.LIMITED_TIME_OFFER:return"LimitedTimeOffer";case bn.SEASONAL_OFFER:return"SeasonalOffer";case bn.MULTI_PROPERTY_OFFERS_GRID:return"MultiPropertyOffersGrid";case bn.OFFERS_CAROUSEL:return"OffersCarousel";case bn.FLASH_DEALS:return"FlashDeals";case bn.HORIZONTAL_PROPERTY_LIST:return"HorizontalPropertyList";case bn.VERTICAL_PROPERTY_GRID:return"VerticalPropertyGrid";case bn.MIXED_LAYOUT_LIST:return"MixedLayoutList";case bn.COMPACT_PROPERTY_LIST:return"CompactPropertyList";case bn.CITY_CARDS_GRID:return"CityCardsGrid";case bn.DESTINATION_CAROUSEL:return"DestinationCarousel";case bn.EXPLORE_CITIES:return"ExploreCities";case bn.PREMIUM_CAROUSEL:return"PremiumCarousel";case bn.INTERACTIVE_SHOWCASE:return"InteractiveShowcase";default:return"HorizontalPropertyList"}},kj=e=>e===Is.PROPERTIES?"Properties":"Units";class wR{async getSections(n){const{data:a}=await we.get(Pd,{params:n});return a}async createSection(n){const a={...n,type:Cj(n.type),target:kj(n.target)},{data:r}=await we.post(Pd,a);return r.data}async updateSection(n,a){const r={...a,type:Cj(a.type),target:kj(a.target)},{data:o}=await we.put(`${Pd}/${n}`,r);return o.data}async deleteSection(n){await we.delete(`${Pd}/${n}`)}async assignItems(n,a){await we.post(`${Pd}/${n}/assign-items`,a)}}const tc=new wR,NR=()=>{const[e,n]=b.useState("table"),[a,r]=b.useState(""),[o,d]=b.useState(!1),[h,g]=b.useState(1),[p,f]=b.useState(20),[v,w]=b.useState({propertyTypeId:"",isApproved:void 0,starRatings:[],minPrice:"",maxPrice:"",hasActiveBookings:void 0}),[S,T]=b.useState(!1),[C,_]=b.useState(!1),[k,R]=b.useState(!1),[O,P]=b.useState(null),[U,A]=b.useState([]),[$,E]=b.useState(!1),[I,Z]=b.useState([]),[F,Y]=b.useState([]),[G,V]=b.useState({name:"",address:"",propertyTypeId:"",ownerId:"",description:"",latitude:0,longitude:0,city:"",starRating:3,images:[]}),[H,Q]=b.useState({propertyId:"",name:"",address:"",description:"",latitude:0,longitude:0,city:"",starRating:3,images:[]}),K={pageNumber:h,pageSize:p,searchTerm:a||void 0,propertyTypeId:v.propertyTypeId||void 0,isApproved:v.isApproved,starRatings:v.starRatings.length>0?v.starRatings:void 0,minPrice:v.minPrice||void 0,maxPrice:v.maxPrice||void 0,hasActiveBookings:v.hasActiveBookings},{propertiesData:oe,pendingPropertiesData:W,isLoading:X,error:z,createProperty:J,updateProperty:se,approveProperty:ae,rejectProperty:ee,deleteProperty:re}=Sc(K),me=is(),{propertyTypesData:ye,isLoading:Ce,error:de}=N2({pageNumber:1,pageSize:100}),te=ce=>{me(`/admin/property-images/${ce.id}`,{state:{propertyName:ce.name}})},_e=()=>{V({name:"",address:"",propertyTypeId:"",ownerId:"",description:"",latitude:0,longitude:0,city:"",starRating:3,images:[]})},Ie=async ce=>{P(ce),Y([]);const Oe=await tc.getSections({pageNumber:1,pageSize:100,target:Is.PROPERTIES});Z(Oe.items),E(!0)},at=async()=>{O&&(await Wi.addPropertyToSections(O.id,F),E(!1))},Je=ce=>{P(ce),Q({propertyId:ce.id,name:ce.name,address:ce.address,description:ce.description,latitude:ce.latitude,longitude:ce.longitude,city:ce.city,starRating:ce.starRating,images:ce.images?.map(Oe=>Oe.url)||[]}),_(!0)},it=ce=>{P(ce),R(!0)},Te=ce=>{confirm(`هل أنت متأكد من الموافقة على الكيان "${ce.name}"؟`)&&ae.mutate(ce.id)},Fe=ce=>{confirm(`هل أنت متأكد من رفض الكيان "${ce.name}"؟`)&&ee.mutate(ce.id)},wt=ce=>{confirm(`هل أنت متأكد من حذف الكيان "${ce.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`)&&re.mutate(ce.id)},Nt=(ce,Oe)=>{w(Le=>({...Le,[ce]:Oe})),g(1)},ut=()=>{w({propertyTypeId:"",isApproved:void 0,starRatings:[],minPrice:"",maxPrice:"",hasActiveBookings:void 0}),r(""),g(1)},Ee=[{key:"propertyTypeId",label:"نوع الكيان",type:"select",options:[{value:"hotel",label:"فندق"},{value:"resort",label:"منتجع"},{value:"apartment",label:"شقة مفروشة"},{value:"villa",label:"فيلا"}]},{key:"isApproved",label:"حالة الموافقة",type:"boolean"},{key:"starRatings",label:"تقييم النجوم",type:"select",options:[{value:"5",label:"5 نجوم"},{value:"4",label:"4 نجوم"},{value:"3",label:"3 نجوم"},{value:"2",label:"2 نجوم"},{value:"1",label:"1 نجمة"}]},{key:"minPrice",label:"الحد الأدنى للسعر",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxPrice",label:"الحد الأقصى للسعر",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"hasActiveBookings",label:"يحتوي على حجوزات نشطة",type:"boolean"}],Pe=[{key:"name",title:"اسم الكيان",sortable:!0,priority:"high",mobileLabel:"الاسم",render:(ce,Oe)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:ce}),t.jsx("span",{className:"text-sm text-gray-500",children:Oe.typeName})]})},{key:"ownerName",title:"المالك",sortable:!0,priority:"medium",mobileLabel:"المالك"},{key:"city",title:"المدينة",sortable:!0,priority:"medium",mobileLabel:"المدينة"},{key:"starRating",title:"تقييم النجوم",priority:"high",mobileLabel:"التقييم",render:ce=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"ml-1",children:ce}),t.jsxs("span",{className:"text-yellow-400",children:["★".repeat(ce),"☆".repeat(5-ce)]})]})},{key:"isApproved",title:"حالة الموافقة",priority:"high",mobileLabel:"الحالة",render:ce=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ce?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:ce?"معتمد":"في انتظار الموافقة"})},{key:"createdAt",title:"تاريخ الإنشاء",sortable:!0,priority:"low",mobileLabel:"التاريخ",hideOnMobile:!0,render:ce=>new Date(ce).toLocaleDateString("ar-SA")}],qe=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:it},{label:"معرض الصور",icon:"🖼️",color:"orange",onClick:te},{label:"تعديل",icon:"✏️",color:"blue",onClick:Je},{label:"موافقة",icon:"✅",color:"green",onClick:Te,show:ce=>!ce.isApproved},{label:"رفض",icon:"❌",color:"red",onClick:Fe,show:ce=>!ce.isApproved},{label:"حذف",icon:"🗑️",color:"red",onClick:wt},{label:"إسناد للأقسام",icon:"📚",color:"blue",onClick:ce=>Ie(ce)}],De=ce=>!ce||ce.length===0?null:ce.find(Le=>Le.isMain)||ce[0],He=ce=>{const Oe=De(ce.images);return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[t.jsxs("div",{className:"relative h-48 bg-gray-200",children:[Oe?t.jsx("img",{src:Oe.url,alt:Oe.altText||ce.name,className:"w-full h-full object-cover",onError:Le=>{const Ct=Le.target;Ct.style.display="none",Ct.nextElementSibling?.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-full h-full flex items-center justify-center bg-gray-100 ${Oe?"hidden":""}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-4xl text-gray-400",children:"🏢"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"لا توجد صورة"})]})}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ce.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:ce.isApproved?"معتمد":"في انتظار الموافقة"})}),ce.images&&ce.images.length>0&&t.jsxs("div",{className:"absolute bottom-3 left-3 bg-black bg-opacity-60 text-white px-2 py-1 rounded text-xs",children:["📸 ",ce.images.length," صورة"]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ce.name}),t.jsx("p",{className:"text-sm text-gray-600",children:ce.address})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"المالك:"}),t.jsx("span",{className:"text-sm text-gray-900",children:ce.ownerName})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"المدينة:"}),t.jsx("span",{className:"text-sm text-gray-900",children:ce.city})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"التقييم:"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm text-gray-900 ml-1",children:ce.starRating}),t.jsxs("span",{className:"text-yellow-400 text-sm",children:["★".repeat(ce.starRating),"☆".repeat(5-ce.starRating)]})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"تاريخ الإنشاء:"}),t.jsx("span",{className:"text-sm text-gray-900",children:new Date(ce.createdAt).toLocaleDateString("ar-SA")})]})]}),t.jsx("div",{className:"space-y-2 mt-4",children:t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>it(ce),className:"flex-1 px-3 py-2 text-sm bg-blue-50 text-blue-600 rounded-md hover:bg-blue-100 transition-colors",children:"👁️ عرض التفاصيل"}),t.jsx("button",{onClick:()=>Je(ce),className:"flex-1 px-3 py-2 text-sm bg-gray-50 text-gray-600 rounded-md hover:bg-gray-100 transition-colors",children:"✏️ تعديل"}),!ce.isApproved&&t.jsx("button",{onClick:()=>Te(ce),className:"flex-1 px-3 py-2 text-sm bg-green-50 text-green-600 rounded-md hover:bg-green-100 transition-colors",children:"✅ موافقة"})]})})]})]})},ct=(oe?.items||[]).map(ce=>({...ce,latitude:ce.latitude,longitude:ce.longitude}));return z?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات الكيانات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الكيانات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراجعة وموافقة الكيانات الجديدة وإدارة الكيانات المسجلة مع 3 طرق عرض مختلفة"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(C2,{currentView:e,onViewChange:n,availableViews:["table","cards","map"]}),t.jsx("button",{onClick:()=>T(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة كيان جديد"})]})]})}),W&&W.totalCount>0&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-yellow-600 text-xl ml-3",children:"⚠️"}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-sm font-medium text-yellow-800",children:"كيانات في انتظار الموافقة"}),t.jsxs("p",{className:"text-sm text-yellow-700 mt-1",children:["يوجد ",W.totalCount," كيان في انتظار المراجعة والموافقة"]})]})]})}),t.jsx(ti,{searchPlaceholder:"البحث في الكيانات...",searchValue:a,onSearchChange:r,filters:Ee,filterValues:v,onFilterChange:Nt,onReset:ut,showAdvanced:o,onToggleAdvanced:()=>d(!o)}),e==="table"&&t.jsx(ls,{data:oe?.items||[],columns:Pe,loading:X,pagination:{current:h,total:oe?.totalCount||0,pageSize:p,onChange:(ce,Oe)=>{g(ce),f(Oe)}},rowSelection:{selectedRowKeys:U,onChange:A},actions:qe,onRowClick:it,mobileCardTitle:ce=>ce.name,mobileCardSubtitle:ce=>`${ce.typeName} - ${ce.city}`,mobileCardImage:ce=>{const Oe=ce.images?.find(Le=>Le.isMain);return Oe?Oe.url:ce.images?.[0]?.url||""}}),e==="cards"&&t.jsx(_2,{data:oe?.items||[],loading:X,renderCard:He,emptyMessage:"لا توجد كيانات للعرض",emptyIcon:"🏢",columns:3,pagination:{current:h,total:oe?.totalCount||0,pageSize:p,onChange:(ce,Oe)=>{g(ce),f(Oe)}}}),e==="map"&&t.jsx(S2,{markers:ct.map(ce=>({id:ce.id,name:ce.name,address:ce.address,description:`${ce.city} - تقييم ${ce.starRating} نجوم`,coordinates:ce.latitude&&ce.longitude?{latitude:ce.latitude,longitude:ce.longitude}:void 0,type:"property",color:ce.isApproved?"#10B981":"#F59E0B",isApproved:ce.isApproved,rating:ce.starRating})).filter(ce=>ce.coordinates),onMarkerClick:ce=>{const Oe=(oe?.items||[]).find(Le=>Le.id===ce.id);Oe&&it(Oe)},emptyMessage:"لا توجد كيانات بمواقع محددة لعرضها على الخريطة",height:"600px",pagination:{current:h,total:oe?.totalCount||0,pageSize:p,onChange:(ce,Oe)=>{g(ce),f(Oe)}}}),t.jsx(Rt,{isOpen:S,onClose:()=>T(!1),title:"إضافة كيان جديد",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>T(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>J.mutate(G,{onSuccess:()=>{T(!1),_e()}}),disabled:J.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:J.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الكيان *"}),t.jsx("input",{type:"text",value:G.name,onChange:ce=>V(Oe=>({...Oe,name:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم الكيان"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الكيان *"}),t.jsxs("select",{value:G.propertyTypeId,onChange:ce=>V(Oe=>({...Oe,propertyTypeId:ce.target.value})),disabled:Ce,className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"اختر نوع الكيان"}),ye?.items.map(ce=>t.jsx("option",{value:ce.id,children:ce.name},ce.id))]}),de&&t.jsx("p",{className:"mt-1 text-sm text-red-500",children:"خطأ في تحميل أنواع الكيانات"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"مالك الكيان *"}),t.jsx(Vl,{value:G.ownerId,onChange:ce=>V(Oe=>({...Oe,ownerId:ce})),placeholder:"اختر مالك الكيان",allowedRoles:["Owner"],required:!0,className:""})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المدينة *"}),t.jsx("input",{type:"text",value:G.city,onChange:ce=>V(Oe=>({...Oe,city:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم المدينة"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان *"}),t.jsx("input",{type:"text",value:G.address,onChange:ce=>V(Oe=>({...Oe,address:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل العنوان الكامل"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموقع الجغرافي *"}),t.jsx(Mx,{latitude:G.latitude,longitude:G.longitude,onChange:(ce,Oe,Le)=>{V(Ct=>({...Ct,latitude:ce,longitude:Oe}))},placeholder:"حدد موقع الكيان",required:!0,showMap:!0,allowManualInput:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تقييم النجوم"}),t.jsxs("select",{value:G.starRating,onChange:ce=>V(Oe=>({...Oe,starRating:Number(ce.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:1,children:"1 نجمة"}),t.jsx("option",{value:2,children:"2 نجمة"}),t.jsx("option",{value:3,children:"3 نجوم"}),t.jsx("option",{value:4,children:"4 نجوم"}),t.jsx("option",{value:5,children:"5 نجوم"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف الكيان"}),t.jsx("textarea",{rows:3,value:G.description,onChange:ce=>V(Oe=>({...Oe,description:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل وصف مفصل للكيان"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صور الكيان"}),t.jsx(Yl,{value:G.images||[],onChange:ce=>V(Oe=>({...Oe,images:Array.isArray(ce)?ce:[ce]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور الكيان أو اسحبها هنا",uploadEndpoint:"/api/images/upload"})]})]})}),t.jsx(Rt,{isOpen:C,onClose:()=>{_(!1),P(null)},title:"تعديل بيانات الكيان",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{_(!1),P(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>se.mutate({propertyId:H.propertyId,data:H}),disabled:se.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:se.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:O&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الكيان"}),t.jsx("input",{type:"text",value:H.name,onChange:ce=>Q(Oe=>({...Oe,name:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المدينة"}),t.jsx("input",{type:"text",value:H.city,onChange:ce=>Q(Oe=>({...Oe,city:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العنوان"}),t.jsx("input",{type:"text",value:H.address,onChange:ce=>Q(Oe=>({...Oe,address:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الموقع الجغرافي"}),t.jsx(Mx,{latitude:H.latitude||0,longitude:H.longitude||0,onChange:(ce,Oe,Le)=>{Q(Ct=>({...Ct,latitude:ce,longitude:Oe}))},placeholder:"حدث موقع الكيان",showMap:!0,allowManualInput:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تقييم النجوم"}),t.jsxs("select",{value:H.starRating,onChange:ce=>Q(Oe=>({...Oe,starRating:Number(ce.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:1,children:"1 نجمة"}),t.jsx("option",{value:2,children:"2 نجمة"}),t.jsx("option",{value:3,children:"3 نجوم"}),t.jsx("option",{value:4,children:"4 نجوم"}),t.jsx("option",{value:5,children:"5 نجوم"})]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف الكيان"}),t.jsx("textarea",{rows:3,value:H.description,onChange:ce=>Q(Oe=>({...Oe,description:ce.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"صور الكيان"}),t.jsx(Yl,{value:H.images||O?.images?.map(ce=>ce.url)||[],onChange:ce=>Q(Oe=>({...Oe,images:Array.isArray(ce)?ce:[ce]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور جديدة أو اسحبها هنا",uploadEndpoint:"/api/upload/property-images"})]})]})}),t.jsx(Rt,{isOpen:k,onClose:()=>{R(!1),P(null)},title:"تفاصيل الكيان",size:"xl",children:O&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الكيان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الكيان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.typeName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المالك"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.ownerName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المدينة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.city})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تقييم النجوم"}),t.jsxs("div",{className:"mt-1 flex items-center",children:[t.jsxs("span",{className:"text-yellow-400",children:["★".repeat(O.starRating),"☆".repeat(5-O.starRating)]}),t.jsxs("span",{className:"mr-2 text-sm text-gray-600",children:["(",O.starRating,"/5)"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة الموافقة"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${O.isApproved?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:O.isApproved?"معتمد":"في انتظار الموافقة"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"العنوان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.address})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.description})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"خط العرض"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.latitude})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"خط الطول"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.longitude})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الإنشاء"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(O.createdAt).toLocaleString("ar-SA")})]})]})}),t.jsx(Rt,{isOpen:$,onClose:()=>E(!1),title:"إضافة الكيان للأقسام",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:at,disabled:F.length===0,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:F.length===0?"لا يوجد أقسام متاحة":"حفظ"})]}),children:t.jsxs("div",{className:"space-y-3",children:[t.jsx("div",{className:"grid grid-cols-2 gap-2 max-h-80 overflow-auto",children:I.map(ce=>t.jsxs("label",{className:"flex items-center gap-2",children:[t.jsx("input",{type:"checkbox",checked:F.includes(ce.id),onChange:Oe=>{Y(Le=>Oe.target.checked?[...Le,ce.id]:Le.filter(Ct=>Ct!==ce.id))}}),t.jsxs("span",{children:["#",ce.displayOrder," - ",ce.type]})]},ce.id))}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{className:"btn",onClick:()=>E(!1),children:"إلغاء"}),t.jsx("button",{className:"btn btn-primary",onClick:at,children:"حفظ"})]})]})})]})},Ld="/api/admin/unit-types",Hd={getAll:e=>we.get(`${Ld}`,{params:e}).then(n=>n.data),create:e=>we.post(`${Ld}`,e).then(n=>n.data),update:(e,n)=>we.put(`${Ld}/${e}`,n).then(a=>a.data),delete:e=>we.delete(`${Ld}/${e}`).then(n=>n.data),getByPropertyType:e=>{const{propertyTypeId:n,pageNumber:a,pageSize:r}=e;return we.get(`${Ld}/property-type/${n}`,{params:{pageNumber:a,pageSize:r}}).then(o=>o.data)}},k2=e=>{const n=Bn(),a=["admin-unit-types-by-property",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>Hd.getByPropertyType(e),enabled:!!e.propertyTypeId}),h=Be({mutationFn:f=>Hd.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Be({mutationFn:({unitTypeId:f,data:v})=>Hd.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Be({mutationFn:f=>Hd.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{unitTypesData:r,isLoading:o,error:d,createUnitType:h,updateUnitType:g,deleteUnitType:p}},lh="/api/admin/fieldgroups",oh={create:e=>we.post(lh,e).then(n=>n.data),update:e=>we.put(`${lh}/${e.groupId}`,e).then(n=>n.data),delete:e=>we.delete(`${lh}/${e.groupId}`).then(n=>n.data),getByUnitType:e=>we.get(`${lh}/unit-type/${e.unitTypeId}`).then(n=>n.data)},_R=e=>{const n=Bn(),a=["admin-field-groups-by-unit",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>oh.getByUnitType(e),enabled:!!e.unitTypeId}),h=Be({mutationFn:f=>oh.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Be({mutationFn:f=>oh.update(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Be({mutationFn:f=>oh.delete({groupId:f}),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{fieldGroupsData:r,isLoading:o,error:d,createFieldGroup:h,updateFieldGroup:g,deleteFieldGroup:p}},ch={create:e=>we.post("/api/admin/unit-type-fields",e).then(n=>n.data),update:(e,n)=>we.put(`/api/admin/unit-type-fields/${e}`,n).then(a=>a.data),delete:e=>we.delete(`/api/admin/unit-type-fields/${e}`).then(n=>n.data),getByUnitType:({unitTypeId:e,...n})=>we.get(`/api/admin/unit-type-fields/unit-type/${e}`,{params:n}).then(a=>a.data)},Dx=e=>{const n=Bn(),a=["admin-unit-type-fields-by-unit",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>ch.getByUnitType(e),enabled:!!e.unitTypeId}),h=Be({mutationFn:f=>ch.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Be({mutationFn:({fieldId:f,data:v})=>ch.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Be({mutationFn:f=>ch.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{unitTypeFieldsData:r,isLoading:o,error:d,createUnitTypeField:h,updateUnitTypeField:g,deleteUnitTypeField:p}},Lh=({value:e="",onChange:n,placeholder:a="أدخل الميزات واضغط Enter أو الفاصلة للإضافة...",label:r,disabled:o=!1,required:d=!1,error:h,maxTags:g=20,className:p="",variant:f="modern",size:v="md",direction:w="rtl",separator:S=",",allowDuplicates:T=!1,suggestions:C=[]})=>{const[_,k]=b.useState(""),[R,O]=b.useState(!1),[P,U]=b.useState(!1),A=b.useRef(null),$=e?e.split(S).map(J=>J.trim()).filter(J=>J.length>0):[],E=C.filter(J=>J.toLowerCase().includes(_.toLowerCase())&&(T||!$.includes(J))),I={sm:{container:"min-h-[32px] text-sm",input:"px-2 py-1 text-sm",tag:"px-2 py-0.5 text-xs",icon:"w-3 h-3"},md:{container:"min-h-[40px] text-base",input:"px-3 py-2 text-base",tag:"px-2.5 py-1 text-sm",icon:"w-4 h-4"},lg:{container:"min-h-[48px] text-lg",input:"px-4 py-3 text-lg",tag:"px-3 py-1.5 text-base",icon:"w-5 h-5"}},Z={default:{container:"border-gray-300 bg-white shadow-sm rounded-lg",focused:"ring-2 ring-blue-500 border-blue-500",error:"border-red-500 ring-2 ring-red-200",tag:"bg-blue-100 text-blue-800 border border-blue-200",tagHover:"hover:bg-blue-200"},modern:{container:"border-gray-200 bg-white shadow-lg rounded-xl",focused:"ring-2 ring-blue-500/20 border-blue-400 shadow-xl",error:"border-red-400 ring-2 ring-red-200 shadow-red-100",tag:"bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200 rounded-full",tagHover:"hover:from-blue-100 hover:to-indigo-100"},minimal:{container:"border-gray-200 bg-transparent rounded-md",focused:"border-blue-400",error:"border-red-400",tag:"bg-gray-100 text-gray-700 border border-gray-200 rounded-md",tagHover:"hover:bg-gray-200"}},F=I[v],Y=Z[f],G=J=>{const se=J.trim();if(!se)return;if(!T&&$.includes(se)){k("");return}if($.length>=g){k("");return}const ae=[...$,se];n(ae.join(S)),k(""),U(!1)},V=J=>{const se=$.filter((ae,ee)=>ee!==J);n(se.join(S))},H=J=>{J.key==="Enter"||J.key===S?(J.preventDefault(),G(_)):J.key==="Backspace"&&!_&&$.length>0?V($.length-1):J.key==="Escape"&&(U(!1),A.current?.blur())},Q=J=>{const se=J.target.value;if(se.includes(S)){const ae=se.split(S);ae.slice(0,-1).forEach(re=>G(re)),k(ae[ae.length-1])}else k(se),U(se.length>0&&E.length>0)},K=()=>{O(!0),_&&E.length>0&&U(!0)},oe=()=>{O(!1),setTimeout(()=>{U(!1),_.trim()&&G(_)},200)},W=()=>{A.current?.focus()},X=J=>{G(J),A.current?.focus()},z=()=>{let J=`
      ${Y.container} 
      ${F.container}
      transition-all duration-200 ease-in-out
      cursor-text
    `;return h?J+=` ${Y.error}`:R&&(J+=` ${Y.focused}`),o&&(J+=" opacity-50 cursor-not-allowed bg-gray-50"),J};return t.jsxs("div",{className:`relative space-y-2 ${p}`,children:[r&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700",children:[r,d&&t.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),t.jsxs("div",{className:"relative",children:[t.jsxs("div",{className:`border flex flex-wrap items-center gap-1 p-2 ${z()}`,onClick:W,dir:w,children:[$.map((J,se)=>t.jsxs("span",{className:`
                inline-flex items-center gap-1 
                ${Y.tag} ${Y.tagHover}
                ${F.tag}
                transition-all duration-200
                transform hover:scale-105 animate-in slide-in-from-left-2
              `,children:[t.jsx("span",{children:J}),!o&&t.jsx("button",{type:"button",onClick:ae=>{ae.stopPropagation(),V(se)},className:`
                    ${F.icon} 
                    hover:text-red-600 transition-colors duration-200
                    rounded-full hover:bg-red-100 p-0.5
                  `,children:t.jsx("svg",{fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},se)),t.jsx("input",{ref:A,type:"text",value:_,onChange:Q,onKeyDown:H,onFocus:K,onBlur:oe,disabled:o,placeholder:$.length===0?a:"إضافة ميزة...",className:`
              flex-1 min-w-[120px] bg-transparent border-none outline-none
              ${F.input.replace("px-3 py-2","p-0")}
              ${o?"cursor-not-allowed":""}
              placeholder-gray-400
            `,dir:w})]}),P&&E.length>0&&t.jsx("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-200 rounded-lg shadow-lg max-h-40 overflow-y-auto",children:E.map((J,se)=>t.jsx("button",{type:"button",onClick:()=>X(J),className:"w-full px-3 py-2 text-right hover:bg-gray-50 focus:bg-gray-50 focus:outline-none border-b border-gray-100 last:border-b-0",children:t.jsx("span",{className:"text-sm text-gray-700",children:J})},se))})]}),t.jsxs("div",{className:"space-y-1",children:[$.length>0&&t.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[t.jsxs("span",{children:[$.length," من ",g," ميزة"]}),$.length>=g&&t.jsx("span",{className:"text-orange-600",children:"تم الوصول للحد الأقصى"})]}),h&&t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("span",{className:"text-red-500",children:"⚠️"}),t.jsx("span",{className:"text-sm text-red-600",children:h})]}),R&&!h&&t.jsx("div",{className:"p-2 bg-blue-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),t.jsxs("div",{className:"text-xs text-blue-800",children:[t.jsx("div",{className:"font-medium mb-1",children:"نصائح:"}),t.jsxs("ul",{className:"space-y-0.5",children:[t.jsxs("li",{children:["• اضغط Enter أو الفاصلة (",S,") لإضافة ميزة"]}),t.jsx("li",{children:"• اضغط Backspace لحذف آخر ميزة"}),t.jsx("li",{children:"• انقر على ✕ لحذف ميزة محددة"})]})]})]})})]})]})},Ox=[{name:"home",label:"منزل",icon:"🏠",category:"عقارات"},{name:"apartment",label:"شقة",icon:"🏢",category:"عقارات"},{name:"villa",label:"فيلا",icon:"🏡",category:"عقارات"},{name:"business",label:"مكتب",icon:"🏛️",category:"عقارات"},{name:"store",label:"محل",icon:"🏪",category:"عقارات"},{name:"hotel",label:"فندق",icon:"🏨",category:"عقارات"},{name:"house",label:"بيت",icon:"🏘️",category:"عقارات"},{name:"cabin",label:"شاليه",icon:"🛖",category:"عقارات"},{name:"meeting_room",label:"استوديو",icon:"🚪",category:"عقارات"},{name:"stairs",label:"دوبلكس",icon:"🪜",category:"عقارات"},{name:"roofing",label:"بنتهاوس",icon:"🏗️",category:"عقارات"},{name:"warehouse",label:"مستودع",icon:"🏭",category:"عقارات"},{name:"terrain",label:"أرض",icon:"🏞️",category:"عقارات"},{name:"grass",label:"مزرعة",icon:"🌾",category:"عقارات"},{name:"location_city",label:"مدينة",icon:"🌆",category:"عقارات"},{name:"cottage",label:"كوخ",icon:"🏚️",category:"عقارات"},{name:"holiday_village",label:"قرية سياحية",icon:"🏘️",category:"عقارات"},{name:"gite",label:"نزل",icon:"🏠",category:"عقارات"},{name:"domain",label:"نطاق",icon:"🌐",category:"عقارات"},{name:"foundation",label:"أساس",icon:"🏗️",category:"عقارات"},{name:"bed",label:"سرير",icon:"🛏️",category:"غرف"},{name:"king_bed",label:"سرير كبير",icon:"🛏️",category:"غرف"},{name:"single_bed",label:"سرير مفرد",icon:"🛏️",category:"غرف"},{name:"bedroom_parent",label:"غرفة نوم رئيسية",icon:"🛏️",category:"غرف"},{name:"bedroom_child",label:"غرفة أطفال",icon:"🛏️",category:"غرف"},{name:"living_room",label:"غرفة معيشة",icon:"🛋️",category:"غرف"},{name:"dining_room",label:"غرفة طعام",icon:"🍽️",category:"غرف"},{name:"kitchen",label:"مطبخ",icon:"🍳",category:"غرف"},{name:"bathroom",label:"حمام",icon:"🚿",category:"غرف"},{name:"bathtub",label:"حوض استحمام",icon:"🛁",category:"غرف"},{name:"shower",label:"دش",icon:"🚿",category:"غرف"},{name:"garage",label:"كراج",icon:"🚗",category:"غرف"},{name:"balcony",label:"شرفة",icon:"🌅",category:"غرف"},{name:"deck",label:"سطح",icon:"☀️",category:"غرف"},{name:"yard",label:"فناء",icon:"🏡",category:"غرف"},{name:"pool",label:"مسبح",icon:"🏊",category:"مرافق"},{name:"hot_tub",label:"جاكوزي",icon:"♨️",category:"مرافق"},{name:"fitness_center",label:"صالة رياضية",icon:"💪",category:"مرافق"},{name:"sports_tennis",label:"ملعب تنس",icon:"🎾",category:"مرافق"},{name:"sports_soccer",label:"ملعب كرة قدم",icon:"⚽",category:"مرافق"},{name:"sports_basketball",label:"ملعب كرة سلة",icon:"🏀",category:"مرافق"},{name:"spa",label:"سبا",icon:"💆",category:"مرافق"},{name:"local_parking",label:"موقف سيارات",icon:"🅿️",category:"مرافق"},{name:"elevator",label:"مصعد",icon:"🛗",category:"مرافق"},{name:"stairs",label:"درج",icon:"📶",category:"مرافق"},{name:"wifi",label:"واي فاي",icon:"📶",category:"مرافق"},{name:"ac_unit",label:"تكييف",icon:"❄️",category:"مرافق"},{name:"fireplace",label:"مدفأة",icon:"🔥",category:"مرافق"},{name:"water_drop",label:"ماء",icon:"💧",category:"مرافق"},{name:"electric_bolt",label:"كهرباء",icon:"⚡",category:"مرافق"},{name:"cleaning_services",label:"خدمة تنظيف",icon:"🧹",category:"خدمات"},{name:"room_service",label:"خدمة الغرف",icon:"🛎️",category:"خدمات"},{name:"local_laundry_service",label:"غسيل",icon:"👔",category:"خدمات"},{name:"dry_cleaning",label:"تنظيف جاف",icon:"👗",category:"خدمات"},{name:"iron",label:"كوي",icon:"👔",category:"خدمات"},{name:"breakfast_dining",label:"إفطار",icon:"🍳",category:"خدمات"},{name:"lunch_dining",label:"غداء",icon:"🍽️",category:"خدمات"},{name:"dinner_dining",label:"عشاء",icon:"🍽️",category:"خدمات"},{name:"restaurant",label:"مطعم",icon:"🍴",category:"خدمات"},{name:"local_cafe",label:"مقهى",icon:"☕",category:"خدمات"},{name:"local_bar",label:"بار",icon:"🍺",category:"خدمات"},{name:"security",label:"أمن",icon:"🔒",category:"أمان"},{name:"lock",label:"قفل",icon:"🔒",category:"أمان"},{name:"key",label:"مفتاح",icon:"🔑",category:"أمان"},{name:"shield",label:"درع",icon:"🛡️",category:"أمان"},{name:"verified_user",label:"مستخدم موثق",icon:"✅",category:"أمان"},{name:"safety_check",label:"فحص أمان",icon:"✅",category:"أمان"},{name:"emergency",label:"طوارئ",icon:"🚨",category:"أمان"},{name:"local_police",label:"شرطة",icon:"👮",category:"أمان"},{name:"local_fire_department",label:"إطفاء",icon:"🚒",category:"أمان"},{name:"medical_services",label:"خدمات طبية",icon:"🏥",category:"أمان"},{name:"location_on",label:"موقع",icon:"📍",category:"مواقع"},{name:"map",label:"خريطة",icon:"🗺️",category:"مواقع"},{name:"place",label:"مكان",icon:"📍",category:"مواقع"},{name:"near_me",label:"قريب مني",icon:"📍",category:"مواقع"},{name:"my_location",label:"موقعي",icon:"🎯",category:"مواقع"},{name:"directions",label:"اتجاهات",icon:"🧭",category:"مواقع"},{name:"navigation",label:"ملاحة",icon:"🧭",category:"مواقع"},{name:"directions_car",label:"سيارة",icon:"🚗",category:"مواصلات"},{name:"directions_bus",label:"حافلة",icon:"🚌",category:"مواصلات"},{name:"directions_subway",label:"مترو",icon:"🚇",category:"مواصلات"},{name:"directions_train",label:"قطار",icon:"🚂",category:"مواصلات"},{name:"directions_boat",label:"قارب",icon:"⛵",category:"مواصلات"},{name:"flight",label:"طيران",icon:"✈️",category:"مواصلات"},{name:"directions_walk",label:"مشي",icon:"🚶",category:"مواصلات"},{name:"directions_bike",label:"دراجة",icon:"🚴",category:"مواصلات"},{name:"star",label:"نجمة",icon:"⭐",category:"عام"},{name:"favorite",label:"مفضل",icon:"❤️",category:"عام"},{name:"bookmark",label:"علامة",icon:"🔖",category:"عام"},{name:"share",label:"مشاركة",icon:"📤",category:"عام"},{name:"info",label:"معلومات",icon:"ℹ️",category:"عام"},{name:"help",label:"مساعدة",icon:"❓",category:"عام"},{name:"settings",label:"إعدادات",icon:"⚙️",category:"عام"},{name:"phone",label:"هاتف",icon:"📞",category:"عام"},{name:"email",label:"بريد",icon:"📧",category:"عام"},{name:"message",label:"رسالة",icon:"💬",category:"عام"},{name:"notifications",label:"إشعارات",icon:"🔔",category:"عام"}],SR=({selectedIcon:e,onSelectIcon:n,onClose:a})=>{const[r,o]=b.useState(""),[d,h]=b.useState("الكل"),g=["الكل",...new Set(Ox.map(f=>f.category))],p=Ox.filter(f=>{const v=f.label.toLowerCase().includes(r.toLowerCase())||f.name.toLowerCase().includes(r.toLowerCase()),w=d==="الكل"||f.category===d;return v&&w});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-4xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"اختر أيقونة"}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700",children:"✕"})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsx("input",{type:"text",placeholder:"ابحث عن أيقونة...",value:r,onChange:f=>o(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>t.jsx("button",{onClick:()=>h(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${d===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsx("div",{className:"grid grid-cols-8 gap-2",children:p.map(f=>t.jsx("button",{onClick:()=>n(f.name),className:`p-3 rounded-lg border-2 transition-all hover:scale-105 ${e===f.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:`${f.label} (${f.name})`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl mb-1",children:f.icon}),t.jsx("span",{className:"text-xs text-gray-600",children:f.label}),t.jsx("code",{className:"text-xs text-gray-400 mt-1",children:f.name})]})},f.name))}),p.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أيقونات مطابقة للبحث"})})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"ملاحظة:"})," هذه الأيقونات متوافقة مع Material Icons في Flutter. استخدم اسم الأيقونة (مثل: Icons.",e||"home",") في تطبيق Flutter."]})})]})})},CR=()=>{const{showSuccess:e,showError:n}=vc(),[a,r]=b.useState(null),[o,d]=b.useState(null),[h,g]=b.useState(null),[p,f]=b.useState(null),[v,w]=b.useState(!1),[S,T]=b.useState(!1),[C,_]=b.useState(!1),[k,R]=b.useState(!1),[O,P]=b.useState(!1),[U,A]=b.useState(null),[$,E]=b.useState({name:"",description:"",defaultAmenities:"",icon:"home"}),[I,Z]=b.useState({propertyTypeId:"",name:"",maxCapacity:1,icon:"apartment",isHasAdults:!1,isHasChildren:!1,isMultiDays:!1,isRequiredToDetermineTheHour:!1}),[F,Y]=b.useState({unitTypeId:"",groupName:"",displayName:"",description:"",sortOrder:0,isCollapsible:!0,isExpandedByDefault:!0}),[G,V]=b.useState({unitTypeId:"",fieldTypeId:"",fieldName:"",displayName:"",description:"",fieldOptions:{options:[]},validationRules:{},isRequired:!1,isSearchable:!1,isPublic:!0,sortOrder:0,category:"",isForUnits:!0,showInCards:!1,isPrimaryFilter:!1,priority:0}),[H,Q]=b.useState(""),[K,oe]=b.useState(null),[W,X]=b.useState(null),[z,J]=b.useState(""),se=1e3,{propertyTypesData:ae,isLoading:ee,createPropertyType:re,updatePropertyType:me,deletePropertyType:ye}=N2({pageNumber:1,pageSize:se}),Ce=ae?.items||[],{unitTypesData:de,isLoading:te,createUnitType:_e,updateUnitType:Ie,deleteUnitType:at}=k2({propertyTypeId:a?.id||"",pageNumber:1,pageSize:se}),Je=de?.items||[],{fieldGroupsData:it,isLoading:Te,createFieldGroup:Fe,updateFieldGroup:wt,deleteFieldGroup:Nt}=_R({unitTypeId:o?.id||""}),ut=it||[],{unitTypeFieldsData:Ee,isLoading:Pe,createUnitTypeField:qe,updateUnitTypeField:De,deleteUnitTypeField:He}=Dx({unitTypeId:o?.id||"",searchTerm:H}),ct=Ee||[],ce=()=>{E({name:"",description:"",defaultAmenities:"",icon:"home"})},Oe=()=>{Z({propertyTypeId:a?.id||"",name:"",maxCapacity:1,icon:"apartment",isHasAdults:!1,isHasChildren:!1,isMultiDays:!1,isRequiredToDetermineTheHour:!1})},Le=()=>{Y({unitTypeId:o?.id||"",groupName:"",displayName:"",description:"",sortOrder:ut.length,isCollapsible:!0,isExpandedByDefault:!0})},Ct=()=>{V({unitTypeId:o?.id||"",fieldTypeId:"",fieldName:"",displayName:"",description:"",fieldOptions:{options:[]},validationRules:{},isRequired:!1,isSearchable:!1,isPublic:!0,sortOrder:ct.length,category:"",isForUnits:!0,showInCards:!1,isPrimaryFilter:!1,priority:0})},rn=ct.filter(he=>{const tt=he.displayName.toLowerCase().includes(H.toLowerCase())||he.fieldName.toLowerCase().includes(H.toLowerCase()),ne=K===null||he.isRequired===K,Me=W===null||he.isPublic===W,$e=z===""||he.fieldTypeId===z;return tt&&ne&&Me&&$e}),Fn=rn.filter(he=>!ut.some(tt=>tt.fields.some(ne=>ne.fieldId===he.fieldId))),Un=[{value:"text",label:"نص قصير",icon:"📝",description:"حقل نص مفرد للمعلومات القصيرة",defaultValidation:{minLength:1,maxLength:255},allowedValidations:["minLength","maxLength","pattern","required"]},{value:"textarea",label:"نص طويل",icon:"📄",description:"حقل نص متعدد الأسطر للأوصاف والتفاصيل",defaultValidation:{minLength:1,maxLength:2e3},allowedValidations:["minLength","maxLength","required"]},{value:"number",label:"رقم",icon:"🔢",description:"حقل رقمي للأعداد الصحيحة والعشرية",defaultValidation:{min:0,max:999999},allowedValidations:["min","max","step","required"]},{value:"currency",label:"مبلغ مالي",icon:"💰",description:"حقل خاص للمبالغ المالية مع تنسيق العملة",defaultValidation:{min:0,max:999999999},allowedValidations:["min","max","currency","required"]},{value:"boolean",label:"منطقي (نعم/لا)",icon:"☑️",description:"حقل اختيار ثنائي (صواب/خطأ)",defaultValidation:{},allowedValidations:["required"]},{value:"select",label:"قائمة منسدلة",icon:"📋",description:"قائمة منسدلة لاختيار عنصر واحد",defaultValidation:{},allowedValidations:["required"],requiresOptions:!0},{value:"multiselect",label:"تحديد متعدد",icon:"📝",description:"قائمة لاختيار عدة عناصر",defaultValidation:{minItems:0,maxItems:10},allowedValidations:["minItems","maxItems","required"],requiresOptions:!0},{value:"date",label:"تاريخ",icon:"📅",description:"حقل اختيار التاريخ",defaultValidation:{},allowedValidations:["minDate","maxDate","required"]},{value:"email",label:"بريد إلكتروني",icon:"📧",description:"حقل البريد الإلكتروني مع التحقق التلقائي",defaultValidation:{pattern:"^[^@]+@[^@]+.[^@]+$"},allowedValidations:["pattern","required"]},{value:"phone",label:"رقم هاتف",icon:"📞",description:"حقل رقم الهاتف مع التنسيق التلقائي",defaultValidation:{pattern:"^[+]?[0-9s-KATEX_INLINE_OPENKATEX_INLINE_CLOSE]+$"},allowedValidations:["pattern","required"]},{value:"file",label:"ملف",icon:"📎",description:"رفع ملف من أي نوع",defaultValidation:{maxSize:10,allowedTypes:["pdf","doc","docx"]},allowedValidations:["maxSize","allowedTypes","required"]},{value:"image",label:"صورة",icon:"🖼️",description:"رفع الصور مع معاينة",defaultValidation:{maxSize:5,allowedTypes:["jpg","png","gif"]},allowedValidations:["maxSize","allowedTypes","maxWidth","maxHeight","required"]}],Nn=he=>Un.find(ne=>ne.value===he)?.icon||"📝",ln=he=>{const tt=Ox.find(ne=>ne.name===he);return tt?tt.icon:"🏠"},la=he=>{U==="property"?E({...$,icon:he}):U==="unit"&&Z({...I,icon:he}),P(!1),A(null)},Mn=()=>{p?De.mutate({fieldId:p.fieldId,data:{fieldId:p.fieldId,...G,groupId:h?.groupId||""}},{onSuccess:()=>{e("تم تحديث الحقل بنجاح"),R(!1),f(null),Ct()},onError:he=>{n(he.response?.data?.message||"فشل في تحديث الحقل")}}):qe.mutate({...G,unitTypeId:o.id,groupId:h?.groupId||""},{onSuccess:()=>{e("تم إضافة الحقل بنجاح"),R(!1),Ct()},onError:he=>{n(he.response?.data?.message||"فشل في إضافة الحقل")}})};return t.jsxs("div",{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 mb-6",children:[t.jsx("div",{className:"flex justify-between items-center mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة أنواع الكيانات والوحدات والحقول الديناميكية"}),t.jsx("p",{className:"text-gray-600",children:"إدارة شاملة متدرجة لأنواع الكيانات وأنواع الوحدات ومجموعات الحقول والحقول الديناميكية مع دعم الأيقونات"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[t.jsx("div",{className:"bg-blue-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-blue-600 text-2xl ml-3",children:"🏢"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-blue-600",children:"أنواع الكيانات"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:Ce.length})]})]})}),t.jsx("div",{className:"bg-green-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-green-600 text-2xl ml-3",children:"🏠"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-green-600",children:"أنواع الوحدات"}),t.jsx("p",{className:"text-2xl font-bold text-green-900",children:Je.length})]})]})}),t.jsx("div",{className:"bg-yellow-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-yellow-600 text-2xl ml-3",children:"📁"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-yellow-600",children:"مجموعات الحقول"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:ut.length})]})]})}),t.jsx("div",{className:"bg-purple-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"text-purple-600 text-2xl ml-3",children:"📝"}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm text-purple-600",children:"الحقول الديناميكية"}),t.jsx("p",{className:"text-2xl font-bold text-purple-900",children:ct.length})]})]})})]})]}),t.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"🏢 أنواع الكيانات"}),t.jsx("button",{onClick:()=>{ce(),w(!0)},className:"bg-blue-600 text-white px-3 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm",children:"+ إضافة"})]}),ee?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-blue-600"})}):t.jsxs("div",{className:"space-y-2",children:[Ce.map(he=>t.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${a?.id===he.id?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{r(he),d(null),g(null)},children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-lg",children:ln(he.icon||"home")}),t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:he.name})]}),t.jsx("p",{className:"text-xs text-gray-600",children:he.description}),he.defaultAmenities&&t.jsx("span",{className:"inline-block bg-gray-100 text-gray-700 text-xs px-2 py-1 rounded mt-1",children:he.defaultAmenities}),he.icon&&t.jsx("div",{className:"mt-1",children:t.jsxs("code",{className:"text-xs text-gray-500",children:["Icons.",he.icon]})})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:tt=>{tt.stopPropagation(),E({name:he.name,description:he.description,defaultAmenities:he.defaultAmenities,icon:he.icon||"home"}),r(he),w(!0)},className:"text-blue-600 hover:text-blue-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:tt=>{tt.stopPropagation(),confirm("هل أنت متأكد من حذف هذا النوع؟")&&ye.mutate(he.id)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.id)),Ce.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏢"}),t.jsx("p",{className:"text-sm",children:"لا توجد أنواع كيانات"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة نوع كيان للبدء"})]})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"🏠 أنواع الوحدات"}),t.jsx("button",{onClick:()=>{if(!a){alert("يرجى اختيار نوع كيان أولاً");return}Oe(),T(!0)},disabled:!a,className:"bg-green-600 text-white px-3 py-2 rounded-lg hover:bg-green-700 transition-colors disabled:bg-gray-400 text-sm",children:"+ إضافة"})]}),a?te?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-green-600"})}):t.jsxs("div",{className:"space-y-2",children:[Je.map(he=>t.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${o?.id===he.id?"border-green-500 bg-green-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>{d(he),g(null)},children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-lg",children:ln(he.icon||"apartment")}),t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:he.name})]}),t.jsx("p",{className:"text-xs text-gray-600",children:he.description||"لا يوجد وصف"}),t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[he.isHasAdults&&t.jsx("span",{className:"inline-block bg-blue-100 text-blue-700 text-xs px-2 py-0.5 rounded",children:"👨 بالغين"}),he.isHasChildren&&t.jsx("span",{className:"inline-block bg-green-100 text-green-700 text-xs px-2 py-0.5 rounded",children:"👶 أطفال"}),he.isMultiDays&&t.jsx("span",{className:"inline-block bg-yellow-100 text-yellow-700 text-xs px-2 py-0.5 rounded",children:"📅 متعدد الأيام"}),he.isRequiredToDetermineTheHour&&t.jsx("span",{className:"inline-block bg-purple-100 text-purple-700 text-xs px-2 py-0.5 rounded",children:"⏰ تحديد الساعة"})]}),he.icon&&t.jsx("div",{className:"mt-1",children:t.jsxs("code",{className:"text-xs text-gray-500",children:["Icons.",he.icon]})})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:tt=>{tt.stopPropagation(),Z({propertyTypeId:a.id,name:he.name,maxCapacity:1,icon:he.icon||"apartment",isHasAdults:he.isHasAdults||!1,isHasChildren:he.isHasChildren||!1,isMultiDays:he.isMultiDays||!1,isRequiredToDetermineTheHour:he.isRequiredToDetermineTheHour||!1}),d(he),T(!0)},className:"text-green-600 hover:text-green-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:tt=>{tt.stopPropagation(),confirm("هل أنت متأكد من حذف هذا النوع؟")&&at.mutate(he.id)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.id)),Je.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏠"}),t.jsx("p",{className:"text-sm",children:"لا توجد أنواع وحدات"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة نوع وحدة للبدء"})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏠"}),t.jsx("p",{className:"text-sm",children:"اختر نوع كيان لعرض الوحدات"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"📁 مجموعات الحقول"}),t.jsx("button",{onClick:()=>{if(!o){alert("يرجى اختيار نوع وحدة أولاً");return}Le(),_(!0)},disabled:!o,className:"bg-yellow-600 text-white px-3 py-2 rounded-lg hover:bg-yellow-700 transition-colors disabled:bg-gray-400 text-sm",children:"+ إضافة"})]}),o?Te?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-yellow-600"})}):t.jsxs("div",{className:"space-y-2",children:[ut.map(he=>t.jsx("div",{className:`p-3 rounded-lg border cursor-pointer transition-colors ${h?.groupId===he.groupId?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,onClick:()=>g(he),children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:he.displayName||he.groupName}),t.jsx("p",{className:"text-xs text-gray-600",children:he.description}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse mt-1",children:[t.jsxs("span",{className:"text-xs text-gray-500",children:[he.fields.length," حقل"]}),he.isCollapsible&&t.jsxs("span",{className:"text-xs text-gray-500",children:[he.isExpandedByDefault?"🔽":"▶️"," قابل للطي"]})]})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:tt=>{tt.stopPropagation(),Y({unitTypeId:o.id,groupName:he.groupName,displayName:he.displayName,description:he.description,sortOrder:he.sortOrder,isCollapsible:he.isCollapsible,isExpandedByDefault:he.isExpandedByDefault}),g(he),_(!0)},className:"text-yellow-600 hover:text-yellow-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:tt=>{tt.stopPropagation(),confirm("هل أنت متأكد من حذف هذه المجموعة؟")&&Nt.mutate(he.groupId)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.groupId)),ut.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📁"}),t.jsx("p",{className:"text-sm",children:"لا توجد مجموعات حقول"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة مجموعة للبدء"})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📁"}),t.jsx("p",{className:"text-sm",children:"اختر نوع وحدة لعرض المجموعات"})]})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:"📝 الحقول الديناميكية"}),t.jsx("button",{onClick:()=>{if(!o){alert("يرجى اختيار نوع وحدة أولاً");return}f(null),Ct(),R(!0)},disabled:!o,className:"bg-purple-600 text-white px-3 py-2 rounded-lg hover:bg-purple-700 transition-colors disabled:bg-gray-400 text-sm",children:"+ إضافة"})]}),o?t.jsxs(t.Fragment,{children:[t.jsxs("div",{className:"mb-4 space-y-2",children:[t.jsx("input",{type:"text",placeholder:"البحث في الحقول...",value:H,onChange:he=>Q(he.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500 text-sm"}),t.jsxs("div",{className:"flex flex-wrap gap-1",children:[t.jsxs("select",{value:K===null?"":K.toString(),onChange:he=>oe(he.target.value===""?null:he.target.value==="true"),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[t.jsx("option",{value:"",children:"الكل"}),t.jsx("option",{value:"true",children:"إلزامي"}),t.jsx("option",{value:"false",children:"اختياري"})]}),t.jsxs("select",{value:W===null?"":W.toString(),onChange:he=>X(he.target.value===""?null:he.target.value==="true"),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[t.jsx("option",{value:"",children:"المستوى"}),t.jsx("option",{value:"true",children:"عام"}),t.jsx("option",{value:"false",children:"خاص"})]}),t.jsxs("select",{value:z,onChange:he=>J(he.target.value),className:"px-2 py-1 border border-gray-300 rounded text-xs",children:[t.jsx("option",{value:"",children:"النوع"}),Un.map(he=>t.jsxs("option",{value:he.value,children:[he.icon," ",he.label]},he.value))]})]})]}),Pe?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx("div",{className:"animate-spin rounded-full h-6 w-6 border-b-2 border-purple-600"})}):t.jsxs("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:[Fn.length>0&&t.jsxs("div",{children:[t.jsxs("h4",{className:"text-xs font-medium text-gray-700 mb-2 flex items-center",children:["🔧 حقول غير مجمعة (",Fn.length,")"]}),Fn.map(he=>t.jsx("div",{className:"p-2 rounded border border-gray-200 hover:border-gray-300 mb-1",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[t.jsx("span",{className:"text-sm",children:Nn(he.fieldTypeId)}),t.jsx("h4",{className:"font-medium text-gray-900 text-xs",children:he.displayName}),he.isRequired&&t.jsx("span",{className:"text-red-500 text-xs",children:"*"}),!he.isPublic&&t.jsx("span",{className:"text-gray-500 text-xs",children:"🔒"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:he.fieldName})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>{V({unitTypeId:o.id,fieldTypeId:he.fieldTypeId,fieldName:he.fieldName,displayName:he.displayName,description:he.description,fieldOptions:he.fieldOptions,validationRules:he.validationRules,isRequired:he.isRequired,isSearchable:he.isSearchable,isPublic:he.isPublic,sortOrder:he.sortOrder,category:he.category,isForUnits:he.isForUnits,showInCards:he.showInCards,isPrimaryFilter:he.isPrimaryFilter,priority:he.priority,groupId:he.groupId}),f(he),R(!0)},className:"text-purple-600 hover:text-purple-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>{confirm("هل أنت متأكد من حذف هذا الحقل؟")&&He.mutate(he.fieldId)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},he.fieldId))]}),ut.map(he=>{const tt=rn.filter(ne=>he.fields.some(Me=>Me.fieldId===ne.fieldId));return tt.length===0?null:t.jsxs("div",{className:"mb-3",children:[t.jsxs("h4",{className:"text-xs font-medium text-gray-700 mb-2 flex items-center",children:["📁 ",he.displayName||he.groupName," (",tt.length,")"]}),tt.map(ne=>t.jsx("div",{className:"p-2 rounded border border-gray-200 hover:border-gray-300 mb-1 mr-3",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[t.jsx("span",{className:"text-sm",children:Nn(ne.fieldTypeId)}),t.jsx("h4",{className:"font-medium text-gray-900 text-xs",children:ne.displayName}),ne.isRequired&&t.jsx("span",{className:"text-red-500 text-xs",children:"*"}),!ne.isPublic&&t.jsx("span",{className:"text-gray-500 text-xs",children:"🔒"})]}),t.jsx("p",{className:"text-xs text-gray-600",children:ne.fieldName})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>{V({unitTypeId:o.id,fieldTypeId:ne.fieldTypeId,fieldName:ne.fieldName,displayName:ne.displayName,description:ne.description,fieldOptions:ne.fieldOptions,validationRules:ne.validationRules,isRequired:ne.isRequired,isSearchable:ne.isSearchable,isPublic:ne.isPublic,sortOrder:ne.sortOrder,category:ne.category,isForUnits:ne.isForUnits,showInCards:ne.showInCards,isPrimaryFilter:ne.isPrimaryFilter,priority:ne.priority,groupId:ne.groupId}),f(ne),R(!0)},className:"text-purple-600 hover:text-purple-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>{confirm("هل أنت متأكد من حذف هذا الحقل؟")&&He.mutate(ne.fieldId)},className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},ne.fieldId))]},he.groupId)}),rn.length===0&&t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📝"}),t.jsx("p",{className:"text-sm",children:"لا توجد حقول"}),t.jsx("p",{className:"text-xs",children:"قم بإضافة حقل جديد للبدء"})]})]})]}):t.jsxs("div",{className:"text-center py-8 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"📝"}),t.jsx("p",{className:"text-sm",children:"اختر نوع وحدة لعرض الحقول"})]})]})]}),v&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:a?"تعديل نوع الكيان":"إضافة نوع كيان جديد"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),a?me.mutate({propertyTypeId:a.id,data:{propertyTypeId:a.id,...$}},{onSuccess:()=>{e("تم تحديث نوع الكيان بنجاح"),w(!1),r(null),ce()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث نوع الكيان")}}):re.mutate($,{onSuccess:()=>{e("تم إضافة نوع الكيان بنجاح"),w(!1),ce()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة نوع الكيان")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),t.jsx("input",{type:"text",value:$.name,onChange:he=>E({...$,name:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{A("property"),P(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:ln($.icon)}),t.jsx("span",{className:"text-sm",children:$.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",$.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),t.jsx("textarea",{value:$.description,onChange:he=>E({...$,description:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المرافق الافتراضية"}),t.jsx("textarea",{value:$.defaultAmenities,onChange:he=>E({...$,defaultAmenities:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",rows:2})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{w(!1),r(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:a?"تحديث":"إضافة"})]})]})]})}),S&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:o?"تعديل نوع الوحدة":"إضافة نوع وحدة جديد"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),o?Ie.mutate({unitTypeId:o.id,data:{unitTypeId:o.id,name:I.name,maxCapacity:I.maxCapacity,icon:I.icon,isHasAdults:I.isHasAdults,isHasChildren:I.isHasChildren,isMultiDays:I.isMultiDays,isRequiredToDetermineTheHour:I.isRequiredToDetermineTheHour}},{onSuccess:()=>{e("تم تحديث نوع الوحدة بنجاح"),T(!1),d(null),Oe()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث نوع الوحدة")}}):_e.mutate(I,{onSuccess:()=>{e("تم إضافة نوع الوحدة بنجاح"),T(!1),Oe()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة نوع الوحدة")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم النوع"}),t.jsx("input",{type:"text",value:I.name,onChange:he=>Z({...I,name:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{A("unit"),P(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:ln(I.icon)}),t.jsx("span",{className:"text-sm",children:I.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",I.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعة القصوى"}),t.jsx("input",{type:"number",min:"1",value:I.maxCapacity,onChange:he=>Z({...I,maxCapacity:parseInt(he.target.value)}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-green-500",required:!0})]}),t.jsxs("div",{className:"border-t pt-4",children:[t.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-3",children:"خصائص نوع الوحدة"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:I.isHasAdults,onChange:he=>Z({...I,isHasAdults:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"👨"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"يحتوي على بالغين"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(تفعيل حقل عدد البالغين في الحجز)"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:I.isHasChildren,onChange:he=>Z({...I,isHasChildren:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"👶"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"يحتوي على أطفال"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(تفعيل حقل عدد الأطفال في الحجز)"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:I.isMultiDays,onChange:he=>Z({...I,isMultiDays:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"📅"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"متعدد الأيام"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(السماح بالحجز لعدة أيام)"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:I.isRequiredToDetermineTheHour,onChange:he=>Z({...I,isRequiredToDetermineTheHour:he.target.checked}),className:"ml-2 rounded text-green-600 focus:ring-green-500"}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-sm ml-1",children:"⏰"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"يتطلب تحديد الساعة"})]}),t.jsx("span",{className:"text-xs text-gray-500 mr-2",children:"(إلزام تحديد الوقت عند الحجز)"})]})]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{T(!1),d(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700",children:o?"تحديث":"إضافة"})]})]})]})}),C&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:h?"تعديل مجموعة الحقول":"إضافة مجموعة حقول جديدة"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),h?wt.mutate({groupId:h.groupId,...F},{onSuccess:()=>{e("تم تحديث مجموعة الحقول بنجاح"),_(!1),g(null),Le()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث مجموعة الحقول")}}):Fe.mutate(F,{onSuccess:()=>{e("تم إضافة مجموعة الحقول بنجاح"),_(!1),Le()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة مجموعة الحقول")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المجموعة"}),t.jsx("input",{type:"text",value:F.groupName,onChange:he=>Y({...F,groupName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم المعروض"}),t.jsx("input",{type:"text",value:F.displayName,onChange:he=>Y({...F,displayName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),t.jsx("textarea",{value:F.description,onChange:he=>Y({...F,description:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-yellow-500",rows:3})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:F.isCollapsible,onChange:he=>Y({...F,isCollapsible:he.target.checked}),className:"mr-2"}),"قابل للطي"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:F.isExpandedByDefault,onChange:he=>Y({...F,isExpandedByDefault:he.target.checked}),className:"mr-2"}),"مفتوح افتراضياً"]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{_(!1),g(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-yellow-600 text-white rounded-md hover:bg-yellow-700",children:h?"تحديث":"إضافة"})]})]})]})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-lg max-h-[90vh] overflow-y-auto",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:p?"تعديل الحقل":"إضافة حقل جديد"}),t.jsxs("form",{onSubmit:he=>{he.preventDefault(),p?De.mutate({fieldId:p.fieldId,data:{fieldId:p.fieldId,...G,groupId:h?.groupId||""}},{onSuccess:()=>{e("تم تحديث الحقل بنجاح"),R(!1),f(null),Ct()},onError:tt=>{n(tt.response?.data?.message||"فشل في تحديث الحقل")}}):qe.mutate(G,{onSuccess:()=>{e("تم إضافة الحقل بنجاح"),R(!1),Ct()},onError:tt=>{n(tt.response?.data?.message||"فشل في إضافة الحقل")}})},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الحقل"}),t.jsxs("select",{value:G.fieldTypeId,onChange:he=>V({...G,fieldTypeId:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0,children:[t.jsx("option",{value:"",children:"اختر نوع الحقل"}),Un.map(he=>t.jsxs("option",{value:he.value,children:[he.icon," ",he.label]},he.value))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الحقل"}),t.jsx("input",{type:"text",value:G.fieldName,onChange:he=>V({...G,fieldName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم المعروض"}),t.jsx("input",{type:"text",value:G.displayName,onChange:he=>V({...G,displayName:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الوصف"}),t.jsx("textarea",{value:G.description,onChange:he=>V({...G,description:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500",rows:3})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الفئة"}),t.jsx("input",{type:"text",value:G.category,onChange:he=>V({...G,category:he.target.value}),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-purple-500"})]}),(G.fieldTypeId==="select"||G.fieldTypeId==="multiselect")&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["خيارات ",G.fieldTypeId==="select"?"القائمة المنسدلة":"التحديد المتعدد"]}),t.jsx(Lh,{value:(G.fieldOptions.options||[]).join(","),onChange:he=>V(tt=>({...tt,fieldOptions:{options:he.split(",").map(ne=>ne.trim()).filter(Boolean)}})),placeholder:"أدخل خيار واضغط Enter أو استخدم الفاصلة للفصل",className:"w-full"})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:G.isRequired,onChange:he=>V({...G,isRequired:he.target.checked}),className:"mr-2"}),"مطلوب"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:G.isSearchable,onChange:he=>V({...G,isSearchable:he.target.checked}),className:"mr-2"}),"قابل للبحث"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:G.isPublic,onChange:he=>V({...G,isPublic:he.target.checked}),className:"mr-2"}),"عام"]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:G.isForUnits,onChange:he=>V({...G,isForUnits:he.target.checked}),className:"mr-2"}),"للوحدات"]})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>{R(!1),f(null)},className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"button",onClick:Mn,className:"px-4 py-2 bg-purple-600 text-white rounded-md hover:bg-purple-700",children:p?"تحديث":"إضافة"})]})]})]})}),O&&t.jsx(SR,{selectedIcon:U==="property"?$.icon:I.icon,onSelectIcon:la,onClose:()=>{P(!1),A(null)}})]})},Vo="/api/admin/Units",nc={getAll:e=>we.get(Vo,{params:e}).then(n=>n.data),getById:e=>we.get(`${Vo}/${e.unitId}`).then(n=>n.data),create:e=>we.post(Vo,e).then(n=>n.data),update:(e,n)=>we.put(`${Vo}/${e}`,n).then(a=>a.data),delete:e=>we.delete(`${Vo}/${e}`).then(n=>n.data),getDetails:(e,n=!0)=>we.get(`${Vo}/${e}/details`,{params:{includeDynamicFields:n}}).then(a=>a.data),addUnitToSections:(e,n)=>we.post(`/api/admin/units/${e}/sections`,{sectionIds:n}).then(a=>a.data)},T2=e=>{const n=Bn(),a=["admin-units",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>nc.getAll(e)}),h=Be({mutationFn:f=>nc.create(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-units"]})}}),g=Be({mutationFn:({unitId:f,data:v})=>nc.update(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-units"]})}}),p=Be({mutationFn:f=>nc.delete(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-units"]})}});return{unitsData:r,isLoading:o,error:d,createUnit:h,updateUnit:g,deleteUnit:p}},kR=e=>It({queryKey:["admin-unit-types",e],queryFn:()=>Hd.getAll(e)}),TR="/api/common/system-settings",ER="/api/admin/system-settings",Px={getCurrencies:()=>we.get(`${TR}/currencies`).then(e=>e.data.data||[]),saveCurrencies:e=>we.put(`${ER}/currencies`,e).then(n=>n.data.data||!1)},Cc=()=>{const[e,n]=b.useState([]),[a,r]=b.useState(!0),[o,d]=b.useState(null);return b.useEffect(()=>{Px.getCurrencies().then(h=>{n(h)}).catch(h=>{console.error("Failed to load currencies",h),d(h)}).finally(()=>{r(!1)})},[]),{currencies:e,loading:a,error:o}},Zl=({value:e=0,currency:n="SAR",onValueChange:a,className:r="",disabled:o=!1,placeholder:d="0.00",required:h=!1,min:g=0,max:p,step:f=.01,showSymbol:v=!0,supportedCurrencies:w=["SAR","USD","EUR","AED"],direction:S="rtl",label:T,error:C,variant:_="modern",size:k="md"})=>{const[R,O]=b.useState(e),[P,U]=b.useState(n),[A,$]=b.useState(!1);b.useEffect(()=>{O(e)},[e]),b.useEffect(()=>{U(n)},[n]);const E={YER:{symbol:"ر.ي",name:"ريال يمني",decimals:2,flag:"🇾🇪"},SAR:{symbol:"ر.س",name:"ريال سعودي",decimals:2,flag:"🇸🇦"},USD:{symbol:"$",name:"دولار أمريكي",decimals:2,flag:"🇺🇸"},EUR:{symbol:"€",name:"يورو",decimals:2,flag:"🇪🇺"},AED:{symbol:"د.إ",name:"درهم إماراتي",decimals:2,flag:"🇦🇪"},QAR:{symbol:"ر.ق",name:"ريال قطري",decimals:2,flag:"🇶🇦"},KWD:{symbol:"د.ك",name:"دينار كويتي",decimals:3,flag:"🇰🇼"},BHD:{symbol:"د.ب",name:"دينار بحريني",decimals:3,flag:"🇧🇭"},OMR:{symbol:"ر.ع",name:"ريال عماني",decimals:3,flag:"🇴🇲"}},I=()=>E[P]||E.SAR,Z={sm:{input:"px-3 py-1.5 text-sm",button:"px-1.5 py-0.5 text-xs",container:"min-h-[36px]",icon:"text-sm"},md:{input:"px-4 py-2.5 text-base",button:"px-2 py-1 text-sm",container:"min-h-[42px]",icon:"text-base"},lg:{input:"px-5 py-3 text-lg",button:"px-2.5 py-1.5 text-base",container:"min-h-[48px]",icon:"text-lg"}},F={default:{container:"border-gray-300 bg-white shadow-sm",focused:"ring-2 ring-blue-500 border-blue-500",error:"border-red-500 ring-2 ring-red-200",disabled:"bg-gray-50 border-gray-200"},modern:{container:"border-gray-200 bg-white shadow-lg rounded-xl",focused:"ring-2 ring-blue-500/20 border-blue-400 shadow-xl",error:"border-red-400 ring-2 ring-red-200 shadow-red-100",disabled:"bg-gray-50 border-gray-100"},minimal:{container:"border-gray-200 bg-transparent",focused:"border-blue-400",error:"border-red-400",disabled:"bg-gray-50/50 border-gray-100"}},Y=Z[k],G=F[_],V=me=>{const ye=I();return new Intl.NumberFormat("ar-SA",{minimumFractionDigits:A?0:ye.decimals,maximumFractionDigits:ye.decimals}).format(me)},H=(me,ye)=>{const Ce=E[ye]||E.YER;return new Intl.NumberFormat("ar-SA",{style:"currency",currency:ye,minimumFractionDigits:Ce.decimals,maximumFractionDigits:Ce.decimals}).format(me)},Q=me=>{const ye=me.target.value;if(ye===""||/^\d*\.?\d*$/.test(ye)){const Ce=ye===""?0:parseFloat(ye);if(!isNaN(Ce)){if(g!==void 0&&Ce<g||p!==void 0&&Ce>p)return;O(Ce),a(Ce,P)}}},K=me=>{U(me),a(R,me)},oe=()=>{const me=R+f;(p===void 0||me<=p)&&(O(me),a(me,P))},W=()=>{const me=R-f;me>=g&&(O(me),a(me,P))},X=()=>{$(!0)},z=()=>{$(!1);const me=I(),ye=Math.round(R*Math.pow(10,me.decimals))/Math.pow(10,me.decimals);ye!==R&&(O(ye),a(ye,P))},{currencies:J,loading:se}=Cc(),ae=J.find(me=>me.code===P),ee=J.find(me=>me.isDefault),re=()=>{let me=`
      ${G.container} 
      ${Y.container}
      transition-all duration-200 ease-in-out
      ${_==="modern"?"rounded-xl":"rounded-lg"}
    `;return C?me+=` ${G.error}`:A?me+=` ${G.focused}`:o&&(me+=` ${G.disabled}`),me};return t.jsxs("div",{className:`relative space-y-2 ${r}`,children:[T&&t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:[T,h&&t.jsx("span",{className:"text-red-500 mr-1",children:"*"})]}),t.jsxs("div",{className:`flex items-stretch border ${re()}`,children:[t.jsxs("div",{className:"relative",children:[t.jsx("select",{value:P,onChange:me=>K(me.target.value),disabled:o,className:`
              ${Y.input} 
              bg-gray-50 border-l border-gray-200 focus:outline-none
              ${_==="modern"?"rounded-r-xl":"rounded-r-lg"}
              cursor-pointer appearance-none pr-8 font-medium
              ${o?"opacity-50 cursor-not-allowed":"hover:bg-gray-100"}
              transition-colors duration-200
            `,children:w.map(me=>{const ye=E[me];return t.jsxs("option",{value:me,children:[ye?.flag," ",me]},me)})}),t.jsx("div",{className:"absolute left-2 top-1/2 transform -translate-y-1/2 pointer-events-none",children:t.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]}),t.jsxs("div",{className:"flex-1 relative",children:[t.jsx("input",{type:"text",value:A?R.toString():V(R),onChange:Q,onFocus:X,onBlur:z,disabled:o,placeholder:d,className:`
              w-full ${Y.input} bg-transparent focus:outline-none font-mono
              ${S==="rtl"?"text-right pr-12":"text-left pl-12"}
              ${o?"cursor-not-allowed opacity-50":""}
              placeholder-gray-400
            `,dir:S}),v&&t.jsx("div",{className:`
              absolute top-1/2 transform -translate-y-1/2 pointer-events-none 
              text-gray-500 font-semibold ${Y.icon}
              ${S==="rtl"?"left-3":"right-3"}
            `,children:I().symbol})]}),t.jsxs("div",{className:"flex flex-col border-l border-gray-200",children:[t.jsx("button",{type:"button",onClick:oe,disabled:o||p!==void 0&&R>=p,className:`
              ${Y.button} flex-1 hover:bg-blue-50 hover:text-blue-600
              disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent
              text-gray-400 transition-all duration-200 font-semibold
              ${_==="modern"?"rounded-tl-xl":"rounded-tl-lg"}
              border-b border-gray-200
            `,children:t.jsx("svg",{className:"w-3 h-3 mx-auto",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M7 14l5-5 5 5z"})})}),t.jsx("button",{type:"button",onClick:W,disabled:o||R<=g,className:`
              ${Y.button} flex-1 hover:bg-blue-50 hover:text-blue-600
              disabled:opacity-30 disabled:cursor-not-allowed disabled:hover:bg-transparent
              text-gray-400 transition-all duration-200 font-semibold
              ${_==="modern"?"rounded-bl-xl":"rounded-bl-lg"}
            `,children:t.jsx("svg",{className:"w-3 h-3 mx-auto",fill:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{d:"M7 10l5 5 5-5z"})})})]})]}),t.jsxs("div",{className:"space-y-1",children:[!A&&R>0&&_!=="minimal"&&t.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-lg border border-blue-100",children:[t.jsx("span",{className:"text-2xl",children:I().flag}),t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-lg font-semibold text-gray-800",children:H(R,P)}),t.jsx("div",{className:"text-xs text-gray-500",children:ae?.arabicName||I().name})]})]}),!se&&ae&&!ae.isDefault&&ee&&t.jsxs("div",{className:"flex items-center justify-center gap-2 p-2 bg-yellow-50 rounded-lg border border-yellow-200",children:[t.jsx("span",{className:"text-yellow-600",children:"💱"}),t.jsx("div",{className:"text-xs text-yellow-800",children:`1 ${ae.code} = ${ae.exchangeRate} ${ee.code}`})]}),(g>0||p!==void 0)&&t.jsxs("div",{className:"flex items-center justify-center gap-2 p-1.5 bg-gray-50 rounded text-xs text-gray-600",children:[t.jsx("span",{children:"📊"}),t.jsxs("span",{children:[g>0&&`الحد الأدنى: ${H(g,P)}`,g>0&&p!==void 0&&" • ",p!==void 0&&`الحد الأقصى: ${H(p,P)}`]})]}),C&&t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-red-50 border border-red-200 rounded-lg",children:[t.jsx("span",{className:"text-red-500",children:"⚠️"}),t.jsx("span",{className:"text-sm text-red-600",children:C})]}),h&&R===0&&!C&&t.jsxs("div",{className:"flex items-center gap-2 p-2 bg-orange-50 border border-orange-200 rounded-lg",children:[t.jsx("span",{className:"text-orange-500",children:"📝"}),t.jsx("span",{className:"text-sm text-orange-600",children:"هذا الحقل مطلوب"})]}),A&&_!=="minimal"&&t.jsx("div",{className:"p-3 bg-gradient-to-r from-blue-50 to-purple-50 border border-blue-200 rounded-lg",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx("span",{className:"text-blue-500 mt-0.5",children:"💡"}),t.jsxs("div",{className:"text-sm text-blue-800",children:[t.jsx("div",{className:"font-medium mb-1",children:"نصائح الاستخدام:"}),t.jsxs("ul",{className:"space-y-1 text-xs",children:[t.jsx("li",{children:"• استخدم الأسهم ▲▼ للزيادة والنقصان"}),t.jsx("li",{children:"• اكتب المبلغ مباشرة"}),t.jsx("li",{children:"• غير العملة من القائمة المنسدلة"})]})]})]})})]})]})},Tj=({fields:e,values:n=[],onChange:a,className:r="",variant:o="modern",collapsible:d=!0,showGroupIcons:h=!0})=>{const[g,p]=b.useState({}),[f,v]=b.useState({});b.useEffect(()=>{const A={};n.forEach($=>{A[$.fieldId]=$.fieldValue}),e.forEach($=>{$.fieldId in A||(A[$.fieldId]=w($))}),p(A),a(A)},[e]);const w=A=>{switch(A.fieldTypeId){case"boolean":case"checkbox":return!1;case"multiselect":return[];case"number":case"currency":case"percentage":case"range":return A.validationRules?.min||0;default:return""}},S=(A,$)=>{const E={...g,[A]:$};p(E),a(E)},T=A=>{const $=g[A.fieldId]||w(A),E=A.isRequired;switch(A.fieldTypeId){case"text":return t.jsx("input",{type:"text",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E,minLength:A.validationRules?.minLength,maxLength:A.validationRules?.maxLength,pattern:A.validationRules?.pattern});case"textarea":return t.jsx("textarea",{value:$,onChange:V=>S(A.fieldId,V.target.value),rows:3,className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E,minLength:A.validationRules?.minLength,maxLength:A.validationRules?.maxLength});case"number":return t.jsx("input",{type:"number",value:$,onChange:V=>S(A.fieldId,parseFloat(V.target.value)||0),className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E,min:A.validationRules?.min,max:A.validationRules?.max,step:A.validationRules?.step||1});case"currency":return t.jsx(Zl,{value:$||0,currency:A.validationRules?.currency||"SAR",onValueChange:(V,H)=>S(A.fieldId,V),placeholder:A.description||`أدخل ${A.displayName}`,required:E,min:A.validationRules?.min||0,max:A.validationRules?.max,variant:"modern",size:"md"});case"percentage":return t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"number",value:$,onChange:V=>S(A.fieldId,parseFloat(V.target.value)||0),className:`${P()} pr-8`,placeholder:A.description||`أدخل ${A.displayName}`,required:E,min:0,max:100,step:"0.1"}),t.jsx("span",{className:"absolute left-3 top-2 text-gray-500",children:"%"})]});case"boolean":return t.jsxs("div",{className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors duration-200",children:[t.jsx("input",{type:"checkbox",checked:$,onChange:V=>S(A.fieldId,V.target.checked),className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200",required:E&&!$}),t.jsx("label",{className:"mr-3 text-sm text-gray-700 font-medium cursor-pointer",children:A.description||"نعم"})]});case"select":const I=A.fieldOptions?.options||[];return t.jsxs("select",{value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),required:E,children:[t.jsxs("option",{value:"",children:["اختر ",A.displayName]}),I.map((V,H)=>t.jsx("option",{value:V,children:V},H))]});case"multiselect":const Z=A.fieldOptions?.options||[],F=Array.isArray($)?$:[];return t.jsx("div",{className:"space-y-3",children:Z.map((V,H)=>t.jsxs("label",{className:"flex items-center p-3 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors duration-200 cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:F.includes(V),onChange:Q=>{const K=Q.target.checked?[...F,V]:F.filter(oe=>oe!==V);S(A.fieldId,K)},className:"h-5 w-5 text-blue-600 focus:ring-blue-500 border-gray-300 rounded transition-colors duration-200"}),t.jsx("span",{className:"mr-3 text-sm text-gray-700 font-medium",children:V})]},H))});case"date":return t.jsx("input",{type:"date",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),required:E,min:A.validationRules?.minDate,max:A.validationRules?.maxDate});case"datetime":return t.jsx("input",{type:"datetime-local",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),required:E,min:A.validationRules?.minDate,max:A.validationRules?.maxDate});case"time":return t.jsx("input",{type:"time",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),required:E});case"email":return t.jsx("input",{type:"email",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E,pattern:A.validationRules?.pattern});case"phone":return t.jsx("input",{type:"tel",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E,pattern:A.validationRules?.pattern});case"url":return t.jsx("input",{type:"url",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E,pattern:A.validationRules?.pattern});case"color":return t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("input",{type:"color",value:$,onChange:V=>S(A.fieldId,V.target.value),className:"w-12 h-12 border-2 border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 cursor-pointer",required:E}),t.jsxs("div",{className:"flex-1",children:[t.jsx("div",{className:"text-sm font-medium text-gray-700",children:$||"#000000"}),t.jsx("div",{className:"text-xs text-gray-500",children:"انقر لاختيار لون"})]})]});case"range":return t.jsxs("div",{className:"space-y-4 p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("input",{type:"range",value:$,onChange:V=>S(A.fieldId,parseFloat(V.target.value)),className:"w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer slider",min:A.validationRules?.min||0,max:A.validationRules?.max||100,step:A.validationRules?.step||1,required:E}),t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsx("span",{className:"text-xs text-gray-500",children:A.validationRules?.min||0}),t.jsx("div",{className:"flex items-center gap-2 px-3 py-1 bg-blue-100 text-blue-800 rounded-full",children:t.jsxs("span",{className:"text-sm font-semibold",children:["القيمة: ",$]})}),t.jsx("span",{className:"text-xs text-gray-500",children:A.validationRules?.max||100})]})]});case"rating":return t.jsxs("div",{className:"p-4 bg-gray-50 rounded-lg border border-gray-200",children:[t.jsx("div",{className:"flex items-center justify-center space-x-1 space-x-reverse mb-3",children:[1,2,3,4,5].map(V=>t.jsx("button",{type:"button",onClick:()=>S(A.fieldId,V),className:`text-3xl transition-all duration-200 transform hover:scale-110 ${V<=$?"text-yellow-400 drop-shadow-sm":"text-gray-300"} hover:text-yellow-400`,children:"⭐"},V))}),t.jsx("div",{className:"text-center",children:t.jsxs("span",{className:"inline-flex items-center gap-2 px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-sm font-medium",children:[t.jsxs("span",{children:["التقييم: ",$,"/5"]}),$>0&&t.jsx("span",{className:"text-yellow-600",children:"★".repeat($)})]})})]});case"file":return t.jsxs("div",{className:"p-4 border-2 border-dashed border-gray-300 rounded-lg text-center hover:border-blue-400 transition-colors duration-200",children:[t.jsx("input",{type:"file",onChange:V=>{const H=V.target.files?.[0];H&&S(A.fieldId,H.name)},className:"hidden",id:`file-${A.fieldId}`,required:E,accept:A.validationRules?.allowedTypes?.map(V=>`.${V}`).join(",")}),t.jsxs("label",{htmlFor:`file-${A.fieldId}`,className:"cursor-pointer",children:[t.jsx("div",{className:"text-4xl mb-2",children:"📎"}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"اختر ملف"}),t.jsx("div",{className:"text-xs mt-1",children:A.validationRules?.allowedTypes?`الصيغ المسموحة: ${A.validationRules.allowedTypes.join(", ")}`:"جميع الصيغ مسموحة"})]}),$&&t.jsxs("div",{className:"mt-2 text-xs text-green-600 bg-green-50 p-2 rounded",children:["✓ تم اختيار: ",$]})]})]});case"image":return t.jsxs("div",{className:"p-6 border-2 border-dashed border-gray-300 rounded-lg text-center hover:border-blue-400 transition-colors duration-200",children:[t.jsx("input",{type:"file",onChange:V=>{const H=V.target.files?.[0];H&&S(A.fieldId,H.name)},className:"hidden",id:`image-${A.fieldId}`,required:E,accept:"image/*"}),t.jsxs("label",{htmlFor:`image-${A.fieldId}`,className:"cursor-pointer",children:[t.jsx("div",{className:"text-5xl mb-3",children:"🖼️"}),t.jsxs("div",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"text-blue-600 hover:text-blue-800 font-medium",children:"اختر صورة"}),t.jsx("div",{className:"text-xs mt-1",children:"JPG, PNG, GIF"})]}),$&&t.jsxs("div",{className:"mt-3 text-xs text-green-600 bg-green-50 p-2 rounded",children:["✓ تم اختيار: ",$]})]})]});case"tag":const G=(Array.isArray($)?$:$?$.split(","):[]).join(",");return t.jsx(Lh,{value:G,onChange:V=>{const H=V?V.split(",").map(Q=>Q.trim()).filter(Q=>Q.length>0):[];S(A.fieldId,H)},placeholder:A.description||`أدخل ${A.displayName}`,required:E,variant:"modern",size:"md",maxTags:A.validationRules?.maxItems||20,allowDuplicates:!1,suggestions:A.fieldOptions?.options||[]});default:return t.jsx("input",{type:"text",value:$,onChange:V=>S(A.fieldId,V.target.value),className:P(),placeholder:A.description||`أدخل ${A.displayName}`,required:E})}},C=A=>({text:"📝",textarea:"📄",number:"🔢",currency:"💰",percentage:"📊",boolean:"☑️",checkbox:"✅",select:"📋",multiselect:"📝",date:"📅",datetime:"⏰",time:"🕐",email:"📧",phone:"📞",url:"🔗",color:"🎨",range:"🎚️",rating:"⭐",file:"📎",image:"🖼️",tag:"🏷️"})[A]||"📝",_=A=>({"معلومات أساسية":"📋",التفاصيل:"📄",المواصفات:"🔧",الأسعار:"💰",الميزات:"⭐","المعلومات الإضافية":"📝",الوسائط:"🖼️",الاتصال:"📞",التقييم:"⭐",عام:"📁"})[A]||"📁",k=A=>{v($=>({...$,[A]:!$[A]}))},R=()=>{switch(o){case"modern":return"bg-white border border-gray-100 rounded-xl p-4 shadow-sm hover:shadow-md transition-all duration-200";case"minimal":return"bg-transparent border-b border-gray-100 pb-4 last:border-b-0";default:return"bg-gray-50 border border-gray-200 rounded-lg p-3"}},O=()=>{switch(o){case"modern":return"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-100 rounded-xl p-4 shadow-sm";case"minimal":return"border-b border-gray-200 pb-3 mb-4";default:return"bg-gray-100 border border-gray-200 rounded-lg p-3"}},P=()=>{switch(o){case"modern":return"w-full px-4 py-3 border border-gray-200 rounded-xl focus:outline-none focus:ring-2 focus:ring-blue-500/20 focus:border-blue-400 transition-all duration-200 bg-white shadow-sm";case"minimal":return"w-full px-3 py-2 border-b border-gray-300 focus:outline-none focus:border-blue-500 bg-transparent transition-colors duration-200";default:return"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}},U=e.reduce((A,$)=>{const E=$.category||$.groupId||"عام";return A[E]||(A[E]=[]),A[E].push($),A},{});return e.length===0?t.jsxs("div",{className:`text-center py-12 text-gray-500 ${r}`,children:[t.jsx("div",{className:"text-6xl mb-4 opacity-50",children:"📝"}),t.jsx("h3",{className:"text-lg font-medium text-gray-600 mb-2",children:"لا توجد حقول ديناميكية"}),t.jsx("p",{className:"text-sm text-gray-500",children:"لا توجد حقول ديناميكية محددة لهذا النوع من الوحدات"})]}):t.jsx("div",{className:`space-y-8 ${r}`,dir:"rtl",children:Object.entries(U).map(([A,$])=>{const E=f[A];return t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:O(),children:t.jsxs("div",{className:`flex items-center justify-between ${d?"cursor-pointer":""}`,onClick:()=>d&&k(A),children:[t.jsxs("div",{className:"flex items-center gap-3",children:[h&&t.jsx("span",{className:"text-2xl",children:_(A)}),t.jsx("h3",{className:"text-lg font-semibold text-gray-800",children:A}),t.jsxs("span",{className:"text-xs text-gray-500 bg-gray-200 px-2 py-1 rounded-full",children:[$.length," حقل"]})]}),d&&t.jsx("button",{className:"text-gray-400 hover:text-gray-600 transition-colors duration-200",children:t.jsx("svg",{className:`w-5 h-5 transform transition-transform duration-200 ${E?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})})]})}),(!d||!E)&&t.jsx("div",{className:`grid grid-cols-1 lg:grid-cols-2 gap-6 transition-all duration-300 ${E?"opacity-0 max-h-0 overflow-hidden":"opacity-100"}`,children:$.map(I=>t.jsx("div",{className:R(),children:t.jsxs("label",{className:"block space-y-3",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("span",{className:"text-xl",children:C(I.fieldTypeId)}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:"text-sm font-semibold text-gray-800",children:I.displayName}),I.isRequired&&t.jsx("span",{className:"text-red-500 text-sm font-bold",children:"*"})]}),I.description&&t.jsx("span",{className:"text-xs text-gray-500 block",children:I.description})]})]}),t.jsx("div",{className:"pt-2",children:T(I)})]})},I.fieldId))})]},A)})})},MR=()=>{const e=is(),n=ne=>{e(`/admin/unit-images/${ne.propertyId}/${ne.id}`,{state:{propertyName:ne.propertyName,unitName:ne.name}})},[a,r]=b.useState("table"),[o,d]=b.useState(""),[h,g]=b.useState(!1),[p,f]=b.useState(1),[v,w]=b.useState(20),[S,T]=b.useState({propertyId:"",unitTypeId:"",isAvailable:void 0,minPrice:"",maxPrice:"",pricingMethod:"",checkInDate:"",checkOutDate:""}),[C,_]=b.useState(!1),[k,R]=b.useState(!1),[O,P]=b.useState(!1),[U,A]=b.useState(null),[$,E]=b.useState([]),[I,Z]=b.useState(!1),[F,Y]=b.useState([]),[G,V]=b.useState([]),[H,Q]=b.useState(null),[K,oe]=b.useState(null),[W,X]=b.useState({propertyId:"",unitTypeId:"",name:"",basePrice:{amount:0,currency:"YER"},customFeatures:"",pricingMethod:"Daily",fieldValues:[],images:[],adultCapacity:void 0,childrenCapacity:void 0}),[z,J]=b.useState({unitId:"",name:"",basePrice:{amount:0,currency:"YER"},customFeatures:"",pricingMethod:"Dynamic",fieldValues:[],images:[],adultCapacity:void 0,childrenCapacity:void 0}),[se,ae]=b.useState({}),[ee,re]=b.useState({}),me={pageNumber:p,pageSize:v,nameContains:o||void 0,propertyId:S.propertyId||void 0,unitTypeId:S.unitTypeId||void 0,isAvailable:S.isAvailable,minPrice:S.minPrice||void 0,maxPrice:S.maxPrice||void 0,pricingMethod:S.pricingMethod||void 0,checkInDate:S.checkInDate||void 0,checkOutDate:S.checkOutDate||void 0},{unitsData:ye,isLoading:Ce,error:de,createUnit:te,updateUnit:_e,deleteUnit:Ie}=T2(me),{propertiesData:at}=Sc({pageNumber:1,pageSize:100}),{data:Je,isLoading:it}=kR({pageNumber:1,pageSize:100}),Te=at?.items.find(ne=>ne.id===W.propertyId),{unitTypesData:Fe,isLoading:wt}=k2({propertyTypeId:Te?.typeId||"",pageNumber:1,pageSize:100}),{unitTypeFieldsData:Nt}=Dx({unitTypeId:W.unitTypeId,isPublic:!0}),{unitTypeFieldsData:ut}=Dx({unitTypeId:U?.unitTypeId||"",isPublic:!0}),{currencies:Ee,loading:Pe}=Cc(),qe=Pe?[]:Ee.map(ne=>ne.code);b.useEffect(()=>{if(W.unitTypeId&&Fe?.items){const ne=Fe.items.find(Me=>Me.id===W.unitTypeId);Q(ne||null),ne&&(ne.isHasAdults||X(Me=>({...Me,adultCapacity:void 0})),ne.isHasChildren||X(Me=>({...Me,childrenCapacity:void 0})))}else Q(null)},[W.unitTypeId,Fe]),b.useEffect(()=>{if(U&&Je?.items){const ne=Je.items.find(Me=>Me.id===U.unitTypeId);oe(ne||null)}else oe(null)},[U,Je]),b.useEffect(()=>{W.unitTypeId&&Nt?.length&&ae({})},[W.unitTypeId,Nt]),b.useEffect(()=>{if(U&&ut?.length){const ne={};U.fieldValues?.forEach(Me=>{ne[Me.fieldId]=Me.fieldValue}),re(ne)}},[U,ut]);const De=(ne,Me)=>{const $e=[];return ne.forEach(Qe=>{const Yt=Me[Qe.fieldId],At=Yt??"";switch(Qe.isRequired&&(Qe.fieldTypeId==="multiselect"?(!Array.isArray(At)||At.length===0)&&$e.push(`${Qe.displayName} مطلوب.`):String(At).trim()===""&&$e.push(`${Qe.displayName} مطلوب.`)),Qe.fieldTypeId){case"text":case"textarea":const Rn=String(At).length;Qe.validationRules.minLength&&Rn<Qe.validationRules.minLength&&$e.push(`${Qe.displayName} يجب أن يكون طوله على الأقل ${Qe.validationRules.minLength} أحرف.`),Qe.validationRules.maxLength&&Rn>Qe.validationRules.maxLength&&$e.push(`${Qe.displayName} يجب ألا يزيد طوله عن ${Qe.validationRules.maxLength} أحرف.`),Qe.validationRules.pattern&&(new RegExp(Qe.validationRules.pattern).test(String(At))||$e.push(`${Qe.displayName} غير صالح.`));break;case"number":case"currency":case"percentage":case"range":const _n=parseFloat(At)||0;Qe.validationRules.min!=null&&_n<Qe.validationRules.min&&$e.push(`${Qe.displayName} يجب أن يكون ≥ ${Qe.validationRules.min}.`),Qe.validationRules.max!=null&&_n>Qe.validationRules.max&&$e.push(`${Qe.displayName} يجب أن يكون ≤ ${Qe.validationRules.max}.`);break;case"select":const oa=Qe.fieldOptions.options||[];At&&!oa.includes(At)&&$e.push(`${Qe.displayName} غير صالح.`);break;case"multiselect":const Ma=Qe.fieldOptions.options||[];Array.isArray(At)&&At.forEach(Pt=>{Ma.includes(Pt)||$e.push(`${Qe.displayName} يحتوي على قيمة غير صالحة.`)});break}}),$e},He=(ne,Me)=>{const $e=[];return Me?.isHasAdults&&(!ne.adultCapacity||ne.adultCapacity<=0)&&$e.push("عدد البالغين مطلوب ويجب أن يكون أكبر من صفر"),Me?.isHasChildren&&(!ne.childrenCapacity||ne.childrenCapacity<0)&&$e.push("عدد الأطفال مطلوب ويجب أن يكون صفر أو أكثر"),$e},ct=()=>{X({propertyId:"",unitTypeId:"",name:"",basePrice:{amount:0,currency:"YER"},customFeatures:"",pricingMethod:"Daily",fieldValues:[],images:[],adultCapacity:void 0,childrenCapacity:void 0}),ae({}),Q(null)},ce=ne=>{A(ne),J({unitId:ne.id,name:ne.name,basePrice:ne.basePrice,customFeatures:ne.customFeatures,pricingMethod:ne.pricingMethod,fieldValues:ne.fieldValues?.map(Me=>({fieldId:Me.fieldId,fieldValue:Me.fieldValue}))||[],images:ne.images?.map(Me=>Me.url)||[],adultCapacity:ne.adultCapacity,childrenCapacity:ne.childrenCapacity}),R(!0)},Oe=ne=>{A(ne),P(!0)},Le=ne=>{confirm(`هل أنت متأكد من حذف الوحدة "${ne.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`)&&Ie.mutate(ne.id)},Ct=(ne,Me)=>{T($e=>({...$e,[ne]:Me})),f(1)},rn=()=>{T({propertyId:"",unitTypeId:"",isAvailable:void 0,minPrice:"",maxPrice:"",pricingMethod:"",checkInDate:"",checkOutDate:""}),d(""),f(1)},Fn=async ne=>{A(ne),V([]);const Me=await tc.getSections({pageNumber:1,pageSize:100,target:Is.UNITS});Y(Me.items),Z(!0)},Un=async()=>{U&&(await nc.addUnitToSections(U.id,G),Z(!1))},Nn=[{key:"propertyId",label:"الكيان",type:"select",options:at?.items.map(ne=>({value:ne.id,label:ne.name}))??[]},{key:"unitTypeId",label:"نوع الوحدة",type:"select",options:Je?.items.map(ne=>({value:ne.id,label:ne.name}))??[]},{key:"isAvailable",label:"متاحة",type:"boolean"},{key:"minPrice",label:"الحد الأدنى للسعر",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxPrice",label:"الحد الأقصى للسعر",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"pricingMethod",label:"طريقة التسعير",type:"select",options:[{value:"Hourly",label:"بالساعة"},{value:"Daily",label:"يومي"},{value:"Weekly",label:"أسبوعي"},{value:"Monthly",label:"شهري"}]},{key:"checkInDate",label:"متاح من",type:"custom",render:(ne,Me)=>t.jsx("input",{type:"datetime-local",value:ne,onChange:$e=>Me($e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})},{key:"checkOutDate",label:"متاح إلى",type:"custom",render:(ne,Me)=>t.jsx("input",{type:"datetime-local",value:ne,onChange:$e=>Me($e.target.value),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})}],ln=[{key:"name",title:"اسم الوحدة",sortable:!0,render:(ne,Me)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:ne}),t.jsx("span",{className:"text-sm text-gray-500",children:Me.unitTypeName})]})},{key:"propertyName",title:"الكيان",sortable:!0},{key:"capacity",title:"السعة",render:(ne,Me)=>{const $e=[];return Me.adultCapacity&&$e.push(`👨 ${Me.adultCapacity}`),Me.childrenCapacity!==void 0&&$e.push(`👶 ${Me.childrenCapacity}`),$e.length>0?t.jsx("div",{className:"flex gap-2",children:$e.map((Qe,Yt)=>t.jsx("span",{className:"text-sm",children:Qe},Yt))}):"-"}},{key:"basePrice",title:"السعر الأساسي",render:ne=>t.jsxs("div",{className:"text-right",children:[t.jsx("span",{className:"font-medium",children:ne.amount}),t.jsx("span",{className:"text-sm text-gray-500 mr-1",children:ne.currency})]})},{key:"pricingMethod",title:"طريقة التسعير",render:ne=>({Hourly:"بالساعة",Daily:"يومي",Weekly:"أسبوعي",Monthly:"شهري"})[ne]||ne},{key:"isAvailable",title:"متاحة",render:ne=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ne?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne?"متاحة":"غير متاحة"})}],la=[{label:"إدارة الإتاحة",icon:"📅",color:"green",onClick:ne=>{e(`/admin/units/${ne.id}/availability`,{state:{unitName:ne.name}})}},{label:"إدارة التسعير",icon:"💰",color:"orange",onClick:ne=>{e(`/admin/units/${ne.id}/pricing`,{state:{unitName:ne.name}})}},{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:Oe},{label:"معرض الصور",icon:"🖼️",color:"blue",onClick:n},{label:"تعديل",icon:"✏️",color:"yellow",onClick:ce},{label:"إسناد للأقسام",icon:"📚",color:"yellow",onClick:ne=>Fn(ne)},{label:"حذف",icon:"🗑️",color:"red",onClick:Le}],Mn=ne=>!ne||ne.length===0?null:ne.find($e=>$e.isMain)||ne[0],he=ne=>{const Me=Mn(ne.images);return t.jsxs("div",{className:"bg-white border border-gray-200 rounded-lg shadow-sm hover:shadow-md transition-shadow overflow-hidden",children:[t.jsxs("div",{className:"relative h-48 bg-gray-200",children:[Me?t.jsx("img",{src:Me.url,alt:Me.altText||ne.name,className:"w-full h-full object-cover",onError:$e=>{const Qe=$e.target;Qe.style.display="none",Qe.nextElementSibling?.classList.remove("hidden")}}):null,t.jsx("div",{className:`w-full h-full flex items-center justify-center bg-gray-100 ${Me?"hidden":""}`,children:t.jsxs("div",{className:"text-center",children:[t.jsx("span",{className:"text-4xl text-gray-400",children:"🏠"}),t.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"لا توجد صورة"})]})}),t.jsx("div",{className:"absolute top-3 right-3",children:t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ne.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:ne.isAvailable?"متاحة":"غير متاحة"})}),ne.images&&ne.images.length>0&&t.jsxs("div",{className:"absolute bottom-3 left-3 bg-black bg-opacity-60 text-white px-2 py-1 rounded text-xs",children:["📸 ",ne.images.length," صورة"]})]}),t.jsxs("div",{className:"p-6",children:[t.jsxs("div",{className:"mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:ne.name}),t.jsx("p",{className:"text-sm text-gray-600",children:ne.unitTypeName})]}),t.jsxs("div",{className:"space-y-2 mb-4",children:[t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"الكيان:"}),t.jsx("span",{className:"text-sm text-gray-900",children:ne.propertyName})]}),(ne.adultCapacity||ne.childrenCapacity!==void 0)&&t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"السعة:"}),t.jsxs("div",{className:"flex gap-2",children:[ne.adultCapacity&&t.jsxs("span",{className:"text-sm text-gray-900",children:["👨 ",ne.adultCapacity]}),ne.childrenCapacity!==void 0&&t.jsxs("span",{className:"text-sm text-gray-900",children:["👶 ",ne.childrenCapacity]})]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"السعر:"}),t.jsxs("span",{className:"text-sm text-gray-900 font-medium",children:[ne.basePrice.amount," ",ne.basePrice.currency]})]}),t.jsxs("div",{className:"flex justify-between",children:[t.jsx("span",{className:"text-sm text-gray-500",children:"طريقة التسعير:"}),t.jsx("span",{className:"text-sm text-gray-900",children:Nn.find($e=>$e.key==="pricingMethod")?.options?.find($e=>$e.value===ne.pricingMethod)?.label||ne.pricingMethod})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx("button",{onClick:()=>Oe(ne),className:"flex-1 px-3 py-2 bg-blue-50 text-blue-700 text-sm font-medium rounded hover:bg-blue-100 transition-colors",children:"عرض التفاصيل"}),t.jsx("button",{onClick:()=>ce(ne),className:"px-3 py-2 bg-gray-50 text-gray-700 text-sm font-medium rounded hover:bg-gray-100 transition-colors",children:"✏️"}),t.jsx("button",{onClick:()=>Fn(ne),className:"px-3 py-2 bg-indigo-50 text-indigo-700 text-sm font-medium rounded hover:bg-indigo-100 transition-colors",children:"📚"}),t.jsx("button",{onClick:()=>Le(ne),className:"px-3 py-2 bg-red-50 text-red-700 text-sm font-medium rounded hover:bg-red-100 transition-colors",children:"🗑️"})]})]})]})},tt=(ye?.items||[]).map(ne=>{const Me=at?.items.find($e=>$e.id===ne.propertyId);return{...ne,latitude:Me?.latitude,longitude:Me?.longitude,address:Me?.address}});return de?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات الوحدات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الوحدات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع الوحدات في النظام مع 3 طرق عرض مختلفة"})]}),t.jsxs("div",{className:"flex gap-3",children:[t.jsx(C2,{currentView:a,onViewChange:r,availableViews:["table","cards","map"]}),t.jsx("button",{onClick:()=>_(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة وحدة جديدة"})]})]})}),t.jsx(ti,{searchPlaceholder:"البحث في الوحدات...",searchValue:o,onSearchChange:d,filters:Nn,filterValues:S,onFilterChange:Ct,onReset:rn,showAdvanced:h,onToggleAdvanced:()=>g(!h)}),a==="table"&&t.jsx(ls,{data:ye?.items||[],columns:ln,loading:Ce,pagination:{current:ye?.pageNumber||1,pageSize:ye?.pageSize||v,total:ye?.totalCount||0,onChange:(ne,Me)=>{f(ne),w(Me)}},actions:la}),a==="cards"&&t.jsx(_2,{data:ye?.items||[],loading:Ce,renderCard:he,emptyMessage:"لا توجد وحدات للعرض",emptyIcon:"🏠",columns:3,pagination:{current:p,total:ye?.totalCount||0,pageSize:v,onChange:(ne,Me)=>{f(ne),w(Me)}}}),a==="map"&&t.jsx(S2,{markers:tt.map(ne=>({id:ne.id,name:ne.name,address:ne.propertyName,description:`${ne.unitTypeName} - ${ne.basePrice.amount} ${ne.basePrice.currency}`,coordinates:ne.latitude&&ne.longitude?{latitude:ne.latitude,longitude:ne.longitude}:void 0,type:"unit",color:ne.isAvailable?"#10B981":"#EF4444",isAvailable:ne.isAvailable,price:{amount:ne.basePrice.amount,currency:ne.basePrice.currency}})).filter(ne=>ne.coordinates),onMarkerClick:ne=>{const Me=tt.find($e=>$e.id===ne.id);Me&&Oe(Me)},emptyMessage:"لا توجد وحدات بمواقع محددة لعرضها على الخريطة",height:"600px",pagination:{current:p,total:ye?.totalCount||0,pageSize:v,onChange:(ne,Me)=>{f(ne),w(Me)}}}),t.jsx(Rt,{isOpen:C,onClose:()=>{_(!1),ct()},title:"إضافة وحدة جديدة",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{_(!1),ct()},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>{const ne=He(W,H);if(ne.length){alert(ne.join(`
`));return}const Me=De(Nt||[],se);if(Me.length){alert(Me.join(`
`));return}const $e=Object.entries(se).map(([Yt,At])=>({fieldId:Yt,fieldValue:Array.isArray(At)?JSON.stringify(At):String(At)})),Qe={...W,fieldValues:$e};te.mutate(Qe,{onSuccess:()=>{_(!1),ct()}})},disabled:te.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:te.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📋"})," المعلومات الأساسية"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الكيان *"}),t.jsxs("select",{value:W.propertyId,onChange:ne=>X(Me=>({...Me,propertyId:ne.target.value,unitTypeId:""})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"",children:"اختر الكيان"}),at?.items?.map(ne=>t.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الوحدة *"}),t.jsxs("select",{value:W.unitTypeId,onChange:ne=>X(Me=>({...Me,unitTypeId:ne.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",disabled:!W.propertyId,required:!0,children:[t.jsx("option",{value:"",children:"اختر نوع الوحدة"}),wt?t.jsx("option",{disabled:!0,children:"جارٍ التحميل..."}):Fe?.items.map(ne=>t.jsx("option",{value:ne.id,children:ne.name},ne.id))]})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الوحدة *"}),t.jsx("input",{type:"text",value:W.name,onChange:ne=>X(Me=>({...Me,name:ne.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم الوحدة",required:!0})]})]})]}),(H?.isHasAdults||H?.isHasChildren)&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"👥"})," السعة الاستيعابية"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[H?.isHasAdults&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد البالغين * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"1",value:W.adultCapacity||"",onChange:ne=>X(Me=>({...Me,adultCapacity:parseInt(ne.target.value)||void 0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد البالغين",required:!0})]}),H?.isHasChildren&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد الأطفال * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"0",value:W.childrenCapacity!==void 0?W.childrenCapacity:"",onChange:ne=>X(Me=>({...Me,childrenCapacity:parseInt(ne.target.value)||0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد الأطفال",required:!0})]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"💰"})," التسعير"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي *"}),t.jsx(Zl,{value:W.basePrice.amount,currency:W.basePrice.currency,onValueChange:(ne,Me)=>X($e=>({...$e,basePrice:{amount:ne,currency:Me}})),placeholder:"0.00",required:!0,min:0,showSymbol:!0,supportedCurrencies:qe})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"طريقة التسعير *"}),t.jsxs("select",{value:W.pricingMethod,onChange:ne=>X(Me=>({...Me,pricingMethod:ne.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",required:!0,children:[t.jsx("option",{value:"Hourly",children:"بالساعة"}),t.jsx("option",{value:"Daily",children:"يومي"}),t.jsx("option",{value:"Weekly",children:"أسبوعي"}),t.jsx("option",{value:"Monthly",children:"شهري"})]})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"✨"})," الميزات المخصصة"]}),t.jsx(Lh,{value:W.customFeatures,onChange:ne=>X(Me=>({...Me,customFeatures:ne})),placeholder:"أدخل الميزات المخصصة واضغط Enter أو الفاصلة للإضافة...",variant:"modern",size:"md",maxTags:15,suggestions:["واي فاي مجاني","مكيف هواء","تلفزيون ذكي","مطبخ مجهز","شرفة خاصة","موقف سيارة","مسبح","جيم","خدمة تنظيف","أمن وحراسة","خدمة استقبال","صالة ألعاب","منطقة شواء","حديقة خاصة","جاكوزي"]})]}),W.unitTypeId&&Nt&&Nt.length>0&&t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📝"})," معلومات إضافية"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx(Tj,{fields:Nt,values:[],onChange:ae,className:"contents"})})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"🖼️"})," صور الوحدة"]}),t.jsx(Yl,{value:W.images||[],onChange:ne=>X(Me=>({...Me,images:Array.isArray(ne)?ne:[ne]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور الوحدة أو اسحبها هنا",uploadEndpoint:"/api/images/upload"})]})]})}),t.jsx(Rt,{isOpen:k,onClose:()=>{R(!1),A(null)},title:"تعديل بيانات الوحدة",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{R(!1),A(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>{const ne=He(z,K);if(ne.length){alert(ne.join(`
`));return}const Me=De(ut||[],ee);if(Me.length){alert(Me.join(`
`));return}const $e=Object.entries(ee).map(([Yt,At])=>({fieldId:Yt,fieldValue:Array.isArray(At)?JSON.stringify(At):String(At)})),Qe={...z,fieldValues:$e};_e.mutate({unitId:z.unitId,data:Qe},{onSuccess:()=>{R(!1),A(null)}})},disabled:_e.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:_e.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:U&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📋"})," المعلومات الأساسية"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الوحدة"}),t.jsx("input",{type:"text",value:z.name,onChange:ne=>J(Me=>({...Me,name:ne.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})})]}),(K?.isHasAdults||K?.isHasChildren)&&t.jsxs("div",{className:"bg-blue-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"👥"})," السعة الاستيعابية"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[K?.isHasAdults&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد البالغين * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"1",value:z.adultCapacity||"",onChange:ne=>J(Me=>({...Me,adultCapacity:parseInt(ne.target.value)||void 0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد البالغين",required:!0})]}),K?.isHasChildren&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:["عدد الأطفال * ",t.jsx("span",{className:"text-gray-500 text-xs",children:"(الحد الأقصى)"})]}),t.jsx("input",{type:"number",min:"0",value:z.childrenCapacity!==void 0?z.childrenCapacity:"",onChange:ne=>J(Me=>({...Me,childrenCapacity:parseInt(ne.target.value)||0})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل عدد الأطفال",required:!0})]})]})]}),t.jsxs("div",{className:"bg-green-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"💰"})," التسعير"]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي"}),t.jsx(Zl,{value:z.basePrice?.amount||0,currency:z.basePrice?.currency||"YER",onValueChange:(ne,Me)=>J($e=>({...$e,basePrice:{amount:ne,currency:Me}})),placeholder:"0.00",min:0,showSymbol:!0,supportedCurrencies:qe})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"طريقة التسعير"}),t.jsxs("select",{value:z.pricingMethod,onChange:ne=>J(Me=>({...Me,pricingMethod:ne.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"Hourly",children:"بالساعة"}),t.jsx("option",{value:"Daily",children:"يومي"}),t.jsx("option",{value:"Weekly",children:"أسبوعي"}),t.jsx("option",{value:"Monthly",children:"شهري"})]})]})]})]}),t.jsxs("div",{className:"bg-yellow-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"✨"})," الميزات المخصصة"]}),t.jsx(Lh,{value:z.customFeatures||"",onChange:ne=>J(Me=>({...Me,customFeatures:ne})),placeholder:"أدخل الميزات المخصصة واضغط Enter أو الفاصلة للإضافة...",variant:"modern",size:"md",maxTags:15,suggestions:["واي فاي مجاني","مكيف هواء","تلفزيون ذكي","مطبخ مجهز","شرفة خاصة","موقف سيارة","مسبح","جيم","خدمة تنظيف","أمن وحراسة","خدمة استقبال","صالة ألعاب","منطقة شواء","حديقة خاصة","جاكوزي"]})]}),U&&ut&&ut.length>0&&t.jsxs("div",{className:"bg-purple-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"📝"})," معلومات إضافية"]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsx(Tj,{fields:ut,values:U?.fieldValues?.map(ne=>({fieldId:ne.fieldId,fieldValue:ne.fieldValue}))||[],onChange:re,className:"contents"})})]}),t.jsxs("div",{className:"bg-indigo-50 rounded-lg p-4",children:[t.jsxs("h3",{className:"text-lg font-medium text-gray-900 mb-4 flex items-center",children:[t.jsx("span",{className:"ml-2",children:"🖼️"})," صور الوحدة"]}),t.jsx(Yl,{value:z.images||U?.images?.map(ne=>ne.url)||[],onChange:ne=>J(Me=>({...Me,images:Array.isArray(ne)?ne:[ne]})),multiple:!0,maxFiles:10,maxSize:5,showPreview:!0,placeholder:"اضغط لرفع صور جديدة للوحدة أو اسحبها هنا",uploadEndpoint:"/api/images/upload"})]})]})}),t.jsx(Rt,{isOpen:O,onClose:()=>{P(!1),A(null)},title:"تفاصيل الوحدة",size:"xl",children:U&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الوحدة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:U.name})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"نوع الوحدة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:U.unitTypeName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الكيان"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:U.propertyName})]}),(U.adultCapacity||U.childrenCapacity!==void 0)&&t.jsxs(t.Fragment,{children:[U.adultCapacity&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد البالغين"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["👨 ",U.adultCapacity," بالغ"]})]}),U.childrenCapacity!==void 0&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الأطفال"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900",children:["👶 ",U.childrenCapacity," طفل"]})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر الأساسي"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[U.basePrice.amount," ",U.basePrice.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"طريقة التسعير"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Nn.find(ne=>ne.key==="pricingMethod")?.options?.find(ne=>ne.value===U.pricingMethod)?.label||U.pricingMethod})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة التوفر"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${U.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:U.isAvailable?"متاحة":"غير متاحة"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الميزات المخصصة"}),U.customFeatures?t.jsx("div",{className:"flex flex-wrap gap-1",children:U.customFeatures.split(",").map((ne,Me)=>t.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 bg-gradient-to-r from-blue-50 to-indigo-50 text-blue-700 border border-blue-200 rounded-full text-sm font-medium",children:["✨ ",ne.trim()]},Me))}):t.jsx("p",{className:"text-sm text-gray-500 italic",children:"لا توجد ميزات مخصصة"})]}),U.fieldValues&&U.fieldValues.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"📝 معلومات إضافية"}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:U.fieldValues.map(ne=>t.jsxs("div",{className:"space-y-1",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:ne.displayName||ne.fieldName}),t.jsx("div",{className:"text-sm text-gray-900 bg-gray-50 px-3 py-2 rounded-md",children:ne.fieldValue||"لا توجد قيمة"})]},ne.fieldId))})]}),U.images&&U.images.length>0&&t.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[t.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-4",children:"🖼️ صور الوحدة"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:U.images.map((ne,Me)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:ne.url,alt:ne.altText||`صورة ${Me+1}`,className:"w-full h-32 object-cover rounded-lg"}),ne.isMain&&t.jsx("span",{className:"absolute top-2 right-2 bg-blue-500 text-white text-xs px-2 py-1 rounded",children:"رئيسية"})]},Me))})]})]})}),t.jsx(Rt,{isOpen:I,onClose:()=>{Z(!1),V([])},title:"إضافة الوحدة للأقسام",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{Z(!1),V([])},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:Un,className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:"حفظ"})]}),children:t.jsxs("div",{className:"space-y-3",children:[t.jsxs("p",{className:"text-sm text-gray-600",children:['حدد الأقسام التي تريد إضافة الوحدة "',U?.name,'" إليها:']}),t.jsx("div",{className:"grid grid-cols-1 gap-2 max-h-80 overflow-auto border border-gray-200 rounded-lg p-3",children:F.length>0?F.map(ne=>t.jsxs("label",{className:"flex items-center gap-3 p-2 hover:bg-gray-50 rounded cursor-pointer",children:[t.jsx("input",{type:"checkbox",checked:G.includes(ne.id),onChange:Me=>{V($e=>Me.target.checked?[...$e,ne.id]:$e.filter(Qe=>Qe!==ne.id))},className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),t.jsxs("div",{className:"flex-1",children:[t.jsxs("span",{className:"font-medium text-gray-900",children:["#",ne.displayOrder," - ",ne.type]}),ne.title&&t.jsx("p",{className:"text-sm text-gray-500",children:ne.title})]})]},ne.id)):t.jsx("p",{className:"text-center text-gray-500 py-4",children:"لا توجد أقسام متاحة"})}),G.length>0&&t.jsxs("p",{className:"text-sm text-blue-600",children:["تم تحديد ",G.length," قسم/أقسام"]})]})})]})},zd="/api/admin/bookings",dh={cancel:e=>we.post(`${zd}/${e.bookingId}/cancel`,e).then(n=>n.data),update:e=>we.put(`${zd}/${e.bookingId}/update`,e).then(n=>n.data),getById:e=>we.get(`${zd}/${e.bookingId}`).then(n=>n.data),getByDateRange:e=>we.get(`${zd}/by-date-range`,{params:e}).then(n=>n.data),confirm:e=>we.post(`${zd}/confirm`,e).then(n=>n.data)},E2=e=>{const n=Bn(),a=["admin-bookings",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>dh.getByDateRange(e)}),h=Be({mutationFn:f=>dh.update(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),g=Be({mutationFn:f=>dh.cancel(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}}),p=Be({mutationFn:f=>dh.confirm(f),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-bookings"]})}});return{bookingsData:r,isLoading:o,error:d,updateBooking:h,cancelBooking:g,confirmBooking:p}},L0=({value:e="",onChange:n,placeholder:a="اختر الوحدة",className:r="",disabled:o=!1,propertyId:d,unitTypeId:h,isAvailable:g,required:p=!1})=>{const[f,v]=b.useState(!1),[w,S]=b.useState(""),[T,C]=b.useState(null),_=b.useRef(null),k={pageNumber:1,pageSize:50,nameContains:w||void 0,propertyId:d||void 0,unitTypeId:h||void 0,isAvailable:g||void 0},{unitsData:R,isLoading:O}=T2(k);b.useEffect(()=>{if(e&&R?.items){const E=R.items.find(I=>I.id===e);C(E||null)}else C(null)},[e,R]),b.useEffect(()=>{const E=I=>{_.current&&!_.current.contains(I.target)&&v(!1)};return document.addEventListener("mousedown",E),()=>document.removeEventListener("mousedown",E)},[]);const P=E=>{C(E),n(E.id,E),v(!1),S("")},U=()=>{C(null),n(""),S("")},A=E=>({Hourly:"بالساعة",Daily:"يومي",Weekly:"أسبوعي",Monthly:"شهري"})[E]||E,$=E=>!E||typeof E!="object"?"":`${E.amount} ${E.currency}`;return t.jsxs("div",{className:`relative ${r}`,ref:_,children:[t.jsxs("button",{type:"button",onClick:()=>v(!f),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!T&&p?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:T?t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:T.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${T.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:T.isAvailable?"متاحة":"غير متاحة"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsx("p",{className:"text-sm text-gray-500 truncate",children:T.propertyName}),t.jsx("p",{className:"text-xs text-gray-400",children:$(T.basePrice)})]})]}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[T&&!o&&t.jsx("button",{type:"button",onClick:E=>{E.stopPropagation(),U()},className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:f?"▲":"▼"})]})]}),f&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:w,onChange:E=>S(E.target.value),placeholder:"البحث في الوحدات...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:O?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):R?.items&&R.items.length>0?R.items.map(E=>t.jsxs("button",{type:"button",onClick:()=>P(E),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:E.name}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${E.isAvailable?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:E.isAvailable?"متاحة":"غير متاحة"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["📍 ",E.propertyName]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["🏠 ",E.unitTypeName]})]}),t.jsx("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:t.jsx("p",{className:"text-xs text-gray-400",children:A(E.pricingMethod)})})]}),t.jsxs("div",{className:"flex-shrink-0 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:$(E.basePrice)}),t.jsx("p",{className:"text-xs text-gray-500",children:"السعر الأساسي"})]})]},E.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:w?`لا توجد نتائج للبحث "${w}"`:"لا توجد وحدات"})}),R?.items&&R.items.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[R.items.length," من ",R.totalCount||0," وحدة"]})]})]})},RR=()=>{const[e,n]=b.useState(""),[a,r]=b.useState(!1),[o,d]=b.useState(1),[h,g]=b.useState(20),[p,f]=b.useState({status:"",startDate:"",endDate:"",userId:"",unitId:"",minTotalPrice:"",maxTotalPrice:"",guestNameOrEmail:"",bookingSource:"",isWalkIn:void 0}),[v,w]=b.useState(!1),[S,T]=b.useState(!1),[C,_]=b.useState(!1),[k,R]=b.useState(!1),[O,P]=b.useState(null),[U,A]=b.useState([]),[$,E]=b.useState({bookingId:"",checkIn:"",checkOut:"",guestsCount:1}),[I,Z]=b.useState({cancellationReason:""}),F={startDate:p.startDate||new Date(Date.now()-720*60*60*1e3).toISOString().split("T")[0],endDate:p.endDate||new Date().toISOString().split("T")[0],pageNumber:o,pageSize:h,userId:p.userId||void 0,unitId:p.unitId||void 0,guestNameOrEmail:e||void 0,bookingSource:p.bookingSource||void 0},{bookingsData:Y,isLoading:G,error:V,updateBooking:H,cancelBooking:Q,confirmBooking:K}=E2(F),oe=Y?.items?.filter(te=>!p.status||te.status===p.status)||[],W=te=>{P(te),w(!0)},X=te=>{P(te),E({bookingId:te.id,checkIn:te.checkIn.split("T")[0],checkOut:te.checkOut.split("T")[0],guestsCount:te.guestsCount}),T(!0)},z=te=>{P(te),_(!0)},J=te=>{const _e={bookingId:te.id};K.mutate(_e)},se=(te,_e)=>{f(Ie=>({...Ie,[te]:_e})),d(1)},ae=()=>{f({status:"",startDate:"",endDate:"",userId:"",unitId:"",minTotalPrice:"",maxTotalPrice:"",guestNameOrEmail:"",bookingSource:"",isWalkIn:void 0}),n(""),d(1)},ee=te=>({Confirmed:"bg-green-100 text-green-800",Pending:"bg-yellow-100 text-yellow-800",Cancelled:"bg-red-100 text-red-800",Completed:"bg-blue-100 text-blue-800",CheckedIn:"bg-purple-100 text-purple-800"})[te]||"bg-gray-100 text-gray-800",re=te=>({Confirmed:"مؤكد",Pending:"معلق",Cancelled:"ملغي",Completed:"مكتمل",CheckedIn:"تم الوصول"})[te]||te,me={total:oe.length,confirmed:oe.filter(te=>te.status==="Confirmed").length,pending:oe.filter(te=>te.status==="Pending").length,cancelled:oe.filter(te=>te.status==="Cancelled").length,completed:oe.filter(te=>te.status==="Completed").length},ye=[{key:"status",label:"حالة الحجز",type:"select",options:[{value:"Confirmed",label:"مؤكد"},{value:"Pending",label:"معلق"},{value:"Cancelled",label:"ملغي"},{value:"Completed",label:"مكتمل"},{value:"CheckedIn",label:"تم الوصول"}]},{key:"startDate",label:"تاريخ البداية",type:"date"},{key:"endDate",label:"تاريخ النهاية",type:"date"},{key:"userId",label:"المستخدم",type:"custom",render:(te,_e)=>t.jsx(Vl,{value:te,onChange:Ie=>_e(Ie),placeholder:"اختر المستخدم",allowedRoles:["Customer"],className:"w-full"})},{key:"unitId",label:"الوحدة",type:"custom",render:(te,_e)=>t.jsx(L0,{value:te,onChange:Ie=>_e(Ie),placeholder:"اختر الوحدة",className:"w-full"})},{key:"minTotalPrice",label:"الحد الأدنى للسعر",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxTotalPrice",label:"الحد الأقصى للسعر",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"bookingSource",label:"مصدر الحجز",type:"select",options:[{value:"web",label:"موقع الويب"},{value:"mobile",label:"التطبيق"},{value:"admin",label:"لوحة الإدارة"},{value:"phone",label:"الهاتف"}]},{key:"isWalkIn",label:"حجز مباشر",type:"boolean"}],Ce=[{key:"id",title:"معرف الحجز",sortable:!0,render:te=>t.jsxs("span",{className:"font-mono text-sm text-gray-600",children:[te.substring(0,8),"..."]})},{key:"userName",title:"اسم العميل",sortable:!0,render:(te,_e)=>t.jsxs("div",{className:"flex flex-col",children:[t.jsx("span",{className:"font-medium text-gray-900",children:te}),t.jsxs("span",{className:"text-sm text-gray-500",children:[_e.guestsCount," ضيف"]})]})},{key:"unitName",title:"الوحدة",sortable:!0},{key:"checkIn",title:"تاريخ الوصول",sortable:!0,render:te=>t.jsx("span",{className:"text-sm",children:new Date(te).toLocaleDateString("ar-SA")})},{key:"checkOut",title:"تاريخ المغادرة",sortable:!0,render:te=>t.jsx("span",{className:"text-sm",children:new Date(te).toLocaleDateString("ar-SA")})},{key:"totalPrice",title:"السعر الإجمالي",render:te=>t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"font-medium",children:te.amount}),t.jsx("span",{className:"text-sm text-gray-500 mr-1",children:te.currency})]})},{key:"status",title:"الحالة",render:te=>t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${ee(te)}`,children:re(te)})},{key:"bookedAt",title:"تاريخ الحجز",sortable:!0,render:te=>t.jsx("span",{className:"text-sm text-gray-500",children:new Date(te).toLocaleDateString("ar-SA")})}],de=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:W},{label:"تعديل",icon:"✏️",color:"blue",onClick:X,show:te=>te.status==="Pending"||te.status==="Confirmed"},{label:"إلغاء",icon:"❌",color:"red",onClick:z,show:te=>te.status==="Pending"||te.status==="Confirmed"},{label:"تأكيد",icon:"✅",color:"green",onClick:J,show:te=>te.status==="Pending"}];return V?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات الحجوزات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الحجوزات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إدارة جميع حجوزات النظام مع فلترة متقدمة وإدارة الحالات"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📊"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الحجوزات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:me.total})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مؤكدة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:me.confirmed})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:me.pending})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"❌"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ملغية"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:me.cancelled})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🏁"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مكتملة"}),t.jsx("p",{className:"text-2xl font-bold text-blue-600",children:me.completed})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في الحجوزات (اسم العميل أو البريد الإلكتروني)...",searchValue:e,onSearchChange:n,filters:ye,filterValues:p,onFilterChange:se,onReset:ae,showAdvanced:a,onToggleAdvanced:()=>r(!a)}),t.jsx(ls,{data:oe,columns:Ce,loading:G,pagination:{current:o,total:Y?.totalCount||0,pageSize:h,onChange:(te,_e)=>{d(te),g(_e)}},rowSelection:{selectedRowKeys:U,onChange:A},actions:de,onRowClick:W}),t.jsx(Rt,{isOpen:v,onClose:()=>{w(!1),P(null)},title:"تفاصيل الحجز",size:"xl",children:O&&t.jsx("div",{className:"space-y-6",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:O.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم العميل"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.userName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوحدة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.unitName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"عدد الضيوف"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:O.guestsCount})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الوصول"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(O.checkIn).toLocaleDateString("ar-SA")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ المغادرة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(O.checkOut).toLocaleDateString("ar-SA")})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"السعر الإجمالي"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[O.totalPrice.amount," ",O.totalPrice.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة الحجز"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${ee(O.status)}`,children:re(O.status)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(O.bookedAt).toLocaleDateString("ar-SA")})]})]})})}),t.jsx(Rt,{isOpen:S,onClose:()=>{T(!1),P(null)},title:"تعديل بيانات الحجز",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{T(!1),P(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>H.mutate($),disabled:H.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:H.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:O&&t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ الوصول"}),t.jsx("input",{type:"date",value:$.checkIn,onChange:te=>E(_e=>({..._e,checkIn:te.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"تاريخ المغادرة"}),t.jsx("input",{type:"date",value:$.checkOut,onChange:te=>E(_e=>({..._e,checkOut:te.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"عدد الضيوف"}),t.jsx("input",{type:"number",min:"1",value:$.guestsCount,onChange:te=>E(_e=>({..._e,guestsCount:Number(te.target.value)})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]})]})}),t.jsx(Rt,{isOpen:C,onClose:()=>{_(!1),P(null),Z({cancellationReason:""})},title:"إلغاء الحجز",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{_(!1),P(null),Z({cancellationReason:""})},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>Q.mutate({bookingId:O.id,cancellationReason:I.cancellationReason}),disabled:Q.status==="pending"||!I.cancellationReason.trim(),className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:Q.status==="pending"?"جارٍ الإلغاء...":"إلغاء الحجز"})]}),children:O&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-red-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"تأكيد إلغاء الحجز"}),t.jsxs("p",{className:"mt-2 text-sm text-red-700",children:["هل أنت متأكد من إلغاء حجز ",t.jsx("strong",{children:O.userName})," للوحدة ",t.jsx("strong",{children:O.unitName}),"؟ هذا الإجراء لا يمكن التراجع عنه."]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سبب الإلغاء *"}),t.jsx("textarea",{rows:3,value:I.cancellationReason,onChange:te=>Z(_e=>({..._e,cancellationReason:te.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل سبب إلغاء الحجز..."})]})]})})]})},uh={refund:e=>we.post("/api/admin/Payments/refund",e).then(n=>n.data),void:e=>we.post("/api/admin/Payments/void",e).then(n=>n.data),updateStatus:(e,n)=>we.put(`/api/admin/Payments/${e}/status`,n).then(a=>a.data),getAll:e=>we.get("/api/admin/Payments",{params:e}).then(n=>n.data)},AR=e=>{const n=Bn(),a=["admin-payments",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>uh.getAll(e)}),h=Be({mutationFn:f=>uh.refund(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),g=Be({mutationFn:f=>uh.void(f),onSuccess:()=>{n.invalidateQueries({queryKey:a})}}),p=Be({mutationFn:({paymentId:f,data:v})=>uh.updateStatus(f,v),onSuccess:()=>{n.invalidateQueries({queryKey:a})}});return{paymentsData:r,isLoading:o,error:d,refundPayment:h,voidPayment:g,updatePaymentStatus:p}},DR=({value:e="",onChange:n,placeholder:a="اختر الحجز",className:r="",disabled:o=!1,userId:d,status:h,required:g=!1})=>{const[p,f]=b.useState(!1),[v,w]=b.useState(""),[S,T]=b.useState(null),C=b.useRef(null),_={startDate:"2020-01-01",endDate:"2030-12-31",pageNumber:1,pageSize:50,userId:d||void 0,status:h||void 0,searchTerm:v||void 0},{bookingsData:k,isLoading:R}=E2(_);b.useEffect(()=>{if(e&&k?.items){const I=k.items.find(Z=>Z.id===e);T(I||null)}else T(null)},[e,k]),b.useEffect(()=>{const I=Z=>{C.current&&!C.current.contains(Z.target)&&f(!1)};return document.addEventListener("mousedown",I),()=>document.removeEventListener("mousedown",I)},[]);const O=I=>{T(I),n(I.id,I),f(!1),w("")},P=()=>{T(null),n(""),w("")},U=I=>({Pending:"معلق",Confirmed:"مؤكد",Cancelled:"ملغي",Completed:"مكتمل",CheckedIn:"تم تسجيل الدخول",CheckedOut:"تم تسجيل الخروج"})[I]||I,A=I=>({Pending:"bg-yellow-100 text-yellow-800",Confirmed:"bg-blue-100 text-blue-800",Cancelled:"bg-red-100 text-red-800",Completed:"bg-green-100 text-green-800",CheckedIn:"bg-purple-100 text-purple-800",CheckedOut:"bg-gray-100 text-gray-800"})[I]||"bg-gray-100 text-gray-800",$=I=>new Date(I).toLocaleDateString("ar-SA",{year:"numeric",month:"short",day:"numeric"}),E=I=>!I||typeof I!="object"?"":`${I.amount} ${I.currency}`;return t.jsxs("div",{className:`relative ${r}`,ref:C,children:[t.jsxs("button",{type:"button",onClick:()=>f(!p),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!S&&g?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:S?t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsxs("span",{className:"font-medium text-gray-900 truncate font-mono",children:["#",S.id.substring(0,8)]}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A(S.status)}`,children:U(S.status)})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:[$(S.checkIn)," - ",$(S.checkOut)]}),t.jsx("p",{className:"text-xs text-gray-400",children:E(S.totalPrice)})]})]}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[S&&!o&&t.jsx("button",{type:"button",onClick:I=>{I.stopPropagation(),P()},className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:p?"▲":"▼"})]})]}),p&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:v,onChange:I=>w(I.target.value),placeholder:"البحث في الحجوزات...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:R?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):k?.items&&k.items.length>0?k.items.map(I=>t.jsxs("button",{type:"button",onClick:()=>O(I),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsxs("span",{className:"font-medium text-gray-900 truncate font-mono",children:["#",I.id.substring(0,8)]}),t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${A(I.status)}`,children:U(I.status)})]}),t.jsx("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["📅 ",$(I.checkIn)," - ",$(I.checkOut)]})}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-xs text-gray-400 truncate",children:["👤 ",I.userName||"عميل"]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["🏠 ",I.unitName]})]})]}),t.jsxs("div",{className:"flex-shrink-0 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:E(I.totalPrice)}),t.jsx("p",{className:"text-xs text-gray-500",children:"المجموع"})]})]},I.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:v?`لا توجد نتائج للبحث "${v}"`:"لا توجد حجوزات"})}),k?.items&&k.items.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[k.items.length," من ",k.totalCount||0," حجز"]})]})]})},cc=({value:e="",onChange:n,placeholder:a="اختر الكيان",className:r="",disabled:o=!1,ownerId:d,status:h,showImage:g=!0,required:p=!1})=>{const[f,v]=b.useState(!1),[w,S]=b.useState(""),[T,C]=b.useState(null),_=b.useRef(null),k={pageNumber:1,pageSize:50,nameContains:w||void 0,ownerId:d||void 0,status:h||void 0},{propertiesData:R,isLoading:O}=Sc(k);b.useEffect(()=>{if(e&&R?.items){const A=R.items.find($=>$.id===e);C(A||null)}else C(null)},[e,R]),b.useEffect(()=>{const A=$=>{_.current&&!_.current.contains($.target)&&v(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[]);const P=A=>{C(A),n(A.id,A),v(!1),S("")},U=()=>{C(null),n(""),S("")};return t.jsxs("div",{className:`relative ${r}`,ref:_,children:[t.jsxs("button",{type:"button",onClick:()=>v(!f),disabled:o,className:`
          w-full flex items-center justify-between px-3 py-2 border rounded-md shadow-sm
          bg-white text-right focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500
          ${o?"bg-gray-50 text-gray-400 cursor-not-allowed":"hover:border-gray-400"}
          ${!T&&p?"border-red-300":"border-gray-300"}
        `,children:[t.jsx("div",{className:"flex items-center space-x-3 space-x-reverse flex-1 min-w-0",children:T?t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:T.name}),t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:T.isApproved?"معتمد":"غير معتمد"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("p",{className:"text-sm text-gray-500 truncate",children:T.city}),t.jsxs("p",{className:"text-xs text-gray-400",children:["تقييم: ",T.starRating,"/5"]})]})]})}):t.jsx("span",{className:"text-gray-500",children:a})}),t.jsxs("div",{className:"flex items-center space-x-1 space-x-reverse",children:[T&&!o&&t.jsx("button",{type:"button",onClick:A=>{A.stopPropagation(),U()},className:"p-1 hover:bg-gray-100 rounded",children:t.jsx("span",{className:"text-gray-400 hover:text-gray-600",children:"×"})}),t.jsx("span",{className:"text-gray-400",children:f?"▲":"▼"})]})]}),f&&t.jsxs("div",{className:"absolute z-50 w-full mt-1 bg-white border border-gray-300 rounded-md shadow-lg",children:[t.jsx("div",{className:"p-3 border-b border-gray-200",children:t.jsx("input",{type:"text",value:w,onChange:A=>S(A.target.value),placeholder:"البحث في الكيانات...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-1 focus:ring-blue-500",autoFocus:!0})}),t.jsx("div",{className:"max-h-60 overflow-y-auto",children:O?t.jsxs("div",{className:"p-4 text-center text-gray-500",children:[t.jsx("div",{className:"animate-spin inline-block w-6 h-6 border-2 border-gray-300 border-t-blue-600 rounded-full"}),t.jsx("p",{className:"mt-2",children:"جارٍ التحميل..."})]}):R?.items&&R.items.length>0?R.items.map(A=>t.jsxs("button",{type:"button",onClick:()=>P(A),className:"w-full flex items-center px-3 py-3 hover:bg-gray-50 text-right border-b border-gray-100 last:border-b-0",children:[t.jsxs("div",{className:"flex-1 min-w-0",children:[t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"font-medium text-gray-900 truncate",children:A.name}),t.jsx("span",{className:"inline-flex px-2 py-1 text-xs font-medium rounded-full bg-green-100 text-green-800",children:A.isApproved?"معتمد":"غير معتمد"})]}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse mt-1",children:[t.jsxs("p",{className:"text-sm text-gray-500 truncate",children:["📍 ",A.city]}),t.jsxs("p",{className:"text-xs text-gray-400",children:["⭐ ",A.starRating,"/5"]})]}),A.description&&t.jsx("p",{className:"text-xs text-gray-400 truncate mt-1",children:A.description})]}),t.jsxs("div",{className:"flex-shrink-0 text-left",children:[t.jsx("p",{className:"text-sm font-medium text-gray-900",children:A.typeName}),t.jsx("p",{className:"text-xs text-gray-500",children:"نوع الكيان"})]})]},A.id)):t.jsx("div",{className:"p-4 text-center text-gray-500",children:w?`لا توجد نتائج للبحث "${w}"`:"لا توجد كيانات"})}),R?.items&&R.items.length>0&&t.jsxs("div",{className:"p-2 bg-gray-50 border-t border-gray-200 text-xs text-gray-500 text-center",children:[R.items.length," من ",R.totalCount||0," كيان"]})]})]})},Wl=()=>{const{showSuccess:e,showError:n}=j2(),[a,r]=b.useState({}),[o,d]=b.useState(null),h=b.useCallback((S,T)=>{r(C=>({...C,[S]:T}))},[]),g=b.useCallback(S=>{d({isOpen:!0,title:S.title,message:S.message,type:S.type||"info",onConfirm:S.onConfirm})},[]),p=b.useCallback(()=>{d(null)},[]),f=b.useCallback(async(S,T={})=>{const{loadingKey:C="default",successMessage:_,errorMessage:k,onSuccess:R,onError:O}=T;try{h(C,!0);const P=await S();return _&&e(_),R&&R(P),P}catch(P){return n(k||"حدث خطأ غير متوقع"),O&&O(P),console.error("Operation failed:",P),null}finally{h(C,!1)}},[h,e,n]),v=b.useCallback(async(S,T="تم النسخ بنجاح")=>{try{await navigator.clipboard.writeText(S),e(T)}catch(C){n("فشل في نسخ النص"),console.error("Failed to copy text:",C)}},[e,n]),w=b.useCallback((S,T)=>{const[C,_]=b.useState(S),[k,R]=b.useState(S);return{value:C,debouncedValue:k,setValue:O=>{_(O)}}},[]);return{loading:a,setLoading:h,confirmDialog:o,showConfirmDialog:g,hideConfirmDialog:p,executeWithFeedback:f,copyToClipboard:v,createDebouncedState:w}},OR=()=>{const{loading:e,executeWithFeedback:n,showConfirmDialog:a,confirmDialog:r,hideConfirmDialog:o,copyToClipboard:d}=Wl(),{currencies:h,loading:g}=Cc(),p=g?[]:h.map(Ee=>Ee.code),[f,v]=b.useState(""),[w,S]=b.useState(!1),[T,C]=b.useState(1),[_,k]=b.useState(20),[R,O]=b.useState({status:void 0,method:void 0,bookingId:void 0,userId:void 0,propertyId:void 0,unitId:void 0,minAmount:void 0,maxAmount:void 0,startDate:void 0,endDate:void 0}),[P,U]=b.useState(!1),[A,$]=b.useState(!1),[E,I]=b.useState(!1),[Z,F]=b.useState(!1),[Y,G]=b.useState(null),[V,H]=b.useState([]),[Q,K]=b.useState({paymentId:"",refundAmount:{amount:0,currency:"YER",formattedAmount:""},refundReason:""}),[oe,W]=b.useState({paymentId:"",newStatus:"Pending"}),X={status:R.status,method:R.method,bookingId:R.bookingId,userId:R.userId,propertyId:R.propertyId,unitId:R.unitId,minAmount:R.minAmount?parseFloat(R.minAmount):void 0,maxAmount:R.maxAmount?parseFloat(R.maxAmount):void 0,startDate:R.startDate||void 0,endDate:R.endDate||void 0,pageNumber:T,pageSize:_},{paymentsData:z,isLoading:J,error:se,refundPayment:ae,voidPayment:ee,updatePaymentStatus:re}=AR(X),ye=(z?.items??[])?.filter(Ee=>{if(R.bookingId&&!Ee.bookingId.includes(R.bookingId)||R.minAmount&&Ee.amount.amount<parseFloat(R.minAmount)||R.maxAmount&&Ee.amount.amount>parseFloat(R.maxAmount))return!1;if(f){const Pe=f.toLowerCase(),qe=Ee.transactionId.toLowerCase().includes(Pe),De=Ee.amount.amount.toString().includes(f)||Ee.amount.formattedAmount.toLowerCase().includes(Pe);if(!qe&&!De)return!1}return!0})||[],Ce=Ee=>{G(Ee),U(!0)},de=Ee=>{G(Ee),K({paymentId:Ee.id,refundAmount:{...Ee.amount},refundReason:""}),$(!0)},te=Ee=>{a({title:"إبطال الدفعة",message:`هل أنت متأكد من إبطال الدفعة ${Ee.transactionId} بمبلغ ${Ee.amount.amount} ${Ee.amount.currency}؟ هذا الإجراء لا يمكن التراجع عنه.`,type:"danger",onConfirm:()=>{n(()=>ee.mutateAsync({paymentId:Ee.id}),{loadingKey:"voidPayment",successMessage:"تم إبطال الدفعة بنجاح",errorMessage:"فشل في إبطال الدفعة"})}})},_e=Ee=>{G(Ee),W({paymentId:Ee.id,newStatus:Ee.status}),F(!0)},Ie=(Ee,Pe)=>{O(qe=>({...qe,[Ee]:Pe})),C(1)},at=()=>{O({status:void 0,method:void 0,bookingId:void 0,userId:void 0,propertyId:void 0,unitId:void 0,minAmount:void 0,maxAmount:void 0,startDate:void 0,endDate:void 0}),v(""),C(1)},Je=Ee=>({Successful:"bg-green-100 text-green-800",Failed:"bg-red-100 text-red-800",Pending:"bg-yellow-100 text-yellow-800",Refunded:"bg-blue-100 text-blue-800",Voided:"bg-gray-100 text-gray-800",PartiallyRefunded:"bg-purple-100 text-purple-800"})[Ee]||"bg-gray-100 text-gray-800",it=Ee=>({Successful:"ناجح",Failed:"فاشل",Pending:"معلق",Refunded:"مسترد",Voided:"ملغي",PartiallyRefunded:"مسترد جزئياً"})[Ee]||Ee,Te=Ee=>({0:"بطاقة ائتمان",1:"PayPal",2:"تحويل بنكي",3:"نقداً",4:"أخرى"})[Ee]||"غير محدد",Fe={total:ye.length,successful:ye.filter(Ee=>Ee.status==="Successful").length,pending:ye.filter(Ee=>Ee.status==="Pending").length,failed:ye.filter(Ee=>Ee.status==="Failed").length,refunded:ye.filter(Ee=>Ee.status==="Refunded"||Ee.status==="PartiallyRefunded").length,totalAmount:ye.filter(Ee=>Ee.status==="Successful").reduce((Ee,Pe)=>Ee+Pe.amount.amount,0)},wt=[{key:"status",label:"حالة الدفع",type:"select",options:[{value:"Successful",label:"ناجح"},{value:"Failed",label:"فاشل"},{value:"Pending",label:"معلق"},{value:"Refunded",label:"مسترد"},{value:"Voided",label:"ملغي"},{value:"PartiallyRefunded",label:"مسترد جزئياً"}]},{key:"method",label:"طريقة الدفع",type:"select",options:[{value:"CreditCard",label:"بطاقة ائتمان"},{value:"PayPal",label:"PayPal"},{value:"BankTransfer",label:"تحويل بنكي"},{value:"Cash",label:"نقداً"},{value:"Other",label:"أخرى"}]},{key:"propertyId",label:"الكيان",type:"custom",render:(Ee,Pe)=>t.jsx(cc,{value:Ee,onChange:qe=>Pe(qe),placeholder:"اختر الكيان",className:"w-full"})},{key:"unitId",label:"الوحدة",type:"custom",render:(Ee,Pe)=>t.jsx(L0,{value:Ee,onChange:qe=>Pe(qe),propertyId:R.propertyId,className:"w-full",disabled:!R.propertyId})},{key:"bookingId",label:"الحجز",type:"custom",render:(Ee,Pe)=>t.jsx(DR,{value:Ee,onChange:qe=>Pe(qe),placeholder:"اختر الحجز",className:"w-full"})},{key:"userId",label:"المستخدم",type:"custom",render:(Ee,Pe)=>t.jsx(Vl,{value:Ee,onChange:qe=>Pe(qe),placeholder:"اختر المستخدم",allowedRoles:["Customer"],className:"w-full"})},{key:"minAmount",label:"الحد الأدنى للمبلغ",type:"number",placeholder:"أدخل الحد الأدنى"},{key:"maxAmount",label:"الحد الأقصى للمبلغ",type:"number",placeholder:"أدخل الحد الأقصى"},{key:"startDate",label:"تاريخ البداية",type:"date"},{key:"endDate",label:"تاريخ النهاية",type:"date"}],Nt=[{key:"id",title:"معرف الدفعة",sortable:!0,render:Ee=>t.jsx(Oh,{content:`انقر للنسخ: ${Ee}`,children:t.jsxs("button",{onClick:()=>d(Ee,"تم نسخ معرف الدفعة"),className:"font-mono text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[Ee.substring(0,8),"..."]})})},{key:"transactionId",title:"رقم المعاملة",sortable:!0,render:Ee=>t.jsx(Oh,{content:`انقر للنسخ: ${Ee}`,children:t.jsx("button",{onClick:()=>d(Ee,"تم نسخ رقم المعاملة"),className:"font-mono text-sm text-gray-900 hover:text-blue-600 transition-colors",children:Ee})})},{key:"bookingId",title:"معرف الحجز",render:Ee=>t.jsxs("span",{className:"font-mono text-sm text-gray-600",children:[Ee.substring(0,8),"..."]})},{key:"amount",title:"المبلغ",render:Ee=>t.jsxs("div",{className:"text-left",children:[t.jsx("span",{className:"font-medium text-lg",children:Ee.amount}),t.jsx("span",{className:"text-sm text-gray-500 mr-1",children:Ee.currency})]})},{key:"method",title:"طريقة الدفع",render:Ee=>t.jsx("span",{className:"text-sm",children:Te(Ee)})},{key:"status",title:"الحالة",render:Ee=>t.jsx(Wr,{status:Ee,variant:"payment"})},{key:"paymentDate",title:"تاريخ الدفع",sortable:!0,render:Ee=>t.jsx("span",{className:"text-sm text-gray-500",children:new Date(Ee).toLocaleDateString("ar-SA")})}],ut=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:Ce},{label:"استرداد",icon:"↩️",color:"orange",onClick:de,show:Ee=>Ee.status==="Successful"},{label:"إبطال",icon:"❌",color:"red",onClick:te,show:Ee=>Ee.status==="Successful"||Ee.status==="Pending"},{label:"تحديث الحالة",icon:"🔄",color:"blue",onClick:_e,show:Ee=>Ee.status==="Pending"}];return se?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Ph,{icon:"⚠️",title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل بيانات المدفوعات. يرجى المحاولة مرة أخرى.",actionLabel:"إعادة المحاولة",onAction:()=>window.location.reload(),size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المدفوعات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراقبة وإدارة المدفوعات، الاستردادات، وإبطال المعاملات المالية"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-6 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"💰"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي المدفوعات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:Fe.total})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"ناجحة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Fe.successful})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:Fe.pending})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"❌"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"فاشلة"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:Fe.failed})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"↩️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مستردة"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:Fe.refunded})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-emerald-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"💵"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي المبلغ"}),t.jsxs("p",{className:"text-lg font-bold text-emerald-600",children:[Fe.totalAmount.toLocaleString()," ر.ي"]})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في المدفوعات (رقم المعاملة)...",searchValue:f,onSearchChange:v,filters:wt,filterValues:R,onFilterChange:Ie,onReset:at,showAdvanced:w,onToggleAdvanced:()=>S(!w)}),!J&&ye.length===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Ph,{icon:"💳",title:"لا توجد مدفوعات",description:"لم يتم العثور على أي مدفوعات تطابق معايير البحث والفلترة الحالية.",actionLabel:"إعادة تعيين الفلاتر",onAction:at})}):t.jsx(ls,{data:ye,columns:Nt,loading:J,pagination:{current:T,total:z?.totalCount||0,pageSize:_,onChange:(Ee,Pe)=>{C(Ee),k(Pe)}},rowSelection:{selectedRowKeys:V,onChange:H},actions:ut,onRowClick:Ce}),t.jsx(Rt,{isOpen:P,onClose:()=>{U(!1),G(null)},title:"تفاصيل الدفعة",size:"lg",children:Y&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الدفعة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:Y.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"رقم المعاملة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:Y.transactionId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:Y.bookingId})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المبلغ"}),t.jsxs("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:[Y.amount.amount," ",Y.amount.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"طريقة الدفع"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:Te(Y.method)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"حالة الدفع"}),t.jsx("span",{className:`mt-1 inline-flex px-2 py-1 text-xs font-medium rounded-full ${Je(Y.status)}`,children:it(Y.status)})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ الدفع"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(Y.paymentDate).toLocaleString("ar-SA")})]})]})})}),t.jsx(Rt,{isOpen:A,onClose:()=>{$(!1),G(null)},title:"استرداد الدفعة",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{$(!1),G(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>ae.mutate(Q),disabled:ae.status==="pending"||!Q.refundReason.trim(),className:"px-4 py-2 bg-orange-600 text-white rounded-md hover:bg-orange-700 disabled:opacity-50",children:e.refundPayment?"جارٍ الاسترداد...":"استرداد"})]}),children:Y&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-orange-50 border border-orange-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-orange-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-orange-800",children:"تأكيد استرداد الدفعة"}),t.jsxs("p",{className:"mt-2 text-sm text-orange-700",children:["سيتم استرداد ",t.jsxs("strong",{children:[Q.refundAmount.amount," ",Q.refundAmount.currency]})," من المعاملة ",t.jsx("strong",{children:Y.transactionId}),"."]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"مبلغ الاسترداد"}),t.jsx(Zl,{value:Q.refundAmount.amount,currency:Q.refundAmount.currency,onValueChange:(Ee,Pe)=>K(qe=>({...qe,refundAmount:{...qe.refundAmount,amount:Ee,currency:Pe}})),direction:"rtl",placeholder:"0.00",required:!0,min:0,max:Y?.amount.amount,showSymbol:!0,supportedCurrencies:p,disabled:!1}),Y&&t.jsxs("p",{className:"mt-1 text-xs text-gray-500",children:["الحد الأقصى للاسترداد: ",Y.amount.amount," ",Y.amount.currency]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"سبب الاسترداد *"}),t.jsx("textarea",{rows:3,value:Q.refundReason,onChange:Ee=>K(Pe=>({...Pe,refundReason:Ee.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل سبب الاسترداد..."})]})]})}),t.jsx(Rt,{isOpen:E,onClose:()=>{I(!1),G(null)},title:"إبطال الدفعة",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{I(!1),G(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>ee.mutate({paymentId:Y.id}),disabled:ee.status==="pending",className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:ee.status==="pending"?"جارٍ الإبطال...":"إبطال الدفعة"})]}),children:Y&&t.jsx("div",{className:"space-y-4",children:t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-red-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"تأكيد إبطال الدفعة"}),t.jsxs("p",{className:"mt-2 text-sm text-red-700",children:["هل أنت متأكد من إبطال الدفعة ",t.jsx("strong",{children:Y.transactionId})," بمبلغ ",t.jsxs("strong",{children:[Y.amount.amount," ",Y.amount.currency]}),"؟ هذا الإجراء لا يمكن التراجع عنه."]})]})]})})})}),t.jsx(Rt,{isOpen:Z,onClose:()=>{F(!1),G(null)},title:"تحديث حالة الدفعة",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{F(!1),G(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>re.mutate({paymentId:oe.paymentId,data:oe}),disabled:re.status==="pending",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:re.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:Y&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"تحديث حالة الدفعة"}),t.jsxs("p",{className:"mt-2 text-sm text-blue-700",children:["المعاملة: ",t.jsx("strong",{children:Y.transactionId}),t.jsx("br",{}),"الحالة الحالية: ",t.jsx("strong",{children:it(Y.status)})]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الحالة الجديدة"}),t.jsxs("select",{value:oe.newStatus,onChange:Ee=>W(Pe=>({...Pe,newStatus:Ee.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"Successful",children:"ناجح"}),t.jsx("option",{value:"Failed",children:"فاشل"}),t.jsx("option",{value:"Pending",children:"معلق"}),t.jsx("option",{value:"Refunded",children:"مسترد"}),t.jsx("option",{value:"Voided",children:"ملغي"}),t.jsx("option",{value:"PartiallyRefunded",children:"مسترد جزئياً"})]})]})]})}),r&&t.jsx(w2,{isOpen:r.isOpen,onClose:o,onConfirm:()=>{r.onConfirm(),o()},title:r.title,message:r.message,type:r.type,loading:e.voidPayment})]})},Id="/api/admin/amenities",Bd={createAmenity:e=>we.post(`${Id}`,e),updateAmenity:(e,n)=>we.put(`${Id}/${e}`,n),deleteAmenity:e=>we.delete(`${Id}/${e}`),getAllAmenities:e=>we.get(`${Id}`,{params:e}),assignAmenityToProperty:(e,n,a)=>we.post(`${Id}/${e}/assign/property/${n}`,a)},PR=e=>{const n=Bn(),a=["admin-amenities",e],{data:r,isLoading:o,error:d}=It({queryKey:a,queryFn:()=>Bd.getAllAmenities(e).then(v=>v.data)}),h=Be({mutationFn:v=>Bd.createAmenity(v).then(w=>w.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}}),g=Be({mutationFn:({amenityId:v,data:w})=>Bd.updateAmenity(v,w).then(S=>S.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}}),p=Be({mutationFn:v=>Bd.deleteAmenity(v).then(w=>w.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}}),f=Be({mutationFn:({amenityId:v,propertyId:w,data:S})=>Bd.assignAmenityToProperty(v,w,S).then(T=>T.data),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-amenities"]})}});return{amenitiesData:r,isLoading:o,error:d,createAmenity:h,updateAmenity:g,deleteAmenity:p,assignAmenityToProperty:f}},Vd=[{name:"wifi",label:"واي فاي",icon:"📶",category:"أساسيات"},{name:"network_wifi",label:"شبكة واي فاي",icon:"📡",category:"أساسيات"},{name:"signal_wifi_4_bar",label:"واي فاي قوي",icon:"📶",category:"أساسيات"},{name:"router",label:"راوتر",icon:"🔌",category:"أساسيات"},{name:"ac_unit",label:"تكييف",icon:"❄️",category:"أساسيات"},{name:"thermostat",label:"ثرموستات",icon:"🌡️",category:"أساسيات"},{name:"air",label:"تهوية",icon:"💨",category:"أساسيات"},{name:"water_drop",label:"ماء",icon:"💧",category:"أساسيات"},{name:"electric_bolt",label:"كهرباء",icon:"⚡",category:"أساسيات"},{name:"gas_meter",label:"غاز",icon:"🔥",category:"أساسيات"},{name:"heating",label:"تدفئة",icon:"🔥",category:"أساسيات"},{name:"light",label:"إضاءة",icon:"💡",category:"أساسيات"},{name:"kitchen",label:"مطبخ",icon:"🍳",category:"مطبخ"},{name:"microwave",label:"مايكروويف",icon:"📦",category:"مطبخ"},{name:"coffee_maker",label:"صانع القهوة",icon:"☕",category:"مطبخ"},{name:"blender",label:"خلاط",icon:"🥤",category:"مطبخ"},{name:"dining_room",label:"غرفة طعام",icon:"🍽️",category:"مطبخ"},{name:"restaurant",label:"مطعم",icon:"🍴",category:"مطبخ"},{name:"local_cafe",label:"مقهى",icon:"☕",category:"مطبخ"},{name:"local_bar",label:"بار",icon:"🍺",category:"مطبخ"},{name:"breakfast_dining",label:"إفطار",icon:"🍳",category:"مطبخ"},{name:"lunch_dining",label:"غداء",icon:"🍽️",category:"مطبخ"},{name:"dinner_dining",label:"عشاء",icon:"🍽️",category:"مطبخ"},{name:"outdoor_grill",label:"شواية خارجية",icon:"🍖",category:"مطبخ"},{name:"countertops",label:"أسطح عمل",icon:"🔲",category:"مطبخ"},{name:"kitchen_appliances",label:"أجهزة مطبخ",icon:"🍳",category:"مطبخ"},{name:"tv",label:"تلفزيون",icon:"📺",category:"أجهزة"},{name:"desktop_windows",label:"كمبيوتر",icon:"💻",category:"أجهزة"},{name:"laptop",label:"لابتوب",icon:"💻",category:"أجهزة"},{name:"phone_android",label:"هاتف",icon:"📱",category:"أجهزة"},{name:"tablet",label:"تابلت",icon:"📱",category:"أجهزة"},{name:"speaker",label:"سماعات",icon:"🔊",category:"أجهزة"},{name:"radio",label:"راديو",icon:"📻",category:"أجهزة"},{name:"videogame_asset",label:"ألعاب فيديو",icon:"🎮",category:"أجهزة"},{name:"local_laundry_service",label:"غسالة",icon:"🧺",category:"أجهزة"},{name:"dry_cleaning",label:"تنظيف جاف",icon:"👔",category:"أجهزة"},{name:"iron",label:"مكواة",icon:"👔",category:"أجهزة"},{name:"dishwasher",label:"غسالة صحون",icon:"🍽️",category:"أجهزة"},{name:"bathroom",label:"حمام",icon:"🚿",category:"حمام"},{name:"bathtub",label:"حوض استحمام",icon:"🛁",category:"حمام"},{name:"shower",label:"دش",icon:"🚿",category:"حمام"},{name:"soap",label:"صابون",icon:"🧼",category:"حمام"},{name:"dry",label:"مجفف",icon:"💨",category:"حمام"},{name:"wash",label:"غسيل",icon:"🧴",category:"حمام"},{name:"bed",label:"سرير",icon:"🛏️",category:"نوم"},{name:"king_bed",label:"سرير كبير",icon:"🛏️",category:"نوم"},{name:"single_bed",label:"سرير مفرد",icon:"🛏️",category:"نوم"},{name:"bedroom_parent",label:"غرفة نوم رئيسية",icon:"🛏️",category:"نوم"},{name:"bedroom_child",label:"غرفة أطفال",icon:"🛏️",category:"نوم"},{name:"crib",label:"سرير أطفال",icon:"👶",category:"نوم"},{name:"chair",label:"كرسي",icon:"🪑",category:"نوم"},{name:"chair_alt",label:"كرسي مريح",icon:"🪑",category:"نوم"},{name:"weekend",label:"أريكة",icon:"🛋️",category:"نوم"},{name:"living",label:"غرفة معيشة",icon:"🛋️",category:"نوم"},{name:"pool",label:"مسبح",icon:"🏊",category:"رياضة"},{name:"hot_tub",label:"جاكوزي",icon:"♨️",category:"رياضة"},{name:"fitness_center",label:"صالة رياضية",icon:"💪",category:"رياضة"},{name:"sports_tennis",label:"ملعب تنس",icon:"🎾",category:"رياضة"},{name:"sports_soccer",label:"ملعب كرة قدم",icon:"⚽",category:"رياضة"},{name:"sports_basketball",label:"ملعب كرة سلة",icon:"🏀",category:"رياضة"},{name:"sports_volleyball",label:"كرة طائرة",icon:"🏐",category:"رياضة"},{name:"sports_golf",label:"جولف",icon:"⛳",category:"رياضة"},{name:"sports_handball",label:"كرة يد",icon:"🤾",category:"رياضة"},{name:"sports_cricket",label:"كريكيت",icon:"🏏",category:"رياضة"},{name:"sports_baseball",label:"بيسبول",icon:"⚾",category:"رياضة"},{name:"sports_esports",label:"ألعاب إلكترونية",icon:"🎮",category:"رياضة"},{name:"spa",label:"سبا",icon:"💆",category:"رياضة"},{name:"sauna",label:"ساونا",icon:"🧖",category:"رياضة"},{name:"self_improvement",label:"يوغا",icon:"🧘",category:"رياضة"},{name:"local_parking",label:"موقف سيارات",icon:"🅿️",category:"مواصلات"},{name:"garage",label:"كراج",icon:"🚗",category:"مواصلات"},{name:"ev_station",label:"شحن سيارات كهربائية",icon:"🔌",category:"مواصلات"},{name:"local_gas_station",label:"محطة وقود",icon:"⛽",category:"مواصلات"},{name:"car_rental",label:"تأجير سيارات",icon:"🚙",category:"مواصلات"},{name:"car_repair",label:"صيانة سيارات",icon:"🔧",category:"مواصلات"},{name:"directions_car",label:"سيارة",icon:"🚗",category:"مواصلات"},{name:"directions_bus",label:"حافلة",icon:"🚌",category:"مواصلات"},{name:"directions_bike",label:"دراجة",icon:"🚴",category:"مواصلات"},{name:"electric_bike",label:"دراجة كهربائية",icon:"🚴",category:"مواصلات"},{name:"electric_scooter",label:"سكوتر كهربائي",icon:"🛴",category:"مواصلات"},{name:"moped",label:"دراجة نارية",icon:"🏍️",category:"مواصلات"},{name:"elevator",label:"مصعد",icon:"🛗",category:"وصول"},{name:"stairs",label:"درج",icon:"📶",category:"وصول"},{name:"escalator",label:"سلم متحرك",icon:"🔼",category:"وصول"},{name:"escalator_warning",label:"تحذير سلم متحرك",icon:"⚠️",category:"وصول"},{name:"accessible",label:"ممر لذوي الاحتياجات",icon:"♿",category:"وصول"},{name:"wheelchair_pickup",label:"كرسي متحرك",icon:"♿",category:"وصول"},{name:"elderly",label:"كبار السن",icon:"👴",category:"وصول"},{name:"security",label:"أمن",icon:"🔒",category:"أمان"},{name:"lock",label:"قفل",icon:"🔒",category:"أمان"},{name:"key",label:"مفتاح",icon:"🔑",category:"أمان"},{name:"vpn_key",label:"مفتاح رقمي",icon:"🔐",category:"أمان"},{name:"shield",label:"درع",icon:"🛡️",category:"أمان"},{name:"admin_panel_settings",label:"لوحة تحكم",icon:"⚙️",category:"أمان"},{name:"verified_user",label:"مستخدم موثق",icon:"✅",category:"أمان"},{name:"safety_check",label:"فحص أمان",icon:"✅",category:"أمان"},{name:"health_and_safety",label:"صحة وأمان",icon:"🏥",category:"أمان"},{name:"local_police",label:"شرطة",icon:"👮",category:"أمان"},{name:"local_fire_department",label:"إطفاء",icon:"🚒",category:"أمان"},{name:"medical_services",label:"خدمات طبية",icon:"🏥",category:"أمان"},{name:"emergency",label:"طوارئ",icon:"🚨",category:"أمان"},{name:"camera_alt",label:"كاميرا",icon:"📷",category:"أمان"},{name:"videocam",label:"كاميرا فيديو",icon:"📹",category:"أمان"},{name:"sensor_door",label:"حساس باب",icon:"🚪",category:"أمان"},{name:"sensor_window",label:"حساس نافذة",icon:"🪟",category:"أمان"},{name:"doorbell",label:"جرس الباب",icon:"🔔",category:"أمان"},{name:"smoke_detector",label:"كاشف دخان",icon:"🚨",category:"أمان"},{name:"fire_extinguisher",label:"طفاية حريق",icon:"🧯",category:"أمان"},{name:"cleaning_services",label:"خدمة تنظيف",icon:"🧹",category:"خدمات"},{name:"room_service",label:"خدمة الغرف",icon:"🛎️",category:"خدمات"},{name:"concierge",label:"كونسيرج",icon:"🧑‍💼",category:"خدمات"},{name:"luggage",label:"أمتعة",icon:"🧳",category:"خدمات"},{name:"shopping_cart",label:"عربة تسوق",icon:"🛒",category:"خدمات"},{name:"local_grocery_store",label:"بقالة",icon:"🛒",category:"خدمات"},{name:"local_mall",label:"مول",icon:"🛍️",category:"خدمات"},{name:"local_pharmacy",label:"صيدلية",icon:"💊",category:"خدمات"},{name:"local_hospital",label:"مستشفى",icon:"🏥",category:"خدمات"},{name:"local_atm",label:"صراف آلي",icon:"💳",category:"خدمات"},{name:"local_library",label:"مكتبة",icon:"📚",category:"خدمات"},{name:"local_post_office",label:"بريد",icon:"📮",category:"خدمات"},{name:"print",label:"طباعة",icon:"🖨️",category:"خدمات"},{name:"mail",label:"بريد",icon:"📧",category:"خدمات"},{name:"balcony",label:"شرفة",icon:"🌅",category:"خارجي"},{name:"deck",label:"سطح",icon:"☀️",category:"خارجي"},{name:"yard",label:"فناء",icon:"🏡",category:"خارجي"},{name:"grass",label:"حديقة",icon:"🌿",category:"خارجي"},{name:"park",label:"منتزه",icon:"🌳",category:"خارجي"},{name:"forest",label:"غابة",icon:"🌲",category:"خارجي"},{name:"beach_access",label:"شاطئ",icon:"🏖️",category:"خارجي"},{name:"water",label:"مياه",icon:"💧",category:"خارجي"},{name:"fence",label:"سياج",icon:"🚧",category:"خارجي"},{name:"roofing",label:"سقف",icon:"🏗️",category:"خارجي"},{name:"child_care",label:"رعاية أطفال",icon:"👶",category:"أطفال"},{name:"child_friendly",label:"صديق للأطفال",icon:"👨‍👩‍👧‍👦",category:"أطفال"},{name:"baby_changing_station",label:"غرفة تغيير حفاضات",icon:"👶",category:"أطفال"},{name:"toys",label:"ألعاب",icon:"🧸",category:"أطفال"},{name:"stroller",label:"عربة أطفال",icon:"👶",category:"أطفال"},{name:"pets",label:"حيوانات أليفة",icon:"🐾",category:"حيوانات"},{name:"pet_supplies",label:"مستلزمات حيوانات",icon:"🐕",category:"حيوانات"},{name:"desk",label:"مكتب",icon:"🪑",category:"عمل"},{name:"meeting_room",label:"قاعة اجتماعات",icon:"👥",category:"عمل"},{name:"business_center",label:"مركز أعمال",icon:"💼",category:"عمل"},{name:"computer",label:"كمبيوتر",icon:"💻",category:"عمل"},{name:"scanner",label:"ماسح ضوئي",icon:"📄",category:"عمل"},{name:"fax",label:"فاكس",icon:"📠",category:"عمل"},{name:"mosque",label:"مسجد",icon:"🕌",category:"ديني"},{name:"church",label:"كنيسة",icon:"⛪",category:"ديني"},{name:"synagogue",label:"كنيس",icon:"🕍",category:"ديني"},{name:"temple_hindu",label:"معبد هندوسي",icon:"🛕",category:"ديني"},{name:"temple_buddhist",label:"معبد بوذي",icon:"🏛️",category:"ديني"}],LR=({selectedIcon:e,onSelectIcon:n,onClose:a})=>{const[r,o]=b.useState(""),[d,h]=b.useState("الكل"),g=["الكل",...new Set(Vd.map(f=>f.category))],p=Vd.filter(f=>{const v=f.label.toLowerCase().includes(r.toLowerCase())||f.name.toLowerCase().includes(r.toLowerCase()),w=d==="الكل"||f.category===d;return v&&w});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"اختر أيقونة للمرفق"}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-xl",children:"✕"})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsx("input",{type:"text",placeholder:"ابحث عن أيقونة...",value:r,onChange:f=>o(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>t.jsx("button",{onClick:()=>h(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${d===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsx("div",{className:"grid grid-cols-8 gap-2",children:p.map(f=>t.jsx("button",{onClick:()=>n(f.name),className:`p-3 rounded-lg border-2 transition-all hover:scale-105 ${e===f.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:`${f.label} (${f.name})`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl mb-1",children:f.icon}),t.jsx("span",{className:"text-xs text-gray-600",children:f.label}),t.jsx("code",{className:"text-xs text-gray-400 mt-1",children:f.name})]})},f.name))}),p.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أيقونات مطابقة للبحث"})})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"ملاحظة:"})," هذه الأيقونات متوافقة مع Material Icons في Flutter. استخدم اسم الأيقونة (مثل: Icons.",e||"wifi",") في تطبيق Flutter."]})})]})})},zR=()=>{const{currencies:e,loading:n}=Cc(),a=n?[]:e.map(Pe=>Pe.code),[r,o]=b.useState(""),[d,h]=b.useState(!1),[g,p]=b.useState(1),[f,v]=b.useState(20),[w,S]=b.useState({isAssigned:void 0,propertyId:void 0,isFree:void 0}),T={pageNumber:g,pageSize:f,searchTerm:r||void 0,propertyId:w.propertyId||void 0,isAssigned:w.isAssigned,isFree:w.isFree},{amenitiesData:C,isLoading:_,error:k,createAmenity:R,updateAmenity:O,deleteAmenity:P,assignAmenityToProperty:U}=PR(T),{propertiesData:A}=Sc({}),[$,E]=b.useState(!1),[I,Z]=b.useState(!1),[F,Y]=b.useState(!1),[G,V]=b.useState(!1),[H,Q]=b.useState(!1),[K,oe]=b.useState(null),[W,X]=b.useState(null),[z,J]=b.useState([]),[se,ae]=b.useState({name:"",description:"",icon:"wifi"}),[ee,re]=b.useState({amenityId:"",name:"",description:"",icon:"wifi"}),[me,ye]=b.useState({propertyId:"",extraCost:{amount:0,currency:"YER",formattedAmount:""},isAvailable:!0,description:"",icon:""}),Ce=()=>{ae({name:"",description:"",icon:"wifi"})},de=Pe=>{const qe=Vd.find(De=>De.name===Pe);return qe?qe.icon:"🏠"},te=(Pe,qe)=>{if(qe)return de(qe);const De=Pe.toLowerCase(),He=Vd.find(ct=>De.includes(ct.label.toLowerCase())||De.includes(ct.name.toLowerCase()));return He?He.icon:"🏠"},_e=Pe=>{X(Pe),Y(!0)},Ie=Pe=>{X(Pe),re({amenityId:Pe.id,name:Pe.name,description:Pe.description,icon:Pe.icon||"wifi"}),Z(!0)},at=Pe=>{confirm(`هل أنت متأكد من حذف المرفق "${Pe.name}"؟ هذا الإجراء لا يمكن التراجع عنه.`)&&P.mutate(Pe.id,{onSuccess:()=>{Z(!1),X(null)}})},Je=Pe=>{X(Pe),V(!0)},it=(Pe,qe)=>{S(De=>({...De,[Pe]:qe})),p(1)},Te=()=>{S({isAssigned:void 0,propertyId:void 0,isFree:void 0}),o(""),p(1)},Fe=Pe=>{K==="create"?ae({...se,icon:Pe}):K==="edit"&&re({...ee,icon:Pe}),Q(!1),oe(null)},wt={total:C?.items?.length||0,totalCount:C?.totalCount||0},Nt=[{key:"propertyId",label:"الكيان",type:"custom",render:(Pe,qe)=>t.jsx(cc,{value:Pe,onChange:De=>qe(De),placeholder:"اختر الكيان",className:"w-full"})},{key:"isAssigned",label:"مربوط بكيانات",type:"boolean"},{key:"isFree",label:"مجاني",type:"boolean"}],ut=[{key:"name",title:"المرفق",sortable:!0,render:(Pe,qe)=>t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-2xl ml-3",children:te(Pe,qe.icon)}),t.jsxs("div",{children:[t.jsx("span",{className:"font-medium text-gray-900",children:Pe}),t.jsx("p",{className:"text-sm text-gray-500 mt-1",children:qe.description}),qe.icon&&t.jsxs("code",{className:"text-xs text-gray-400",children:["Icons.",qe.icon]})]})]})},{key:"id",title:"المعرف",render:Pe=>t.jsxs("span",{className:"font-mono text-sm text-gray-600",children:[Pe.substring(0,8),"..."]})}],Ee=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:_e},{label:"تعديل",icon:"✏️",color:"blue",onClick:Ie},{label:"ربط بكيان",icon:"🔗",color:"green",onClick:Je},{label:"حذف",icon:"🗑️",color:"red",onClick:at}];return k?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات المرافق. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex justify-between items-center",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المرافق"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"إنشاء وتحديث المرافق المتاحة في النظام وربطها بالكيانات المختلفة مع دعم الأيقونات الديناميكية"})]}),t.jsx("button",{onClick:()=>E(!0),className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"➕ إضافة مرفق جديد"})]})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🏠"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي المرافق"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:wt.totalCount})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🔗"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مربوطة بكيانات"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:"-"})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🎨"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"أيقونات متاحة"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:Vd.length})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في المرافق (الاسم أو الوصف)...",searchValue:r,onSearchChange:o,filters:Nt,filterValues:w,onFilterChange:it,onReset:Te,showAdvanced:d,onToggleAdvanced:()=>h(!d)}),t.jsx(ls,{data:C?.items||[],columns:ut,loading:_,pagination:{current:g,total:C?.totalCount||0,pageSize:f,onChange:(Pe,qe)=>{p(Pe),v(qe)}},rowSelection:{selectedRowKeys:z,onChange:J},actions:Ee,onRowClick:_e}),t.jsx(Rt,{isOpen:$,onClose:()=>E(!1),title:"إضافة مرفق جديد",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>E(!1),className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>R.mutate(se,{onSuccess:()=>{E(!1),Ce()}}),disabled:R.status==="pending"||!se.name.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:R.status==="pending"?"جارٍ الإضافة...":"إضافة"})]}),children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المرفق *"}),t.jsx("input",{type:"text",value:se.name,onChange:Pe=>ae(qe=>({...qe,name:Pe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل اسم المرفق"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{oe("create"),Q(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:de(se.icon)}),t.jsx("span",{className:"text-sm",children:se.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",se.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف المرفق *"}),t.jsx("textarea",{rows:3,value:se.description,onChange:Pe=>ae(qe=>({...qe,description:Pe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل وصف تفصيلي للمرفق"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:de(se.icon)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",se.icon]})]})]})]})]})}),t.jsx(Rt,{isOpen:I,onClose:()=>{Z(!1),X(null)},title:"تعديل بيانات المرفق",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{Z(!1),X(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>O.mutate({amenityId:ee.amenityId,data:ee},{onSuccess:()=>{Z(!1),X(null)}}),disabled:O.status==="pending"||!ee.name?.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50",children:O.status==="pending"?"جارٍ التحديث...":"تحديث"})]}),children:W&&t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المرفق"}),t.jsx("input",{type:"text",value:ee.name||"",onChange:Pe=>re(qe=>({...qe,name:Pe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{oe("edit"),Q(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:de(ee.icon||"wifi")}),t.jsx("span",{className:"text-sm",children:ee.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",ee.icon," في Flutter"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف المرفق"}),t.jsx("textarea",{rows:3,value:ee.description||"",onChange:Pe=>re(qe=>({...qe,description:Pe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:de(ee.icon||"wifi")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",ee.icon]})]})]})]})]})}),t.jsx(Rt,{isOpen:F,onClose:()=>{Y(!1),X(null)},title:"تفاصيل المرفق",size:"lg",children:W&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-6xl",children:te(W.name,W.icon)}),t.jsxs("div",{children:[t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:W.name}),t.jsx("p",{className:"text-gray-600 mt-1",children:W.description})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف المرفق"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:W.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"اسم الأيقونة"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:W.icon?`Icons.${W.icon}`:"غير محدد"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الوصف"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:W.description})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"معلومات إضافية"}),t.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"يمكن ربط هذا المرفق بالكيانات مع تحديد تكلفة إضافية وحالة التوفر لكل كيان. الأيقونة المحددة متوافقة مع Material Icons في Flutter."})]})]})})]})}),t.jsx(Rt,{isOpen:G,onClose:()=>{V(!1),X(null)},title:"ربط المرفق بكيان",size:"lg",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{V(!1),X(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>U.mutate({amenityId:W.id,propertyId:me.propertyId,data:{amenityId:W.id,propertyId:me.propertyId}},{onSuccess:()=>{V(!1),X(null)}}),disabled:U.status==="pending"||!me.propertyId,className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:U.status==="pending"?"جارٍ الربط...":"ربط المرفق"})]}),children:W&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-green-400 text-xl",children:"🔗"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"ربط المرفق بكيان"}),t.jsxs("p",{className:"mt-2 text-sm text-green-700",children:['سيتم ربط المرفق "',t.jsx("strong",{children:W.name}),'" بالكيان المحدد مع إمكانية تحديد تكلفة إضافية.']})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"معرف الكيان *"}),t.jsxs("select",{value:me.propertyId,onChange:Pe=>ye(qe=>({...qe,propertyId:Pe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"اختر كيان"}),A?.items.map(Pe=>t.jsx("option",{value:Pe.id,children:Pe.name},Pe.id))]})]}),t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"التكلفة الإضافية"}),t.jsx(Zl,{value:me.extraCost.amount,currency:me.extraCost.currency,onValueChange:(Pe,qe)=>ye(De=>({...De,extraCost:{amount:Pe,currency:qe,formattedAmount:""}})),placeholder:"0",required:!1,showSymbol:!0,supportedCurrencies:a,direction:"ltr"})]})}),t.jsxs("div",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",id:"isAvailable",checked:me.isAvailable,onChange:Pe=>ye(qe=>({...qe,isAvailable:Pe.target.checked})),className:"h-4 w-4 text-blue-600 focus:ring-blue-500 border-gray-300 rounded"}),t.jsx("label",{htmlFor:"isAvailable",className:"mr-2 block text-sm text-gray-900",children:"متاح في الكيان"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"وصف إضافي"}),t.jsx("textarea",{rows:2,value:me.description,onChange:Pe=>ye(qe=>({...qe,description:Pe.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل وصف إضافي للمرفق في هذا الكيان (اختياري)"})]})]})}),H&&t.jsx(LR,{selectedIcon:K==="create"?se.icon:ee.icon||"wifi",onSelectIcon:Fe,onClose:()=>{Q(!1),oe(null)}})]})};class Qg{static async getAll(n){return(await we.get("/api/admin/reviews",{params:n})).data.data||[]}static async approve(n){return we.post(`/api/admin/reviews/${n}/approve`).then(a=>a.data)}static async deleteReview(n){return we.delete(`/api/admin/reviews/${n}`).then(a=>a.data)}}const IR=e=>{const n=Bn(),{data:a,isLoading:r,error:o}=It({queryKey:["admin-reviews",e],queryFn:()=>Qg.getAll(e)}),d=Be({mutationFn:g=>Qg.approve(g),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reviews",e]})}}),h=Be({mutationFn:g=>Qg.deleteReview(g),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reviews",e]})}});return{reviewsData:a,isLoading:r,error:o,approveReview:d,deleteReview:h}},BR=["كلب","حيوان","حقير","حثالة","زبالة","قذر","وغد","سافل","منحط","تافه","غبي","أحمق","مغفل","معتوه","أبله","متخلف","جاهل","زنديق","كافر","ملحد","فاسق","عاهر","داعرة","شرموطة","قحبة","ابن حرام","ابن كلب","لعين","ملعون","سخيف","وقح","جحش","حمار","ثور","خنزير","قرد","نذل","خسيس","واطي","عرة","زفت","خرا","تبا","اللعنة","جنس","نيك","طيز","كس","زب","بزاز","مؤخرة","لعق","مص","شهوة","مني","بول","براز","شاذ","لوطي","مثلي","سحاقية","ديوث","خول","عرص","متناك","منيوك","ميبون","مخنث","فاجر","زاني","زانية","قاتل","مجرم","إرهابي","داعشي","نصاب","حرامي","سارق","محتال","كذاب","دجال","منافق","خائن","عميل","جاسوس","عنصري","متعصب","كريه","مقرف","نتن","معفن","عفن","جيفة","رمة","مريض","نفسية","مختل","مجنون","مهووس","سفيه","تافه","حثالة المجتمع","عديم الأخلاق","عديم الشرف","عديم الكرامة","بذيء","فاحش","منحل","فاسد","مفسد","شرير","لص","وغد","حثالة","قمامة","قواد","دعارة","بغاء","زنا","لواط","سحاق","اغتصاب","تحرش","شتم","سب","لعن","بصق","حمارة","كلبة","خنزيرة","بقرة","تيس","صايع","ضايع","داشر","هامل","سكير","عربيد","سكران","محشش","مدمن","شمام","صعلوك","متشرد","شحات","طرار","متسول","جزمه","صرماية","كندرة","نعال","شبشب","يا ابن الكلب","يا ابن الشرموطة","يا ابن القحبة","يلعن ابوك","يلعن امك","يلعن دينك","يلعن ربك","يلعن عرضك","يلعن شرفك","كس امك","طيز امك","اخو الشرموطة","اخو القحبة","اخت العاهرة","يا عرص","يا ديوث","يا خول","يا متناك","يا منيوك","يا لوطي","يا شاذ","يا وسخ","يا قذر","يا زبالة","يا حقير","يا نذل","يا واطي","يا خسيس","يا تافه","يا سخيف","يا غبي","يا احمق","يا حمار","يا كلب","يا حيوان","يا خنزير","يا معفن","يا نتن","يا كريه","يا بغيض","يا علة","يا مصيبة","يا بلوة","يا داشر","يا صايع","يا فاشل","يا عاطل","يا باطل","يا حرامي","يا نصاب","يا كذاب","يا دجال","يا منافق","يا خائن","يا عميل","يا جاسوس","يا عنصري","يا متخلف","يا جاهل","يا بدائي","يا همجي","يا بربري","يا متوحش","يا ارهابي","يا مجرم","يا قاتل","يا سفاح","يا جلاد","يا طاغية","يا ظالم","يا مستبد","يا دكتاتور","يا فاسد","يا مفسد","يا شرير","يا شيطان","يا ابليس","يا لعين","يا ملعون","يا منبوذ","يا مكروه","يا بغيض","يا مقيت","يا تافه","يا رخيص","يا ساقط","يا لقيط","يا ابن الزنا","يا ابن الحرام","يا عديم الاصل","يا قليل الادب","يا قليل الحياء","يا قليل التربية","يا عديم التربية","يا عديم الضمير","يا عديم الانسانية","يا عديم المروءة","يا عديم النخوة","يا جبان","يا خواف","يا رعديد","يا خنوع","يا ذليل","يا مهان","يا منكسر","يا ضعيف","يا مسكين","يا فقير","يا معدم","يا بائس","يا تعيس","يا شقي","يا منحوس","يا فقر","يا نكد","يا هم","يا غم","يا حزن","يا كآبة","يا احباط","يا يأس","يا قنوط","يا فشل","يا خيبة","يا حسرة","يا ندم","يا ألم","يا وجع","يا عذاب","يا جحيم","يا نار","يا سقر","يا ويل","يا ثبور","يا هلاك","يا دمار","يا خراب","يا موت","يا قتل","يا ذبح","يا سلخ","يا حرق","يا غرق","يا نسف","يا تفجير","يا تدمير","يا ابادة","يا مجزرة","يا مذبحة","يا محرقة","يا هولوكوست","يا جريمة","يا جناية","يا معصية","يا ذنب","يا خطيئة","يا اثم","يا وزر","يا سيئة","يا فاحشة","يا منكر","يا بغي","يا عدوان","يا ظلم","يا جور","يا طغيان","يا استبداد","يا قهر","يا قمع","يا اضطهاد","يا تعذيب","يا تنكيل","يا اهانة","يا اذلال","يا احتقار","يا ازدراء","يا سخرية","يا استهزاء","يا تهكم","يا شماتة","يا غيبة","يا نميمة","يا بهتان","يا افتراء","يا كذب","يا زور","يا بهتان","يا خداع","يا غش","يا تدليس","يا تزوير","يا تحريف","يا سرقة","يا نهب","يا سلب","يا اختلاس","يا رشوة","يا فساد","يا محسوبية","يا واسطة","يا استغلال","يا احتكار","يا ربا","يا قمار","يا ميسر","يا سكر","يا خمر","يا مخدرات","يا حشيش","يا افيون","يا كوكايين","يا هيروين","يا ادمان","يا دعارة","يا بغاء","يا زنا","يا لواط","يا سحاق","يا شذوذ","يا انحراف","يا فسوق","يا عصيان","يا تمرد","يا خروج","يا فتنة","يا فوضى","يا شغب","يا عنف","يا ارهاب","يا تطرف","يا غلو","يا تعصب","يا كراهية","يا حقد","يا ضغينة","يا حسد","يا غيرة","يا بغضاء","يا عداوة","يا كره","يا بغض","يا مقت","يا ازدراء","يا احتقار","يا استعلاء","يا تكبر","يا غرور","يا عجرفة","يا صلف","يا غطرسة","يا خيلاء","يا بطر","يا أشر","يا مرح","يا لهو","يا لعب","يا عبث","يا باطل","يا هراء","يا سفه","يا جهل","يا حمق","يا غباء","يا بلاهة","يا تخلف","يا بلادة","يا غفلة","يا سهو","يا نسيان","يا شرود","يا توهان","يا ضياع","يا حيرة","يا تردد","يا شك","يا ريبة","يا ظن","يا وهم","يا خيال","يا سراب","يا حلم","يا كابوس","يا وسواس","يا قلق","يا خوف","يا رعب","يا فزع","يا هلع","يا جزع","يا رهبة","يا خشية","يا تقية","يا نفاق","يا رياء","يا سمعة","يا تظاهر","يا تصنع","يا تكلف","يا ادعاء","يا كبر","يا عجب","يا من","يا أذى","يا ضرر","يا سوء","يا شر","يا بلاء","يا مصيبة","يا كارثة","يا نكبة","يا فاجعة","يا رزية","يا محنة","يا شدة","يا ضيق","يا كرب","يا عسر","يا مشقة","يا عناء","يا تعب","يا نصب","يا وصب","يا سقم","يا مرض","يا علة","يا داء","يا وباء","يا طاعون","يا جائحة","يا آفة","يا عاهة","يا نقص","يا عيب","يا وصمة","يا عار","يا خزي","يا فضيحة","يا هتك","يا كشف","يا تعرية","يا تجريس","يا تشهير","يا قذف","يا ثلب","يا لمز","يا همز","يا طعن","يا تجريح","يا انتقاد","يا لوم","يا عتب","يا توبيخ","يا تقريع","يا زجر","يا نهر","يا صد","يا رفض","يا نبذ","يا هجر","يا قطيعة","يا خصام","يا نزاع","يا شقاق","يا خلاف","يا صراع","يا قتال","يا حرب","يا معركة","يا موقعة","يا غزوة","يا عدوان","يا احتلال","يا استعمار","يا استعباد","يا رق","يا عبودية","يا سخرة","يا استغلال","يا اضطهاد","يا تمييز","يا عنصرية","يا طبقية","يا طائفية","يا قبلية","يا عشائرية","يا عصبية","يا جاهلية","يا همجية","يا وحشية","يا بربرية","يا تخلف","يا رجعية","يا انحطاط","يا تدهور","يا انهيار","يا سقوط","يا فناء","يا زوال","يا اندثار","يا انقراض","يا عدم","يا فراغ","يا خواء","يا صفر","يا لا شيء","يا هباء","يا رماد","يا تراب","يا طين","يا وحل","يا مستنقع","يا بالوعة","يا مجاري","يا مزبلة","يا مكب","يا قمامة","يا زبالة","يا قذارة","يا وسخ","يا دنس","يا رجس","يا نجس","يا عفن","يا نتانة","يا خياس","يا صنان","يا زنخة","يا قرف","يا اشمئزاز","يا غثيان","يا تقيؤ","يا استفراغ","يا بصاق","يا مخاط","يا صديد","يا قيح","يا دم","يا جيفة","يا رمم","يا جثة","يا ميت","يا هالك","يا فان","يا زائل","يا منته","يا تافه","يا حقير","يا وضيع","يا دنيء","يا خسيس","يا نذل","يا وغد","يا سافل","يا منحط","يا ساقط","يا لقيط","يا هجين","يا منبوذ","يا مطرود","يا مبعد","يا منفي","يا غريب","يا أجنبي","يا دخيل","يا طفيلي","يا علقة","يا جرثومة","يا فيروس","يا سرطان","يا وباء","يا طاعون","يا آفة","يا نكبة","يا مصيبة","يا كارثة","يا داهية","يا بلية","يا رزية","يا نائبة","يا خطب","يا فادح","يا جسيم","يا عظيم","يا مهول","يا فظيع","يا شنيع","يا بشع","يا قبيح","يا دمدميم","يا مشوه","يا ناقص","يا معيب","يا مختل","يا معتوه","يا مجنون","يا اهبل","يا طرطور","يا خيال مآتة","يا اراجوز","يا بهلوان","يا مهرج","يا مسخرة","يا اضحوكة","يا مهزلة","يا عار","يا وصمة","يا شنار","يا خزي","يا ذل","يا هوان","يا صغار","يا انكسار","يا هزيمة","يا فشل","يا اخفاق","يا خيبة","يا حسرة","يا ندم","يا اسف","يا حزن","يا كمد","يا لوعة","يا حرقة","يا غصة","يا الم","يا وجع","يا معاناة","يا شقاء","يا بؤس","يا تعاسة","يا حرمان","يا فقر","يا عوز","يا حاجة","يا فاقة","يا املاق","يا عيلة","يا مسكنة","يا ذلة","يا ضعة","يا هوان","يا خنوع","يا استكانة","يا خضوع","يا انقياد","يا تبعية","يا عمالة","يا خيانة","يا غدر","يا نكث","يا حنث","يا كفر","يا جحود","يا نكران","يا عقوق","يا تمرد","يا عصيان","يا فسوق","يا فجور","يا طغيان","يا بغي","يا عدوان","يا ظلم","يا جور","يا حيف","يا غبن","يا هضم","يا بخس","يا تطفيف","يا غش","يا خداع","يا مكر","يا كيد","يا حيلة","يا دهاء","يا خبث","يا لؤم","يا دناءة","يا خسة","يا نذالة","يا حقارة","يا سفالة","يا انحطاط","يا بذاءة","يا فحش","يا خلاعة","يا مجون","يا تهتك","يا اباحية","يا عري","يا فضيحة","يا تشهير","يا قذف","يا سب","يا شتم","يا لعن","يا تجديف","يا كفر","يا الحاد","يا زندقة","يا هرطقة","يا بدعة","يا ضلالة","يا غواية","يا فتنة","يا شرك","يا وثنية","يا عبادة الاصنام","يا سحر","يا شعوذة","يا دجل","يا كهانة","يا عرافة","يا تنجيم","يا تطير","يا تشاؤم","يا نحس","يا سوء طالع","يا بؤس","يا شقاء","يا هلاك","يا دمار","يا فناء","يا موت","يا جحيم","يا سقر","يا لظى","يا سعير","يا هاوية","يا درك اسفل","مطفح","زعطان","عصيد","ملطام","صرم","بهايم","ملقوف","ملاقيف","مطففين","زعاطيط","هبلان","مصروع","مخبول","مخرف","خروف","بايخ","سامج","غثيث","علة","نشبة","لزقة","غلس","ثقيل دم","ملطشة","ممسحة","خدامة","شغالة","عبيط","ساذج","دلخ","لوح","تنكة","حيط","جدار","صخرة","عنز","جحشة","قردة","حية","عقربة","حشرة","صرصور","ذبانة","ناموسة","برغوث","قملة","صيبان","جرثومة","بكتيريا","جرب","برص","بهاق","جذام","سل","كوليرا","شؤم","نحس","حظ عاثر","فال سيء","قهر","غبن","حيف","جور","سفك دماء","هرطقة","ضلالة","غواية","شرك","وثنية","كهانة","عرافة","تنجيم","تطير","تشاؤم","يا مطفح","يا زعطان","يا اهبل","يا عصيد","يا ملطام","يا صرم","يا بهايم","يا ثور","يا جحش","يا ملقوف","يا ملاقيف","يا مطففين","يا زعاطيط","يا هبلان","يا مصروع","يا مجنون","يا مخبول","يا مخرف","يا خروف","يا قليل الادب","يا عديم التربية","يا سافل","يا واطي","يا حقير","يا نذل","يا تافه","يا سخيف","يا بايخ","يا سامج","يا غثيث","يا علة","يا نشبة","يا لزقة","يا غلس","يا ثقيل دم","يا مكروه","يا بغيض","يا كريه","يا مقرف","يا معفن","يا وسخ","يا قذر","يا زبالة","يا حثالة","يا عار","يا فضيحة","يا مسخرة","يا مهزلة","يا اضحوكة","يا ملطشة","يا ممسحة","يا خدامة","يا شغالة","يا عبد","يا اسود","يا ابيض","يا عنصري","يا متخلف","يا جاهل","يا امي","يا غبي","يا احمق","يا ابله","يا معتوه","يا مجنون","يا مخبل","يا مصروع","يا مخرف","يا خروف","يا طرطور","يا اهبل","يا عبيط","يا ساذج","يا مغفل","يا دلخ","يا لوح","يا تنكة","يا حيط","يا جدار","يا صخرة","يا بقرة","يا تيس","يا عنز","يا جحشة","يا كلبة","يا خنزيرة","يا قردة","يا حية","يا عقربة","يا حشرة","يا صرصور","يا ذبانة","يا ناموسة","يا برغوث","يا قملة","يا صيبان","يا جرثومة","يا فيروس","يا بكتيريا","يا طفيلي","يا وباء","يا مرض","يا سرطان","يا ايدز","يا جرب","يا برص","يا بهاق","يا جذام","يا سل","يا كوليرا","يا طاعون","يا موت","يا هلاك","يا دمار","يا خراب","يا فشل","يا خيبة","يا حسرة","يا ندم","يا قهر","يا غبن","يا ظلم","يا حيف","يا جور","يا استغلال","يا سرقة","يا نهب","يا سلب","يا نصب","يا احتيال","يا كذب","يا دجل","يا نفاق","يا خيانة","يا غدر","يا عمالة","يا جاسوسية","يا دعارة","يا زنا","يا لواط","يا سحاق","يا شذوذ","يا انحراف","يا فسق","يا فجور","يا عربدة","يا سكر","يا خمر","يا حشيش","يا مخدرات","يا ادمان","يا قمار","يا ميسر","يا ربا","يا رشوة","يا فساد","يا محسوبية","يا واسطة","يا ظلم","يا قهر","يا استبداد","يا طغيان","يا ارهاب","يا عنف","يا قتل","يا اجرام","يا سفك دماء","يا حرب","يا فتنة","يا شقاق","يا نزاع","يا خلاف","يا صراع","يا عداوة","يا كراهية","يا حقد","يا ضغينة","يا حسد","يا غيرة","يا نميمة","يا غيبة","يا بهتان","يا افتراء","يا قذف","يا سب","يا شتم","يا لعن","يا تجديف","يا كفر","يا الحاد","يا زندقة","يا هرطقة","يا بدعة","يا ضلالة","يا غواية","يا شرك","يا وثنية","يا سحر","يا شعوذة","يا دجل","يا كهانة","يا عرافة","يا تنجيم","يا تطير","يا تشاؤم","يا نحس","يا شؤم","يا فال سيء","يا حظ عاثر","يا سوء طالع","يا بؤس","يا شقاء","يا تعاسة","يا حرمان","يا فقر","يا عوز","يا حاجة","يا فاقة","يا املاق","يا مسكنة","يا ذل","يا هوان","يا صغار","يا انكسار","يا هزيمة","يا خزي","يا عار","يا فضيحة","يا وصمة","يا شنار","يا جبن","يا خوف","يا رعب","يا فزع","يا هلع","يا جزع","يا رهبة","يا خشية","يا تقية","يا نفاق","يا رياء","يا سمعة","يا تظاهر","يا تصنع","يا تكلف","يا ادعاء","يا كبر","يا غرور","يا عجب","يا صلف","يا غطرسة","يا خيلاء","يا بطر","يا اشر","يا مرح","يا لهو","يا لعب","يا عبث","يا باطل","يا هراء","يا سفه","يا جهل","يا حمق","يا غباء","يا بلاهة","يا تخلف","يا بلادة","يا غفلة","يا سهو","يا نسيان","يا شرود","يا توهان","يا ضياع","يا حيرة","يا تردد","يا شك","يا ريبة","يا ظن","يا وهم","يا خيال","يا سراب","يا حلم","يا كابوس","يا وسواس","يا قلق","يا هم","يا غم","يا حزن","يا كآبة","يا احباط","يا يأس","يا قنوط"],Zo=.9;function $R(e,n){if(e===n)return 1;const a=e.length,r=n.length,o=Math.floor(Math.max(a,r)/2)-1,d=Array(a).fill(!1),h=Array(r).fill(!1);let g=0;for(let v=0;v<a;v++){const w=Math.max(0,v-o),S=Math.min(v+o+1,r);for(let T=w;T<S;T++)if(!h[T]&&e[v]===n[T]){d[v]=h[T]=!0,g++;break}}if(g===0)return 0;let p=0,f=0;for(let v=0;v<a;v++)if(d[v]){for(;!h[f];)f++;e[v]!==n[f]&&p++,f++}return p=p/2,(g/a+g/r+(g-p)/g)/3}function FR(e,n,a=.1){const r=$R(e,n);let o=0;const d=Math.min(4,Math.min(e.length,n.length));for(let h=0;h<d&&e[h]===n[h];h++)o++;return r+o*a*(1-r)}function Ej(e){const n=e.trim().toLowerCase();if(!n)return 0;let a=0;for(const r of BR){const o=FR(n,r.toLowerCase());o>a&&(a=o)}return a}function UR(e){const n=new Date,a=typeof e=="string"?new Date(e):e,r=n.getTime()-a.getTime(),o=Math.floor(r/1e3);if(o<60)return o<=1?"منذ ثانية واحدة":o===2?"منذ ثانيتين":`منذ ${o} ثوانٍ`;const d=Math.floor(o/60);if(d<60)return d===1?"منذ دقيقة واحدة":d===2?"منذ دقيقتين":`منذ ${d} ${d<5?"دقائق":"دقيقة"}`.replace("دقيقة","دقائق");const h=Math.floor(d/60);if(h<24)return h===1?"منذ ساعة واحدة":h===2?"منذ ساعتين":`منذ ${h} ساعات`;const g=Math.floor(h/24);if(g<7)return g===1?"منذ يوم واحد":g===2?"منذ يومين":`منذ ${g} أيام`;const p=Math.floor(g/7);if(p<5)return p===1?"منذ أسبوع واحد":p===2?"منذ أسبوعين":`منذ ${p} أسابيع`;const f=Math.floor(g/30);if(f<12)return f===1?"منذ شهر واحد":f===2?"منذ شهرين":`منذ ${f} أشهر`;const v=Math.floor(f/12);return v===1?"منذ عام واحد":v===2?"منذ عامين":`منذ ${v} سنوات`}const HR=()=>{const[e,n]=b.useState(""),[a,r]=b.useState(!1),[o,d]=b.useState(1),[h,g]=b.useState(20),[p,f]=b.useState({status:"pending",minRating:"",maxRating:"",hasImages:void 0,propertyId:"",userId:"",startDate:"",endDate:"",unitId:""}),[v,w]=b.useState(!1),[S,T]=b.useState(!1),[C,_]=b.useState(!1),[k,R]=b.useState(!1),[O,P]=b.useState(null),[U,A]=b.useState([]),[$,E]=b.useState([]),[I,Z]=b.useState({responseText:"",ownerId:""}),F={status:p.status,minRating:p.minRating?parseFloat(p.minRating):void 0,maxRating:p.maxRating?parseFloat(p.maxRating):void 0,hasImages:p.hasImages,propertyId:p.propertyId||void 0,unitId:p.unitId||void 0,userId:p.userId||void 0,reviewedAfter:p.startDate||void 0,reviewedBefore:p.endDate||void 0,pageNumber:o,pageSize:h},{reviewsData:Y,isLoading:G,error:V,approveReview:H,deleteReview:Q}=IR(F);Sc({pageNumber:1,pageSize:100}),P0({});const K=de=>{P(de),w(!0)},oe=de=>{P(de),T(!0)},W=de=>{P(de),_(!0)},X=de=>{P(de),E(de.images||[]),R(!0)},z=(de,te)=>{f(_e=>({..._e,[de]:te})),d(1)},J=()=>{f({status:"pending",minRating:"",maxRating:"",hasImages:void 0,propertyId:"",userId:"",startDate:"",endDate:"",unitId:""}),n(""),d(1)},se=de=>{const te=[de.cleanliness,de.service,de.location,de.value];return(te.reduce((Ie,at)=>Ie+at,0)/te.length).toFixed(1)},ae=de=>{const te=Math.floor(de),_e=de%1!==0,Ie=5-Math.ceil(de);return t.jsxs("div",{className:"flex items-center",children:["⭐".repeat(te),_e&&"⭐","☆".repeat(Ie),t.jsxs("span",{className:"text-sm text-gray-600 mr-1",children:["(",de,")"]})]})},ee=de=>de>=4.5?"text-green-600":de>=3.5?"text-yellow-600":de>=2.5?"text-orange-600":"text-red-600",re={total:Array.isArray(Y)?Y.length:0,pending:Array.isArray(Y)?Y.filter(de=>p.status==="pending").length:0,approved:0,withImages:Array.isArray(Y)?Y.filter(de=>de.images&&de.images.length>0).length:0,averageRating:Array.isArray(Y)&&Y.length>0?(Y.reduce((de,te)=>de+parseFloat(se(te)),0)/Y.length).toFixed(1):"0.0"},me=[{key:"status",label:"حالة التقييم",type:"select",options:[{value:"pending",label:"معلق للموافقة"},{value:"approved",label:"معتمد"},{value:"rejected",label:"مرفوض"},{value:"all",label:"جميع التقييمات"}]},{key:"minRating",label:"الحد الأدنى للتقييم",type:"number",placeholder:"1.0"},{key:"maxRating",label:"الحد الأقصى للتقييم",type:"number",placeholder:"5.0"},{key:"hasImages",label:"يحتوي على صور",type:"boolean"},{key:"propertyId",label:"الكيان",type:"custom",render:(de,te)=>t.jsx(cc,{value:de,onChange:_e=>te(_e),placeholder:"اختر الكيان",className:"w-full"})},{key:"unitId",label:"الوحدة",type:"custom",render:(de,te)=>t.jsx(L0,{value:de,onChange:_e=>te(_e),placeholder:"اختر الوحدة",propertyId:p.propertyId,className:"w-full",disabled:!p.propertyId})},{key:"userId",label:"المستخدم",type:"custom",render:(de,te)=>t.jsx(Vl,{value:de,onChange:_e=>te(_e),placeholder:"اختر المستخدم",className:"w-full"})},{key:"startDate",label:"تاريخ البداية",type:"date"},{key:"endDate",label:"تاريخ النهاية",type:"date"}],ye=[{key:"propertyName",title:"الكيان",sortable:!0,render:de=>t.jsx("span",{className:"text-sm text-gray-900",children:de})},{key:"userName",title:"المستخدم",sortable:!0,render:de=>t.jsx("span",{className:"text-sm text-gray-900",children:de})},{key:"cleanliness",title:"التقييم الإجمالي",render:(de,te)=>{const _e=parseFloat(se(te));return t.jsxs("div",{className:"flex flex-col",children:[ae(_e),t.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:[t.jsxs("span",{children:["نظافة: ",te.cleanliness]})," |",t.jsxs("span",{children:[" خدمة: ",te.service]})," |",t.jsxs("span",{children:[" موقع: ",te.location]})," |",t.jsxs("span",{children:[" قيمة: ",te.value]})]})]})}},{key:"comment",title:"التعليق",render:de=>{const te=de.split(/(\s+)/);return t.jsx("div",{className:"max-w-xs",title:de,children:t.jsx("p",{className:"text-sm text-gray-900",children:te.map((_e,Ie)=>{const at=Ej(_e);if(at>=Zo){const Je=(at-Zo)/(1-Zo),it=Math.round(253+-33*Je),Te=Math.round(186+-148*Je),Fe=Math.round(116+-78*Je);return t.jsx("span",{style:{color:`rgb(${it},${Te},${Fe})`,fontWeight:"bold"},children:_e},Ie)}return t.jsx("span",{children:_e},Ie)})})})}},{key:"images",title:"الصور",render:de=>t.jsx("div",{className:"flex items-center",children:de&&de.length>0?t.jsxs("div",{className:"flex items-center",children:[t.jsx("span",{className:"text-green-600 text-lg",children:"📷"}),t.jsxs("span",{className:"text-sm text-gray-600 mr-1",children:["(",de.length,")"]})]}):t.jsx("span",{className:"text-gray-400 text-sm",children:"لا توجد صور"})})},{key:"createdAt",title:"تاريخ التقييم",sortable:!0,render:de=>t.jsxs("span",{className:"text-sm text-gray-500",children:[new Date(de).toLocaleDateString("ar-SA")," ",t.jsxs("span",{className:"text-xs text-gray-400",children:["(",UR(de),")"]})]})}],Ce=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:K},{label:"عرض الصور",icon:"📷",color:"green",onClick:X,show:de=>de.images&&de.images.length>0},{label:"الموافقة",icon:"✅",color:"green",onClick:oe,show:de=>p.status==="pending"},{label:"حذف",icon:"🗑️",color:"red",onClick:W}];return V?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600",children:"حدث خطأ أثناء تحميل بيانات التقييمات. يرجى المحاولة مرة أخرى."})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة التقييمات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراجعة وإدارة تقييمات العملاء، الموافقة على التقييمات المعلقة، وإدارة الصور المرفقة"})]})})}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📝"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي التقييمات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:re.total})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة للموافقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:re.pending})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معتمدة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:re.approved})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-purple-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📷"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"تحتوي على صور"}),t.jsx("p",{className:"text-2xl font-bold text-purple-600",children:re.withImages})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-amber-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⭐"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"متوسط التقييم"}),t.jsx("p",{className:`text-2xl font-bold ${ee(parseFloat(re.averageRating))}`,children:re.averageRating})]})]})})]}),t.jsx(ti,{searchPlaceholder:"البحث في التقييمات (التعليق أو معرف الحجز)...",searchValue:e,onSearchChange:n,filters:me,filterValues:p,onFilterChange:z,onReset:J,showAdvanced:a,onToggleAdvanced:()=>r(!a)}),t.jsx(ls,{data:Array.isArray(Y)?Y:[],columns:ye,loading:G,pagination:{current:o,total:Array.isArray(Y)?Y.length:0,pageSize:h,onChange:(de,te)=>{d(de),g(te)}},rowSelection:{selectedRowKeys:U,onChange:A},actions:Ce,onRowClick:K}),t.jsx(Rt,{isOpen:v,onClose:()=>{w(!1),P(null)},title:"تفاصيل التقييم",size:"xl",children:O&&t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{children:[t.jsxs("h3",{className:"text-lg font-semibold text-gray-900",children:["التقييم الإجمالي: ",se(O)]}),ae(parseFloat(se(O)))]}),t.jsx("div",{className:"text-sm text-gray-500",children:new Date(O.createdAt).toLocaleString("ar-SA")})]})}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center p-3 bg-blue-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-blue-600",children:O.cleanliness}),t.jsx("div",{className:"text-sm text-gray-600",children:"النظافة"}),ae(O.cleanliness)]}),t.jsxs("div",{className:"text-center p-3 bg-green-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-green-600",children:O.service}),t.jsx("div",{className:"text-sm text-gray-600",children:"الخدمة"}),ae(O.service)]}),t.jsxs("div",{className:"text-center p-3 bg-purple-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-purple-600",children:O.location}),t.jsx("div",{className:"text-sm text-gray-600",children:"الموقع"}),ae(O.location)]}),t.jsxs("div",{className:"text-center p-3 bg-orange-50 rounded-lg",children:[t.jsx("div",{className:"text-2xl font-bold text-orange-600",children:O.value}),t.jsx("div",{className:"text-sm text-gray-600",children:"القيمة مقابل المال"}),ae(O.value)]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تعليق العميل"}),t.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:t.jsx("p",{className:"text-gray-900",children:O.comment.split(/(\s+)/).map((de,te)=>{const _e=Ej(de);if(_e>=Zo){const Ie=(_e-Zo)/(1-Zo),at=Math.round(253+-33*Ie),Je=Math.round(186+-148*Ie),it=Math.round(116+-78*Ie);return t.jsx("span",{style:{color:`rgb(${at},${Je},${it})`,fontWeight:"bold"},children:de},te)}return t.jsx("span",{children:de},te)})})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف التقييم"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:O.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف الحجز"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:O.bookingId})]})]}),O.images&&O.images.length>0&&t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["الصور المرفقة (",O.images.length,")"]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2",children:O.images.slice(0,4).map((de,te)=>t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:de.url,alt:de.altText,className:"w-full h-20 object-cover rounded-lg"}),te===3&&O.images.length>4&&t.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 rounded-lg flex items-center justify-center",children:t.jsxs("span",{className:"text-white font-medium",children:["+",O.images.length-4]})})]},de.id))}),t.jsx("button",{onClick:()=>X(O),className:"mt-2 text-blue-600 text-sm hover:text-blue-800",children:"عرض جميع الصور"})]})]})}),t.jsx(Rt,{isOpen:k,onClose:()=>{R(!1),E([]),P(null)},title:"صور التقييم",size:"xl",children:t.jsx("div",{className:"space-y-4",children:$.length>0?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:$.map(de=>t.jsxs("div",{className:"space-y-2",children:[t.jsx("img",{src:de.url,alt:de.altText,className:"w-full h-48 object-cover rounded-lg"}),t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{className:"font-medium text-gray-900",children:de.caption}),t.jsx("p",{className:"text-gray-500",children:de.name}),t.jsxs("p",{className:"text-gray-400",children:[(de.sizeBytes/1024/1024).toFixed(2)," MB"]})]})]},de.id))}):t.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد صور لعرضها"})})}),t.jsx(Rt,{isOpen:S,onClose:()=>{T(!1),P(null)},title:"الموافقة على التقييم",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{T(!1),P(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>H.mutate(O.id),disabled:H.status==="pending",className:"px-4 py-2 bg-green-600 text-white rounded-md hover:bg-green-700 disabled:opacity-50",children:H.status==="pending"?"جارٍ الموافقة...":"الموافقة على التقييم"})]}),children:O&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-green-400 text-xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-green-800",children:"تأكيد الموافقة على التقييم"}),t.jsx("p",{className:"mt-2 text-sm text-green-700",children:"سيتم الموافقة على التقييم وإتاحته للعرض العام. هل أنت متأكد من المتابعة؟"})]})]})}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"معاينة التقييم:"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"flex items-center",children:ae(parseFloat(se(O)))}),t.jsx("p",{className:"text-gray-900 mt-2",children:O.comment})]})]})]})}),t.jsx(Rt,{isOpen:C,onClose:()=>{_(!1),P(null)},title:"حذف التقييم",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx("button",{onClick:()=>{_(!1),P(null)},className:"px-4 py-2 border border-gray-300 text-gray-700 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{onClick:()=>Q.mutate(O.id),disabled:Q.status==="pending",className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 disabled:opacity-50",children:Q.status==="pending"?"جارٍ الحذف...":"حذف التقييم"})]}),children:O&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-red-50 border border-red-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-red-400 text-xl",children:"⚠️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-red-800",children:"تأكيد حذف التقييم"}),t.jsx("p",{className:"mt-2 text-sm text-red-700",children:"سيتم حذف التقييم نهائياً ولن يمكن استرداده. هذا الإجراء لا يمكن التراجع عنه."})]})]})}),t.jsxs("div",{className:"bg-gray-50 p-4 rounded-lg",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"التقييم المراد حذفه:"}),t.jsxs("div",{className:"mt-2",children:[t.jsx("div",{className:"flex items-center",children:ae(parseFloat(se(O)))}),t.jsx("p",{className:"text-gray-900 mt-2",children:O.comment})]})]})]})})]})},Kl=({title:e,description:n,icon:a,comingSoon:r=!1})=>t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"text-6xl mb-4",children:a}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:e}),t.jsx("p",{className:"text-gray-600 mb-6",children:n}),r&&t.jsxs("div",{className:"inline-flex items-center px-4 py-2 bg-blue-50 text-blue-700 rounded-lg",children:[t.jsx("span",{className:"ml-2",children:"🚧"}),t.jsx("span",{className:"font-medium",children:"قريباً"})]})]})}),qR=()=>t.jsx(Kl,{title:"إدارة الإشعارات",description:"إرسال إشعارات عامة لجميع المستخدمين أو إشعارات محددة لمستخدمين معينين",icon:"🔔",comingSoon:!0});class Ol{static API_BASE="/api/admin/Reports";static async getAll(n){return(await we.get(this.API_BASE,{params:n})).data}static async getById(n){return(await we.get(`${this.API_BASE}/${n.id}`)).data}static async create(n){return(await we.post(this.API_BASE,n)).data}static async update(n,a){return(await we.put(`${this.API_BASE}/${n}`,a)).data}static async delete(n,a){return(await we.delete(`${this.API_BASE}/${n}`,{data:a?{deletionReason:a}:void 0})).data}static async getByProperty(n,a){return(await we.get(`${this.API_BASE}/property/${n}`,{params:a})).data.items}static async getByReportedUser(n,a){return(await we.get(`${this.API_BASE}/reported-user/${n}`,{params:a})).data.items}static async action(n){return(await we.post(`${this.API_BASE}/${n.id}/action`,n)).data}static async stats(){return(await we.get(`${this.API_BASE}/stats`)).data}}const YR=e=>{const n=Bn(),{data:a,isLoading:r,error:o,refetch:d}=It({queryKey:["admin-reports",e],queryFn:()=>Ol.getAll(e),staleTime:300*1e3}),h=Be({mutationFn:w=>Ol.create(w),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),g=Be({mutationFn:({id:w,data:S})=>Ol.update(w,S),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),p=Be({mutationFn:({id:w,reason:S})=>Ol.delete(w,S),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),f=Be({mutationFn:w=>Ol.action({id:w.id,action:w.action,actionNote:w.actionNote,adminId:w.adminId}),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}}),v=Be({mutationFn:async({ids:w,action:S,note:T})=>{const C=w.map(_=>Ol.update(_,{id:_,description:`Bulk ${S}: ${T||""}`}));return Promise.all(C)},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-reports"]})}});return{reportsData:a,isLoading:r,error:o,refetch:d,createReport:h,updateReport:g,deleteReport:p,takeReportAction:f,bulkActionReports:v}},VR=()=>It({queryKey:["report-stats"],queryFn:()=>Ol.stats(),staleTime:600*1e3}),ZR=()=>{const{loading:e,executeWithFeedback:n,showConfirmDialog:a,confirmDialog:r,hideConfirmDialog:o,copyToClipboard:d}=Wl(),[h,g]=b.useState(""),[p,f]=b.useState(!1),[v,w]=b.useState(1),[S,T]=b.useState(20),[C,_]=b.useState({reporterUserId:"",reportedUserId:"",reportedPropertyId:"",reason:"",status:"",fromDate:"",toDate:""}),[k,R]=b.useState(!1),[O,P]=b.useState(!1),[U,A]=b.useState(null),[$,E]=b.useState([]),[I,Z]=b.useState({action:"review",actionNote:"",adminId:"admin-user-id"}),F={pageNumber:v,pageSize:S,searchTerm:h||void 0,reporterUserId:C.reporterUserId||void 0,reportedUserId:C.reportedUserId||void 0,reportedPropertyId:C.reportedPropertyId||void 0,reason:C.reason||void 0,status:C.status||void 0,fromDate:C.fromDate||void 0,toDate:C.toDate||void 0},{reportsData:Y,isLoading:G,error:V,deleteReport:H,takeReportAction:Q,refetch:K}=YR(F),{data:oe,isLoading:W}=VR(),X=de=>{A(de),R(!0)},z=de=>{A(de),Z({action:"review",actionNote:"",adminId:"admin-user-id"}),P(!0)},J=de=>{a({title:"حذف البلاغ",message:`هل أنت متأكد من حذف البلاغ حول "${de.reason}"؟ هذا الإجراء لا يمكن التراجع عنه.`,type:"danger",onConfirm:()=>{n(()=>H.mutateAsync({id:de.id,reason:"تم الحذف من قبل الإدارة"}),{loadingKey:"deleteReport",successMessage:"تم حذف البلاغ بنجاح",errorMessage:"فشل في حذف البلاغ"})}})},se=async()=>{!U||!I.actionNote.trim()||await n(()=>Q.mutateAsync({id:U.id,action:I.action,actionNote:I.actionNote,adminId:I.adminId}),{loadingKey:"takeReportAction",successMessage:"تم تنفيذ الإجراء بنجاح",errorMessage:"فشل في تنفيذ الإجراء",onSuccess:()=>{P(!1),A(null),Z({action:"review",actionNote:"",adminId:"admin-user-id"})}})},ae=(de,te)=>{_(_e=>({..._e,[de]:te})),w(1)},ee=()=>{_({reporterUserId:"",reportedUserId:"",reportedPropertyId:"",reason:"",status:"",fromDate:"",toDate:""}),g(""),w(1)},re=de=>{const te={"انتهاك الشروط":"text-red-600","سلوك غير لائق":"text-orange-600","محتوى مضلل":"text-yellow-600","مشكلة فنية":"text-blue-600",أخرى:"text-gray-600"};for(const[_e,Ie]of Object.entries(te))if(de.includes(_e))return Ie;return"text-gray-600"},me=[{key:"reporterUserId",label:"المبلغ",type:"custom",render:(de,te)=>t.jsx(Vl,{value:de,onChange:_e=>te(_e),placeholder:"اختر المستخدم المبلغ",className:"w-full"})},{key:"reportedUserId",label:"المبلغ عنه",type:"custom",render:(de,te)=>t.jsx(Vl,{value:de,onChange:_e=>te(_e),placeholder:"اختر المستخدم المبلغ عنه",className:"w-full"})},{key:"reportedPropertyId",label:"الكيان المبلغ عنه",type:"custom",render:(de,te)=>t.jsx(cc,{value:de,onChange:_e=>te(_e),placeholder:"اختر الكيان",className:"w-full"})},{key:"reason",label:"سبب البلاغ",type:"select",options:[{value:"انتهاك الشروط",label:"انتهاك الشروط"},{value:"سلوك غير لائق",label:"سلوك غير لائق"},{value:"محتوى مضلل",label:"محتوى مضلل"},{value:"مشكلة فنية",label:"مشكلة فنية"},{value:"أخرى",label:"أخرى"}]},{key:"status",label:"حالة البلاغ",type:"select",options:[{value:"pending",label:"معلق"},{value:"reviewed",label:"تمت المراجعة"},{value:"resolved",label:"تم الحل"},{value:"dismissed",label:"تم الرفض"},{value:"escalated",label:"تم التصعيد"}]},{key:"fromDate",label:"من تاريخ",type:"date"},{key:"toDate",label:"إلى تاريخ",type:"date"}],ye=[{key:"id",title:"معرف البلاغ",render:de=>t.jsx(Oh,{content:`انقر للنسخ: ${de}`,children:t.jsxs("button",{onClick:()=>d(de,"تم نسخ معرف البلاغ"),className:"font-mono text-sm text-gray-600 hover:text-blue-600 transition-colors",children:[de.substring(0,8),"..."]})})},{key:"reason",title:"سبب البلاغ",render:de=>t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsx("span",{className:`text-sm font-medium ${re(de)}`,children:de})})},{key:"description",title:"الوصف",render:de=>t.jsx("div",{className:"max-w-md",children:t.jsx("p",{className:"text-sm text-gray-600 truncate",children:de})})},{key:"reporterUserName",title:"المبلغ",render:de=>t.jsx("span",{className:"text-sm text-gray-900 font-medium",children:de})},{key:"reportedUserName",title:"المبلغ عنه",render:de=>t.jsx("span",{className:"text-sm text-gray-900",children:de||"-"})},{key:"reportedPropertyName",title:"الكيان المبلغ عنه",render:de=>t.jsx("span",{className:"text-sm text-gray-900",children:de||"-"})},{key:"createdAt",title:"تاريخ البلاغ",sortable:!0,render:de=>t.jsx("span",{className:"text-sm text-gray-500",children:new Date(de).toLocaleDateString("ar-SA")})}],Ce=[{label:"عرض التفاصيل",icon:"👁️",color:"blue",onClick:X},{label:"اتخاذ إجراء",icon:"⚖️",color:"green",onClick:z},{label:"حذف البلاغ",icon:"🗑️",color:"red",onClick:J}];return V?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Ph,{icon:"⚠️",title:"خطأ في تحميل البيانات",description:"حدث خطأ أثناء تحميل بيانات البلاغات. يرجى المحاولة مرة أخرى.",actionLabel:"إعادة المحاولة",onAction:()=>K(),size:"lg"})}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsx("div",{className:"flex justify-between items-center",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة البلاغات"}),t.jsx("p",{className:"text-gray-600 mt-1",children:"مراجعة ومعالجة البلاغات المقدمة من المستخدمين حول المحتوى والسلوك"})]})})}),W?t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[1,2,3,4,5].map(de=>t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsx(pr,{size:"md",text:"جاري التحميل..."})},de))}):t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"📋"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي البلاغات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:oe?.totalReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-yellow-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"⏳"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"معلقة"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-600",children:oe?.pendingReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"✅"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"محلولة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:oe?.resolvedReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-gray-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"❌"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مرفوضة"}),t.jsx("p",{className:"text-2xl font-bold text-gray-600",children:oe?.dismissedReports||0})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-red-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🚨"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"مصعدة"}),t.jsx("p",{className:"text-2xl font-bold text-red-600",children:oe?.escalatedReports||0})]})]})})]}),oe?.reportsByCategory&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"البلاغات حسب الفئة"}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:Object.entries(oe.reportsByCategory).map(([de,te])=>t.jsxs("div",{className:"text-center",children:[t.jsx("div",{className:"bg-gray-100 rounded-lg p-4 mb-2",children:t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:te})}),t.jsx("p",{className:"text-sm text-gray-600",children:de})]},de))})]}),t.jsx(ti,{searchPlaceholder:"البحث في البلاغات (السبب، الوصف)...",searchValue:h,onSearchChange:g,filters:me,filterValues:C,onFilterChange:ae,onReset:ee,showAdvanced:p,onToggleAdvanced:()=>f(!p)}),!G&&(Y?.items?.length||0)===0?t.jsx("div",{className:"bg-white rounded-lg shadow-sm",children:t.jsx(Ph,{icon:"📋",title:"لا توجد بلاغات",description:"لم يتم العثور على أي بلاغات تطابق معايير البحث والفلترة الحالية.",actionLabel:"إعادة تعيين الفلاتر",onAction:ee})}):t.jsx(ls,{data:Y?.items||[],columns:ye,loading:G,pagination:{current:v,total:Y?.totalCount||0,pageSize:S,onChange:(de,te)=>{w(de),T(te)}},rowSelection:{selectedRowKeys:$,onChange:E},actions:Ce,onRowClick:X}),t.jsx(Rt,{isOpen:k,onClose:()=>{R(!1),A(null)},title:"تفاصيل البلاغ",size:"lg",children:U&&t.jsx("div",{className:"space-y-4",children:t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"معرف البلاغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-mono",children:U.id})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"سبب البلاغ"}),t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:`text-sm font-medium ${re(U.reason)}`,children:U.reason})})]}),t.jsxs("div",{className:"md:col-span-2",children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"وصف البلاغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 bg-gray-50 p-3 rounded-md",children:U.description})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المستخدم المبلغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900 font-medium",children:U.reporterUserName})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"تاريخ البلاغ"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:new Date(U.createdAt).toLocaleString("ar-SA")})]}),U.reportedUserName&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"المستخدم المبلغ عنه"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:U.reportedUserName})]}),U.reportedPropertyName&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"الكيان المبلغ عنه"}),t.jsx("p",{className:"mt-1 text-sm text-gray-900",children:U.reportedPropertyName})]})]})})}),t.jsx(Rt,{isOpen:O,onClose:()=>{P(!1),A(null)},title:"اتخاذ إجراء على البلاغ",size:"md",footer:t.jsxs("div",{className:"flex justify-end gap-3",children:[t.jsx(rt,{onClick:()=>{P(!1),A(null)},label:"إلغاء",variant:"secondary"}),t.jsx(rt,{onClick:se,label:"تنفيذ الإجراء",variant:"primary",loading:e.takeReportAction,disabled:!I.actionNote.trim(),icon:"⚖️"})]}),children:U&&t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"معلومات البلاغ"}),t.jsxs("p",{className:"mt-2 text-sm text-blue-700",children:[t.jsx("strong",{children:"السبب:"})," ",U.reason,t.jsx("br",{}),t.jsx("strong",{children:"المبلغ:"})," ",U.reporterUserName]})]})]})}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الإجراء"}),t.jsxs("select",{value:I.action,onChange:de=>Z(te=>({...te,action:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",children:[t.jsx("option",{value:"review",children:"مراجعة البلاغ"}),t.jsx("option",{value:"resolve",children:"حل البلاغ"}),t.jsx("option",{value:"dismiss",children:"رفض البلاغ"}),t.jsx("option",{value:"escalate",children:"تصعيد البلاغ"}),t.jsx("option",{value:"investigate",children:"فتح تحقيق"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"ملاحظات الإجراء *"}),t.jsx("textarea",{rows:4,value:I.actionNote,onChange:de=>Z(te=>({...te,actionNote:de.target.value})),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500",placeholder:"أدخل تفاصيل الإجراء المتخذ وأي ملاحظات إضافية..."})]})]})}),r&&t.jsx(w2,{isOpen:r.isOpen,onClose:o,onConfirm:()=>{r.onConfirm(),o()},title:r.title,message:r.message,type:r.type,loading:e.deleteReport})]})},WR="/api/admin/auditlogs",KR={getAuditLogs:e=>we.get(`${WR}/audit-logs`,{params:e}).then(n=>n.data)},GR=e=>It({queryKey:["admin","audit-logs",e],queryFn:()=>KR.getAuditLogs(e),placeholderData:n=>n}),QR=()=>t.jsx("span",{children:"👤"}),XR=()=>t.jsx("span",{children:"👁️"}),JR=()=>t.jsx("span",{children:"🕒"}),eA=()=>t.jsx("span",{children:"💾"}),tA=()=>{const[e,n]=b.useState({pageNumber:1,pageSize:20}),[a,r]=b.useState(null),[o,d]=b.useState(!1),[h,g]=b.useState(""),[p,f]=b.useState({userId:"",from:"",to:"",operationType:""}),[v,w]=b.useState(!1),S=[{key:"userId",label:"المستخدم",type:"custom",render:(P,U)=>t.jsx(Vl,{value:P,onChange:A=>U(A),placeholder:"اختر المستخدم",className:"w-full"})},{key:"from",label:"من تاريخ",type:"date"},{key:"to",label:"إلى تاريخ",type:"date"},{key:"operationType",label:"نوع العملية",type:"text",placeholder:"نوع العملية"}],{data:T,isLoading:C,error:_}=GR(e),k=P=>{r(P),d(!0)},R=[{header:"التوقيت",title:"التوقيت",key:"timestamp",render:(P,U)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(JR,{}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:new Date(U.timestamp).toLocaleDateString("ar-SA")}),t.jsx("div",{className:"text-xs text-gray-500",children:new Date(U.timestamp).toLocaleTimeString("ar-SA")})]})]})},{header:"المستخدم",title:"المستخدم",key:"username",render:(P,U)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(QR,{}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:U.username}),t.jsx("div",{className:"text-xs text-gray-500",children:U.userId})]})]})},{header:"العملية",title:"العملية",key:"action",render:(P,U)=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(eA,{}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:U.action}),t.jsx("div",{className:"text-xs text-gray-500",children:U.tableName})]})]})},{header:"السجل المتأثر",title:"السجل المتأثر",key:"recordName",render:(P,U)=>t.jsxs("div",{children:[t.jsx("div",{className:"text-sm font-medium",children:U.recordName}),t.jsx("div",{className:"text-xs text-gray-500",children:U.recordId})]})},{header:"التغييرات",title:"التغييرات",key:"changes",render:(P,U)=>t.jsxs("div",{className:"max-w-xs",children:[t.jsx("div",{className:"text-sm text-gray-700 truncate",children:U.changes}),U.isSlowOperation&&t.jsx("div",{className:"text-xs text-orange-600 bg-orange-50 px-2 py-1 rounded mt-1 inline-block",children:"عملية بطيئة"})]})},{header:"الإجراءات",title:"الإجراءات",key:"actions",render:(P,U)=>t.jsxs("button",{onClick:()=>k(U),className:"flex items-center gap-1 px-3 py-1 bg-blue-50 text-blue-600 rounded hover:bg-blue-100 transition-colors",children:[t.jsx(XR,{}),"عرض التفاصيل"]})}],O=({log:P})=>{if(!P.oldValues&&!P.newValues)return t.jsx("div",{className:"text-gray-500 text-center py-4",children:"لا توجد تفاصيل التغييرات متاحة"});const U=P.oldValues||{},A=P.newValues||{},$=new Set([...Object.keys(U),...Object.keys(A)]);return t.jsx("div",{className:"space-y-4",children:Array.from($).map(E=>{const I=U[E],Z=A[E],F=I!==Z;return t.jsxs("div",{className:"border rounded-lg p-4",children:[t.jsx("div",{className:"font-medium text-gray-700 mb-2",children:E}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"القيمة القديمة"}),t.jsx("div",{className:`p-2 rounded border ${F?"bg-red-50 border-red-200":"bg-gray-50"}`,children:I!==void 0?String(I):"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-1",children:"القيمة الجديدة"}),t.jsx("div",{className:`p-2 rounded border ${F?"bg-green-50 border-green-200":"bg-gray-50"}`,children:Z!==void 0?String(Z):"غير محدد"})]})]})]},E)})})};return t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"flex items-center justify-between",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"سجلات التدقيق"}),t.jsx("p",{className:"text-gray-600",children:"مراقبة جميع الأنشطة والعمليات في النظام"})]})}),t.jsx(ti,{searchPlaceholder:"البحث في سجلات التدقيق...",searchValue:h,onSearchChange:P=>{g(P),n(U=>({...U,pageNumber:1,searchTerm:P}))},filters:S,filterValues:p,onFilterChange:(P,U)=>{f(A=>({...A,[P]:U})),n(A=>({...A,pageNumber:1,[P]:U}))},onReset:()=>{g(""),f({userId:"",from:"",to:"",operationType:""}),n(P=>({...P,pageNumber:1,searchTerm:void 0,userId:void 0,from:void 0,to:void 0,operationType:void 0}))},showAdvanced:v,onToggleAdvanced:()=>w(P=>!P)}),t.jsx("div",{className:"bg-white rounded-lg shadow",children:t.jsx(ls,{data:T?.items||[],columns:R,loading:C,pagination:{current:T?.pageNumber??e.pageNumber??1,total:T?.totalCount??0,pageSize:T?.pageSize??e.pageSize??20,onChange:(P,U)=>n(A=>({...A,pageNumber:P,pageSize:U}))},onRowClick:()=>{}})}),t.jsx(Rt,{isOpen:o,onClose:()=>d(!1),title:"تفاصيل سجل التدقيق",size:"lg",children:a&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"التوقيت"}),t.jsx("div",{className:"font-medium",children:new Date(a.timestamp).toLocaleString("ar-SA")})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"المستخدم"}),t.jsx("div",{className:"font-medium",children:a.username})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"العملية"}),t.jsx("div",{className:"font-medium",children:a.action})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"الجدول"}),t.jsx("div",{className:"font-medium",children:a.tableName})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"معرف السجل"}),t.jsx("div",{className:"font-medium",children:a.recordId})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"اسم السجل"}),t.jsx("div",{className:"font-medium",children:a.recordName})]})]}),a.notes&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"الملاحظات"}),t.jsx("div",{className:"p-3 bg-blue-50 border border-blue-200 rounded-lg",children:a.notes})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"وصف التغييرات"}),t.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:a.changes})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-lg font-medium mb-4",children:"تفاصيل التغييرات"}),t.jsx(O,{log:a})]}),a.metadata&&Object.keys(a.metadata).length>0&&t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500 mb-2",children:"البيانات الإضافية"}),t.jsx("div",{className:"p-3 bg-gray-50 border rounded-lg",children:t.jsx("pre",{className:"text-sm overflow-x-auto",children:JSON.stringify(a.metadata,null,2)})})]})]})})]})},nA=()=>t.jsx(Kl,{title:"إعدادات النظام",description:"إدارة الإعدادات العامة للنظام والتكوينات الأساسية",icon:"⚙️",comingSoon:!0}),Eu=(e={})=>{const n=Bn(),[a,r]=b.useState({}),{data:o,isLoading:d,error:h,refetch:g}=It({queryKey:["images",e],queryFn:()=>mn.getImages(e),staleTime:300*1e3}),p=Be({mutationFn:async F=>{const Y=mn.validateImageFile(F.file);if(!Y.valid)throw new Error(Y.error);const G=await mn.compressImage(F.file),V={...F,file:G};return mn.uploadImage(V)},onSuccess:F=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]}),F.taskId&&r(Y=>{const{[F.taskId]:G,...V}=Y;return V})},onError:(F,Y)=>{console.error("فشل في رفع الصورة:",F);const G=`upload_${Y.file.name}_${Date.now()}`;r(V=>{const{[G]:H,...Q}=V;return Q})}}),f=Be({mutationFn:async({files:F,options:Y})=>await mn.uploadMultipleImages(F,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]})}}),v=Be({mutationFn:mn.updateImage,onSuccess:F=>{n.setQueryData(["images",e],Y=>Y&&{...Y,images:Y.images.map(G=>G.id===F.id?F:G)}),n.invalidateQueries({queryKey:["images"]})}}),w=Be({mutationFn:({imageId:F,permanent:Y=!1})=>mn.deleteImage(F,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]})}}),S=Be({mutationFn:mn.deleteImages,onSuccess:()=>{n.invalidateQueries({queryKey:["images"]}),n.invalidateQueries({queryKey:["image-statistics"]})}}),T=Be({mutationFn:mn.reorderImages,onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),C=Be({mutationFn:({imageId:F,propertyId:Y,unitId:G})=>mn.setPrimaryImage(F,Y,G),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),_=Be({mutationFn:({imageId:F,settings:Y})=>mn.optimizeImage(F,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),k=Be({mutationFn:({imageId:F,cropData:Y})=>mn.cropImage(F,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),R=Be({mutationFn:({imageId:F,filter:Y,intensity:G})=>mn.applyFilter(F,Y,G),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),O=Be({mutationFn:({imageId:F,degrees:Y})=>mn.rotateImage(F,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),P=Be({mutationFn:({imageId:F,direction:Y})=>mn.flipImage(F,Y),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),U=Be({mutationFn:({imageId:F,text:Y,position:G})=>mn.addWatermark(F,Y,G),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),A=Be({mutationFn:({imageId:F,targetPropertyId:Y,targetUnitId:G})=>mn.copyImage(F,Y,G),onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),$=Be({mutationFn:mn.restoreOriginal,onSuccess:()=>{n.invalidateQueries({queryKey:["images"]})}}),E=b.useCallback(async F=>{const Y=`upload_${F.file.name}_${Date.now()}`;r(G=>({...G,[Y]:{taskId:Y,filename:F.file.name,progress:0,status:"uploading"}}));try{const G=setInterval(()=>{r(H=>{const Q=H[Y];return Q&&Q.progress<90?{...H,[Y]:{...Q,progress:Q.progress+10}}:H})},200),V=await p.mutateAsync(F);return clearInterval(G),r(H=>({...H,[Y]:{taskId:Y,filename:F.file.name,progress:100,status:"completed",imageId:V.image?.id}})),V}catch(G){throw r(V=>({...V,[Y]:{taskId:Y,filename:F.file.name,progress:0,status:"failed",error:G instanceof Error?G.message:"حدث خطأ غير متوقع"}})),G}},[p]),I=b.useCallback(F=>{r(Y=>{const{[F]:G,...V}=Y;return V})},[]),Z=b.useCallback(()=>{r({})},[]);return{images:o?.images||[],total:o?.total||0,page:o?.page||1,totalPages:o?.totalPages||1,isLoading:d,error:h,uploadProgress:a,refetch:g,uploadImage:p.mutate,uploadImageAsync:p.mutateAsync,uploadImageWithProgress:E,uploadMultipleImages:f.mutate,uploadMultipleImagesAsync:f.mutateAsync,updateImage:v.mutate,updateImageAsync:v.mutateAsync,deleteImage:w.mutate,deleteImageAsync:w.mutateAsync,deleteImages:S.mutate,deleteImagesAsync:S.mutateAsync,reorderImages:T.mutate,reorderImagesAsync:T.mutateAsync,setPrimaryImage:C.mutate,setPrimaryImageAsync:C.mutateAsync,optimizeImage:_.mutate,optimizeImageAsync:_.mutateAsync,cropImage:k.mutate,cropImageAsync:k.mutateAsync,applyFilter:R.mutate,applyFilterAsync:R.mutateAsync,rotateImage:O.mutate,rotateImageAsync:O.mutateAsync,flipImage:P.mutate,flipImageAsync:P.mutateAsync,addWatermark:U.mutate,addWatermarkAsync:U.mutateAsync,copyImage:A.mutate,copyImageAsync:A.mutateAsync,restoreOriginal:$.mutate,restoreOriginalAsync:$.mutateAsync,isUploading:p.isPending||f.isPending,isUpdating:v.isPending,isDeleting:w.isPending||S.isPending,isReordering:T.isPending,isOptimizing:_.isPending,isEditing:k.isPending||R.isPending||O.isPending||P.isPending||U.isPending,isProcessing:$.isPending||A.isPending,clearUploadProgress:I,clearAllUploadProgress:Z}},M2=(e,n)=>It({queryKey:["image-statistics",e,n],queryFn:()=>mn.getImageStatistics(e,n),staleTime:600*1e3});function aA(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return b.useMemo(()=>r=>{n.forEach(o=>o(r))},n)}const yf=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";function kc(e){const n=Object.prototype.toString.call(e);return n==="[object Window]"||n==="[object global]"}function z0(e){return"nodeType"in e}function Ua(e){var n,a;return e?kc(e)?e:z0(e)&&(n=(a=e.ownerDocument)==null?void 0:a.defaultView)!=null?n:window:window}function I0(e){const{Document:n}=Ua(e);return e instanceof n}function Mu(e){return kc(e)?!1:e instanceof Ua(e).HTMLElement}function R2(e){return e instanceof Ua(e).SVGElement}function Tc(e){return e?kc(e)?e.document:z0(e)?I0(e)?e:Mu(e)||R2(e)?e.ownerDocument:document:document:document}const gr=yf?b.useLayoutEffect:b.useEffect;function B0(e){const n=b.useRef(e);return gr(()=>{n.current=e}),b.useCallback(function(){for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return n.current==null?void 0:n.current(...r)},[])}function sA(){const e=b.useRef(null),n=b.useCallback((r,o)=>{e.current=setInterval(r,o)},[]),a=b.useCallback(()=>{e.current!==null&&(clearInterval(e.current),e.current=null)},[]);return[n,a]}function cu(e,n){n===void 0&&(n=[e]);const a=b.useRef(e);return gr(()=>{a.current!==e&&(a.current=e)},n),a}function Ru(e,n){const a=b.useRef();return b.useMemo(()=>{const r=e(a.current);return a.current=r,r},[...n])}function zh(e){const n=B0(e),a=b.useRef(null),r=b.useCallback(o=>{o!==a.current&&n?.(o,a.current),a.current=o},[]);return[a,r]}function Lx(e){const n=b.useRef();return b.useEffect(()=>{n.current=e},[e]),n.current}let Xg={};function Au(e,n){return b.useMemo(()=>{if(n)return n;const a=Xg[e]==null?0:Xg[e]+1;return Xg[e]=a,e+"-"+a},[e,n])}function A2(e){return function(n){for(var a=arguments.length,r=new Array(a>1?a-1:0),o=1;o<a;o++)r[o-1]=arguments[o];return r.reduce((d,h)=>{const g=Object.entries(h);for(const[p,f]of g){const v=d[p];v!=null&&(d[p]=v+e*f)}return d},{...n})}}const ic=A2(1),du=A2(-1);function rA(e){return"clientX"in e&&"clientY"in e}function $0(e){if(!e)return!1;const{KeyboardEvent:n}=Ua(e.target);return n&&e instanceof n}function iA(e){if(!e)return!1;const{TouchEvent:n}=Ua(e.target);return n&&e instanceof n}function zx(e){if(iA(e)){if(e.touches&&e.touches.length){const{clientX:n,clientY:a}=e.touches[0];return{x:n,y:a}}else if(e.changedTouches&&e.changedTouches.length){const{clientX:n,clientY:a}=e.changedTouches[0];return{x:n,y:a}}}return rA(e)?{x:e.clientX,y:e.clientY}:null}const uu=Object.freeze({Translate:{toString(e){if(!e)return;const{x:n,y:a}=e;return"translate3d("+(n?Math.round(n):0)+"px, "+(a?Math.round(a):0)+"px, 0)"}},Scale:{toString(e){if(!e)return;const{scaleX:n,scaleY:a}=e;return"scaleX("+n+") scaleY("+a+")"}},Transform:{toString(e){if(e)return[uu.Translate.toString(e),uu.Scale.toString(e)].join(" ")}},Transition:{toString(e){let{property:n,duration:a,easing:r}=e;return n+" "+a+"ms "+r}}}),Mj="a,frame,iframe,input:not([type=hidden]):not(:disabled),select:not(:disabled),textarea:not(:disabled),button:not(:disabled),*[tabindex]";function lA(e){return e.matches(Mj)?e:e.querySelector(Mj)}const oA={display:"none"};function cA(e){let{id:n,value:a}=e;return We.createElement("div",{id:n,style:oA},a)}function dA(e){let{id:n,announcement:a,ariaLiveType:r="assertive"}=e;const o={position:"fixed",top:0,left:0,width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0 0 0 0)",clipPath:"inset(100%)",whiteSpace:"nowrap"};return We.createElement("div",{id:n,style:o,role:"status","aria-live":r,"aria-atomic":!0},a)}function uA(){const[e,n]=b.useState("");return{announce:b.useCallback(r=>{r!=null&&n(r)},[]),announcement:e}}const D2=b.createContext(null);function mA(e){const n=b.useContext(D2);b.useEffect(()=>{if(!n)throw new Error("useDndMonitor must be used within a children of <DndContext>");return n(e)},[e,n])}function hA(){const[e]=b.useState(()=>new Set),n=b.useCallback(r=>(e.add(r),()=>e.delete(r)),[e]);return[b.useCallback(r=>{let{type:o,event:d}=r;e.forEach(h=>{var g;return(g=h[o])==null?void 0:g.call(h,d)})},[e]),n]}const fA={draggable:`
    To pick up a draggable item, press the space bar.
    While dragging, use the arrow keys to move the item.
    Press space again to drop the item in its new position, or press escape to cancel.
  `},pA={onDragStart(e){let{active:n}=e;return"Picked up draggable item "+n.id+"."},onDragOver(e){let{active:n,over:a}=e;return a?"Draggable item "+n.id+" was moved over droppable area "+a.id+".":"Draggable item "+n.id+" is no longer over a droppable area."},onDragEnd(e){let{active:n,over:a}=e;return a?"Draggable item "+n.id+" was dropped over droppable area "+a.id:"Draggable item "+n.id+" was dropped."},onDragCancel(e){let{active:n}=e;return"Dragging was cancelled. Draggable item "+n.id+" was dropped."}};function gA(e){let{announcements:n=pA,container:a,hiddenTextDescribedById:r,screenReaderInstructions:o=fA}=e;const{announce:d,announcement:h}=uA(),g=Au("DndLiveRegion"),[p,f]=b.useState(!1);if(b.useEffect(()=>{f(!0)},[]),mA(b.useMemo(()=>({onDragStart(w){let{active:S}=w;d(n.onDragStart({active:S}))},onDragMove(w){let{active:S,over:T}=w;n.onDragMove&&d(n.onDragMove({active:S,over:T}))},onDragOver(w){let{active:S,over:T}=w;d(n.onDragOver({active:S,over:T}))},onDragEnd(w){let{active:S,over:T}=w;d(n.onDragEnd({active:S,over:T}))},onDragCancel(w){let{active:S,over:T}=w;d(n.onDragCancel({active:S,over:T}))}}),[d,n])),!p)return null;const v=We.createElement(We.Fragment,null,We.createElement(cA,{id:r,value:o.draggable}),We.createElement(dA,{id:g,announcement:h}));return a?ec.createPortal(v,a):v}var Gn;(function(e){e.DragStart="dragStart",e.DragMove="dragMove",e.DragEnd="dragEnd",e.DragCancel="dragCancel",e.DragOver="dragOver",e.RegisterDroppable="registerDroppable",e.SetDroppableDisabled="setDroppableDisabled",e.UnregisterDroppable="unregisterDroppable"})(Gn||(Gn={}));function Ih(){}function Rj(e,n){return b.useMemo(()=>({sensor:e,options:n??{}}),[e,n])}function xA(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return b.useMemo(()=>[...n].filter(r=>r!=null),[...n])}const Fs=Object.freeze({x:0,y:0});function O2(e,n){return Math.sqrt(Math.pow(e.x-n.x,2)+Math.pow(e.y-n.y,2))}function P2(e,n){let{data:{value:a}}=e,{data:{value:r}}=n;return a-r}function yA(e,n){let{data:{value:a}}=e,{data:{value:r}}=n;return r-a}function Aj(e){let{left:n,top:a,height:r,width:o}=e;return[{x:n,y:a},{x:n+o,y:a},{x:n,y:a+r},{x:n+o,y:a+r}]}function L2(e,n){if(!e||e.length===0)return null;const[a]=e;return a[n]}function Dj(e,n,a){return n===void 0&&(n=e.left),a===void 0&&(a=e.top),{x:n+e.width*.5,y:a+e.height*.5}}const bA=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:r}=e;const o=Dj(n,n.left,n.top),d=[];for(const h of r){const{id:g}=h,p=a.get(g);if(p){const f=O2(Dj(p),o);d.push({id:g,data:{droppableContainer:h,value:f}})}}return d.sort(P2)},vA=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:r}=e;const o=Aj(n),d=[];for(const h of r){const{id:g}=h,p=a.get(g);if(p){const f=Aj(p),v=o.reduce((S,T,C)=>S+O2(f[C],T),0),w=Number((v/4).toFixed(4));d.push({id:g,data:{droppableContainer:h,value:w}})}}return d.sort(P2)};function jA(e,n){const a=Math.max(n.top,e.top),r=Math.max(n.left,e.left),o=Math.min(n.left+n.width,e.left+e.width),d=Math.min(n.top+n.height,e.top+e.height),h=o-r,g=d-a;if(r<o&&a<d){const p=n.width*n.height,f=e.width*e.height,v=h*g,w=v/(p+f-v);return Number(w.toFixed(4))}return 0}const wA=e=>{let{collisionRect:n,droppableRects:a,droppableContainers:r}=e;const o=[];for(const d of r){const{id:h}=d,g=a.get(h);if(g){const p=jA(g,n);p>0&&o.push({id:h,data:{droppableContainer:d,value:p}})}}return o.sort(yA)};function NA(e,n,a){return{...e,scaleX:n&&a?n.width/a.width:1,scaleY:n&&a?n.height/a.height:1}}function z2(e,n){return e&&n?{x:e.left-n.left,y:e.top-n.top}:Fs}function _A(e){return function(a){for(var r=arguments.length,o=new Array(r>1?r-1:0),d=1;d<r;d++)o[d-1]=arguments[d];return o.reduce((h,g)=>({...h,top:h.top+e*g.y,bottom:h.bottom+e*g.y,left:h.left+e*g.x,right:h.right+e*g.x}),{...a})}}const SA=_A(1);function CA(e){if(e.startsWith("matrix3d(")){const n=e.slice(9,-1).split(/, /);return{x:+n[12],y:+n[13],scaleX:+n[0],scaleY:+n[5]}}else if(e.startsWith("matrix(")){const n=e.slice(7,-1).split(/, /);return{x:+n[4],y:+n[5],scaleX:+n[0],scaleY:+n[3]}}return null}function kA(e,n,a){const r=CA(n);if(!r)return e;const{scaleX:o,scaleY:d,x:h,y:g}=r,p=e.left-h-(1-o)*parseFloat(a),f=e.top-g-(1-d)*parseFloat(a.slice(a.indexOf(" ")+1)),v=o?e.width/o:e.width,w=d?e.height/d:e.height;return{width:v,height:w,top:f,right:p+v,bottom:f+w,left:p}}const TA={ignoreTransform:!1};function Ec(e,n){n===void 0&&(n=TA);let a=e.getBoundingClientRect();if(n.ignoreTransform){const{transform:f,transformOrigin:v}=Ua(e).getComputedStyle(e);f&&(a=kA(a,f,v))}const{top:r,left:o,width:d,height:h,bottom:g,right:p}=a;return{top:r,left:o,width:d,height:h,bottom:g,right:p}}function Oj(e){return Ec(e,{ignoreTransform:!0})}function EA(e){const n=e.innerWidth,a=e.innerHeight;return{top:0,left:0,right:n,bottom:a,width:n,height:a}}function MA(e,n){return n===void 0&&(n=Ua(e).getComputedStyle(e)),n.position==="fixed"}function RA(e,n){n===void 0&&(n=Ua(e).getComputedStyle(e));const a=/(auto|scroll|overlay)/;return["overflow","overflowX","overflowY"].some(o=>{const d=n[o];return typeof d=="string"?a.test(d):!1})}function bf(e,n){const a=[];function r(o){if(n!=null&&a.length>=n||!o)return a;if(I0(o)&&o.scrollingElement!=null&&!a.includes(o.scrollingElement))return a.push(o.scrollingElement),a;if(!Mu(o)||R2(o)||a.includes(o))return a;const d=Ua(e).getComputedStyle(o);return o!==e&&RA(o,d)&&a.push(o),MA(o,d)?a:r(o.parentNode)}return e?r(e):a}function I2(e){const[n]=bf(e,1);return n??null}function Jg(e){return!yf||!e?null:kc(e)?e:z0(e)?I0(e)||e===Tc(e).scrollingElement?window:Mu(e)?e:null:null}function B2(e){return kc(e)?e.scrollX:e.scrollLeft}function $2(e){return kc(e)?e.scrollY:e.scrollTop}function Ix(e){return{x:B2(e),y:$2(e)}}var ra;(function(e){e[e.Forward=1]="Forward",e[e.Backward=-1]="Backward"})(ra||(ra={}));function F2(e){return!yf||!e?!1:e===document.scrollingElement}function U2(e){const n={x:0,y:0},a=F2(e)?{height:window.innerHeight,width:window.innerWidth}:{height:e.clientHeight,width:e.clientWidth},r={x:e.scrollWidth-a.width,y:e.scrollHeight-a.height},o=e.scrollTop<=n.y,d=e.scrollLeft<=n.x,h=e.scrollTop>=r.y,g=e.scrollLeft>=r.x;return{isTop:o,isLeft:d,isBottom:h,isRight:g,maxScroll:r,minScroll:n}}const AA={x:.2,y:.2};function DA(e,n,a,r,o){let{top:d,left:h,right:g,bottom:p}=a;r===void 0&&(r=10),o===void 0&&(o=AA);const{isTop:f,isBottom:v,isLeft:w,isRight:S}=U2(e),T={x:0,y:0},C={x:0,y:0},_={height:n.height*o.y,width:n.width*o.x};return!f&&d<=n.top+_.height?(T.y=ra.Backward,C.y=r*Math.abs((n.top+_.height-d)/_.height)):!v&&p>=n.bottom-_.height&&(T.y=ra.Forward,C.y=r*Math.abs((n.bottom-_.height-p)/_.height)),!S&&g>=n.right-_.width?(T.x=ra.Forward,C.x=r*Math.abs((n.right-_.width-g)/_.width)):!w&&h<=n.left+_.width&&(T.x=ra.Backward,C.x=r*Math.abs((n.left+_.width-h)/_.width)),{direction:T,speed:C}}function OA(e){if(e===document.scrollingElement){const{innerWidth:d,innerHeight:h}=window;return{top:0,left:0,right:d,bottom:h,width:d,height:h}}const{top:n,left:a,right:r,bottom:o}=e.getBoundingClientRect();return{top:n,left:a,right:r,bottom:o,width:e.clientWidth,height:e.clientHeight}}function H2(e){return e.reduce((n,a)=>ic(n,Ix(a)),Fs)}function PA(e){return e.reduce((n,a)=>n+B2(a),0)}function LA(e){return e.reduce((n,a)=>n+$2(a),0)}function zA(e,n){if(n===void 0&&(n=Ec),!e)return;const{top:a,left:r,bottom:o,right:d}=n(e);I2(e)&&(o<=0||d<=0||a>=window.innerHeight||r>=window.innerWidth)&&e.scrollIntoView({block:"center",inline:"center"})}const IA=[["x",["left","right"],PA],["y",["top","bottom"],LA]];class F0{constructor(n,a){this.rect=void 0,this.width=void 0,this.height=void 0,this.top=void 0,this.bottom=void 0,this.right=void 0,this.left=void 0;const r=bf(a),o=H2(r);this.rect={...n},this.width=n.width,this.height=n.height;for(const[d,h,g]of IA)for(const p of h)Object.defineProperty(this,p,{get:()=>{const f=g(r),v=o[d]-f;return this.rect[p]+v},enumerable:!0});Object.defineProperty(this,"rect",{enumerable:!1})}}class Zd{constructor(n){this.target=void 0,this.listeners=[],this.removeAll=()=>{this.listeners.forEach(a=>{var r;return(r=this.target)==null?void 0:r.removeEventListener(...a)})},this.target=n}add(n,a,r){var o;(o=this.target)==null||o.addEventListener(n,a,r),this.listeners.push([n,a,r])}}function BA(e){const{EventTarget:n}=Ua(e);return e instanceof n?e:Tc(e)}function ex(e,n){const a=Math.abs(e.x),r=Math.abs(e.y);return typeof n=="number"?Math.sqrt(a**2+r**2)>n:"x"in n&&"y"in n?a>n.x&&r>n.y:"x"in n?a>n.x:"y"in n?r>n.y:!1}var ws;(function(e){e.Click="click",e.DragStart="dragstart",e.Keydown="keydown",e.ContextMenu="contextmenu",e.Resize="resize",e.SelectionChange="selectionchange",e.VisibilityChange="visibilitychange"})(ws||(ws={}));function Pj(e){e.preventDefault()}function $A(e){e.stopPropagation()}var _t;(function(e){e.Space="Space",e.Down="ArrowDown",e.Right="ArrowRight",e.Left="ArrowLeft",e.Up="ArrowUp",e.Esc="Escape",e.Enter="Enter",e.Tab="Tab"})(_t||(_t={}));const q2={start:[_t.Space,_t.Enter],cancel:[_t.Esc],end:[_t.Space,_t.Enter,_t.Tab]},FA=(e,n)=>{let{currentCoordinates:a}=n;switch(e.code){case _t.Right:return{...a,x:a.x+25};case _t.Left:return{...a,x:a.x-25};case _t.Down:return{...a,y:a.y+25};case _t.Up:return{...a,y:a.y-25}}};class U0{constructor(n){this.props=void 0,this.autoScrollEnabled=!1,this.referenceCoordinates=void 0,this.listeners=void 0,this.windowListeners=void 0,this.props=n;const{event:{target:a}}=n;this.props=n,this.listeners=new Zd(Tc(a)),this.windowListeners=new Zd(Ua(a)),this.handleKeyDown=this.handleKeyDown.bind(this),this.handleCancel=this.handleCancel.bind(this),this.attach()}attach(){this.handleStart(),this.windowListeners.add(ws.Resize,this.handleCancel),this.windowListeners.add(ws.VisibilityChange,this.handleCancel),setTimeout(()=>this.listeners.add(ws.Keydown,this.handleKeyDown))}handleStart(){const{activeNode:n,onStart:a}=this.props,r=n.node.current;r&&zA(r),a(Fs)}handleKeyDown(n){if($0(n)){const{active:a,context:r,options:o}=this.props,{keyboardCodes:d=q2,coordinateGetter:h=FA,scrollBehavior:g="smooth"}=o,{code:p}=n;if(d.end.includes(p)){this.handleEnd(n);return}if(d.cancel.includes(p)){this.handleCancel(n);return}const{collisionRect:f}=r.current,v=f?{x:f.left,y:f.top}:Fs;this.referenceCoordinates||(this.referenceCoordinates=v);const w=h(n,{active:a,context:r.current,currentCoordinates:v});if(w){const S=du(w,v),T={x:0,y:0},{scrollableAncestors:C}=r.current;for(const _ of C){const k=n.code,{isTop:R,isRight:O,isLeft:P,isBottom:U,maxScroll:A,minScroll:$}=U2(_),E=OA(_),I={x:Math.min(k===_t.Right?E.right-E.width/2:E.right,Math.max(k===_t.Right?E.left:E.left+E.width/2,w.x)),y:Math.min(k===_t.Down?E.bottom-E.height/2:E.bottom,Math.max(k===_t.Down?E.top:E.top+E.height/2,w.y))},Z=k===_t.Right&&!O||k===_t.Left&&!P,F=k===_t.Down&&!U||k===_t.Up&&!R;if(Z&&I.x!==w.x){const Y=_.scrollLeft+S.x,G=k===_t.Right&&Y<=A.x||k===_t.Left&&Y>=$.x;if(G&&!S.y){_.scrollTo({left:Y,behavior:g});return}G?T.x=_.scrollLeft-Y:T.x=k===_t.Right?_.scrollLeft-A.x:_.scrollLeft-$.x,T.x&&_.scrollBy({left:-T.x,behavior:g});break}else if(F&&I.y!==w.y){const Y=_.scrollTop+S.y,G=k===_t.Down&&Y<=A.y||k===_t.Up&&Y>=$.y;if(G&&!S.x){_.scrollTo({top:Y,behavior:g});return}G?T.y=_.scrollTop-Y:T.y=k===_t.Down?_.scrollTop-A.y:_.scrollTop-$.y,T.y&&_.scrollBy({top:-T.y,behavior:g});break}}this.handleMove(n,ic(du(w,this.referenceCoordinates),T))}}}handleMove(n,a){const{onMove:r}=this.props;n.preventDefault(),r(a)}handleEnd(n){const{onEnd:a}=this.props;n.preventDefault(),this.detach(),a()}handleCancel(n){const{onCancel:a}=this.props;n.preventDefault(),this.detach(),a()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll()}}U0.activators=[{eventName:"onKeyDown",handler:(e,n,a)=>{let{keyboardCodes:r=q2,onActivation:o}=n,{active:d}=a;const{code:h}=e.nativeEvent;if(r.start.includes(h)){const g=d.activatorNode.current;return g&&e.target!==g?!1:(e.preventDefault(),o?.({event:e.nativeEvent}),!0)}return!1}}];function Lj(e){return!!(e&&"distance"in e)}function zj(e){return!!(e&&"delay"in e)}class H0{constructor(n,a,r){var o;r===void 0&&(r=BA(n.event.target)),this.props=void 0,this.events=void 0,this.autoScrollEnabled=!0,this.document=void 0,this.activated=!1,this.initialCoordinates=void 0,this.timeoutId=null,this.listeners=void 0,this.documentListeners=void 0,this.windowListeners=void 0,this.props=n,this.events=a;const{event:d}=n,{target:h}=d;this.props=n,this.events=a,this.document=Tc(h),this.documentListeners=new Zd(this.document),this.listeners=new Zd(r),this.windowListeners=new Zd(Ua(h)),this.initialCoordinates=(o=zx(d))!=null?o:Fs,this.handleStart=this.handleStart.bind(this),this.handleMove=this.handleMove.bind(this),this.handleEnd=this.handleEnd.bind(this),this.handleCancel=this.handleCancel.bind(this),this.handleKeydown=this.handleKeydown.bind(this),this.removeTextSelection=this.removeTextSelection.bind(this),this.attach()}attach(){const{events:n,props:{options:{activationConstraint:a,bypassActivationConstraint:r}}}=this;if(this.listeners.add(n.move.name,this.handleMove,{passive:!1}),this.listeners.add(n.end.name,this.handleEnd),n.cancel&&this.listeners.add(n.cancel.name,this.handleCancel),this.windowListeners.add(ws.Resize,this.handleCancel),this.windowListeners.add(ws.DragStart,Pj),this.windowListeners.add(ws.VisibilityChange,this.handleCancel),this.windowListeners.add(ws.ContextMenu,Pj),this.documentListeners.add(ws.Keydown,this.handleKeydown),a){if(r!=null&&r({event:this.props.event,activeNode:this.props.activeNode,options:this.props.options}))return this.handleStart();if(zj(a)){this.timeoutId=setTimeout(this.handleStart,a.delay),this.handlePending(a);return}if(Lj(a)){this.handlePending(a);return}}this.handleStart()}detach(){this.listeners.removeAll(),this.windowListeners.removeAll(),setTimeout(this.documentListeners.removeAll,50),this.timeoutId!==null&&(clearTimeout(this.timeoutId),this.timeoutId=null)}handlePending(n,a){const{active:r,onPending:o}=this.props;o(r,n,this.initialCoordinates,a)}handleStart(){const{initialCoordinates:n}=this,{onStart:a}=this.props;n&&(this.activated=!0,this.documentListeners.add(ws.Click,$A,{capture:!0}),this.removeTextSelection(),this.documentListeners.add(ws.SelectionChange,this.removeTextSelection),a(n))}handleMove(n){var a;const{activated:r,initialCoordinates:o,props:d}=this,{onMove:h,options:{activationConstraint:g}}=d;if(!o)return;const p=(a=zx(n))!=null?a:Fs,f=du(o,p);if(!r&&g){if(Lj(g)){if(g.tolerance!=null&&ex(f,g.tolerance))return this.handleCancel();if(ex(f,g.distance))return this.handleStart()}if(zj(g)&&ex(f,g.tolerance))return this.handleCancel();this.handlePending(g,f);return}n.cancelable&&n.preventDefault(),h(p)}handleEnd(){const{onAbort:n,onEnd:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleCancel(){const{onAbort:n,onCancel:a}=this.props;this.detach(),this.activated||n(this.props.active),a()}handleKeydown(n){n.code===_t.Esc&&this.handleCancel()}removeTextSelection(){var n;(n=this.document.getSelection())==null||n.removeAllRanges()}}const UA={cancel:{name:"pointercancel"},move:{name:"pointermove"},end:{name:"pointerup"}};class q0 extends H0{constructor(n){const{event:a}=n,r=Tc(a.target);super(n,UA,r)}}q0.activators=[{eventName:"onPointerDown",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:r}=n;return!a.isPrimary||a.button!==0?!1:(r?.({event:a}),!0)}}];const HA={move:{name:"mousemove"},end:{name:"mouseup"}};var Bx;(function(e){e[e.RightClick=2]="RightClick"})(Bx||(Bx={}));class qA extends H0{constructor(n){super(n,HA,Tc(n.event.target))}}qA.activators=[{eventName:"onMouseDown",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:r}=n;return a.button===Bx.RightClick?!1:(r?.({event:a}),!0)}}];const tx={cancel:{name:"touchcancel"},move:{name:"touchmove"},end:{name:"touchend"}};class YA extends H0{constructor(n){super(n,tx)}static setup(){return window.addEventListener(tx.move.name,n,{capture:!1,passive:!1}),function(){window.removeEventListener(tx.move.name,n)};function n(){}}}YA.activators=[{eventName:"onTouchStart",handler:(e,n)=>{let{nativeEvent:a}=e,{onActivation:r}=n;const{touches:o}=a;return o.length>1?!1:(r?.({event:a}),!0)}}];var Wd;(function(e){e[e.Pointer=0]="Pointer",e[e.DraggableRect=1]="DraggableRect"})(Wd||(Wd={}));var Bh;(function(e){e[e.TreeOrder=0]="TreeOrder",e[e.ReversedTreeOrder=1]="ReversedTreeOrder"})(Bh||(Bh={}));function VA(e){let{acceleration:n,activator:a=Wd.Pointer,canScroll:r,draggingRect:o,enabled:d,interval:h=5,order:g=Bh.TreeOrder,pointerCoordinates:p,scrollableAncestors:f,scrollableAncestorRects:v,delta:w,threshold:S}=e;const T=WA({delta:w,disabled:!d}),[C,_]=sA(),k=b.useRef({x:0,y:0}),R=b.useRef({x:0,y:0}),O=b.useMemo(()=>{switch(a){case Wd.Pointer:return p?{top:p.y,bottom:p.y,left:p.x,right:p.x}:null;case Wd.DraggableRect:return o}},[a,o,p]),P=b.useRef(null),U=b.useCallback(()=>{const $=P.current;if(!$)return;const E=k.current.x*R.current.x,I=k.current.y*R.current.y;$.scrollBy(E,I)},[]),A=b.useMemo(()=>g===Bh.TreeOrder?[...f].reverse():f,[g,f]);b.useEffect(()=>{if(!d||!f.length||!O){_();return}for(const $ of A){if(r?.($)===!1)continue;const E=f.indexOf($),I=v[E];if(!I)continue;const{direction:Z,speed:F}=DA($,I,O,n,S);for(const Y of["x","y"])T[Y][Z[Y]]||(F[Y]=0,Z[Y]=0);if(F.x>0||F.y>0){_(),P.current=$,C(U,h),k.current=F,R.current=Z;return}}k.current={x:0,y:0},R.current={x:0,y:0},_()},[n,U,r,_,d,h,JSON.stringify(O),JSON.stringify(T),C,f,A,v,JSON.stringify(S)])}const ZA={x:{[ra.Backward]:!1,[ra.Forward]:!1},y:{[ra.Backward]:!1,[ra.Forward]:!1}};function WA(e){let{delta:n,disabled:a}=e;const r=Lx(n);return Ru(o=>{if(a||!r||!o)return ZA;const d={x:Math.sign(n.x-r.x),y:Math.sign(n.y-r.y)};return{x:{[ra.Backward]:o.x[ra.Backward]||d.x===-1,[ra.Forward]:o.x[ra.Forward]||d.x===1},y:{[ra.Backward]:o.y[ra.Backward]||d.y===-1,[ra.Forward]:o.y[ra.Forward]||d.y===1}}},[a,n,r])}function KA(e,n){const a=n!=null?e.get(n):void 0,r=a?a.node.current:null;return Ru(o=>{var d;return n==null?null:(d=r??o)!=null?d:null},[r,n])}function GA(e,n){return b.useMemo(()=>e.reduce((a,r)=>{const{sensor:o}=r,d=o.activators.map(h=>({eventName:h.eventName,handler:n(h.handler,r)}));return[...a,...d]},[]),[e,n])}var mu;(function(e){e[e.Always=0]="Always",e[e.BeforeDragging=1]="BeforeDragging",e[e.WhileDragging=2]="WhileDragging"})(mu||(mu={}));var $x;(function(e){e.Optimized="optimized"})($x||($x={}));const Ij=new Map;function QA(e,n){let{dragging:a,dependencies:r,config:o}=n;const[d,h]=b.useState(null),{frequency:g,measure:p,strategy:f}=o,v=b.useRef(e),w=k(),S=cu(w),T=b.useCallback(function(R){R===void 0&&(R=[]),!S.current&&h(O=>O===null?R:O.concat(R.filter(P=>!O.includes(P))))},[S]),C=b.useRef(null),_=Ru(R=>{if(w&&!a)return Ij;if(!R||R===Ij||v.current!==e||d!=null){const O=new Map;for(let P of e){if(!P)continue;if(d&&d.length>0&&!d.includes(P.id)&&P.rect.current){O.set(P.id,P.rect.current);continue}const U=P.node.current,A=U?new F0(p(U),U):null;P.rect.current=A,A&&O.set(P.id,A)}return O}return R},[e,d,a,w,p]);return b.useEffect(()=>{v.current=e},[e]),b.useEffect(()=>{w||T()},[a,w]),b.useEffect(()=>{d&&d.length>0&&h(null)},[JSON.stringify(d)]),b.useEffect(()=>{w||typeof g!="number"||C.current!==null||(C.current=setTimeout(()=>{T(),C.current=null},g))},[g,w,T,...r]),{droppableRects:_,measureDroppableContainers:T,measuringScheduled:d!=null};function k(){switch(f){case mu.Always:return!1;case mu.BeforeDragging:return a;default:return!a}}}function Y2(e,n){return Ru(a=>e?a||(typeof n=="function"?n(e):e):null,[n,e])}function XA(e,n){return Y2(e,n)}function JA(e){let{callback:n,disabled:a}=e;const r=B0(n),o=b.useMemo(()=>{if(a||typeof window>"u"||typeof window.MutationObserver>"u")return;const{MutationObserver:d}=window;return new d(r)},[r,a]);return b.useEffect(()=>()=>o?.disconnect(),[o]),o}function vf(e){let{callback:n,disabled:a}=e;const r=B0(n),o=b.useMemo(()=>{if(a||typeof window>"u"||typeof window.ResizeObserver>"u")return;const{ResizeObserver:d}=window;return new d(r)},[a]);return b.useEffect(()=>()=>o?.disconnect(),[o]),o}function e6(e){return new F0(Ec(e),e)}function Bj(e,n,a){n===void 0&&(n=e6);const[r,o]=b.useState(null);function d(){o(p=>{if(!e)return null;if(e.isConnected===!1){var f;return(f=p??a)!=null?f:null}const v=n(e);return JSON.stringify(p)===JSON.stringify(v)?p:v})}const h=JA({callback(p){if(e)for(const f of p){const{type:v,target:w}=f;if(v==="childList"&&w instanceof HTMLElement&&w.contains(e)){d();break}}}}),g=vf({callback:d});return gr(()=>{d(),e?(g?.observe(e),h?.observe(document.body,{childList:!0,subtree:!0})):(g?.disconnect(),h?.disconnect())},[e]),r}function t6(e){const n=Y2(e);return z2(e,n)}const $j=[];function n6(e){const n=b.useRef(e),a=Ru(r=>e?r&&r!==$j&&e&&n.current&&e.parentNode===n.current.parentNode?r:bf(e):$j,[e]);return b.useEffect(()=>{n.current=e},[e]),a}function a6(e){const[n,a]=b.useState(null),r=b.useRef(e),o=b.useCallback(d=>{const h=Jg(d.target);h&&a(g=>g?(g.set(h,Ix(h)),new Map(g)):null)},[]);return b.useEffect(()=>{const d=r.current;if(e!==d){h(d);const g=e.map(p=>{const f=Jg(p);return f?(f.addEventListener("scroll",o,{passive:!0}),[f,Ix(f)]):null}).filter(p=>p!=null);a(g.length?new Map(g):null),r.current=e}return()=>{h(e),h(d)};function h(g){g.forEach(p=>{const f=Jg(p);f?.removeEventListener("scroll",o)})}},[o,e]),b.useMemo(()=>e.length?n?Array.from(n.values()).reduce((d,h)=>ic(d,h),Fs):H2(e):Fs,[e,n])}function Fj(e,n){n===void 0&&(n=[]);const a=b.useRef(null);return b.useEffect(()=>{a.current=null},n),b.useEffect(()=>{const r=e!==Fs;r&&!a.current&&(a.current=e),!r&&a.current&&(a.current=null)},[e]),a.current?du(e,a.current):Fs}function s6(e){b.useEffect(()=>{if(!yf)return;const n=e.map(a=>{let{sensor:r}=a;return r.setup==null?void 0:r.setup()});return()=>{for(const a of n)a?.()}},e.map(n=>{let{sensor:a}=n;return a}))}function r6(e,n){return b.useMemo(()=>e.reduce((a,r)=>{let{eventName:o,handler:d}=r;return a[o]=h=>{d(h,n)},a},{}),[e,n])}function V2(e){return b.useMemo(()=>e?EA(e):null,[e])}const Uj=[];function i6(e,n){n===void 0&&(n=Ec);const[a]=e,r=V2(a?Ua(a):null),[o,d]=b.useState(Uj);function h(){d(()=>e.length?e.map(p=>F2(p)?r:new F0(n(p),p)):Uj)}const g=vf({callback:h});return gr(()=>{g?.disconnect(),h(),e.forEach(p=>g?.observe(p))},[e]),o}function l6(e){if(!e)return null;if(e.children.length>1)return e;const n=e.children[0];return Mu(n)?n:e}function o6(e){let{measure:n}=e;const[a,r]=b.useState(null),o=b.useCallback(f=>{for(const{target:v}of f)if(Mu(v)){r(w=>{const S=n(v);return w?{...w,width:S.width,height:S.height}:S});break}},[n]),d=vf({callback:o}),h=b.useCallback(f=>{const v=l6(f);d?.disconnect(),v&&d?.observe(v),r(v?n(v):null)},[n,d]),[g,p]=zh(h);return b.useMemo(()=>({nodeRef:g,rect:a,setRef:p}),[a,g,p])}const c6=[{sensor:q0,options:{}},{sensor:U0,options:{}}],d6={current:{}},Sh={draggable:{measure:Oj},droppable:{measure:Oj,strategy:mu.WhileDragging,frequency:$x.Optimized},dragOverlay:{measure:Ec}};class Kd extends Map{get(n){var a;return n!=null&&(a=super.get(n))!=null?a:void 0}toArray(){return Array.from(this.values())}getEnabled(){return this.toArray().filter(n=>{let{disabled:a}=n;return!a})}getNodeFor(n){var a,r;return(a=(r=this.get(n))==null?void 0:r.node.current)!=null?a:void 0}}const u6={activatorEvent:null,active:null,activeNode:null,activeNodeRect:null,collisions:null,containerNodeRect:null,draggableNodes:new Map,droppableRects:new Map,droppableContainers:new Kd,over:null,dragOverlay:{nodeRef:{current:null},rect:null,setRef:Ih},scrollableAncestors:[],scrollableAncestorRects:[],measuringConfiguration:Sh,measureDroppableContainers:Ih,windowRect:null,measuringScheduled:!1},m6={activatorEvent:null,activators:[],active:null,activeNodeRect:null,ariaDescribedById:{draggable:""},dispatch:Ih,draggableNodes:new Map,over:null,measureDroppableContainers:Ih},jf=b.createContext(m6),Z2=b.createContext(u6);function h6(){return{draggable:{active:null,initialCoordinates:{x:0,y:0},nodes:new Map,translate:{x:0,y:0}},droppable:{containers:new Kd}}}function f6(e,n){switch(n.type){case Gn.DragStart:return{...e,draggable:{...e.draggable,initialCoordinates:n.initialCoordinates,active:n.active}};case Gn.DragMove:return e.draggable.active==null?e:{...e,draggable:{...e.draggable,translate:{x:n.coordinates.x-e.draggable.initialCoordinates.x,y:n.coordinates.y-e.draggable.initialCoordinates.y}}};case Gn.DragEnd:case Gn.DragCancel:return{...e,draggable:{...e.draggable,active:null,initialCoordinates:{x:0,y:0},translate:{x:0,y:0}}};case Gn.RegisterDroppable:{const{element:a}=n,{id:r}=a,o=new Kd(e.droppable.containers);return o.set(r,a),{...e,droppable:{...e.droppable,containers:o}}}case Gn.SetDroppableDisabled:{const{id:a,key:r,disabled:o}=n,d=e.droppable.containers.get(a);if(!d||r!==d.key)return e;const h=new Kd(e.droppable.containers);return h.set(a,{...d,disabled:o}),{...e,droppable:{...e.droppable,containers:h}}}case Gn.UnregisterDroppable:{const{id:a,key:r}=n,o=e.droppable.containers.get(a);if(!o||r!==o.key)return e;const d=new Kd(e.droppable.containers);return d.delete(a),{...e,droppable:{...e.droppable,containers:d}}}default:return e}}function p6(e){let{disabled:n}=e;const{active:a,activatorEvent:r,draggableNodes:o}=b.useContext(jf),d=Lx(r),h=Lx(a?.id);return b.useEffect(()=>{if(!n&&!r&&d&&h!=null){if(!$0(d)||document.activeElement===d.target)return;const g=o.get(h);if(!g)return;const{activatorNode:p,node:f}=g;if(!p.current&&!f.current)return;requestAnimationFrame(()=>{for(const v of[p.current,f.current]){if(!v)continue;const w=lA(v);if(w){w.focus();break}}})}},[r,n,o,h,d]),null}function g6(e,n){let{transform:a,...r}=n;return e!=null&&e.length?e.reduce((o,d)=>d({transform:o,...r}),a):a}function x6(e){return b.useMemo(()=>({draggable:{...Sh.draggable,...e?.draggable},droppable:{...Sh.droppable,...e?.droppable},dragOverlay:{...Sh.dragOverlay,...e?.dragOverlay}}),[e?.draggable,e?.droppable,e?.dragOverlay])}function y6(e){let{activeNode:n,measure:a,initialRect:r,config:o=!0}=e;const d=b.useRef(!1),{x:h,y:g}=typeof o=="boolean"?{x:o,y:o}:o;gr(()=>{if(!h&&!g||!n){d.current=!1;return}if(d.current||!r)return;const f=n?.node.current;if(!f||f.isConnected===!1)return;const v=a(f),w=z2(v,r);if(h||(w.x=0),g||(w.y=0),d.current=!0,Math.abs(w.x)>0||Math.abs(w.y)>0){const S=I2(f);S&&S.scrollBy({top:w.y,left:w.x})}},[n,h,g,r,a])}const W2=b.createContext({...Fs,scaleX:1,scaleY:1});var Qi;(function(e){e[e.Uninitialized=0]="Uninitialized",e[e.Initializing=1]="Initializing",e[e.Initialized=2]="Initialized"})(Qi||(Qi={}));const b6=b.memo(function(n){var a,r,o,d;let{id:h,accessibility:g,autoScroll:p=!0,children:f,sensors:v=c6,collisionDetection:w=wA,measuring:S,modifiers:T,...C}=n;const _=b.useReducer(f6,void 0,h6),[k,R]=_,[O,P]=hA(),[U,A]=b.useState(Qi.Uninitialized),$=U===Qi.Initialized,{draggable:{active:E,nodes:I,translate:Z},droppable:{containers:F}}=k,Y=E!=null?I.get(E):null,G=b.useRef({initial:null,translated:null}),V=b.useMemo(()=>{var $e;return E!=null?{id:E,data:($e=Y?.data)!=null?$e:d6,rect:G}:null},[E,Y]),H=b.useRef(null),[Q,K]=b.useState(null),[oe,W]=b.useState(null),X=cu(C,Object.values(C)),z=Au("DndDescribedBy",h),J=b.useMemo(()=>F.getEnabled(),[F]),se=x6(S),{droppableRects:ae,measureDroppableContainers:ee,measuringScheduled:re}=QA(J,{dragging:$,dependencies:[Z.x,Z.y],config:se.droppable}),me=KA(I,E),ye=b.useMemo(()=>oe?zx(oe):null,[oe]),Ce=Me(),de=XA(me,se.draggable.measure);y6({activeNode:E!=null?I.get(E):null,config:Ce.layoutShiftCompensation,initialRect:de,measure:se.draggable.measure});const te=Bj(me,se.draggable.measure,de),_e=Bj(me?me.parentElement:null),Ie=b.useRef({activatorEvent:null,active:null,activeNode:me,collisionRect:null,collisions:null,droppableRects:ae,draggableNodes:I,draggingNode:null,draggingNodeRect:null,droppableContainers:F,over:null,scrollableAncestors:[],scrollAdjustedTranslate:null}),at=F.getNodeFor((a=Ie.current.over)==null?void 0:a.id),Je=o6({measure:se.dragOverlay.measure}),it=(r=Je.nodeRef.current)!=null?r:me,Te=$?(o=Je.rect)!=null?o:te:null,Fe=!!(Je.nodeRef.current&&Je.rect),wt=t6(Fe?null:te),Nt=V2(it?Ua(it):null),ut=n6($?at??me:null),Ee=i6(ut),Pe=g6(T,{transform:{x:Z.x-wt.x,y:Z.y-wt.y,scaleX:1,scaleY:1},activatorEvent:oe,active:V,activeNodeRect:te,containerNodeRect:_e,draggingNodeRect:Te,over:Ie.current.over,overlayNodeRect:Je.rect,scrollableAncestors:ut,scrollableAncestorRects:Ee,windowRect:Nt}),qe=ye?ic(ye,Z):null,De=a6(ut),He=Fj(De),ct=Fj(De,[te]),ce=ic(Pe,He),Oe=Te?SA(Te,Pe):null,Le=V&&Oe?w({active:V,collisionRect:Oe,droppableRects:ae,droppableContainers:J,pointerCoordinates:qe}):null,Ct=L2(Le,"id"),[rn,Fn]=b.useState(null),Un=Fe?Pe:ic(Pe,ct),Nn=NA(Un,(d=rn?.rect)!=null?d:null,te),ln=b.useRef(null),la=b.useCallback(($e,Qe)=>{let{sensor:Yt,options:At}=Qe;if(H.current==null)return;const Rn=I.get(H.current);if(!Rn)return;const _n=$e.nativeEvent,oa=new Yt({active:H.current,activeNode:Rn,event:_n,options:At,context:Ie,onAbort(Pt){if(!I.get(Pt))return;const{onDragAbort:Qt}=X.current,Jn={id:Pt};Qt?.(Jn),O({type:"onDragAbort",event:Jn})},onPending(Pt,Gt,Qt,Jn){if(!I.get(Pt))return;const{onDragPending:Ve}=X.current,Ha={id:Pt,constraint:Gt,initialCoordinates:Qt,offset:Jn};Ve?.(Ha),O({type:"onDragPending",event:Ha})},onStart(Pt){const Gt=H.current;if(Gt==null)return;const Qt=I.get(Gt);if(!Qt)return;const{onDragStart:Jn}=X.current,Hn={activatorEvent:_n,active:{id:Gt,data:Qt.data,rect:G}};ec.unstable_batchedUpdates(()=>{Jn?.(Hn),A(Qi.Initializing),R({type:Gn.DragStart,initialCoordinates:Pt,active:Gt}),O({type:"onDragStart",event:Hn}),K(ln.current),W(_n)})},onMove(Pt){R({type:Gn.DragMove,coordinates:Pt})},onEnd:Ma(Gn.DragEnd),onCancel:Ma(Gn.DragCancel)});ln.current=oa;function Ma(Pt){return async function(){const{active:Qt,collisions:Jn,over:Hn,scrollAdjustedTranslate:Ve}=Ie.current;let Ha=null;if(Qt&&Ve){const{cancelDrop:Ts}=X.current;Ha={activatorEvent:_n,active:Qt,collisions:Jn,delta:Ve,over:Hn},Pt===Gn.DragEnd&&typeof Ts=="function"&&await Promise.resolve(Ts(Ha))&&(Pt=Gn.DragCancel)}H.current=null,ec.unstable_batchedUpdates(()=>{R({type:Pt}),A(Qi.Uninitialized),Fn(null),K(null),W(null),ln.current=null;const Ts=Pt===Gn.DragEnd?"onDragEnd":"onDragCancel";if(Ha){const os=X.current[Ts];os?.(Ha),O({type:Ts,event:Ha})}})}}},[I]),Mn=b.useCallback(($e,Qe)=>(Yt,At)=>{const Rn=Yt.nativeEvent,_n=I.get(At);if(H.current!==null||!_n||Rn.dndKit||Rn.defaultPrevented)return;const oa={active:_n};$e(Yt,Qe.options,oa)===!0&&(Rn.dndKit={capturedBy:Qe.sensor},H.current=At,la(Yt,Qe))},[I,la]),he=GA(v,Mn);s6(v),gr(()=>{te&&U===Qi.Initializing&&A(Qi.Initialized)},[te,U]),b.useEffect(()=>{const{onDragMove:$e}=X.current,{active:Qe,activatorEvent:Yt,collisions:At,over:Rn}=Ie.current;if(!Qe||!Yt)return;const _n={active:Qe,activatorEvent:Yt,collisions:At,delta:{x:ce.x,y:ce.y},over:Rn};ec.unstable_batchedUpdates(()=>{$e?.(_n),O({type:"onDragMove",event:_n})})},[ce.x,ce.y]),b.useEffect(()=>{const{active:$e,activatorEvent:Qe,collisions:Yt,droppableContainers:At,scrollAdjustedTranslate:Rn}=Ie.current;if(!$e||H.current==null||!Qe||!Rn)return;const{onDragOver:_n}=X.current,oa=At.get(Ct),Ma=oa&&oa.rect.current?{id:oa.id,rect:oa.rect.current,data:oa.data,disabled:oa.disabled}:null,Pt={active:$e,activatorEvent:Qe,collisions:Yt,delta:{x:Rn.x,y:Rn.y},over:Ma};ec.unstable_batchedUpdates(()=>{Fn(Ma),_n?.(Pt),O({type:"onDragOver",event:Pt})})},[Ct]),gr(()=>{Ie.current={activatorEvent:oe,active:V,activeNode:me,collisionRect:Oe,collisions:Le,droppableRects:ae,draggableNodes:I,draggingNode:it,draggingNodeRect:Te,droppableContainers:F,over:rn,scrollableAncestors:ut,scrollAdjustedTranslate:ce},G.current={initial:Te,translated:Oe}},[V,me,Le,Oe,I,it,Te,ae,F,rn,ut,ce]),VA({...Ce,delta:Z,draggingRect:Oe,pointerCoordinates:qe,scrollableAncestors:ut,scrollableAncestorRects:Ee});const tt=b.useMemo(()=>({active:V,activeNode:me,activeNodeRect:te,activatorEvent:oe,collisions:Le,containerNodeRect:_e,dragOverlay:Je,draggableNodes:I,droppableContainers:F,droppableRects:ae,over:rn,measureDroppableContainers:ee,scrollableAncestors:ut,scrollableAncestorRects:Ee,measuringConfiguration:se,measuringScheduled:re,windowRect:Nt}),[V,me,te,oe,Le,_e,Je,I,F,ae,rn,ee,ut,Ee,se,re,Nt]),ne=b.useMemo(()=>({activatorEvent:oe,activators:he,active:V,activeNodeRect:te,ariaDescribedById:{draggable:z},dispatch:R,draggableNodes:I,over:rn,measureDroppableContainers:ee}),[oe,he,V,te,R,z,I,rn,ee]);return We.createElement(D2.Provider,{value:P},We.createElement(jf.Provider,{value:ne},We.createElement(Z2.Provider,{value:tt},We.createElement(W2.Provider,{value:Nn},f)),We.createElement(p6,{disabled:g?.restoreFocus===!1})),We.createElement(gA,{...g,hiddenTextDescribedById:z}));function Me(){const $e=Q?.autoScrollEnabled===!1,Qe=typeof p=="object"?p.enabled===!1:p===!1,Yt=$&&!$e&&!Qe;return typeof p=="object"?{...p,enabled:Yt}:{enabled:Yt}}}),v6=b.createContext(null),Hj="button",j6="Draggable";function w6(e){let{id:n,data:a,disabled:r=!1,attributes:o}=e;const d=Au(j6),{activators:h,activatorEvent:g,active:p,activeNodeRect:f,ariaDescribedById:v,draggableNodes:w,over:S}=b.useContext(jf),{role:T=Hj,roleDescription:C="draggable",tabIndex:_=0}=o??{},k=p?.id===n,R=b.useContext(k?W2:v6),[O,P]=zh(),[U,A]=zh(),$=r6(h,n),E=cu(a);gr(()=>(w.set(n,{id:n,key:d,node:O,activatorNode:U,data:E}),()=>{const Z=w.get(n);Z&&Z.key===d&&w.delete(n)}),[w,n]);const I=b.useMemo(()=>({role:T,tabIndex:_,"aria-disabled":r,"aria-pressed":k&&T===Hj?!0:void 0,"aria-roledescription":C,"aria-describedby":v.draggable}),[r,T,_,k,C,v.draggable]);return{active:p,activatorEvent:g,activeNodeRect:f,attributes:I,isDragging:k,listeners:r?void 0:$,node:O,over:S,setNodeRef:P,setActivatorNodeRef:A,transform:R}}function N6(){return b.useContext(Z2)}const _6="Droppable",S6={timeout:25};function C6(e){let{data:n,disabled:a=!1,id:r,resizeObserverConfig:o}=e;const d=Au(_6),{active:h,dispatch:g,over:p,measureDroppableContainers:f}=b.useContext(jf),v=b.useRef({disabled:a}),w=b.useRef(!1),S=b.useRef(null),T=b.useRef(null),{disabled:C,updateMeasurementsFor:_,timeout:k}={...S6,...o},R=cu(_??r),O=b.useCallback(()=>{if(!w.current){w.current=!0;return}T.current!=null&&clearTimeout(T.current),T.current=setTimeout(()=>{f(Array.isArray(R.current)?R.current:[R.current]),T.current=null},k)},[k]),P=vf({callback:O,disabled:C||!h}),U=b.useCallback((I,Z)=>{P&&(Z&&(P.unobserve(Z),w.current=!1),I&&P.observe(I))},[P]),[A,$]=zh(U),E=cu(n);return b.useEffect(()=>{!P||!A.current||(P.disconnect(),w.current=!1,P.observe(A.current))},[A,P]),b.useEffect(()=>(g({type:Gn.RegisterDroppable,element:{id:r,key:d,disabled:a,node:A,rect:S,data:E}}),()=>g({type:Gn.UnregisterDroppable,key:d,id:r})),[r]),b.useEffect(()=>{a!==v.current.disabled&&(g({type:Gn.SetDroppableDisabled,id:r,key:d,disabled:a}),v.current.disabled=a)},[r,d,a,g]),{active:h,rect:S,isOver:p?.id===r,node:A,over:p,setNodeRef:$}}function Y0(e,n,a){const r=e.slice();return r.splice(a<0?r.length+a:a,0,r.splice(n,1)[0]),r}function k6(e,n){return e.reduce((a,r,o)=>{const d=n.get(r);return d&&(a[o]=d),a},Array(e.length))}function mh(e){return e!==null&&e>=0}function T6(e,n){if(e===n)return!0;if(e.length!==n.length)return!1;for(let a=0;a<e.length;a++)if(e[a]!==n[a])return!1;return!0}function E6(e){return typeof e=="boolean"?{draggable:e,droppable:e}:e}const V0=e=>{let{rects:n,activeIndex:a,overIndex:r,index:o}=e;const d=Y0(n,r,a),h=n[o],g=d[o];return!g||!h?null:{x:g.left-h.left,y:g.top-h.top,scaleX:g.width/h.width,scaleY:g.height/h.height}},K2="Sortable",G2=We.createContext({activeIndex:-1,containerId:K2,disableTransforms:!1,items:[],overIndex:-1,useDragOverlay:!1,sortedRects:[],strategy:V0,disabled:{draggable:!1,droppable:!1}});function M6(e){let{children:n,id:a,items:r,strategy:o=V0,disabled:d=!1}=e;const{active:h,dragOverlay:g,droppableRects:p,over:f,measureDroppableContainers:v}=N6(),w=Au(K2,a),S=g.rect!==null,T=b.useMemo(()=>r.map($=>typeof $=="object"&&"id"in $?$.id:$),[r]),C=h!=null,_=h?T.indexOf(h.id):-1,k=f?T.indexOf(f.id):-1,R=b.useRef(T),O=!T6(T,R.current),P=k!==-1&&_===-1||O,U=E6(d);gr(()=>{O&&C&&v(T)},[O,T,C,v]),b.useEffect(()=>{R.current=T},[T]);const A=b.useMemo(()=>({activeIndex:_,containerId:w,disabled:U,disableTransforms:P,items:T,overIndex:k,useDragOverlay:S,sortedRects:k6(T,p),strategy:o}),[_,w,U.draggable,U.droppable,P,T,k,p,S,o]);return We.createElement(G2.Provider,{value:A},n)}const R6=e=>{let{id:n,items:a,activeIndex:r,overIndex:o}=e;return Y0(a,r,o).indexOf(n)},A6=e=>{let{containerId:n,isSorting:a,wasDragging:r,index:o,items:d,newIndex:h,previousItems:g,previousContainerId:p,transition:f}=e;return!f||!r||g!==d&&o===h?!1:a?!0:h!==o&&n===p},D6={duration:200,easing:"ease"},Q2="transform",O6=uu.Transition.toString({property:Q2,duration:0,easing:"linear"}),P6={roleDescription:"sortable"};function L6(e){let{disabled:n,index:a,node:r,rect:o}=e;const[d,h]=b.useState(null),g=b.useRef(a);return gr(()=>{if(!n&&a!==g.current&&r.current){const p=o.current;if(p){const f=Ec(r.current,{ignoreTransform:!0}),v={x:p.left-f.left,y:p.top-f.top,scaleX:p.width/f.width,scaleY:p.height/f.height};(v.x||v.y)&&h(v)}}a!==g.current&&(g.current=a)},[n,a,r,o]),b.useEffect(()=>{d&&h(null)},[d]),d}function z6(e){let{animateLayoutChanges:n=A6,attributes:a,disabled:r,data:o,getNewIndex:d=R6,id:h,strategy:g,resizeObserverConfig:p,transition:f=D6}=e;const{items:v,containerId:w,activeIndex:S,disabled:T,disableTransforms:C,sortedRects:_,overIndex:k,useDragOverlay:R,strategy:O}=b.useContext(G2),P=I6(r,T),U=v.indexOf(h),A=b.useMemo(()=>({sortable:{containerId:w,index:U,items:v},...o}),[w,o,U,v]),$=b.useMemo(()=>v.slice(v.indexOf(h)),[v,h]),{rect:E,node:I,isOver:Z,setNodeRef:F}=C6({id:h,data:A,disabled:P.droppable,resizeObserverConfig:{updateMeasurementsFor:$,...p}}),{active:Y,activatorEvent:G,activeNodeRect:V,attributes:H,setNodeRef:Q,listeners:K,isDragging:oe,over:W,setActivatorNodeRef:X,transform:z}=w6({id:h,data:A,attributes:{...P6,...a},disabled:P.draggable}),J=aA(F,Q),se=!!Y,ae=se&&!C&&mh(S)&&mh(k),ee=!R&&oe,re=ee&&ae?z:null,ye=ae?re??(g??O)({rects:_,activeNodeRect:V,activeIndex:S,overIndex:k,index:U}):null,Ce=mh(S)&&mh(k)?d({id:h,items:v,activeIndex:S,overIndex:k}):U,de=Y?.id,te=b.useRef({activeId:de,items:v,newIndex:Ce,containerId:w}),_e=v!==te.current.items,Ie=n({active:Y,containerId:w,isDragging:oe,isSorting:se,id:h,index:U,items:v,newIndex:te.current.newIndex,previousItems:te.current.items,previousContainerId:te.current.containerId,transition:f,wasDragging:te.current.activeId!=null}),at=L6({disabled:!Ie,index:U,node:I,rect:E});return b.useEffect(()=>{se&&te.current.newIndex!==Ce&&(te.current.newIndex=Ce),w!==te.current.containerId&&(te.current.containerId=w),v!==te.current.items&&(te.current.items=v)},[se,Ce,w,v]),b.useEffect(()=>{if(de===te.current.activeId)return;if(de!=null&&te.current.activeId==null){te.current.activeId=de;return}const it=setTimeout(()=>{te.current.activeId=de},50);return()=>clearTimeout(it)},[de]),{active:Y,activeIndex:S,attributes:H,data:A,rect:E,index:U,newIndex:Ce,items:v,isOver:Z,isSorting:se,isDragging:oe,listeners:K,node:I,overIndex:k,over:W,setNodeRef:J,setActivatorNodeRef:X,setDroppableNodeRef:F,setDraggableNodeRef:Q,transform:at??ye,transition:Je()};function Je(){if(at||_e&&te.current.newIndex===U)return O6;if(!(ee&&!$0(G)||!f)&&(se||Ie))return uu.Transition.toString({...f,property:Q2})}}function I6(e,n){var a,r;return typeof e=="boolean"?{draggable:e,droppable:!1}:{draggable:(a=e?.draggable)!=null?a:n.draggable,droppable:(r=e?.droppable)!=null?r:n.droppable}}function $h(e){if(!e)return!1;const n=e.data.current;return!!(n&&"sortable"in n&&typeof n.sortable=="object"&&"containerId"in n.sortable&&"items"in n.sortable&&"index"in n.sortable)}const B6=[_t.Down,_t.Right,_t.Up,_t.Left],$6=(e,n)=>{let{context:{active:a,collisionRect:r,droppableRects:o,droppableContainers:d,over:h,scrollableAncestors:g}}=n;if(B6.includes(e.code)){if(e.preventDefault(),!a||!r)return;const p=[];d.getEnabled().forEach(w=>{if(!w||w!=null&&w.disabled)return;const S=o.get(w.id);if(S)switch(e.code){case _t.Down:r.top<S.top&&p.push(w);break;case _t.Up:r.top>S.top&&p.push(w);break;case _t.Left:r.left>S.left&&p.push(w);break;case _t.Right:r.left<S.left&&p.push(w);break}});const f=vA({collisionRect:r,droppableRects:o,droppableContainers:p});let v=L2(f,"id");if(v===h?.id&&f.length>1&&(v=f[1].id),v!=null){const w=d.get(a.id),S=d.get(v),T=S?o.get(S.id):null,C=S?.node.current;if(C&&T&&w&&S){const k=bf(C).some(($,E)=>g[E]!==$),R=X2(w,S),O=F6(w,S),P=k||!R?{x:0,y:0}:{x:O?r.width-T.width:0,y:O?r.height-T.height:0},U={x:T.left,y:T.top};return P.x&&P.y?U:du(U,P)}}}};function X2(e,n){return!$h(e)||!$h(n)?!1:e.data.current.sortable.containerId===n.data.current.sortable.containerId}function F6(e,n){return!$h(e)||!$h(n)||!X2(e,n)?!1:e.data.current.sortable.index<n.data.current.sortable.index}const U6=({image:e,isSelected:n,thumbnailSize:a,showDetails:r,onSelect:o,onEdit:d,onSetPrimary:h,onDelete:g,isDragging:p})=>{const{attributes:f,listeners:v,setNodeRef:w,transform:S,transition:T,isDragging:C}=z6({id:e.id}),_={transform:uu.Transform.toString(S),transition:T,opacity:C?.5:1},k=e.thumbnails[a]||e.url;return t.jsxs("div",{ref:w,style:_,...f,className:`
        relative group cursor-pointer rounded-lg overflow-hidden border-2 transition-all duration-200
        ${n?"border-blue-500 ring-2 ring-blue-200":"border-gray-200 hover:border-gray-300"}
        ${C?"shadow-2xl z-50":"hover:shadow-md"}
      `,onClick:o,children:[t.jsxs("div",{className:"relative",children:[t.jsx("img",{src:k,alt:e.alt||e.filename,className:"w-full h-full object-cover",loading:"lazy"}),n&&t.jsx("div",{className:"absolute inset-0 bg-blue-500 bg-opacity-20 flex items-center justify-center",children:t.jsx("div",{className:"w-6 h-6 bg-blue-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),e.isPrimary&&t.jsx("div",{className:"absolute top-1 right-1",children:t.jsx(Wr,{status:"رئيسية",size:"sm"})}),e.processingStatus!=="ready"&&t.jsx("div",{className:"absolute top-1 left-1",children:t.jsx(Wr,{status:e.processingStatus==="processing"?"معالجة":"خطأ",size:"sm"})}),t.jsx("div",{...v,className:"absolute top-1 left-1 opacity-0 group-hover:opacity-100 transition-opacity cursor-grab active:cursor-grabbing",children:t.jsx("div",{className:"w-6 h-6 bg-black bg-opacity-50 rounded flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})})})}),t.jsx("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-50 p-1 transform translate-y-full group-hover:translate-y-0 transition-transform",children:t.jsxs("div",{className:"flex justify-center space-x-1 rtl:space-x-reverse",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:R=>{R.stopPropagation(),d()},className:"text-white hover:bg-white hover:bg-opacity-20",label:"تحرير",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),!e.isPrimary&&t.jsx(rt,{variant:"secondary",size:"sm",onClick:R=>{R.stopPropagation(),h()},className:"text-white hover:bg-white hover:bg-opacity-20",label:"تعيين رئيسية",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),t.jsx(rt,{variant:"danger",size:"sm",onClick:R=>{R.stopPropagation(),g()},className:"text-white hover:bg-red-500 hover:bg-opacity-50",label:"حذف",children:t.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})})]}),r&&t.jsxs("div",{className:"p-2 bg-white",children:[t.jsx("p",{className:"text-xs text-gray-600 truncate",title:e.filename,children:e.filename}),t.jsxs("p",{className:"text-xs text-gray-500",children:[Math.round(e.size/1024)," كب • ",e.width,"×",e.height]}),e.tags.length>0&&t.jsxs("div",{className:"flex flex-wrap gap-1 mt-1",children:[e.tags.slice(0,2).map(R=>t.jsx("span",{className:"px-1 py-0.5 bg-gray-100 text-gray-600 text-xs rounded",children:R},R)),e.tags.length>2&&t.jsxs("span",{className:"text-xs text-gray-400",children:["+",e.tags.length-2]})]})]})]})},J2=({propertyId:e,unitId:n,category:a,editable:r=!0,reorderable:o=!0,columns:d=4,thumbnailSize:h="medium",onImageSelect:g,onEditImage:p,selectedImages:f=[],onSelectionChange:v,multiSelect:w=!1,showDetails:S=!1,showToolbar:T=!0})=>{const{executeWithFeedback:C,showConfirmDialog:_,confirmDialog:k,hideConfirmDialog:R}=Wl(),[O,P]=b.useState("grid"),[U,A]=b.useState("all"),{images:$,isLoading:E,error:I,reorderImagesAsync:Z,setPrimaryImageAsync:F,deleteImageAsync:Y,refetch:G}=Eu({propertyId:e,unitId:n,category:U==="all"?void 0:U,sortBy:"order",sortOrder:"asc"}),V=xA(Rj(q0,{activationConstraint:{distance:8}}),Rj(U0,{coordinateGetter:$6})),H=b.useMemo(()=>{let se=$;return a&&(se=se.filter(ae=>ae.category===a)),se},[$,a]),[Q,K]=b.useState([]);b.useEffect(()=>{K(H)},[H]);const oe=b.useCallback(async se=>{const{active:ae,over:ee}=se;if(ae.id!==ee?.id){const re=Q.findIndex(de=>de.id===ae.id),me=Q.findIndex(de=>de.id===ee.id),ye=Y0(Q,re,me);K(ye);const Ce=ye.map(de=>de.id);try{await Z({imageIds:Ce,propertyId:e,unitId:n})}catch(de){K(H),console.error("فشل في إعادة ترتيب الصور:",de)}}},[Q,H,Z,e,n]),W=b.useCallback(se=>{if(w){const ae=f.includes(se.id)?f.filter(ee=>ee!==se.id):[...f,se.id];v?.(ae)}else v?.([se.id]);g?.(se)},[w,f,v,g]),X=b.useCallback(async se=>{try{await C(()=>F({imageId:se.id,propertyId:e,unitId:n}),{loadingKey:"set-primary-image",successMessage:"تم تعيين الصورة الرئيسية بنجاح",errorMessage:"فشل في تعيين الصورة الرئيسية"})}catch(ae){console.error("فشل في تعيين الصورة الرئيسية:",ae)}},[C,F,e,n]),z=b.useCallback(se=>{_({title:"حذف الصورة",message:`هل أنت متأكد من حذف الصورة "${se.filename}"؟`,type:"danger",onConfirm:async()=>{try{await C(()=>Y({imageId:se.id}),{loadingKey:"delete-image",successMessage:"تم حذف الصورة بنجاح",errorMessage:"فشل في حذف الصورة"})}catch(ae){console.error("فشل في حذف الصورة:",ae)}finally{R()}}})},[_,R,C,Y]),J=[{value:"all",label:"جميع الصور"},{value:"exterior",label:"خارجية"},{value:"interior",label:"داخلية"},{value:"amenity",label:"المرافق"},{value:"floor_plan",label:"مخطط الطابق"},{value:"documents",label:"المستندات"}];return E?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(pr,{size:"lg"})}):I?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:"حدث خطأ في تحميل الصور"}),t.jsx(rt,{onClick:()=>G(),variant:"secondary",label:"إعادة المحاولة",children:"إعادة المحاولة"})]}):t.jsxs("div",{className:"w-full",children:[T&&t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"عرض:"}),t.jsxs("select",{value:O,onChange:se=>P(se.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"grid",children:"شبكة"}),t.jsx("option",{value:"list",children:"قائمة"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"الفئة:"}),t.jsx("select",{value:U,onChange:se=>A(se.target.value),className:"px-3 py-1 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:J.map(se=>t.jsx("option",{value:se.value,children:se.label},se.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[H.length," صورة"]}),f.length>0&&t.jsxs("span",{className:"text-sm text-blue-600",children:["(",f.length," محددة)"]})]})]}),H.length===0?t.jsxs("div",{className:"text-center py-12",children:[t.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),t.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"لا توجد صور للعرض"})]}):t.jsx(b6,{sensors:V,collisionDetection:bA,onDragEnd:oe,children:t.jsx(M6,{items:Q.map(se=>se.id),strategy:V0,children:t.jsx("div",{className:`
              ${O==="grid"?`grid grid-cols-2 md:grid-cols-${Math.min(d,6)} gap-4`:"flex flex-col gap-2"}
            `,children:Q.map(se=>t.jsx(U6,{image:se,isSelected:f.includes(se.id),thumbnailSize:h,showDetails:S||O==="list",onSelect:()=>W(se),onEdit:()=>p?.(se),onSetPrimary:()=>X(se),onDelete:()=>z(se)},se.id))})})}),k&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:k.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:k.message}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(rt,{variant:"secondary",onClick:R,label:"إلغاء",children:"إلغاء"}),t.jsx(rt,{variant:"danger",onClick:k.onConfirm,label:"تأكيد",children:"تأكيد"})]})]})})]})};function Gl(e,n,a,r){function o(d){return d instanceof a?d:new a(function(h){h(d)})}return new(a||(a=Promise))(function(d,h){function g(v){try{f(r.next(v))}catch(w){h(w)}}function p(v){try{f(r.throw(v))}catch(w){h(w)}}function f(v){v.done?d(v.value):o(v.value).then(g,p)}f((r=r.apply(e,n||[])).next())})}const H6=new Map([["1km","application/vnd.1000minds.decision-model+xml"],["3dml","text/vnd.in3d.3dml"],["3ds","image/x-3ds"],["3g2","video/3gpp2"],["3gp","video/3gp"],["3gpp","video/3gpp"],["3mf","model/3mf"],["7z","application/x-7z-compressed"],["7zip","application/x-7z-compressed"],["123","application/vnd.lotus-1-2-3"],["aab","application/x-authorware-bin"],["aac","audio/x-acc"],["aam","application/x-authorware-map"],["aas","application/x-authorware-seg"],["abw","application/x-abiword"],["ac","application/vnd.nokia.n-gage.ac+xml"],["ac3","audio/ac3"],["acc","application/vnd.americandynamics.acc"],["ace","application/x-ace-compressed"],["acu","application/vnd.acucobol"],["acutc","application/vnd.acucorp"],["adp","audio/adpcm"],["aep","application/vnd.audiograph"],["afm","application/x-font-type1"],["afp","application/vnd.ibm.modcap"],["ahead","application/vnd.ahead.space"],["ai","application/pdf"],["aif","audio/x-aiff"],["aifc","audio/x-aiff"],["aiff","audio/x-aiff"],["air","application/vnd.adobe.air-application-installer-package+zip"],["ait","application/vnd.dvb.ait"],["ami","application/vnd.amiga.ami"],["amr","audio/amr"],["apk","application/vnd.android.package-archive"],["apng","image/apng"],["appcache","text/cache-manifest"],["application","application/x-ms-application"],["apr","application/vnd.lotus-approach"],["arc","application/x-freearc"],["arj","application/x-arj"],["asc","application/pgp-signature"],["asf","video/x-ms-asf"],["asm","text/x-asm"],["aso","application/vnd.accpac.simply.aso"],["asx","video/x-ms-asf"],["atc","application/vnd.acucorp"],["atom","application/atom+xml"],["atomcat","application/atomcat+xml"],["atomdeleted","application/atomdeleted+xml"],["atomsvc","application/atomsvc+xml"],["atx","application/vnd.antix.game-component"],["au","audio/x-au"],["avi","video/x-msvideo"],["avif","image/avif"],["aw","application/applixware"],["azf","application/vnd.airzip.filesecure.azf"],["azs","application/vnd.airzip.filesecure.azs"],["azv","image/vnd.airzip.accelerator.azv"],["azw","application/vnd.amazon.ebook"],["b16","image/vnd.pco.b16"],["bat","application/x-msdownload"],["bcpio","application/x-bcpio"],["bdf","application/x-font-bdf"],["bdm","application/vnd.syncml.dm+wbxml"],["bdoc","application/x-bdoc"],["bed","application/vnd.realvnc.bed"],["bh2","application/vnd.fujitsu.oasysprs"],["bin","application/octet-stream"],["blb","application/x-blorb"],["blorb","application/x-blorb"],["bmi","application/vnd.bmi"],["bmml","application/vnd.balsamiq.bmml+xml"],["bmp","image/bmp"],["book","application/vnd.framemaker"],["box","application/vnd.previewsystems.box"],["boz","application/x-bzip2"],["bpk","application/octet-stream"],["bpmn","application/octet-stream"],["bsp","model/vnd.valve.source.compiled-map"],["btif","image/prs.btif"],["buffer","application/octet-stream"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["c","text/x-c"],["c4d","application/vnd.clonk.c4group"],["c4f","application/vnd.clonk.c4group"],["c4g","application/vnd.clonk.c4group"],["c4p","application/vnd.clonk.c4group"],["c4u","application/vnd.clonk.c4group"],["c11amc","application/vnd.cluetrust.cartomobile-config"],["c11amz","application/vnd.cluetrust.cartomobile-config-pkg"],["cab","application/vnd.ms-cab-compressed"],["caf","audio/x-caf"],["cap","application/vnd.tcpdump.pcap"],["car","application/vnd.curl.car"],["cat","application/vnd.ms-pki.seccat"],["cb7","application/x-cbr"],["cba","application/x-cbr"],["cbr","application/x-cbr"],["cbt","application/x-cbr"],["cbz","application/x-cbr"],["cc","text/x-c"],["cco","application/x-cocoa"],["cct","application/x-director"],["ccxml","application/ccxml+xml"],["cdbcmsg","application/vnd.contact.cmsg"],["cda","application/x-cdf"],["cdf","application/x-netcdf"],["cdfx","application/cdfx+xml"],["cdkey","application/vnd.mediastation.cdkey"],["cdmia","application/cdmi-capability"],["cdmic","application/cdmi-container"],["cdmid","application/cdmi-domain"],["cdmio","application/cdmi-object"],["cdmiq","application/cdmi-queue"],["cdr","application/cdr"],["cdx","chemical/x-cdx"],["cdxml","application/vnd.chemdraw+xml"],["cdy","application/vnd.cinderella"],["cer","application/pkix-cert"],["cfs","application/x-cfs-compressed"],["cgm","image/cgm"],["chat","application/x-chat"],["chm","application/vnd.ms-htmlhelp"],["chrt","application/vnd.kde.kchart"],["cif","chemical/x-cif"],["cii","application/vnd.anser-web-certificate-issue-initiation"],["cil","application/vnd.ms-artgalry"],["cjs","application/node"],["cla","application/vnd.claymore"],["class","application/octet-stream"],["clkk","application/vnd.crick.clicker.keyboard"],["clkp","application/vnd.crick.clicker.palette"],["clkt","application/vnd.crick.clicker.template"],["clkw","application/vnd.crick.clicker.wordbank"],["clkx","application/vnd.crick.clicker"],["clp","application/x-msclip"],["cmc","application/vnd.cosmocaller"],["cmdf","chemical/x-cmdf"],["cml","chemical/x-cml"],["cmp","application/vnd.yellowriver-custom-menu"],["cmx","image/x-cmx"],["cod","application/vnd.rim.cod"],["coffee","text/coffeescript"],["com","application/x-msdownload"],["conf","text/plain"],["cpio","application/x-cpio"],["cpp","text/x-c"],["cpt","application/mac-compactpro"],["crd","application/x-mscardfile"],["crl","application/pkix-crl"],["crt","application/x-x509-ca-cert"],["crx","application/x-chrome-extension"],["cryptonote","application/vnd.rig.cryptonote"],["csh","application/x-csh"],["csl","application/vnd.citationstyles.style+xml"],["csml","chemical/x-csml"],["csp","application/vnd.commonspace"],["csr","application/octet-stream"],["css","text/css"],["cst","application/x-director"],["csv","text/csv"],["cu","application/cu-seeme"],["curl","text/vnd.curl"],["cww","application/prs.cww"],["cxt","application/x-director"],["cxx","text/x-c"],["dae","model/vnd.collada+xml"],["daf","application/vnd.mobius.daf"],["dart","application/vnd.dart"],["dataless","application/vnd.fdsn.seed"],["davmount","application/davmount+xml"],["dbf","application/vnd.dbf"],["dbk","application/docbook+xml"],["dcr","application/x-director"],["dcurl","text/vnd.curl.dcurl"],["dd2","application/vnd.oma.dd2+xml"],["ddd","application/vnd.fujixerox.ddd"],["ddf","application/vnd.syncml.dmddf+xml"],["dds","image/vnd.ms-dds"],["deb","application/x-debian-package"],["def","text/plain"],["deploy","application/octet-stream"],["der","application/x-x509-ca-cert"],["dfac","application/vnd.dreamfactory"],["dgc","application/x-dgc-compressed"],["dic","text/x-c"],["dir","application/x-director"],["dis","application/vnd.mobius.dis"],["disposition-notification","message/disposition-notification"],["dist","application/octet-stream"],["distz","application/octet-stream"],["djv","image/vnd.djvu"],["djvu","image/vnd.djvu"],["dll","application/octet-stream"],["dmg","application/x-apple-diskimage"],["dmn","application/octet-stream"],["dmp","application/vnd.tcpdump.pcap"],["dms","application/octet-stream"],["dna","application/vnd.dna"],["doc","application/msword"],["docm","application/vnd.ms-word.template.macroEnabled.12"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["dot","application/msword"],["dotm","application/vnd.ms-word.template.macroEnabled.12"],["dotx","application/vnd.openxmlformats-officedocument.wordprocessingml.template"],["dp","application/vnd.osgi.dp"],["dpg","application/vnd.dpgraph"],["dra","audio/vnd.dra"],["drle","image/dicom-rle"],["dsc","text/prs.lines.tag"],["dssc","application/dssc+der"],["dtb","application/x-dtbook+xml"],["dtd","application/xml-dtd"],["dts","audio/vnd.dts"],["dtshd","audio/vnd.dts.hd"],["dump","application/octet-stream"],["dvb","video/vnd.dvb.file"],["dvi","application/x-dvi"],["dwd","application/atsc-dwd+xml"],["dwf","model/vnd.dwf"],["dwg","image/vnd.dwg"],["dxf","image/vnd.dxf"],["dxp","application/vnd.spotfire.dxp"],["dxr","application/x-director"],["ear","application/java-archive"],["ecelp4800","audio/vnd.nuera.ecelp4800"],["ecelp7470","audio/vnd.nuera.ecelp7470"],["ecelp9600","audio/vnd.nuera.ecelp9600"],["ecma","application/ecmascript"],["edm","application/vnd.novadigm.edm"],["edx","application/vnd.novadigm.edx"],["efif","application/vnd.picsel"],["ei6","application/vnd.pg.osasli"],["elc","application/octet-stream"],["emf","image/emf"],["eml","message/rfc822"],["emma","application/emma+xml"],["emotionml","application/emotionml+xml"],["emz","application/x-msmetafile"],["eol","audio/vnd.digital-winds"],["eot","application/vnd.ms-fontobject"],["eps","application/postscript"],["epub","application/epub+zip"],["es","application/ecmascript"],["es3","application/vnd.eszigno3+xml"],["esa","application/vnd.osgi.subsystem"],["esf","application/vnd.epson.esf"],["et3","application/vnd.eszigno3+xml"],["etx","text/x-setext"],["eva","application/x-eva"],["evy","application/x-envoy"],["exe","application/octet-stream"],["exi","application/exi"],["exp","application/express"],["exr","image/aces"],["ext","application/vnd.novadigm.ext"],["ez","application/andrew-inset"],["ez2","application/vnd.ezpix-album"],["ez3","application/vnd.ezpix-package"],["f","text/x-fortran"],["f4v","video/mp4"],["f77","text/x-fortran"],["f90","text/x-fortran"],["fbs","image/vnd.fastbidsheet"],["fcdt","application/vnd.adobe.formscentral.fcdt"],["fcs","application/vnd.isac.fcs"],["fdf","application/vnd.fdf"],["fdt","application/fdt+xml"],["fe_launch","application/vnd.denovo.fcselayout-link"],["fg5","application/vnd.fujitsu.oasysgp"],["fgd","application/x-director"],["fh","image/x-freehand"],["fh4","image/x-freehand"],["fh5","image/x-freehand"],["fh7","image/x-freehand"],["fhc","image/x-freehand"],["fig","application/x-xfig"],["fits","image/fits"],["flac","audio/x-flac"],["fli","video/x-fli"],["flo","application/vnd.micrografx.flo"],["flv","video/x-flv"],["flw","application/vnd.kde.kivio"],["flx","text/vnd.fmi.flexstor"],["fly","text/vnd.fly"],["fm","application/vnd.framemaker"],["fnc","application/vnd.frogans.fnc"],["fo","application/vnd.software602.filler.form+xml"],["for","text/x-fortran"],["fpx","image/vnd.fpx"],["frame","application/vnd.framemaker"],["fsc","application/vnd.fsc.weblaunch"],["fst","image/vnd.fst"],["ftc","application/vnd.fluxtime.clip"],["fti","application/vnd.anser-web-funds-transfer-initiation"],["fvt","video/vnd.fvt"],["fxp","application/vnd.adobe.fxp"],["fxpl","application/vnd.adobe.fxp"],["fzs","application/vnd.fuzzysheet"],["g2w","application/vnd.geoplan"],["g3","image/g3fax"],["g3w","application/vnd.geospace"],["gac","application/vnd.groove-account"],["gam","application/x-tads"],["gbr","application/rpki-ghostbusters"],["gca","application/x-gca-compressed"],["gdl","model/vnd.gdl"],["gdoc","application/vnd.google-apps.document"],["geo","application/vnd.dynageo"],["geojson","application/geo+json"],["gex","application/vnd.geometry-explorer"],["ggb","application/vnd.geogebra.file"],["ggt","application/vnd.geogebra.tool"],["ghf","application/vnd.groove-help"],["gif","image/gif"],["gim","application/vnd.groove-identity-message"],["glb","model/gltf-binary"],["gltf","model/gltf+json"],["gml","application/gml+xml"],["gmx","application/vnd.gmx"],["gnumeric","application/x-gnumeric"],["gpg","application/gpg-keys"],["gph","application/vnd.flographit"],["gpx","application/gpx+xml"],["gqf","application/vnd.grafeq"],["gqs","application/vnd.grafeq"],["gram","application/srgs"],["gramps","application/x-gramps-xml"],["gre","application/vnd.geometry-explorer"],["grv","application/vnd.groove-injector"],["grxml","application/srgs+xml"],["gsf","application/x-font-ghostscript"],["gsheet","application/vnd.google-apps.spreadsheet"],["gslides","application/vnd.google-apps.presentation"],["gtar","application/x-gtar"],["gtm","application/vnd.groove-tool-message"],["gtw","model/vnd.gtw"],["gv","text/vnd.graphviz"],["gxf","application/gxf"],["gxt","application/vnd.geonext"],["gz","application/gzip"],["gzip","application/gzip"],["h","text/x-c"],["h261","video/h261"],["h263","video/h263"],["h264","video/h264"],["hal","application/vnd.hal+xml"],["hbci","application/vnd.hbci"],["hbs","text/x-handlebars-template"],["hdd","application/x-virtualbox-hdd"],["hdf","application/x-hdf"],["heic","image/heic"],["heics","image/heic-sequence"],["heif","image/heif"],["heifs","image/heif-sequence"],["hej2","image/hej2k"],["held","application/atsc-held+xml"],["hh","text/x-c"],["hjson","application/hjson"],["hlp","application/winhlp"],["hpgl","application/vnd.hp-hpgl"],["hpid","application/vnd.hp-hpid"],["hps","application/vnd.hp-hps"],["hqx","application/mac-binhex40"],["hsj2","image/hsj2"],["htc","text/x-component"],["htke","application/vnd.kenameaapp"],["htm","text/html"],["html","text/html"],["hvd","application/vnd.yamaha.hv-dic"],["hvp","application/vnd.yamaha.hv-voice"],["hvs","application/vnd.yamaha.hv-script"],["i2g","application/vnd.intergeo"],["icc","application/vnd.iccprofile"],["ice","x-conference/x-cooltalk"],["icm","application/vnd.iccprofile"],["ico","image/x-icon"],["ics","text/calendar"],["ief","image/ief"],["ifb","text/calendar"],["ifm","application/vnd.shana.informed.formdata"],["iges","model/iges"],["igl","application/vnd.igloader"],["igm","application/vnd.insors.igm"],["igs","model/iges"],["igx","application/vnd.micrografx.igx"],["iif","application/vnd.shana.informed.interchange"],["img","application/octet-stream"],["imp","application/vnd.accpac.simply.imp"],["ims","application/vnd.ms-ims"],["in","text/plain"],["ini","text/plain"],["ink","application/inkml+xml"],["inkml","application/inkml+xml"],["install","application/x-install-instructions"],["iota","application/vnd.astraea-software.iota"],["ipfix","application/ipfix"],["ipk","application/vnd.shana.informed.package"],["irm","application/vnd.ibm.rights-management"],["irp","application/vnd.irepository.package+xml"],["iso","application/x-iso9660-image"],["itp","application/vnd.shana.informed.formtemplate"],["its","application/its+xml"],["ivp","application/vnd.immervision-ivp"],["ivu","application/vnd.immervision-ivu"],["jad","text/vnd.sun.j2me.app-descriptor"],["jade","text/jade"],["jam","application/vnd.jam"],["jar","application/java-archive"],["jardiff","application/x-java-archive-diff"],["java","text/x-java-source"],["jhc","image/jphc"],["jisp","application/vnd.jisp"],["jls","image/jls"],["jlt","application/vnd.hp-jlyt"],["jng","image/x-jng"],["jnlp","application/x-java-jnlp-file"],["joda","application/vnd.joost.joda-archive"],["jp2","image/jp2"],["jpe","image/jpeg"],["jpeg","image/jpeg"],["jpf","image/jpx"],["jpg","image/jpeg"],["jpg2","image/jp2"],["jpgm","video/jpm"],["jpgv","video/jpeg"],["jph","image/jph"],["jpm","video/jpm"],["jpx","image/jpx"],["js","application/javascript"],["json","application/json"],["json5","application/json5"],["jsonld","application/ld+json"],["jsonl","application/jsonl"],["jsonml","application/jsonml+json"],["jsx","text/jsx"],["jxr","image/jxr"],["jxra","image/jxra"],["jxrs","image/jxrs"],["jxs","image/jxs"],["jxsc","image/jxsc"],["jxsi","image/jxsi"],["jxss","image/jxss"],["kar","audio/midi"],["karbon","application/vnd.kde.karbon"],["kdb","application/octet-stream"],["kdbx","application/x-keepass2"],["key","application/x-iwork-keynote-sffkey"],["kfo","application/vnd.kde.kformula"],["kia","application/vnd.kidspiration"],["kml","application/vnd.google-earth.kml+xml"],["kmz","application/vnd.google-earth.kmz"],["kne","application/vnd.kinar"],["knp","application/vnd.kinar"],["kon","application/vnd.kde.kontour"],["kpr","application/vnd.kde.kpresenter"],["kpt","application/vnd.kde.kpresenter"],["kpxx","application/vnd.ds-keypoint"],["ksp","application/vnd.kde.kspread"],["ktr","application/vnd.kahootz"],["ktx","image/ktx"],["ktx2","image/ktx2"],["ktz","application/vnd.kahootz"],["kwd","application/vnd.kde.kword"],["kwt","application/vnd.kde.kword"],["lasxml","application/vnd.las.las+xml"],["latex","application/x-latex"],["lbd","application/vnd.llamagraphics.life-balance.desktop"],["lbe","application/vnd.llamagraphics.life-balance.exchange+xml"],["les","application/vnd.hhe.lesson-player"],["less","text/less"],["lgr","application/lgr+xml"],["lha","application/octet-stream"],["link66","application/vnd.route66.link66+xml"],["list","text/plain"],["list3820","application/vnd.ibm.modcap"],["listafp","application/vnd.ibm.modcap"],["litcoffee","text/coffeescript"],["lnk","application/x-ms-shortcut"],["log","text/plain"],["lostxml","application/lost+xml"],["lrf","application/octet-stream"],["lrm","application/vnd.ms-lrm"],["ltf","application/vnd.frogans.ltf"],["lua","text/x-lua"],["luac","application/x-lua-bytecode"],["lvp","audio/vnd.lucent.voice"],["lwp","application/vnd.lotus-wordpro"],["lzh","application/octet-stream"],["m1v","video/mpeg"],["m2a","audio/mpeg"],["m2v","video/mpeg"],["m3a","audio/mpeg"],["m3u","text/plain"],["m3u8","application/vnd.apple.mpegurl"],["m4a","audio/x-m4a"],["m4p","application/mp4"],["m4s","video/iso.segment"],["m4u","application/vnd.mpegurl"],["m4v","video/x-m4v"],["m13","application/x-msmediaview"],["m14","application/x-msmediaview"],["m21","application/mp21"],["ma","application/mathematica"],["mads","application/mads+xml"],["maei","application/mmt-aei+xml"],["mag","application/vnd.ecowin.chart"],["maker","application/vnd.framemaker"],["man","text/troff"],["manifest","text/cache-manifest"],["map","application/json"],["mar","application/octet-stream"],["markdown","text/markdown"],["mathml","application/mathml+xml"],["mb","application/mathematica"],["mbk","application/vnd.mobius.mbk"],["mbox","application/mbox"],["mc1","application/vnd.medcalcdata"],["mcd","application/vnd.mcd"],["mcurl","text/vnd.curl.mcurl"],["md","text/markdown"],["mdb","application/x-msaccess"],["mdi","image/vnd.ms-modi"],["mdx","text/mdx"],["me","text/troff"],["mesh","model/mesh"],["meta4","application/metalink4+xml"],["metalink","application/metalink+xml"],["mets","application/mets+xml"],["mfm","application/vnd.mfmp"],["mft","application/rpki-manifest"],["mgp","application/vnd.osgeo.mapguide.package"],["mgz","application/vnd.proteus.magazine"],["mid","audio/midi"],["midi","audio/midi"],["mie","application/x-mie"],["mif","application/vnd.mif"],["mime","message/rfc822"],["mj2","video/mj2"],["mjp2","video/mj2"],["mjs","application/javascript"],["mk3d","video/x-matroska"],["mka","audio/x-matroska"],["mkd","text/x-markdown"],["mks","video/x-matroska"],["mkv","video/x-matroska"],["mlp","application/vnd.dolby.mlp"],["mmd","application/vnd.chipnuts.karaoke-mmd"],["mmf","application/vnd.smaf"],["mml","text/mathml"],["mmr","image/vnd.fujixerox.edmics-mmr"],["mng","video/x-mng"],["mny","application/x-msmoney"],["mobi","application/x-mobipocket-ebook"],["mods","application/mods+xml"],["mov","video/quicktime"],["movie","video/x-sgi-movie"],["mp2","audio/mpeg"],["mp2a","audio/mpeg"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mp4a","audio/mp4"],["mp4s","application/mp4"],["mp4v","video/mp4"],["mp21","application/mp21"],["mpc","application/vnd.mophun.certificate"],["mpd","application/dash+xml"],["mpe","video/mpeg"],["mpeg","video/mpeg"],["mpg","video/mpeg"],["mpg4","video/mp4"],["mpga","audio/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["mpm","application/vnd.blueice.multipass"],["mpn","application/vnd.mophun.application"],["mpp","application/vnd.ms-project"],["mpt","application/vnd.ms-project"],["mpy","application/vnd.ibm.minipay"],["mqy","application/vnd.mobius.mqy"],["mrc","application/marc"],["mrcx","application/marcxml+xml"],["ms","text/troff"],["mscml","application/mediaservercontrol+xml"],["mseed","application/vnd.fdsn.mseed"],["mseq","application/vnd.mseq"],["msf","application/vnd.epson.msf"],["msg","application/vnd.ms-outlook"],["msh","model/mesh"],["msi","application/x-msdownload"],["msl","application/vnd.mobius.msl"],["msm","application/octet-stream"],["msp","application/octet-stream"],["msty","application/vnd.muvee.style"],["mtl","model/mtl"],["mts","model/vnd.mts"],["mus","application/vnd.musician"],["musd","application/mmt-usd+xml"],["musicxml","application/vnd.recordare.musicxml+xml"],["mvb","application/x-msmediaview"],["mvt","application/vnd.mapbox-vector-tile"],["mwf","application/vnd.mfer"],["mxf","application/mxf"],["mxl","application/vnd.recordare.musicxml"],["mxmf","audio/mobile-xmf"],["mxml","application/xv+xml"],["mxs","application/vnd.triscape.mxs"],["mxu","video/vnd.mpegurl"],["n-gage","application/vnd.nokia.n-gage.symbian.install"],["n3","text/n3"],["nb","application/mathematica"],["nbp","application/vnd.wolfram.player"],["nc","application/x-netcdf"],["ncx","application/x-dtbncx+xml"],["nfo","text/x-nfo"],["ngdat","application/vnd.nokia.n-gage.data"],["nitf","application/vnd.nitf"],["nlu","application/vnd.neurolanguage.nlu"],["nml","application/vnd.enliven"],["nnd","application/vnd.noblenet-directory"],["nns","application/vnd.noblenet-sealer"],["nnw","application/vnd.noblenet-web"],["npx","image/vnd.net-fpx"],["nq","application/n-quads"],["nsc","application/x-conference"],["nsf","application/vnd.lotus-notes"],["nt","application/n-triples"],["ntf","application/vnd.nitf"],["numbers","application/x-iwork-numbers-sffnumbers"],["nzb","application/x-nzb"],["oa2","application/vnd.fujitsu.oasys2"],["oa3","application/vnd.fujitsu.oasys3"],["oas","application/vnd.fujitsu.oasys"],["obd","application/x-msbinder"],["obgx","application/vnd.openblox.game+xml"],["obj","model/obj"],["oda","application/oda"],["odb","application/vnd.oasis.opendocument.database"],["odc","application/vnd.oasis.opendocument.chart"],["odf","application/vnd.oasis.opendocument.formula"],["odft","application/vnd.oasis.opendocument.formula-template"],["odg","application/vnd.oasis.opendocument.graphics"],["odi","application/vnd.oasis.opendocument.image"],["odm","application/vnd.oasis.opendocument.text-master"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogex","model/vnd.opengex"],["ogg","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["omdoc","application/omdoc+xml"],["onepkg","application/onenote"],["onetmp","application/onenote"],["onetoc","application/onenote"],["onetoc2","application/onenote"],["opf","application/oebps-package+xml"],["opml","text/x-opml"],["oprc","application/vnd.palm"],["opus","audio/ogg"],["org","text/x-org"],["osf","application/vnd.yamaha.openscoreformat"],["osfpvg","application/vnd.yamaha.openscoreformat.osfpvg+xml"],["osm","application/vnd.openstreetmap.data+xml"],["otc","application/vnd.oasis.opendocument.chart-template"],["otf","font/otf"],["otg","application/vnd.oasis.opendocument.graphics-template"],["oth","application/vnd.oasis.opendocument.text-web"],["oti","application/vnd.oasis.opendocument.image-template"],["otp","application/vnd.oasis.opendocument.presentation-template"],["ots","application/vnd.oasis.opendocument.spreadsheet-template"],["ott","application/vnd.oasis.opendocument.text-template"],["ova","application/x-virtualbox-ova"],["ovf","application/x-virtualbox-ovf"],["owl","application/rdf+xml"],["oxps","application/oxps"],["oxt","application/vnd.openofficeorg.extension"],["p","text/x-pascal"],["p7a","application/x-pkcs7-signature"],["p7b","application/x-pkcs7-certificates"],["p7c","application/pkcs7-mime"],["p7m","application/pkcs7-mime"],["p7r","application/x-pkcs7-certreqresp"],["p7s","application/pkcs7-signature"],["p8","application/pkcs8"],["p10","application/x-pkcs10"],["p12","application/x-pkcs12"],["pac","application/x-ns-proxy-autoconfig"],["pages","application/x-iwork-pages-sffpages"],["pas","text/x-pascal"],["paw","application/vnd.pawaafile"],["pbd","application/vnd.powerbuilder6"],["pbm","image/x-portable-bitmap"],["pcap","application/vnd.tcpdump.pcap"],["pcf","application/x-font-pcf"],["pcl","application/vnd.hp-pcl"],["pclxl","application/vnd.hp-pclxl"],["pct","image/x-pict"],["pcurl","application/vnd.curl.pcurl"],["pcx","image/x-pcx"],["pdb","application/x-pilot"],["pde","text/x-processing"],["pdf","application/pdf"],["pem","application/x-x509-user-cert"],["pfa","application/x-font-type1"],["pfb","application/x-font-type1"],["pfm","application/x-font-type1"],["pfr","application/font-tdpfr"],["pfx","application/x-pkcs12"],["pgm","image/x-portable-graymap"],["pgn","application/x-chess-pgn"],["pgp","application/pgp"],["php","application/x-httpd-php"],["php3","application/x-httpd-php"],["php4","application/x-httpd-php"],["phps","application/x-httpd-php-source"],["phtml","application/x-httpd-php"],["pic","image/x-pict"],["pkg","application/octet-stream"],["pki","application/pkixcmp"],["pkipath","application/pkix-pkipath"],["pkpass","application/vnd.apple.pkpass"],["pl","application/x-perl"],["plb","application/vnd.3gpp.pic-bw-large"],["plc","application/vnd.mobius.plc"],["plf","application/vnd.pocketlearn"],["pls","application/pls+xml"],["pm","application/x-perl"],["pml","application/vnd.ctc-posml"],["png","image/png"],["pnm","image/x-portable-anymap"],["portpkg","application/vnd.macports.portpkg"],["pot","application/vnd.ms-powerpoint"],["potm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["potx","application/vnd.openxmlformats-officedocument.presentationml.template"],["ppa","application/vnd.ms-powerpoint"],["ppam","application/vnd.ms-powerpoint.addin.macroEnabled.12"],["ppd","application/vnd.cups-ppd"],["ppm","image/x-portable-pixmap"],["pps","application/vnd.ms-powerpoint"],["ppsm","application/vnd.ms-powerpoint.slideshow.macroEnabled.12"],["ppsx","application/vnd.openxmlformats-officedocument.presentationml.slideshow"],["ppt","application/powerpoint"],["pptm","application/vnd.ms-powerpoint.presentation.macroEnabled.12"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["pqa","application/vnd.palm"],["prc","application/x-pilot"],["pre","application/vnd.lotus-freelance"],["prf","application/pics-rules"],["provx","application/provenance+xml"],["ps","application/postscript"],["psb","application/vnd.3gpp.pic-bw-small"],["psd","application/x-photoshop"],["psf","application/x-font-linux-psf"],["pskcxml","application/pskc+xml"],["pti","image/prs.pti"],["ptid","application/vnd.pvi.ptid1"],["pub","application/x-mspublisher"],["pvb","application/vnd.3gpp.pic-bw-var"],["pwn","application/vnd.3m.post-it-notes"],["pya","audio/vnd.ms-playready.media.pya"],["pyv","video/vnd.ms-playready.media.pyv"],["qam","application/vnd.epson.quickanime"],["qbo","application/vnd.intu.qbo"],["qfx","application/vnd.intu.qfx"],["qps","application/vnd.publishare-delta-tree"],["qt","video/quicktime"],["qwd","application/vnd.quark.quarkxpress"],["qwt","application/vnd.quark.quarkxpress"],["qxb","application/vnd.quark.quarkxpress"],["qxd","application/vnd.quark.quarkxpress"],["qxl","application/vnd.quark.quarkxpress"],["qxt","application/vnd.quark.quarkxpress"],["ra","audio/x-realaudio"],["ram","audio/x-pn-realaudio"],["raml","application/raml+yaml"],["rapd","application/route-apd+xml"],["rar","application/x-rar"],["ras","image/x-cmu-raster"],["rcprofile","application/vnd.ipunplugged.rcprofile"],["rdf","application/rdf+xml"],["rdz","application/vnd.data-vision.rdz"],["relo","application/p2p-overlay+xml"],["rep","application/vnd.businessobjects"],["res","application/x-dtbresource+xml"],["rgb","image/x-rgb"],["rif","application/reginfo+xml"],["rip","audio/vnd.rip"],["ris","application/x-research-info-systems"],["rl","application/resource-lists+xml"],["rlc","image/vnd.fujixerox.edmics-rlc"],["rld","application/resource-lists-diff+xml"],["rm","audio/x-pn-realaudio"],["rmi","audio/midi"],["rmp","audio/x-pn-realaudio-plugin"],["rms","application/vnd.jcp.javame.midlet-rms"],["rmvb","application/vnd.rn-realmedia-vbr"],["rnc","application/relax-ng-compact-syntax"],["rng","application/xml"],["roa","application/rpki-roa"],["roff","text/troff"],["rp9","application/vnd.cloanto.rp9"],["rpm","audio/x-pn-realaudio-plugin"],["rpss","application/vnd.nokia.radio-presets"],["rpst","application/vnd.nokia.radio-preset"],["rq","application/sparql-query"],["rs","application/rls-services+xml"],["rsa","application/x-pkcs7"],["rsat","application/atsc-rsat+xml"],["rsd","application/rsd+xml"],["rsheet","application/urc-ressheet+xml"],["rss","application/rss+xml"],["rtf","text/rtf"],["rtx","text/richtext"],["run","application/x-makeself"],["rusd","application/route-usd+xml"],["rv","video/vnd.rn-realvideo"],["s","text/x-asm"],["s3m","audio/s3m"],["saf","application/vnd.yamaha.smaf-audio"],["sass","text/x-sass"],["sbml","application/sbml+xml"],["sc","application/vnd.ibm.secure-container"],["scd","application/x-msschedule"],["scm","application/vnd.lotus-screencam"],["scq","application/scvp-cv-request"],["scs","application/scvp-cv-response"],["scss","text/x-scss"],["scurl","text/vnd.curl.scurl"],["sda","application/vnd.stardivision.draw"],["sdc","application/vnd.stardivision.calc"],["sdd","application/vnd.stardivision.impress"],["sdkd","application/vnd.solent.sdkm+xml"],["sdkm","application/vnd.solent.sdkm+xml"],["sdp","application/sdp"],["sdw","application/vnd.stardivision.writer"],["sea","application/octet-stream"],["see","application/vnd.seemail"],["seed","application/vnd.fdsn.seed"],["sema","application/vnd.sema"],["semd","application/vnd.semd"],["semf","application/vnd.semf"],["senmlx","application/senml+xml"],["sensmlx","application/sensml+xml"],["ser","application/java-serialized-object"],["setpay","application/set-payment-initiation"],["setreg","application/set-registration-initiation"],["sfd-hdstx","application/vnd.hydrostatix.sof-data"],["sfs","application/vnd.spotfire.sfs"],["sfv","text/x-sfv"],["sgi","image/sgi"],["sgl","application/vnd.stardivision.writer-global"],["sgm","text/sgml"],["sgml","text/sgml"],["sh","application/x-sh"],["shar","application/x-shar"],["shex","text/shex"],["shf","application/shf+xml"],["shtml","text/html"],["sid","image/x-mrsid-image"],["sieve","application/sieve"],["sig","application/pgp-signature"],["sil","audio/silk"],["silo","model/mesh"],["sis","application/vnd.symbian.install"],["sisx","application/vnd.symbian.install"],["sit","application/x-stuffit"],["sitx","application/x-stuffitx"],["siv","application/sieve"],["skd","application/vnd.koan"],["skm","application/vnd.koan"],["skp","application/vnd.koan"],["skt","application/vnd.koan"],["sldm","application/vnd.ms-powerpoint.slide.macroenabled.12"],["sldx","application/vnd.openxmlformats-officedocument.presentationml.slide"],["slim","text/slim"],["slm","text/slim"],["sls","application/route-s-tsid+xml"],["slt","application/vnd.epson.salt"],["sm","application/vnd.stepmania.stepchart"],["smf","application/vnd.stardivision.math"],["smi","application/smil"],["smil","application/smil"],["smv","video/x-smv"],["smzip","application/vnd.stepmania.package"],["snd","audio/basic"],["snf","application/x-font-snf"],["so","application/octet-stream"],["spc","application/x-pkcs7-certificates"],["spdx","text/spdx"],["spf","application/vnd.yamaha.smaf-phrase"],["spl","application/x-futuresplash"],["spot","text/vnd.in3d.spot"],["spp","application/scvp-vp-response"],["spq","application/scvp-vp-request"],["spx","audio/ogg"],["sql","application/x-sql"],["src","application/x-wais-source"],["srt","application/x-subrip"],["sru","application/sru+xml"],["srx","application/sparql-results+xml"],["ssdl","application/ssdl+xml"],["sse","application/vnd.kodak-descriptor"],["ssf","application/vnd.epson.ssf"],["ssml","application/ssml+xml"],["sst","application/octet-stream"],["st","application/vnd.sailingtracker.track"],["stc","application/vnd.sun.xml.calc.template"],["std","application/vnd.sun.xml.draw.template"],["stf","application/vnd.wt.stf"],["sti","application/vnd.sun.xml.impress.template"],["stk","application/hyperstudio"],["stl","model/stl"],["stpx","model/step+xml"],["stpxz","model/step-xml+zip"],["stpz","model/step+zip"],["str","application/vnd.pg.format"],["stw","application/vnd.sun.xml.writer.template"],["styl","text/stylus"],["stylus","text/stylus"],["sub","text/vnd.dvb.subtitle"],["sus","application/vnd.sus-calendar"],["susp","application/vnd.sus-calendar"],["sv4cpio","application/x-sv4cpio"],["sv4crc","application/x-sv4crc"],["svc","application/vnd.dvb.service"],["svd","application/vnd.svd"],["svg","image/svg+xml"],["svgz","image/svg+xml"],["swa","application/x-director"],["swf","application/x-shockwave-flash"],["swi","application/vnd.aristanetworks.swi"],["swidtag","application/swid+xml"],["sxc","application/vnd.sun.xml.calc"],["sxd","application/vnd.sun.xml.draw"],["sxg","application/vnd.sun.xml.writer.global"],["sxi","application/vnd.sun.xml.impress"],["sxm","application/vnd.sun.xml.math"],["sxw","application/vnd.sun.xml.writer"],["t","text/troff"],["t3","application/x-t3vm-image"],["t38","image/t38"],["taglet","application/vnd.mynfc"],["tao","application/vnd.tao.intent-module-archive"],["tap","image/vnd.tencent.tap"],["tar","application/x-tar"],["tcap","application/vnd.3gpp2.tcap"],["tcl","application/x-tcl"],["td","application/urc-targetdesc+xml"],["teacher","application/vnd.smart.teacher"],["tei","application/tei+xml"],["teicorpus","application/tei+xml"],["tex","application/x-tex"],["texi","application/x-texinfo"],["texinfo","application/x-texinfo"],["text","text/plain"],["tfi","application/thraud+xml"],["tfm","application/x-tex-tfm"],["tfx","image/tiff-fx"],["tga","image/x-tga"],["tgz","application/x-tar"],["thmx","application/vnd.ms-officetheme"],["tif","image/tiff"],["tiff","image/tiff"],["tk","application/x-tcl"],["tmo","application/vnd.tmobile-livetv"],["toml","application/toml"],["torrent","application/x-bittorrent"],["tpl","application/vnd.groove-tool-template"],["tpt","application/vnd.trid.tpt"],["tr","text/troff"],["tra","application/vnd.trueapp"],["trig","application/trig"],["trm","application/x-msterminal"],["ts","video/mp2t"],["tsd","application/timestamped-data"],["tsv","text/tab-separated-values"],["ttc","font/collection"],["ttf","font/ttf"],["ttl","text/turtle"],["ttml","application/ttml+xml"],["twd","application/vnd.simtech-mindmapper"],["twds","application/vnd.simtech-mindmapper"],["txd","application/vnd.genomatix.tuxedo"],["txf","application/vnd.mobius.txf"],["txt","text/plain"],["u8dsn","message/global-delivery-status"],["u8hdr","message/global-headers"],["u8mdn","message/global-disposition-notification"],["u8msg","message/global"],["u32","application/x-authorware-bin"],["ubj","application/ubjson"],["udeb","application/x-debian-package"],["ufd","application/vnd.ufdl"],["ufdl","application/vnd.ufdl"],["ulx","application/x-glulx"],["umj","application/vnd.umajin"],["unityweb","application/vnd.unity"],["uoml","application/vnd.uoml+xml"],["uri","text/uri-list"],["uris","text/uri-list"],["urls","text/uri-list"],["usdz","model/vnd.usdz+zip"],["ustar","application/x-ustar"],["utz","application/vnd.uiq.theme"],["uu","text/x-uuencode"],["uva","audio/vnd.dece.audio"],["uvd","application/vnd.dece.data"],["uvf","application/vnd.dece.data"],["uvg","image/vnd.dece.graphic"],["uvh","video/vnd.dece.hd"],["uvi","image/vnd.dece.graphic"],["uvm","video/vnd.dece.mobile"],["uvp","video/vnd.dece.pd"],["uvs","video/vnd.dece.sd"],["uvt","application/vnd.dece.ttml+xml"],["uvu","video/vnd.uvvu.mp4"],["uvv","video/vnd.dece.video"],["uvva","audio/vnd.dece.audio"],["uvvd","application/vnd.dece.data"],["uvvf","application/vnd.dece.data"],["uvvg","image/vnd.dece.graphic"],["uvvh","video/vnd.dece.hd"],["uvvi","image/vnd.dece.graphic"],["uvvm","video/vnd.dece.mobile"],["uvvp","video/vnd.dece.pd"],["uvvs","video/vnd.dece.sd"],["uvvt","application/vnd.dece.ttml+xml"],["uvvu","video/vnd.uvvu.mp4"],["uvvv","video/vnd.dece.video"],["uvvx","application/vnd.dece.unspecified"],["uvvz","application/vnd.dece.zip"],["uvx","application/vnd.dece.unspecified"],["uvz","application/vnd.dece.zip"],["vbox","application/x-virtualbox-vbox"],["vbox-extpack","application/x-virtualbox-vbox-extpack"],["vcard","text/vcard"],["vcd","application/x-cdlink"],["vcf","text/x-vcard"],["vcg","application/vnd.groove-vcard"],["vcs","text/x-vcalendar"],["vcx","application/vnd.vcx"],["vdi","application/x-virtualbox-vdi"],["vds","model/vnd.sap.vds"],["vhd","application/x-virtualbox-vhd"],["vis","application/vnd.visionary"],["viv","video/vnd.vivo"],["vlc","application/videolan"],["vmdk","application/x-virtualbox-vmdk"],["vob","video/x-ms-vob"],["vor","application/vnd.stardivision.writer"],["vox","application/x-authorware-bin"],["vrml","model/vrml"],["vsd","application/vnd.visio"],["vsf","application/vnd.vsf"],["vss","application/vnd.visio"],["vst","application/vnd.visio"],["vsw","application/vnd.visio"],["vtf","image/vnd.valve.source.texture"],["vtt","text/vtt"],["vtu","model/vnd.vtu"],["vxml","application/voicexml+xml"],["w3d","application/x-director"],["wad","application/x-doom"],["wadl","application/vnd.sun.wadl+xml"],["war","application/java-archive"],["wasm","application/wasm"],["wav","audio/x-wav"],["wax","audio/x-ms-wax"],["wbmp","image/vnd.wap.wbmp"],["wbs","application/vnd.criticaltools.wbs+xml"],["wbxml","application/wbxml"],["wcm","application/vnd.ms-works"],["wdb","application/vnd.ms-works"],["wdp","image/vnd.ms-photo"],["weba","audio/webm"],["webapp","application/x-web-app-manifest+json"],["webm","video/webm"],["webmanifest","application/manifest+json"],["webp","image/webp"],["wg","application/vnd.pmi.widget"],["wgt","application/widget"],["wks","application/vnd.ms-works"],["wm","video/x-ms-wm"],["wma","audio/x-ms-wma"],["wmd","application/x-ms-wmd"],["wmf","image/wmf"],["wml","text/vnd.wap.wml"],["wmlc","application/wmlc"],["wmls","text/vnd.wap.wmlscript"],["wmlsc","application/vnd.wap.wmlscriptc"],["wmv","video/x-ms-wmv"],["wmx","video/x-ms-wmx"],["wmz","application/x-msmetafile"],["woff","font/woff"],["woff2","font/woff2"],["word","application/msword"],["wpd","application/vnd.wordperfect"],["wpl","application/vnd.ms-wpl"],["wps","application/vnd.ms-works"],["wqd","application/vnd.wqd"],["wri","application/x-mswrite"],["wrl","model/vrml"],["wsc","message/vnd.wfa.wsc"],["wsdl","application/wsdl+xml"],["wspolicy","application/wspolicy+xml"],["wtb","application/vnd.webturbo"],["wvx","video/x-ms-wvx"],["x3d","model/x3d+xml"],["x3db","model/x3d+fastinfoset"],["x3dbz","model/x3d+binary"],["x3dv","model/x3d-vrml"],["x3dvz","model/x3d+vrml"],["x3dz","model/x3d+xml"],["x32","application/x-authorware-bin"],["x_b","model/vnd.parasolid.transmit.binary"],["x_t","model/vnd.parasolid.transmit.text"],["xaml","application/xaml+xml"],["xap","application/x-silverlight-app"],["xar","application/vnd.xara"],["xav","application/xcap-att+xml"],["xbap","application/x-ms-xbap"],["xbd","application/vnd.fujixerox.docuworks.binder"],["xbm","image/x-xbitmap"],["xca","application/xcap-caps+xml"],["xcs","application/calendar+xml"],["xdf","application/xcap-diff+xml"],["xdm","application/vnd.syncml.dm+xml"],["xdp","application/vnd.adobe.xdp+xml"],["xdssc","application/dssc+xml"],["xdw","application/vnd.fujixerox.docuworks"],["xel","application/xcap-el+xml"],["xenc","application/xenc+xml"],["xer","application/patch-ops-error+xml"],["xfdf","application/vnd.adobe.xfdf"],["xfdl","application/vnd.xfdl"],["xht","application/xhtml+xml"],["xhtml","application/xhtml+xml"],["xhvml","application/xv+xml"],["xif","image/vnd.xiff"],["xl","application/excel"],["xla","application/vnd.ms-excel"],["xlam","application/vnd.ms-excel.addin.macroEnabled.12"],["xlc","application/vnd.ms-excel"],["xlf","application/xliff+xml"],["xlm","application/vnd.ms-excel"],["xls","application/vnd.ms-excel"],["xlsb","application/vnd.ms-excel.sheet.binary.macroEnabled.12"],["xlsm","application/vnd.ms-excel.sheet.macroEnabled.12"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xlt","application/vnd.ms-excel"],["xltm","application/vnd.ms-excel.template.macroEnabled.12"],["xltx","application/vnd.openxmlformats-officedocument.spreadsheetml.template"],["xlw","application/vnd.ms-excel"],["xm","audio/xm"],["xml","application/xml"],["xns","application/xcap-ns+xml"],["xo","application/vnd.olpc-sugar"],["xop","application/xop+xml"],["xpi","application/x-xpinstall"],["xpl","application/xproc+xml"],["xpm","image/x-xpixmap"],["xpr","application/vnd.is-xpr"],["xps","application/vnd.ms-xpsdocument"],["xpw","application/vnd.intercon.formnet"],["xpx","application/vnd.intercon.formnet"],["xsd","application/xml"],["xsl","application/xml"],["xslt","application/xslt+xml"],["xsm","application/vnd.syncml+xml"],["xspf","application/xspf+xml"],["xul","application/vnd.mozilla.xul+xml"],["xvm","application/xv+xml"],["xvml","application/xv+xml"],["xwd","image/x-xwindowdump"],["xyz","chemical/x-xyz"],["xz","application/x-xz"],["yaml","text/yaml"],["yang","application/yang"],["yin","application/yin+xml"],["yml","text/yaml"],["ymp","text/x-suse-ymp"],["z","application/x-compress"],["z1","application/x-zmachine"],["z2","application/x-zmachine"],["z3","application/x-zmachine"],["z4","application/x-zmachine"],["z5","application/x-zmachine"],["z6","application/x-zmachine"],["z7","application/x-zmachine"],["z8","application/x-zmachine"],["zaz","application/vnd.zzazz.deck+xml"],["zip","application/zip"],["zir","application/vnd.zul"],["zirz","application/vnd.zul"],["zmm","application/vnd.handheld-entertainment+xml"],["zsh","text/x-scriptzsh"]]);function dc(e,n,a){const r=q6(e),{webkitRelativePath:o}=e,d=typeof n=="string"?n:typeof o=="string"&&o.length>0?o:`./${e.name}`;return typeof r.path!="string"&&qj(r,"path",d),qj(r,"relativePath",d),r}function q6(e){const{name:n}=e;if(n&&n.lastIndexOf(".")!==-1&&!e.type){const r=n.split(".").pop().toLowerCase(),o=H6.get(r);o&&Object.defineProperty(e,"type",{value:o,writable:!1,configurable:!1,enumerable:!0})}return e}function qj(e,n,a){Object.defineProperty(e,n,{value:a,writable:!1,configurable:!1,enumerable:!0})}const Y6=[".DS_Store","Thumbs.db"];function V6(e){return Gl(this,void 0,void 0,function*(){return Fh(e)&&Z6(e.dataTransfer)?Q6(e.dataTransfer,e.type):W6(e)?K6(e):Array.isArray(e)&&e.every(n=>"getFile"in n&&typeof n.getFile=="function")?G6(e):[]})}function Z6(e){return Fh(e)}function W6(e){return Fh(e)&&Fh(e.target)}function Fh(e){return typeof e=="object"&&e!==null}function K6(e){return Fx(e.target.files).map(n=>dc(n))}function G6(e){return Gl(this,void 0,void 0,function*(){return(yield Promise.all(e.map(a=>a.getFile()))).map(a=>dc(a))})}function Q6(e,n){return Gl(this,void 0,void 0,function*(){if(e.items){const a=Fx(e.items).filter(o=>o.kind==="file");if(n!=="drop")return a;const r=yield Promise.all(a.map(X6));return Yj(e_(r))}return Yj(Fx(e.files).map(a=>dc(a)))})}function Yj(e){return e.filter(n=>Y6.indexOf(n.name)===-1)}function Fx(e){if(e===null)return[];const n=[];for(let a=0;a<e.length;a++){const r=e[a];n.push(r)}return n}function X6(e){if(typeof e.webkitGetAsEntry!="function")return Vj(e);const n=e.webkitGetAsEntry();return n&&n.isDirectory?t_(n):Vj(e,n)}function e_(e){return e.reduce((n,a)=>[...n,...Array.isArray(a)?e_(a):[a]],[])}function Vj(e,n){return Gl(this,void 0,void 0,function*(){var a;if(globalThis.isSecureContext&&typeof e.getAsFileSystemHandle=="function"){const d=yield e.getAsFileSystemHandle();if(d===null)throw new Error(`${e} is not a File`);if(d!==void 0){const h=yield d.getFile();return h.handle=d,dc(h)}}const r=e.getAsFile();if(!r)throw new Error(`${e} is not a File`);return dc(r,(a=n?.fullPath)!==null&&a!==void 0?a:void 0)})}function J6(e){return Gl(this,void 0,void 0,function*(){return e.isDirectory?t_(e):eD(e)})}function t_(e){const n=e.createReader();return new Promise((a,r)=>{const o=[];function d(){n.readEntries(h=>Gl(this,void 0,void 0,function*(){if(h.length){const g=Promise.all(h.map(J6));o.push(g),d()}else try{const g=yield Promise.all(o);a(g)}catch(g){r(g)}}),h=>{r(h)})}d()})}function eD(e){return Gl(this,void 0,void 0,function*(){return new Promise((n,a)=>{e.file(r=>{const o=dc(r,e.fullPath);n(o)},r=>{a(r)})})})}var hh={},Zj;function tD(){return Zj||(Zj=1,hh.__esModule=!0,hh.default=function(e,n){if(e&&n){var a=Array.isArray(n)?n:n.split(",");if(a.length===0)return!0;var r=e.name||"",o=(e.type||"").toLowerCase(),d=o.replace(/\/.*$/,"");return a.some(function(h){var g=h.trim().toLowerCase();return g.charAt(0)==="."?r.toLowerCase().endsWith(g):g.endsWith("/*")?d===g.replace(/\/.*$/,""):o===g})}return!0}),hh}var nD=tD();const nx=pu(nD);function Wj(e){return rD(e)||sD(e)||a_(e)||aD()}function aD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function sD(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rD(e){if(Array.isArray(e))return Ux(e)}function Kj(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,r)}return a}function Gj(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?Kj(Object(a),!0).forEach(function(r){n_(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):Kj(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function n_(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function hu(e,n){return oD(e)||lD(e,n)||a_(e,n)||iD()}function iD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function a_(e,n){if(e){if(typeof e=="string")return Ux(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Ux(e,n)}}function Ux(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,r=new Array(n);a<n;a++)r[a]=e[a];return r}function lD(e,n){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r=[],o=!0,d=!1,h,g;try{for(a=a.call(e);!(o=(h=a.next()).done)&&(r.push(h.value),!(n&&r.length===n));o=!0);}catch(p){d=!0,g=p}finally{try{!o&&a.return!=null&&a.return()}finally{if(d)throw g}}return r}}function oD(e){if(Array.isArray(e))return e}var cD=typeof nx=="function"?nx:nx.default,dD="file-invalid-type",uD="file-too-large",mD="file-too-small",hD="too-many-files",fD=function(){var n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"",a=n.split(","),r=a.length>1?"one of ".concat(a.join(", ")):a[0];return{code:dD,message:"File type must be ".concat(r)}},Qj=function(n){return{code:uD,message:"File is larger than ".concat(n," ").concat(n===1?"byte":"bytes")}},Xj=function(n){return{code:mD,message:"File is smaller than ".concat(n," ").concat(n===1?"byte":"bytes")}},pD={code:hD,message:"Too many files"};function s_(e,n){var a=e.type==="application/x-moz-file"||cD(e,n);return[a,a?null:fD(n)]}function r_(e,n,a){if(zl(e.size))if(zl(n)&&zl(a)){if(e.size>a)return[!1,Qj(a)];if(e.size<n)return[!1,Xj(n)]}else{if(zl(n)&&e.size<n)return[!1,Xj(n)];if(zl(a)&&e.size>a)return[!1,Qj(a)]}return[!0,null]}function zl(e){return e!=null}function gD(e){var n=e.files,a=e.accept,r=e.minSize,o=e.maxSize,d=e.multiple,h=e.maxFiles,g=e.validator;return!d&&n.length>1||d&&h>=1&&n.length>h?!1:n.every(function(p){var f=s_(p,a),v=hu(f,1),w=v[0],S=r_(p,r,o),T=hu(S,1),C=T[0],_=g?g(p):null;return w&&C&&!_})}function Uh(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function fh(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(n){return n==="Files"||n==="application/x-moz-file"}):!!e.target&&!!e.target.files}function Jj(e){e.preventDefault()}function xD(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function yD(e){return e.indexOf("Edge/")!==-1}function bD(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return xD(e)||yD(e)}function rr(){for(var e=arguments.length,n=new Array(e),a=0;a<e;a++)n[a]=arguments[a];return function(r){for(var o=arguments.length,d=new Array(o>1?o-1:0),h=1;h<o;h++)d[h-1]=arguments[h];return n.some(function(g){return!Uh(r)&&g&&g.apply(void 0,[r].concat(d)),Uh(r)})}}function vD(){return"showOpenFilePicker"in window}function jD(e){if(zl(e)){var n=Object.entries(e).filter(function(a){var r=hu(a,2),o=r[0],d=r[1],h=!0;return i_(o)||(console.warn('Skipped "'.concat(o,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),h=!1),(!Array.isArray(d)||!d.every(l_))&&(console.warn('Skipped "'.concat(o,'" because an invalid file extension was provided.')),h=!1),h}).reduce(function(a,r){var o=hu(r,2),d=o[0],h=o[1];return Gj(Gj({},a),{},n_({},d,h))},{});return[{description:"Files",accept:n}]}return e}function wD(e){if(zl(e))return Object.entries(e).reduce(function(n,a){var r=hu(a,2),o=r[0],d=r[1];return[].concat(Wj(n),[o],Wj(d))},[]).filter(function(n){return i_(n)||l_(n)}).join(",")}function ND(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function _D(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function i_(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||e==="application/*"||/\w+\/[-+.\w]+/g.test(e)}function l_(e){return/^.*\.[\w]+$/.test(e)}var SD=["children"],CD=["open"],kD=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],TD=["refKey","onChange","onClick"];function ED(e){return AD(e)||RD(e)||o_(e)||MD()}function MD(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function RD(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function AD(e){if(Array.isArray(e))return Hx(e)}function ax(e,n){return PD(e)||OD(e,n)||o_(e,n)||DD()}function DD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function o_(e,n){if(e){if(typeof e=="string")return Hx(e,n);var a=Object.prototype.toString.call(e).slice(8,-1);if(a==="Object"&&e.constructor&&(a=e.constructor.name),a==="Map"||a==="Set")return Array.from(e);if(a==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a))return Hx(e,n)}}function Hx(e,n){(n==null||n>e.length)&&(n=e.length);for(var a=0,r=new Array(n);a<n;a++)r[a]=e[a];return r}function OD(e,n){var a=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(a!=null){var r=[],o=!0,d=!1,h,g;try{for(a=a.call(e);!(o=(h=a.next()).done)&&(r.push(h.value),!(n&&r.length===n));o=!0);}catch(p){d=!0,g=p}finally{try{!o&&a.return!=null&&a.return()}finally{if(d)throw g}}return r}}function PD(e){if(Array.isArray(e))return e}function ew(e,n){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter(function(o){return Object.getOwnPropertyDescriptor(e,o).enumerable})),a.push.apply(a,r)}return a}function vn(e){for(var n=1;n<arguments.length;n++){var a=arguments[n]!=null?arguments[n]:{};n%2?ew(Object(a),!0).forEach(function(r){qx(e,r,a[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):ew(Object(a)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(a,r))})}return e}function qx(e,n,a){return n in e?Object.defineProperty(e,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):e[n]=a,e}function Hh(e,n){if(e==null)return{};var a=LD(e,n),r,o;if(Object.getOwnPropertySymbols){var d=Object.getOwnPropertySymbols(e);for(o=0;o<d.length;o++)r=d[o],!(n.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(a[r]=e[r])}return a}function LD(e,n){if(e==null)return{};var a={},r=Object.keys(e),o,d;for(d=0;d<r.length;d++)o=r[d],!(n.indexOf(o)>=0)&&(a[o]=e[o]);return a}var Z0=b.forwardRef(function(e,n){var a=e.children,r=Hh(e,SD),o=d_(r),d=o.open,h=Hh(o,CD);return b.useImperativeHandle(n,function(){return{open:d}},[d]),We.createElement(b.Fragment,null,a(vn(vn({},h),{},{open:d})))});Z0.displayName="Dropzone";var c_={disabled:!1,getFilesFromEvent:V6,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!1,autoFocus:!1};Z0.defaultProps=c_;Z0.propTypes={children:Jt.func,accept:Jt.objectOf(Jt.arrayOf(Jt.string)),multiple:Jt.bool,preventDropOnDocument:Jt.bool,noClick:Jt.bool,noKeyboard:Jt.bool,noDrag:Jt.bool,noDragEventsBubbling:Jt.bool,minSize:Jt.number,maxSize:Jt.number,maxFiles:Jt.number,disabled:Jt.bool,getFilesFromEvent:Jt.func,onFileDialogCancel:Jt.func,onFileDialogOpen:Jt.func,useFsAccessApi:Jt.bool,autoFocus:Jt.bool,onDragEnter:Jt.func,onDragLeave:Jt.func,onDragOver:Jt.func,onDrop:Jt.func,onDropAccepted:Jt.func,onDropRejected:Jt.func,onError:Jt.func,validator:Jt.func};var Yx={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function d_(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=vn(vn({},c_),e),a=n.accept,r=n.disabled,o=n.getFilesFromEvent,d=n.maxSize,h=n.minSize,g=n.multiple,p=n.maxFiles,f=n.onDragEnter,v=n.onDragLeave,w=n.onDragOver,S=n.onDrop,T=n.onDropAccepted,C=n.onDropRejected,_=n.onFileDialogCancel,k=n.onFileDialogOpen,R=n.useFsAccessApi,O=n.autoFocus,P=n.preventDropOnDocument,U=n.noClick,A=n.noKeyboard,$=n.noDrag,E=n.noDragEventsBubbling,I=n.onError,Z=n.validator,F=b.useMemo(function(){return wD(a)},[a]),Y=b.useMemo(function(){return jD(a)},[a]),G=b.useMemo(function(){return typeof k=="function"?k:tw},[k]),V=b.useMemo(function(){return typeof _=="function"?_:tw},[_]),H=b.useRef(null),Q=b.useRef(null),K=b.useReducer(zD,Yx),oe=ax(K,2),W=oe[0],X=oe[1],z=W.isFocused,J=W.isFileDialogActive,se=b.useRef(typeof window<"u"&&window.isSecureContext&&R&&vD()),ae=function(){!se.current&&J&&setTimeout(function(){if(Q.current){var He=Q.current.files;He.length||(X({type:"closeDialog"}),V())}},300)};b.useEffect(function(){return window.addEventListener("focus",ae,!1),function(){window.removeEventListener("focus",ae,!1)}},[Q,J,V,se]);var ee=b.useRef([]),re=function(He){H.current&&H.current.contains(He.target)||(He.preventDefault(),ee.current=[])};b.useEffect(function(){return P&&(document.addEventListener("dragover",Jj,!1),document.addEventListener("drop",re,!1)),function(){P&&(document.removeEventListener("dragover",Jj),document.removeEventListener("drop",re))}},[H,P]),b.useEffect(function(){return!r&&O&&H.current&&H.current.focus(),function(){}},[H,O,r]);var me=b.useCallback(function(De){I?I(De):console.error(De)},[I]),ye=b.useCallback(function(De){De.preventDefault(),De.persist(),ut(De),ee.current=[].concat(ED(ee.current),[De.target]),fh(De)&&Promise.resolve(o(De)).then(function(He){if(!(Uh(De)&&!E)){var ct=He.length,ce=ct>0&&gD({files:He,accept:F,minSize:h,maxSize:d,multiple:g,maxFiles:p,validator:Z}),Oe=ct>0&&!ce;X({isDragAccept:ce,isDragReject:Oe,isDragActive:!0,type:"setDraggedFiles"}),f&&f(De)}}).catch(function(He){return me(He)})},[o,f,me,E,F,h,d,g,p,Z]),Ce=b.useCallback(function(De){De.preventDefault(),De.persist(),ut(De);var He=fh(De);if(He&&De.dataTransfer)try{De.dataTransfer.dropEffect="copy"}catch{}return He&&w&&w(De),!1},[w,E]),de=b.useCallback(function(De){De.preventDefault(),De.persist(),ut(De);var He=ee.current.filter(function(ce){return H.current&&H.current.contains(ce)}),ct=He.indexOf(De.target);ct!==-1&&He.splice(ct,1),ee.current=He,!(He.length>0)&&(X({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),fh(De)&&v&&v(De))},[H,v,E]),te=b.useCallback(function(De,He){var ct=[],ce=[];De.forEach(function(Oe){var Le=s_(Oe,F),Ct=ax(Le,2),rn=Ct[0],Fn=Ct[1],Un=r_(Oe,h,d),Nn=ax(Un,2),ln=Nn[0],la=Nn[1],Mn=Z?Z(Oe):null;if(rn&&ln&&!Mn)ct.push(Oe);else{var he=[Fn,la];Mn&&(he=he.concat(Mn)),ce.push({file:Oe,errors:he.filter(function(tt){return tt})})}}),(!g&&ct.length>1||g&&p>=1&&ct.length>p)&&(ct.forEach(function(Oe){ce.push({file:Oe,errors:[pD]})}),ct.splice(0)),X({acceptedFiles:ct,fileRejections:ce,isDragReject:ce.length>0,type:"setFiles"}),S&&S(ct,ce,He),ce.length>0&&C&&C(ce,He),ct.length>0&&T&&T(ct,He)},[X,g,F,h,d,p,S,T,C,Z]),_e=b.useCallback(function(De){De.preventDefault(),De.persist(),ut(De),ee.current=[],fh(De)&&Promise.resolve(o(De)).then(function(He){Uh(De)&&!E||te(He,De)}).catch(function(He){return me(He)}),X({type:"reset"})},[o,te,me,E]),Ie=b.useCallback(function(){if(se.current){X({type:"openDialog"}),G();var De={multiple:g,types:Y};window.showOpenFilePicker(De).then(function(He){return o(He)}).then(function(He){te(He,null),X({type:"closeDialog"})}).catch(function(He){ND(He)?(V(He),X({type:"closeDialog"})):_D(He)?(se.current=!1,Q.current?(Q.current.value=null,Q.current.click()):me(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):me(He)});return}Q.current&&(X({type:"openDialog"}),G(),Q.current.value=null,Q.current.click())},[X,G,V,R,te,me,Y,g]),at=b.useCallback(function(De){!H.current||!H.current.isEqualNode(De.target)||(De.key===" "||De.key==="Enter"||De.keyCode===32||De.keyCode===13)&&(De.preventDefault(),Ie())},[H,Ie]),Je=b.useCallback(function(){X({type:"focus"})},[]),it=b.useCallback(function(){X({type:"blur"})},[]),Te=b.useCallback(function(){U||(bD()?setTimeout(Ie,0):Ie())},[U,Ie]),Fe=function(He){return r?null:He},wt=function(He){return A?null:Fe(He)},Nt=function(He){return $?null:Fe(He)},ut=function(He){E&&He.stopPropagation()},Ee=b.useMemo(function(){return function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=De.refKey,ct=He===void 0?"ref":He,ce=De.role,Oe=De.onKeyDown,Le=De.onFocus,Ct=De.onBlur,rn=De.onClick,Fn=De.onDragEnter,Un=De.onDragOver,Nn=De.onDragLeave,ln=De.onDrop,la=Hh(De,kD);return vn(vn(qx({onKeyDown:wt(rr(Oe,at)),onFocus:wt(rr(Le,Je)),onBlur:wt(rr(Ct,it)),onClick:Fe(rr(rn,Te)),onDragEnter:Nt(rr(Fn,ye)),onDragOver:Nt(rr(Un,Ce)),onDragLeave:Nt(rr(Nn,de)),onDrop:Nt(rr(ln,_e)),role:typeof ce=="string"&&ce!==""?ce:"presentation"},ct,H),!r&&!A?{tabIndex:0}:{}),la)}},[H,at,Je,it,Te,ye,Ce,de,_e,A,$,r]),Pe=b.useCallback(function(De){De.stopPropagation()},[]),qe=b.useMemo(function(){return function(){var De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},He=De.refKey,ct=He===void 0?"ref":He,ce=De.onChange,Oe=De.onClick,Le=Hh(De,TD),Ct=qx({accept:F,multiple:g,type:"file",style:{border:0,clip:"rect(0, 0, 0, 0)",clipPath:"inset(50%)",height:"1px",margin:"0 -1px -1px 0",overflow:"hidden",padding:0,position:"absolute",width:"1px",whiteSpace:"nowrap"},onChange:Fe(rr(ce,_e)),onClick:Fe(rr(Oe,Pe)),tabIndex:-1},ct,Q);return vn(vn({},Ct),Le)}},[Q,a,g,_e,r]);return vn(vn({},W),{},{isFocused:z&&!r,getRootProps:Ee,getInputProps:qe,rootRef:H,inputRef:Q,open:Fe(Ie)})}function zD(e,n){switch(n.type){case"focus":return vn(vn({},e),{},{isFocused:!0});case"blur":return vn(vn({},e),{},{isFocused:!1});case"openDialog":return vn(vn({},Yx),{},{isFileDialogActive:!0});case"closeDialog":return vn(vn({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return vn(vn({},e),{},{isDragActive:n.isDragActive,isDragAccept:n.isDragAccept,isDragReject:n.isDragReject});case"setFiles":return vn(vn({},e),{},{acceptedFiles:n.acceptedFiles,fileRejections:n.fileRejections,isDragReject:n.isDragReject});case"reset":return vn({},Yx);default:return e}}function tw(){}const ID=({file:e,progress:n,onRemove:a,onCategoryChange:r,category:o})=>{const[d,h]=b.useState("");We.useEffect(()=>{const p=URL.createObjectURL(e);return h(p),()=>URL.revokeObjectURL(p)},[e]);const g=[{value:"exterior",label:"خارجية"},{value:"interior",label:"داخلية"},{value:"amenity",label:"المرافق"},{value:"floor_plan",label:"مخطط الطابق"},{value:"documents",label:"المستندات"},{value:"gallery",label:"معرض عام"}];return t.jsxs("div",{className:"relative bg-white border border-gray-200 rounded-lg p-3",children:[t.jsxs("div",{className:"relative w-full h-24 mb-2 rounded overflow-hidden bg-gray-100",children:[t.jsx("img",{src:d,alt:e.name,className:"w-full h-full object-cover"}),t.jsx("button",{onClick:a,className:"absolute top-1 left-1 w-6 h-6 bg-red-500 text-white rounded-full flex items-center justify-center text-xs hover:bg-red-600 transition-colors",children:"✕"}),n&&t.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-50 flex items-center justify-center",children:[n.status==="uploading"&&t.jsxs("div",{className:"text-center",children:[t.jsx(pr,{size:"sm",className:"text-white"}),t.jsxs("div",{className:"text-white text-xs mt-1",children:[n.progress,"%"]})]}),n.status==="completed"&&t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),n.status==="failed"&&t.jsx("div",{className:"w-8 h-8 bg-red-500 rounded-full flex items-center justify-center",children:t.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]})]}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-xs font-medium text-gray-700 truncate",title:e.name,children:e.name}),t.jsxs("p",{className:"text-xs text-gray-500",children:[(e.size/1024/1024).toFixed(2)," MB"]})]}),t.jsx("select",{value:o,onChange:p=>r(p.target.value),className:"w-full px-2 py-1 text-xs border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:g.map(p=>t.jsx("option",{value:p.value,children:p.label},p.value))}),n?.status==="failed"&&n.error&&t.jsx("p",{className:"text-xs text-red-600 mt-1",children:n.error})]})]})},u_=({propertyId:e,unitId:n,defaultCategory:a="gallery",multiple:r=!0,maxFiles:o=20,maxSize:d=10,acceptedTypes:h=["image/jpeg","image/png","image/webp","image/gif"],showPreview:g=!0,onUploadComplete:p,onError:f,compact:v=!1,showProgress:w=!0})=>{Wl();const{showSuccess:S,showError:T}=j2(),C=b.useRef(null),[_,k]=b.useState([]),[R,O]=b.useState({}),[P,U]=b.useState(!1),{uploadImageWithProgress:A,uploadProgress:$,clearUploadProgress:E,clearAllUploadProgress:I}=Eu(),Z=b.useCallback((X,z)=>{if(z.length>0){const ae=z.map(({file:ee,errors:re})=>`${ee.name}: ${re.map(me=>me.message).join(", ")}`);f?.(ae.join(`
`)),T("بعض الملفات لم يتم قبولها");return}if(_.length+X.length>o){f?.(`لا يمكن رفع أكثر من ${o} ملف`),T(`لا يمكن رفع أكثر من ${o} ملف`);return}k(ae=>[...ae,...X]);const se={};X.forEach(ae=>{se[ae.name]=a}),O(ae=>({...ae,...se}))},[_,o,a,f,T]),{getRootProps:F,getInputProps:Y,isDragActive:G,isDragReject:V}=d_({onDrop:Z,accept:h.reduce((X,z)=>({...X,[z]:[]}),{}),multiple:r,maxSize:d*1024*1024,disabled:P}),H=b.useCallback(X=>{const z=_[X];k(ae=>ae.filter((ee,re)=>re!==X)),O(ae=>{const{[z.name]:ee,...re}=ae;return re});const se=Object.entries($).find(([ae,ee])=>ee.filename===z.name);se&&E(se[0])},[_,$,E]),Q=b.useCallback((X,z)=>{O(J=>({...J,[X]:z}))},[]),K=b.useCallback(async()=>{if(_.length===0)return;U(!0);const X=[],z=[];try{for(const J of _)try{const se={file:J,propertyId:e,unitId:n,category:R[J.name]||a,alt:J.name.split(".")[0]},ae=await A(se);ae.success&&ae.image&&X.push(ae.image)}catch(se){const ae=se instanceof Error?se.message:"حدث خطأ غير متوقع";z.push(`${J.name}: ${ae}`)}X.length>0&&(S(`تم رفع ${X.length} صورة بنجاح`),p?.(X),k([]),O({}),I()),z.length>0&&(f?.(z.join(`
`)),T(`فشل في رفع ${z.length} صورة`))}catch(J){const se=J instanceof Error?J.message:"حدث خطأ غير متوقع";f?.(se),T("فشل في رفع الصور")}finally{U(!1)}},[_,R,e,n,a,A,p,f,S,T,I]),oe=b.useCallback(()=>{k([]),O({}),I()},[I]),W=b.useCallback(()=>{C.current?.click()},[]);return v?t.jsx("div",{className:"w-full",children:t.jsxs("div",{...F(),className:`
            border-2 border-dashed rounded-lg p-4 text-center cursor-pointer transition-colors
            ${G?"border-blue-500 bg-blue-50":V?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400"}
            ${P?"pointer-events-none opacity-50":""}
          `,children:[t.jsx("input",{...Y(),ref:C}),t.jsxs("div",{className:"flex items-center justify-center gap-2",children:[t.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),t.jsx("span",{className:"text-sm text-gray-600",children:G?"اسقط الصور هنا":"اختر أو اسقط الصور"})]})]})}):t.jsxs("div",{className:"w-full space-y-4",children:[t.jsxs("div",{...F(),className:`
          border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200
          ${G?"border-blue-500 bg-blue-50 scale-105":V?"border-red-500 bg-red-50":"border-gray-300 hover:border-gray-400 hover:bg-gray-50"}
          ${P?"pointer-events-none opacity-50":""}
        `,children:[t.jsx("input",{...Y(),ref:C}),t.jsxs("div",{className:"space-y-4",children:[t.jsx("div",{className:"flex justify-center",children:t.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:t.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),t.jsxs("div",{children:[t.jsx("p",{className:"text-lg font-medium text-gray-700",children:G?"اسقط الصور هنا":"اختر الصور أو اسقطها هنا"}),t.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["PNG، JPG، WebP، GIF حتى ",d," ميجابايت"]}),r&&t.jsxs("p",{className:"text-xs text-gray-400 mt-1",children:["يمكن رفع حتى ",o," صورة"]})]}),t.jsx(rt,{variant:"secondary",onClick:W,disabled:P,label:"اختيار الملفات",children:"اختيار الملفات"})]})]}),g&&_.length>0&&t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("h4",{className:"text-sm font-medium text-gray-700",children:["الصور المحددة (",_.length,")"]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:oe,disabled:P,label:"مسح الكل",children:"مسح الكل"}),t.jsx(rt,{variant:"primary",size:"sm",onClick:K,disabled:P||_.length===0,loading:P,label:"رفع الصور",children:"رفع الصور"})]})]}),t.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 xl:grid-cols-6 gap-3",children:_.map((X,z)=>{const se=Object.entries($).find(([ae,ee])=>ee.filename===X.name);return t.jsx(ID,{file:X,progress:se?.[1],onRemove:()=>H(z),onCategoryChange:ae=>Q(X.name,ae),category:R[X.name]||a},`${X.name}-${z}`)})})]}),w&&P&&t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(pr,{size:"sm"}),t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm font-medium text-blue-800",children:"جاري رفع الصور..."}),t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:[Object.values($).filter(X=>X.status==="completed").length," / ",_.length," مكتملة"]})]})]})})]})};var BD=Object.defineProperty,$D=(e,n,a)=>n in e?BD(e,n,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[n]=a,hn=(e,n,a)=>$D(e,typeof n!="symbol"?n+"":n,a);const qh={x:0,y:0,width:0,height:0,unit:"px"},Wo=(e,n,a)=>Math.min(Math.max(e,n),a),FD=(...e)=>e.filter(n=>n&&typeof n=="string").join(" "),nw=(e,n)=>e===n||e.width===n.width&&e.height===n.height&&e.x===n.x&&e.y===n.y&&e.unit===n.unit;function UD(e,n,a,r){const o=ir(e,a,r);return e.width&&(o.height=o.width/n),e.height&&(o.width=o.height*n),o.y+o.height>r&&(o.height=r-o.y,o.width=o.height*n),o.x+o.width>a&&(o.width=a-o.x,o.height=o.width/n),e.unit==="%"?Xi(o,a,r):o}function HD(e,n,a){const r=ir(e,n,a);return r.x=(n-r.width)/2,r.y=(a-r.height)/2,e.unit==="%"?Xi(r,n,a):r}function Xi(e,n,a){return e.unit==="%"?{...qh,...e,unit:"%"}:{unit:"%",x:e.x?e.x/n*100:0,y:e.y?e.y/a*100:0,width:e.width?e.width/n*100:0,height:e.height?e.height/a*100:0}}function ir(e,n,a){return e.unit?e.unit==="px"?{...qh,...e,unit:"px"}:{unit:"px",x:e.x?e.x*n/100:0,y:e.y?e.y*a/100:0,width:e.width?e.width*n/100:0,height:e.height?e.height*a/100:0}:{...qh,...e,unit:"px"}}function aw(e,n,a,r,o,d=0,h=0,g=r,p=o){const f={...e};let v=Math.min(d,r),w=Math.min(h,o),S=Math.min(g,r),T=Math.min(p,o);n&&(n>1?(v=h?h*n:v,w=v/n,S=g*n):(w=d?d/n:w,v=w*n,T=p/n)),f.y<0&&(f.height=Math.max(f.height+f.y,w),f.y=0),f.x<0&&(f.width=Math.max(f.width+f.x,v),f.x=0);const C=r-(f.x+f.width);C<0&&(f.x=Math.min(f.x,r-v),f.width+=C);const _=o-(f.y+f.height);if(_<0&&(f.y=Math.min(f.y,o-w),f.height+=_),f.width<v&&((a==="sw"||a=="nw")&&(f.x-=v-f.width),f.width=v),f.height<w&&((a==="nw"||a=="ne")&&(f.y-=w-f.height),f.height=w),f.width>S&&((a==="sw"||a=="nw")&&(f.x-=S-f.width),f.width=S),f.height>T&&((a==="nw"||a=="ne")&&(f.y-=T-f.height),f.height=T),n){const k=f.width/f.height;if(k<n){const R=Math.max(f.width/n,w);(a==="nw"||a=="ne")&&(f.y-=R-f.height),f.height=R}else if(k>n){const R=Math.max(f.height*n,v);(a==="sw"||a=="nw")&&(f.x-=R-f.width),f.width=R}}return f}function qD(e,n,a,r){const o={...e};return n==="ArrowLeft"?r==="nw"?(o.x-=a,o.y-=a,o.width+=a,o.height+=a):r==="w"?(o.x-=a,o.width+=a):r==="sw"?(o.x-=a,o.width+=a,o.height+=a):r==="ne"?(o.y+=a,o.width-=a,o.height-=a):r==="e"?o.width-=a:r==="se"&&(o.width-=a,o.height-=a):n==="ArrowRight"&&(r==="nw"?(o.x+=a,o.y+=a,o.width-=a,o.height-=a):r==="w"?(o.x+=a,o.width-=a):r==="sw"?(o.x+=a,o.width-=a,o.height-=a):r==="ne"?(o.y-=a,o.width+=a,o.height+=a):r==="e"?o.width+=a:r==="se"&&(o.width+=a,o.height+=a)),n==="ArrowUp"?r==="nw"?(o.x-=a,o.y-=a,o.width+=a,o.height+=a):r==="n"?(o.y-=a,o.height+=a):r==="ne"?(o.y-=a,o.width+=a,o.height+=a):r==="sw"?(o.x+=a,o.width-=a,o.height-=a):r==="s"?o.height-=a:r==="se"&&(o.width-=a,o.height-=a):n==="ArrowDown"&&(r==="nw"?(o.x+=a,o.y+=a,o.width-=a,o.height-=a):r==="n"?(o.y+=a,o.height-=a):r==="ne"?(o.y+=a,o.width-=a,o.height-=a):r==="sw"?(o.x-=a,o.width+=a,o.height+=a):r==="s"?o.height+=a:r==="se"&&(o.width+=a,o.height+=a)),o}const Ko={capture:!0,passive:!1};let YD=0;const Ki=class zs extends b.PureComponent{constructor(){super(...arguments),hn(this,"docMoveBound",!1),hn(this,"mouseDownOnCrop",!1),hn(this,"dragStarted",!1),hn(this,"evData",{startClientX:0,startClientY:0,startCropX:0,startCropY:0,clientX:0,clientY:0,isResize:!0}),hn(this,"componentRef",b.createRef()),hn(this,"mediaRef",b.createRef()),hn(this,"resizeObserver"),hn(this,"initChangeCalled",!1),hn(this,"instanceId",`rc-${YD++}`),hn(this,"state",{cropIsActive:!1,newCropIsBeingDrawn:!1}),hn(this,"onCropPointerDown",n=>{const{crop:a,disabled:r}=this.props,o=this.getBox();if(!a)return;const d=ir(a,o.width,o.height);if(r)return;n.cancelable&&n.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const h=n.target.dataset.ord,g=!!h;let p=n.clientX,f=n.clientY,v=d.x,w=d.y;if(h){const S=n.clientX-o.x,T=n.clientY-o.y;let C=0,_=0;h==="ne"||h=="e"?(C=S-(d.x+d.width),_=T-d.y,v=d.x,w=d.y+d.height):h==="se"||h==="s"?(C=S-(d.x+d.width),_=T-(d.y+d.height),v=d.x,w=d.y):h==="sw"||h=="w"?(C=S-d.x,_=T-(d.y+d.height),v=d.x+d.width,w=d.y):(h==="nw"||h=="n")&&(C=S-d.x,_=T-d.y,v=d.x+d.width,w=d.y+d.height),p=v+o.x+C,f=w+o.y+_}this.evData={startClientX:p,startClientY:f,startCropX:v,startCropY:w,clientX:n.clientX,clientY:n.clientY,isResize:g,ord:h},this.mouseDownOnCrop=!0,this.setState({cropIsActive:!0})}),hn(this,"onComponentPointerDown",n=>{const{crop:a,disabled:r,locked:o,keepSelection:d,onChange:h}=this.props,g=this.getBox();if(r||o||d&&a)return;n.cancelable&&n.preventDefault(),this.bindDocMove(),this.componentRef.current.focus({preventScroll:!0});const p=n.clientX-g.x,f=n.clientY-g.y,v={unit:"px",x:p,y:f,width:0,height:0};this.evData={startClientX:n.clientX,startClientY:n.clientY,startCropX:p,startCropY:f,clientX:n.clientX,clientY:n.clientY,isResize:!0},this.mouseDownOnCrop=!0,h(ir(v,g.width,g.height),Xi(v,g.width,g.height)),this.setState({cropIsActive:!0,newCropIsBeingDrawn:!0})}),hn(this,"onDocPointerMove",n=>{const{crop:a,disabled:r,onChange:o,onDragStart:d}=this.props,h=this.getBox();if(r||!a||!this.mouseDownOnCrop)return;n.cancelable&&n.preventDefault(),this.dragStarted||(this.dragStarted=!0,d&&d(n));const{evData:g}=this;g.clientX=n.clientX,g.clientY=n.clientY;let p;g.isResize?p=this.resizeCrop():p=this.dragCrop(),nw(a,p)||o(ir(p,h.width,h.height),Xi(p,h.width,h.height))}),hn(this,"onComponentKeyDown",n=>{const{crop:a,disabled:r,onChange:o,onComplete:d}=this.props;if(r)return;const h=n.key;let g=!1;if(!a)return;const p=this.getBox(),f=this.makePixelCrop(p),v=(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?zs.nudgeStepLarge:n.shiftKey?zs.nudgeStepMedium:zs.nudgeStep;if(h==="ArrowLeft"?(f.x-=v,g=!0):h==="ArrowRight"?(f.x+=v,g=!0):h==="ArrowUp"?(f.y-=v,g=!0):h==="ArrowDown"&&(f.y+=v,g=!0),g){n.cancelable&&n.preventDefault(),f.x=Wo(f.x,0,p.width-f.width),f.y=Wo(f.y,0,p.height-f.height);const w=ir(f,p.width,p.height),S=Xi(f,p.width,p.height);o(w,S),d&&d(w,S)}}),hn(this,"onHandlerKeyDown",(n,a)=>{const{aspect:r=0,crop:o,disabled:d,minWidth:h=0,minHeight:g=0,maxWidth:p,maxHeight:f,onChange:v,onComplete:w}=this.props,S=this.getBox();if(d||!o)return;if(n.key==="ArrowUp"||n.key==="ArrowDown"||n.key==="ArrowLeft"||n.key==="ArrowRight")n.stopPropagation(),n.preventDefault();else return;const T=(navigator.platform.match("Mac")?n.metaKey:n.ctrlKey)?zs.nudgeStepLarge:n.shiftKey?zs.nudgeStepMedium:zs.nudgeStep,C=ir(o,S.width,S.height),_=qD(C,n.key,T,a),k=aw(_,r,a,S.width,S.height,h,g,p,f);if(!nw(o,k)){const R=Xi(k,S.width,S.height);v(k,R),w&&w(k,R)}}),hn(this,"onDocPointerDone",n=>{const{crop:a,disabled:r,onComplete:o,onDragEnd:d}=this.props,h=this.getBox();this.unbindDocMove(),!(r||!a)&&this.mouseDownOnCrop&&(this.mouseDownOnCrop=!1,this.dragStarted=!1,d&&d(n),o&&o(ir(a,h.width,h.height),Xi(a,h.width,h.height)),this.setState({cropIsActive:!1,newCropIsBeingDrawn:!1}))}),hn(this,"onDragFocus",()=>{var n;(n=this.componentRef.current)==null||n.scrollTo(0,0)})}get document(){return document}getBox(){const n=this.mediaRef.current;if(!n)return{x:0,y:0,width:0,height:0};const{x:a,y:r,width:o,height:d}=n.getBoundingClientRect();return{x:a,y:r,width:o,height:d}}componentDidUpdate(n){const{crop:a,onComplete:r}=this.props;if(r&&!n.crop&&a){const{width:o,height:d}=this.getBox();o&&d&&r(ir(a,o,d),Xi(a,o,d))}}componentWillUnmount(){this.resizeObserver&&this.resizeObserver.disconnect(),this.unbindDocMove()}bindDocMove(){this.docMoveBound||(this.document.addEventListener("pointermove",this.onDocPointerMove,Ko),this.document.addEventListener("pointerup",this.onDocPointerDone,Ko),this.document.addEventListener("pointercancel",this.onDocPointerDone,Ko),this.docMoveBound=!0)}unbindDocMove(){this.docMoveBound&&(this.document.removeEventListener("pointermove",this.onDocPointerMove,Ko),this.document.removeEventListener("pointerup",this.onDocPointerDone,Ko),this.document.removeEventListener("pointercancel",this.onDocPointerDone,Ko),this.docMoveBound=!1)}getCropStyle(){const{crop:n}=this.props;if(n)return{top:`${n.y}${n.unit}`,left:`${n.x}${n.unit}`,width:`${n.width}${n.unit}`,height:`${n.height}${n.unit}`}}dragCrop(){const{evData:n}=this,a=this.getBox(),r=this.makePixelCrop(a),o=n.clientX-n.startClientX,d=n.clientY-n.startClientY;return r.x=Wo(n.startCropX+o,0,a.width-r.width),r.y=Wo(n.startCropY+d,0,a.height-r.height),r}getPointRegion(n,a,r,o){const{evData:d}=this,h=d.clientX-n.x,g=d.clientY-n.y;let p;o&&a?p=a==="nw"||a==="n"||a==="ne":p=g<d.startCropY;let f;return r&&a?f=a==="nw"||a==="w"||a==="sw":f=h<d.startCropX,f?p?"nw":"sw":p?"ne":"se"}resolveMinDimensions(n,a,r=0,o=0){const d=Math.min(r,n.width),h=Math.min(o,n.height);return!a||!d&&!h?[d,h]:a>1?d?[d,d/a]:[h*a,h]:h?[h*a,h]:[d,d/a]}resizeCrop(){const{evData:n}=this,{aspect:a=0,maxWidth:r,maxHeight:o}=this.props,d=this.getBox(),[h,g]=this.resolveMinDimensions(d,a,this.props.minWidth,this.props.minHeight);let p=this.makePixelCrop(d);const f=this.getPointRegion(d,n.ord,h,g),v=n.ord||f;let w=n.clientX-n.startClientX,S=n.clientY-n.startClientY;(h&&v==="nw"||v==="w"||v==="sw")&&(w=Math.min(w,-h)),(g&&v==="nw"||v==="n"||v==="ne")&&(S=Math.min(S,-g));const T={unit:"px",x:0,y:0,width:0,height:0};f==="ne"?(T.x=n.startCropX,T.width=w,a?(T.height=T.width/a,T.y=n.startCropY-T.height):(T.height=Math.abs(S),T.y=n.startCropY-T.height)):f==="se"?(T.x=n.startCropX,T.y=n.startCropY,T.width=w,a?T.height=T.width/a:T.height=S):f==="sw"?(T.x=n.startCropX+w,T.y=n.startCropY,T.width=Math.abs(w),a?T.height=T.width/a:T.height=S):f==="nw"&&(T.x=n.startCropX+w,T.width=Math.abs(w),a?(T.height=T.width/a,T.y=n.startCropY-T.height):(T.height=Math.abs(S),T.y=n.startCropY+S));const C=aw(T,a,f,d.width,d.height,h,g,r,o);return a||zs.xyOrds.indexOf(v)>-1?p=C:zs.xOrds.indexOf(v)>-1?(p.x=C.x,p.width=C.width):zs.yOrds.indexOf(v)>-1&&(p.y=C.y,p.height=C.height),p.x=Wo(p.x,0,d.width-p.width),p.y=Wo(p.y,0,d.height-p.height),p}renderCropSelection(){const{ariaLabels:n=zs.defaultProps.ariaLabels,disabled:a,locked:r,renderSelectionAddon:o,ruleOfThirds:d,crop:h}=this.props,g=this.getCropStyle();if(h)return We.createElement("div",{style:g,className:"ReactCrop__crop-selection",onPointerDown:this.onCropPointerDown,"aria-label":n.cropArea,tabIndex:0,onKeyDown:this.onComponentKeyDown,role:"group"},!a&&!r&&We.createElement("div",{className:"ReactCrop__drag-elements",onFocus:this.onDragFocus},We.createElement("div",{className:"ReactCrop__drag-bar ord-n","data-ord":"n"}),We.createElement("div",{className:"ReactCrop__drag-bar ord-e","data-ord":"e"}),We.createElement("div",{className:"ReactCrop__drag-bar ord-s","data-ord":"s"}),We.createElement("div",{className:"ReactCrop__drag-bar ord-w","data-ord":"w"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-nw","data-ord":"nw",tabIndex:0,"aria-label":n.nwDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"nw"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-n","data-ord":"n",tabIndex:0,"aria-label":n.nDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"n"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-ne","data-ord":"ne",tabIndex:0,"aria-label":n.neDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"ne"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-e","data-ord":"e",tabIndex:0,"aria-label":n.eDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"e"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-se","data-ord":"se",tabIndex:0,"aria-label":n.seDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"se"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-s","data-ord":"s",tabIndex:0,"aria-label":n.sDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"s"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-sw","data-ord":"sw",tabIndex:0,"aria-label":n.swDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"sw"),role:"button"}),We.createElement("div",{className:"ReactCrop__drag-handle ord-w","data-ord":"w",tabIndex:0,"aria-label":n.wDragHandle,onKeyDown:p=>this.onHandlerKeyDown(p,"w"),role:"button"})),o&&We.createElement("div",{className:"ReactCrop__selection-addon",onPointerDown:p=>p.stopPropagation()},o(this.state)),d&&We.createElement(We.Fragment,null,We.createElement("div",{className:"ReactCrop__rule-of-thirds-hz"}),We.createElement("div",{className:"ReactCrop__rule-of-thirds-vt"})))}makePixelCrop(n){const a={...qh,...this.props.crop||{}};return ir(a,n.width,n.height)}render(){const{aspect:n,children:a,circularCrop:r,className:o,crop:d,disabled:h,locked:g,style:p,ruleOfThirds:f}=this.props,{cropIsActive:v,newCropIsBeingDrawn:w}=this.state,S=d?this.renderCropSelection():null,T=FD("ReactCrop",o,v&&"ReactCrop--active",h&&"ReactCrop--disabled",g&&"ReactCrop--locked",w&&"ReactCrop--new-crop",d&&n&&"ReactCrop--fixed-aspect",d&&r&&"ReactCrop--circular-crop",d&&f&&"ReactCrop--rule-of-thirds",!this.dragStarted&&d&&!d.width&&!d.height&&"ReactCrop--invisible-crop",r&&"ReactCrop--no-animate");return We.createElement("div",{ref:this.componentRef,className:T,style:p},We.createElement("div",{ref:this.mediaRef,className:"ReactCrop__child-wrapper",onPointerDown:this.onComponentPointerDown},a),d?We.createElement("svg",{className:"ReactCrop__crop-mask",width:"100%",height:"100%"},We.createElement("defs",null,We.createElement("mask",{id:`hole-${this.instanceId}`},We.createElement("rect",{width:"100%",height:"100%",fill:"white"}),r?We.createElement("ellipse",{cx:`${d.x+d.width/2}${d.unit}`,cy:`${d.y+d.height/2}${d.unit}`,rx:`${d.width/2}${d.unit}`,ry:`${d.height/2}${d.unit}`,fill:"black"}):We.createElement("rect",{x:`${d.x}${d.unit}`,y:`${d.y}${d.unit}`,width:`${d.width}${d.unit}`,height:`${d.height}${d.unit}`,fill:"black"}))),We.createElement("rect",{fill:"black",fillOpacity:.5,width:"100%",height:"100%",mask:`url(#hole-${this.instanceId})`})):void 0,S)}};hn(Ki,"xOrds",["e","w"]),hn(Ki,"yOrds",["n","s"]),hn(Ki,"xyOrds",["nw","ne","se","sw"]),hn(Ki,"nudgeStep",1),hn(Ki,"nudgeStepMedium",10),hn(Ki,"nudgeStepLarge",100),hn(Ki,"defaultProps",{ariaLabels:{cropArea:"Use the arrow keys to move the crop selection area",nwDragHandle:"Use the arrow keys to move the north west drag handle to change the crop selection area",nDragHandle:"Use the up and down arrow keys to move the north drag handle to change the crop selection area",neDragHandle:"Use the arrow keys to move the north east drag handle to change the crop selection area",eDragHandle:"Use the up and down arrow keys to move the east drag handle to change the crop selection area",seDragHandle:"Use the arrow keys to move the south east drag handle to change the crop selection area",sDragHandle:"Use the up and down arrow keys to move the south drag handle to change the crop selection area",swDragHandle:"Use the arrow keys to move the south west drag handle to change the crop selection area",wDragHandle:"Use the up and down arrow keys to move the west drag handle to change the crop selection area"}});let VD=Ki;const m_=({image:e,isOpen:n,onClose:a,onSave:r})=>{const{executeWithFeedback:o}=Wl(),d=b.useRef(null),h=b.useRef(null),[g,p]=b.useState("crop"),[f,v]=b.useState(""),[w,S]=b.useState(""),[T,C]=b.useState(!1),[_,k]=b.useState(),[R,O]=b.useState(),[P,U]=b.useState(void 0),[A,$]=b.useState({brightness:100,contrast:100,saturation:100,blur:0,sepia:0,hue:0}),[E,I]=b.useState({text:"النص الجديد",fontSize:24,fontFamily:"Arial",color:"#000000",bold:!1,italic:!1,shadow:!1}),[Z,F]=b.useState(0),{cropImageAsync:Y,rotateImageAsync:G,flipImageAsync:V,restoreOriginalAsync:H}=Eu();b.useEffect(()=>{n&&e&&(v(e.url),S(e.url),$({brightness:100,contrast:100,saturation:100,blur:0,sepia:0,hue:0}),F(0),k(void 0),O(void 0))},[n,e]),b.useEffect(()=>{if(n&&d.current){const ee=d.current,re=ee.getContext("2d");re&&(ee.width=800,ee.height=600,re.clearRect(0,0,ee.width,ee.height))}},[n,g]);const Q=b.useCallback(()=>{if(!h.current||!d.current)return;const ee=d.current,re=ee.getContext("2d");if(!re)return;const me=h.current;ee.width=me.naturalWidth,ee.height=me.naturalHeight,re.filter=`
      brightness(${A.brightness}%)
      contrast(${A.contrast}%)
      saturate(${A.saturation}%)
      blur(${A.blur}px)
      sepia(${A.sepia}%)
      hue-rotate(${A.hue}deg)
    `,re.drawImage(me,0,0);const ye=ee.toDataURL("image/jpeg",.9);S(ye)},[A]);b.useEffect(()=>{(g==="filter"||g==="adjust")&&Q()},[A,g,Q]);const K=b.useCallback(async()=>{if(!(!R||!h.current)){C(!0);try{const ee=await Y({imageId:e.id,cropData:{x:R.x,y:R.y,width:R.width,height:R.height}});ee&&(S(ee.url),r?.(ee))}catch(ee){console.error("فشل في اقتصاص الصورة:",ee)}finally{C(!1)}}},[R,e.id,Y,r]),oe=b.useCallback(async ee=>{C(!0);try{const re=await o(()=>G({imageId:e.id,degrees:ee}),{loadingKey:"rotate-image",successMessage:"تم تدوير الصورة بنجاح",errorMessage:"فشل في تدوير الصورة"});if(!re)return;S(re.url),F(me=>(me+ee)%360),r?.(re)}finally{C(!1)}},[e.id,G,o,r]),W=b.useCallback(async ee=>{C(!0);try{const re=await o(()=>V({imageId:e.id,direction:ee}),{loadingKey:"flip-image",successMessage:"تم قلب الصورة بنجاح",errorMessage:"فشل في قلب الصورة"});if(!re)return;S(re.url),r?.(re)}finally{C(!1)}},[e.id,V,o,r]),X=b.useCallback(()=>{if(!d.current)return;const ee=d.current,re=ee.getContext("2d");re&&(re.font=`${E.bold?"bold":"normal"} ${E.fontSize}px ${E.fontFamily}`,re.fillStyle=E.color,re.textAlign="center",E.shadow&&(re.shadowColor="rgba(0,0,0,0.5)",re.shadowBlur=5,re.shadowOffsetX=2,re.shadowOffsetY=2),re.fillText(E.text,ee.width/2,ee.height/2),re.shadowColor="transparent")},[E]),z=b.useCallback(async()=>{C(!0);try{let ee=e;const re=Object.values(A).some((me,ye)=>me!==[100,100,100,0,0,0][ye]);if(d.current){const ye=d.current.toDataURL("image/png")}r?.(ee),a()}catch(ee){console.error("فشل في تطبيق التعديلات:",ee)}finally{C(!1)}},[A,e,r,a]),J=b.useCallback(async()=>{C(!0);try{const ee=await o(()=>H(e.id),{loadingKey:"restore-image",successMessage:"تم استعادة النسخة الأصلية بنجاح",errorMessage:"فشل في استعادة النسخة الأصلية"});if(!ee)return;S(ee.url),$({brightness:100,contrast:100,saturation:100,blur:0,sepia:0,hue:0}),r?.(ee)}finally{C(!1)}},[e.id,H,o,r]),se=b.useCallback(ee=>{const{width:re,height:me}=ee.currentTarget,ye=HD(UD({unit:"%",width:90},P||re/me,re,me),re,me);k(ye)},[P]),ae=[{id:"crop",name:"اقتصاص",icon:"✂️"},{id:"rotate",name:"تدوير",icon:"🔄"},{id:"flip",name:"قلب",icon:"🔀"},{id:"filter",name:"فلاتر",icon:"🎨"},{id:"adjust",name:"تعديلات",icon:"⚙️"},{id:"text",name:"نص",icon:"📝"},{id:"watermark",name:"علامة مائية",icon:"💧"}];return n?t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50 p-4",children:t.jsxs("div",{className:"bg-white rounded-lg w-full max-w-7xl h-full max-h-[90vh] flex flex-col",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"محرر الصور المتقدم"}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(rt,{variant:"secondary",onClick:J,disabled:T,label:"استعادة الأصلية"}),t.jsx(rt,{variant:"primary",onClick:z,disabled:T,loading:T,label:"حفظ التعديلات"}),t.jsx(rt,{variant:"secondary",onClick:a,disabled:T,label:"✕"})]})]}),t.jsxs("div",{className:"flex flex-1 overflow-hidden",children:[t.jsx("div",{className:"w-64 border-l p-4 overflow-y-auto",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"الأدوات"}),t.jsx("div",{className:"grid grid-cols-2 gap-2",children:ae.map(ee=>t.jsxs("button",{onClick:()=>p(ee.id),className:`
                        p-3 rounded-lg border transition-all text-sm
                        ${g===ee.id?"border-blue-500 bg-blue-50 text-blue-700":"border-gray-200 hover:border-gray-300"}
                      `,children:[t.jsx("div",{className:"text-lg mb-1",children:ee.icon}),ee.name]},ee.id))})]}),t.jsxs("div",{className:"border-t pt-4",children:[g==="crop"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"إعدادات الاقتصاص"}),t.jsxs("div",{className:"space-y-2",children:[t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"النسبة:"}),t.jsxs("select",{value:P||"",onChange:ee=>U(ee.target.value?parseFloat(ee.target.value):void 0),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500",children:[t.jsx("option",{value:"",children:"حر"}),t.jsx("option",{value:"1",children:"مربع (1:1)"}),t.jsx("option",{value:"1.3333",children:"4:3"}),t.jsx("option",{value:"1.7778",children:"16:9"}),t.jsx("option",{value:"0.75",children:"3:4"})]})]}),t.jsx(rt,{onClick:K,disabled:!R||T,loading:T,className:"w-full",label:"تطبيق الاقتصاص",children:t.jsx("span",{className:"text-sm",children:"تطبيق الاقتصاص"})})]})]}),g==="rotate"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"التدوير"}),t.jsx("div",{className:"space-y-2",children:t.jsxs("div",{className:"grid grid-cols-3 gap-2",children:[t.jsx(rt,{onClick:()=>oe(90),disabled:T,size:"sm",label:"90°"}),t.jsx(rt,{onClick:()=>oe(180),disabled:T,size:"sm",label:"180°"}),t.jsx(rt,{onClick:()=>oe(270),disabled:T,size:"sm",label:"270°"})]})})]}),g==="flip"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"القلب"}),t.jsxs("div",{className:"space-y-2",children:[t.jsx(rt,{onClick:()=>W("horizontal"),disabled:T,className:"w-full",label:"قلب أفقي"}),t.jsx(rt,{onClick:()=>W("vertical"),disabled:T,className:"w-full",label:"قلب عمودي"})]})]}),(g==="filter"||g==="adjust")&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"التعديلات والفلاتر"}),t.jsx("div",{className:"space-y-3",children:Object.entries(A).map(([ee,re])=>t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600 capitalize",children:ee==="brightness"?"السطوع":ee==="contrast"?"التباين":ee==="saturation"?"التشبع":ee==="blur"?"الضبابية":ee==="sepia"?"بني داكن":ee==="hue"?"الصبغة":ee}),t.jsx("input",{type:"range",min:ee==="hue"?-180:0,max:ee==="hue"?180:ee==="blur"?20:200,value:re,onChange:me=>$(ye=>({...ye,[ee]:parseInt(me.target.value)})),className:"w-full mt-1"}),t.jsx("span",{className:"text-xs text-gray-500",children:re})]},ee))})]}),g==="text"&&t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium mb-2",children:"إعدادات النص"}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"النص:"}),t.jsx("input",{type:"text",value:E.text,onChange:ee=>I(re=>({...re,text:ee.target.value})),className:"w-full mt-1 px-3 py-2 border border-gray-300 rounded focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"حجم الخط:"}),t.jsx("input",{type:"range",min:"12",max:"72",value:E.fontSize,onChange:ee=>I(re=>({...re,fontSize:parseInt(ee.target.value)})),className:"w-full mt-1"}),t.jsxs("span",{className:"text-xs text-gray-500",children:[E.fontSize,"px"]})]}),t.jsxs("label",{className:"block",children:[t.jsx("span",{className:"text-sm text-gray-600",children:"اللون:"}),t.jsx("input",{type:"color",value:E.color,onChange:ee=>I(re=>({...re,color:ee.target.value})),className:"w-full mt-1 h-10 border border-gray-300 rounded"})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:E.bold,onChange:ee=>I(re=>({...re,bold:ee.target.checked})),className:"ml-2"}),t.jsx("span",{className:"text-sm",children:"عريض"})]}),t.jsxs("label",{className:"flex items-center",children:[t.jsx("input",{type:"checkbox",checked:E.italic,onChange:ee=>I(re=>({...re,italic:ee.target.checked})),className:"ml-2"}),t.jsx("span",{className:"text-sm",children:"مائل"})]})]}),t.jsx(rt,{onClick:X,className:"w-full",label:"إضافة النص"})]})]})]})]})}),t.jsxs("div",{className:"flex-1 flex items-center justify-center bg-gray-100 p-4 overflow-auto",children:[T&&t.jsx("div",{className:"absolute inset-0 bg-white bg-opacity-75 flex items-center justify-center z-10",children:t.jsx(pr,{size:"lg"})}),t.jsx("div",{className:"relative max-w-full max-h-full",children:g==="crop"?t.jsx(VD,{crop:_,onChange:(ee,re)=>k(re),onComplete:ee=>O(ee),aspect:P,children:t.jsx("img",{ref:h,src:w,alt:"تحرير الصورة",onLoad:se,className:"max-w-full max-h-full object-contain"})}):t.jsxs("div",{className:"relative",children:[t.jsx("img",{ref:h,src:w,alt:"تحرير الصورة",className:"max-w-full max-h-full object-contain",style:{filter:g==="filter"||g==="adjust"?`
                        brightness(${A.brightness}%)
                        contrast(${A.contrast}%)
                        saturate(${A.saturation}%)
                        blur(${A.blur}px)
                        sepia(${A.sepia}%)
                        hue-rotate(${A.hue}deg)
                      `:"none"}}),g==="text"&&t.jsx("canvas",{ref:d,className:"absolute top-0 left-0 w-full h-full",style:{pointerEvents:"auto"}})]})})]})]})]})}):null},ZD=()=>{const{propertyId:e}=Gh(),n=Hs(),a=is(),{executeWithFeedback:r,showConfirmDialog:o,confirmDialog:d,hideConfirmDialog:h}=Wl(),[g,p]=b.useState("gallery"),[f,v]=b.useState([]),[w,S]=b.useState(null),[T,C]=b.useState("all"),[_,k]=b.useState("grid"),O={title:n.state?.propertyName||`الكيان ${e}`},{images:P,isLoading:U,deleteImagesAsync:A,refetch:$}=Eu({propertyId:e,category:T==="all"?void 0:T,sortBy:"order",sortOrder:"asc"}),{data:E,isLoading:I,refetch:Z}=M2(e),F=b.useCallback(W=>{v(W)},[]),Y=b.useCallback(()=>{f.length!==0&&o({title:"حذف الصور المحددة",message:`هل أنت متأكد من حذف ${f.length} صورة؟`,type:"danger",onConfirm:async()=>{try{await r(()=>A({imageIds:f}),{loadingKey:"delete-images",successMessage:`تم حذف ${f.length} صورة بنجاح`,errorMessage:"فشل في حذف الصور"}),v([])}catch(W){console.error("فشل في حذف الصور:",W)}finally{h()}}})},[f,o,h,r,A]),G=b.useCallback(W=>{$(),Z(),p("gallery")},[$,Z]),V=b.useCallback(W=>{S(W)},[]),H=b.useCallback(()=>{S(null)},[]),Q=b.useCallback(W=>{$(),S(null)},[$]),K=[{key:"thumbnail",title:"الصورة",render:(W,X)=>t.jsx("div",{className:"w-16 h-16 rounded overflow-hidden",children:t.jsx("img",{src:X.thumbnails.small||X.url,alt:X.alt||X.filename,className:"w-full h-full object-cover"})})},{key:"filename",title:"اسم الملف",render:(W,X)=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:X.filename}),t.jsx("p",{className:"text-sm text-gray-500",children:X.alt})]})},{key:"category",title:"الفئة",render:(W,X)=>t.jsx(Wr,{status:X.category==="exterior"?"خارجية":X.category==="interior"?"داخلية":X.category==="amenity"?"المرافق":X.category==="floor_plan"?"مخطط الطابق":X.category==="documents"?"المستندات":"معرض عام"})},{key:"size",title:"الحجم / الأبعاد",render:(W,X)=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[Math.round(X.size/1024)," كب"]}),t.jsxs("p",{className:"text-gray-500",children:[X.width,"×",X.height]})]})},{key:"status",title:"الحالة",render:(W,X)=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(Wr,{status:X.processingStatus==="ready"?"جاهزة":"معالجة"}),X.isPrimary&&t.jsx(Wr,{status:"رئيسية",size:"sm"})]})},{key:"uploadedAt",title:"تاريخ الرفع",render:(W,X)=>t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{children:new Date(X.uploadedAt).toLocaleDateString("ar-SA")}),t.jsx("p",{className:"text-gray-500",children:new Date(X.uploadedAt).toLocaleTimeString("ar-SA")})]})},{key:"actions",title:"الإجراءات",render:(W,X)=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>V(X),label:"تحرير"}),t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>v([X.id]),label:"حذف"})]})}],oe=[{value:"all",label:"جميع الصور",count:E?.totalImages||0},{value:"exterior",label:"خارجية",count:E?.byCategory.exterior||0},{value:"interior",label:"داخلية",count:E?.byCategory.interior||0},{value:"amenity",label:"المرافق",count:E?.byCategory.amenity||0},{value:"floor_plan",label:"مخطط الطابق",count:E?.byCategory.floor_plan||0},{value:"documents",label:"المستندات",count:E?.byCategory.documents||0},{value:"gallery",label:"معرض عام",count:E?.byCategory.gallery||0}];return O?t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[t.jsx("button",{onClick:()=>a("/admin/properties"),className:"hover:text-blue-600 transition-colors",children:"الكيانات"}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/properties/${e}`),className:"hover:text-blue-600 transition-colors",children:O.title}),t.jsx("span",{children:"/"}),t.jsx("span",{children:"معرض الصور"})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"معرض صور الكيان"}),t.jsx("p",{className:"text-gray-600 mt-1",children:O.title})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(rt,{variant:"secondary",onClick:()=>a(`/admin/properties/${e}`),label:"العودة للكيان"})})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 rtl:space-x-reverse px-6",children:[{id:"gallery",label:"معرض الصور",count:P.length},{id:"upload",label:"رفع جديدة",icon:"📤"},{id:"statistics",label:"الإحصائيات",icon:"📊"}].map(W=>t.jsx("button",{onClick:()=>p(W.id),className:`
                  py-4 px-1 border-b-2 font-medium text-sm transition-colors
                  ${g===W.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:t.jsxs("div",{className:"flex items-center gap-2",children:[W.icon&&t.jsx("span",{children:W.icon}),t.jsx("span",{children:W.label}),W.count!==void 0&&t.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:W.count})]})},W.id))})}),t.jsxs("div",{className:"p-6",children:[g==="gallery"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"الفئة:"}),t.jsx("select",{value:T,onChange:W=>C(W.target.value),className:"px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:oe.map(W=>t.jsxs("option",{value:W.value,children:[W.label," (",W.count,")"]},W.value))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"العرض:"}),t.jsxs("div",{className:"flex border border-gray-300 rounded overflow-hidden",children:[t.jsx("button",{onClick:()=>k("grid"),className:`px-3 py-1 text-sm ${_==="grid"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"شبكة"}),t.jsx("button",{onClick:()=>k("table"),className:`px-3 py-1 text-sm ${_==="table"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"جدول"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[f.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[f.length," محددة"]}),t.jsx(rt,{variant:"danger",size:"sm",onClick:Y,label:"حذف المحددة",children:"حذف المحددة"})]}),t.jsx(rt,{variant:"primary",onClick:()=>p("upload"),label:"رفع صور جديدة"})]})]}),_==="grid"?t.jsx(J2,{propertyId:e,category:T==="all"?void 0:T,editable:!0,reorderable:!0,multiSelect:!0,selectedImages:f,onSelectionChange:F,onEditImage:V,showDetails:!0,showToolbar:!1}):t.jsx("div",{children:P.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد صور للعرض"}):t.jsx(ls,{data:P,columns:K,loading:U,rowSelection:{selectedRowKeys:f,onChange:W=>v(W)}})})]}),g==="upload"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"رفع صور جديدة"}),t.jsx("p",{className:"text-gray-600",children:"اختر الصور لرفعها وربطها بهذا الكيان. يمكنك تحديد فئة كل صورة والتحكم في ترتيبها."})]}),t.jsx(u_,{propertyId:e,defaultCategory:"gallery",multiple:!0,maxFiles:50,maxSize:10,showPreview:!0,showProgress:!0,onUploadComplete:G})]}),g==="statistics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إحصائيات الصور"}),t.jsx("p",{className:"text-gray-600",children:"نظرة عامة على صور هذا الكيان والمساحة المستخدمة."})]}),I?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(pr,{size:"lg"})}):E?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-blue-600",children:"إجمالي الصور"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:E.totalImages})]})]})}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-green-600",children:"الحجم الكلي"}),t.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[(E.totalSize/1024/1024).toFixed(1)," MB"]})]})]})}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"الصور الرئيسية"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:E.primaryImages})]})]})}),t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-purple-600",children:"متوسط الحجم"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[(E.averageSize/1024/1024).toFixed(1)," MB"]})]})]})})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"لا توجد إحصائيات متاحة"})})]})]})]}),w&&t.jsx(m_,{image:w,isOpen:!!w,onClose:H,onSave:Q}),d&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:d.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:d.message}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(rt,{variant:"secondary",onClick:h,label:"إلغاء",children:"إلغاء"}),t.jsx(rt,{variant:"danger",onClick:d.onConfirm,label:"تأكيد",children:"تأكيد"})]})]})})]}):t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:"حدث خطأ في تحميل بيانات الكيان"}),t.jsx(rt,{onClick:()=>a("/admin/properties"),variant:"secondary",label:"العودة للكيانات"})]})},WD=()=>{const{propertyId:e,unitId:n}=Gh(),a=is(),r=Hs(),{executeWithFeedback:o,showConfirmDialog:d,confirmDialog:h,hideConfirmDialog:g}=Wl(),{data:p,isLoading:f,error:v}=It({queryKey:["admin-unit-details",n],queryFn:()=>nc.getDetails(n),enabled:!!n}),w=p?.data,S=w?.dynamicFields?.flatMap(re=>re.fieldValues)||[],[T,C]=b.useState("gallery"),[_,k]=b.useState([]),[R,O]=b.useState(null),[P,U]=b.useState("all"),[A,$]=b.useState("grid"),E=r.state||{},I={title:E.propertyName||`الكيان ${e}`},Z={name:E.unitName||`الوحدة ${n}`},{images:F,isLoading:Y,deleteImagesAsync:G,refetch:V}=Eu({propertyId:e,unitId:n,category:P==="all"?void 0:P,sortBy:"order",sortOrder:"asc"}),{data:H,isLoading:Q,refetch:K}=M2(e,n),oe=b.useCallback(re=>{k(re)},[]),W=b.useCallback(()=>{_.length!==0&&d({title:"حذف الصور المحددة",message:`هل أنت متأكد من حذف ${_.length} صورة؟`,type:"danger",onConfirm:async()=>{try{await o(()=>G({imageIds:_}),{loadingKey:"delete-images",successMessage:`تم حذف ${_.length} صورة بنجاح`,errorMessage:"فشل في حذف الصور"}),k([])}catch(re){console.error("فشل في حذف الصور:",re)}finally{g()}}})},[_,d,g,o,G]),X=b.useCallback(re=>{V(),K(),C("gallery")},[V,K]),z=b.useCallback(re=>{O(re)},[]),J=b.useCallback(()=>{O(null)},[]),se=b.useCallback(re=>{V(),O(null)},[V]),ae=[{key:"thumbnail",title:"الصورة",label:"الصورة",render:re=>t.jsx("div",{className:"w-16 h-16 rounded overflow-hidden",children:t.jsx("img",{src:re.thumbnails.small||re.url,alt:re.alt||re.filename,className:"w-full h-full object-cover"})})},{key:"filename",title:"اسم الملف",label:"اسم الملف",render:re=>t.jsxs("div",{children:[t.jsx("p",{className:"font-medium",children:re.filename}),t.jsx("p",{className:"text-sm text-gray-500",children:re.alt})]})},{key:"category",title:"الفئة",label:"الفئة",render:re=>t.jsx(Wr,{status:re.category==="exterior"?"خارجية":re.category==="interior"?"داخلية":re.category==="amenity"?"المرافق":re.category==="floor_plan"?"مخطط الطابق":re.category==="documents"?"المستندات":"معرض عام"})},{key:"size",title:"الحجم / الأبعاد",label:"الحجم / الأبعاد",render:re=>t.jsxs("div",{className:"text-sm",children:[t.jsxs("p",{children:[Math.round(re.size/1024)," كب"]}),t.jsxs("p",{className:"text-gray-500",children:[re.width,"×",re.height]})]})},{key:"status",title:"الحالة",label:"الحالة",render:re=>t.jsxs("div",{className:"space-y-1",children:[t.jsx(Wr,{status:re.processingStatus==="ready"?"جاهزة":"معالجة"}),re.isPrimary&&t.jsx(Wr,{status:"رئيسية",size:"sm"})]})},{key:"uploadedAt",title:"تاريخ الرفع",label:"تاريخ الرفع",render:re=>t.jsxs("div",{className:"text-sm",children:[t.jsx("p",{children:new Date(re.uploadedAt).toLocaleDateString("ar-SA")}),t.jsx("p",{className:"text-gray-500",children:new Date(re.uploadedAt).toLocaleTimeString("ar-SA")})]})},{key:"actions",title:"الإجراءات",label:"الإجراءات",render:re=>t.jsxs("div",{className:"flex gap-1",children:[t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>z(re),label:"تحرير",children:"تحرير"}),t.jsx(rt,{variant:"secondary",size:"sm",onClick:()=>k([re.id]),label:"حذف",children:"حذف"})]})}],ee=[{value:"all",label:"جميع الصور",count:H?.totalImages||0},{value:"exterior",label:"خارجية",count:H?.byCategory.exterior||0},{value:"interior",label:"داخلية",count:H?.byCategory.interior||0},{value:"amenity",label:"المرافق",count:H?.byCategory.amenity||0},{value:"floor_plan",label:"مخطط الطابق",count:H?.byCategory.floor_plan||0},{value:"documents",label:"المستندات",count:H?.byCategory.documents||0},{value:"gallery",label:"معرض عام",count:H?.byCategory.gallery||0}];return f?t.jsx("div",{className:"flex justify-center items-center h-64",children:t.jsx(pr,{size:"lg"})}):v||!w||!I?t.jsxs("div",{className:"text-center py-8",children:[t.jsx("p",{className:"text-red-600 mb-4",children:"حدث خطأ في تحميل بيانات الوحدة"}),t.jsx(rt,{onClick:()=>a("/admin/units"),variant:"secondary",label:"العودة للوحدات",children:"العودة للوحدات"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm border p-6",children:t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{children:[t.jsxs("div",{className:"flex items-center gap-2 text-sm text-gray-500 mb-2",children:[t.jsx("button",{onClick:()=>a("/admin/properties"),className:"hover:text-blue-600 transition-colors",children:"الكيانات"}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/properties/${e}`),className:"hover:text-blue-600 transition-colors",children:I.title}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/units?propertyId=${e}`),className:"hover:text-blue-600 transition-colors",children:"الوحدات"}),t.jsx("span",{children:"/"}),t.jsx("button",{onClick:()=>a(`/admin/units/${n}`),className:"hover:text-blue-600 transition-colors",children:Z.name}),t.jsx("span",{children:"/"}),t.jsx("span",{children:"معرض الصور"})]}),t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"معرض صور الوحدة"}),t.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[t.jsx("p",{className:"text-gray-600",children:Z.name}),t.jsx("span",{className:"text-gray-400",children:"•"}),t.jsx("p",{className:"text-gray-600",children:I.title})]})]}),t.jsx("div",{className:"flex items-center gap-3",children:t.jsx(rt,{variant:"secondary",onClick:()=>a(`/admin/units/${n}`),label:"العودة للوحدة"})})]})}),t.jsx("div",{className:"bg-gradient-to-l from-blue-50 to-indigo-50 border border-blue-200 rounded-lg p-4",children:t.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4",children:[t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:"نوع الوحدة"}),t.jsx("p",{className:"font-semibold text-gray-900",children:w.unitTypeName})]}),S.slice(0,3).map(re=>t.jsxs("div",{className:"text-center",children:[t.jsx("p",{className:"text-sm text-gray-600",children:re.displayName}),t.jsx("p",{className:"font-semibold text-gray-900",children:re.value})]},re.fieldId))]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm border",children:[t.jsx("div",{className:"border-b border-gray-200",children:t.jsx("nav",{className:"flex space-x-8 rtl:space-x-reverse px-6",children:[{id:"gallery",label:"معرض الصور",count:F.length},{id:"upload",label:"رفع جديدة",icon:"📤"},{id:"statistics",label:"الإحصائيات",icon:"📊"}].map(re=>t.jsx("button",{onClick:()=>C(re.id),className:`
                  py-4 px-1 border-b-2 font-medium text-sm transition-colors
                  ${T===re.id?"border-blue-500 text-blue-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}
                `,children:t.jsxs("div",{className:"flex items-center gap-2",children:[re.icon&&t.jsx("span",{children:re.icon}),t.jsx("span",{children:re.label}),re.count!==void 0&&t.jsx("span",{className:"bg-gray-100 text-gray-600 px-2 py-0.5 rounded-full text-xs",children:re.count})]})},re.id))})}),t.jsxs("div",{className:"p-6",children:[T==="gallery"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-start md:items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"الفئة:"}),t.jsx("select",{style:{direction:"rtl"},value:P,onChange:re=>U(re.target.value),className:"px-3 py-2 border border-gray-300 rounded text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:ee.map(re=>t.jsxs("option",{value:re.value,children:[re.label," (",re.count,")"]},re.value))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"العرض:"}),t.jsxs("div",{className:"flex border border-gray-300 rounded overflow-hidden",children:[t.jsx("button",{onClick:()=>$("grid"),className:`px-3 py-1 text-sm ${A==="grid"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"شبكة"}),t.jsx("button",{onClick:()=>$("table"),className:`px-3 py-1 text-sm ${A==="table"?"bg-blue-500 text-white":"bg-white text-gray-700 hover:bg-gray-50"}`,children:"جدول"})]})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[_.length>0&&t.jsxs(t.Fragment,{children:[t.jsxs("span",{className:"text-sm text-gray-600",children:[_.length," محددة"]}),t.jsx(rt,{variant:"danger",size:"sm",onClick:W,label:"حذف المحددة"})]}),t.jsx(rt,{variant:"primary",onClick:()=>C("upload"),label:"رفع صور جديدة"})]})]}),A==="grid"?t.jsx(J2,{propertyId:e,unitId:n,category:P==="all"?void 0:P,editable:!0,reorderable:!0,multiSelect:!0,selectedImages:_,onSelectionChange:oe,onEditImage:z,showDetails:!0,showToolbar:!1}):t.jsx("div",{children:F.length===0?t.jsx("div",{className:"text-center py-8 text-gray-500",children:"لا توجد صور للعرض"}):t.jsx(ls,{data:F,columns:ae,loading:Y,rowSelection:{selectedRowKeys:_,onChange:re=>k(re)}})})]}),T==="upload"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"رفع صور جديدة للوحدة"}),t.jsx("p",{className:"text-gray-600",children:"اختر الصور لرفعها وربطها بهذه الوحدة. يمكنك تحديد فئة كل صورة والتحكم في ترتيبها."})]}),t.jsx(u_,{propertyId:e,unitId:n,defaultCategory:"interior",multiple:!0,maxFiles:30,maxSize:10,showPreview:!0,showProgress:!0,onUploadComplete:X})]}),T==="statistics"&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:"إحصائيات صور الوحدة"}),t.jsx("p",{className:"text-gray-600",children:"نظرة عامة على صور هذه الوحدة والمساحة المستخدمة."})]}),Q?t.jsx("div",{className:"flex justify-center py-8",children:t.jsx(pr,{size:"lg"})}):H?t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-blue-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M4 3a2 2 0 00-2 2v10a2 2 0 002 2h12a2 2 0 002-2V5a2 2 0 00-2-2H4zm12 12H4l4-8 3 6 2-4 3 6z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-blue-600",children:"إجمالي الصور"}),t.jsx("p",{className:"text-2xl font-bold text-blue-900",children:H.totalImages})]})]})}),t.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-green-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M3 4a1 1 0 011-1h12a1 1 0 011 1v2a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 10a1 1 0 011-1h6a1 1 0 011 1v6a1 1 0 01-1 1H4a1 1 0 01-1-1v-6zM14 9a1 1 0 00-1 1v6a1 1 0 001 1h2a1 1 0 001-1v-6a1 1 0 00-1-1h-2z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-green-600",children:"الحجم الكلي"}),t.jsxs("p",{className:"text-2xl font-bold text-green-900",children:[(H.totalSize/1024/1024).toFixed(1)," MB"]})]})]})}),t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-yellow-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-yellow-600",children:"الصور الرئيسية"}),t.jsx("p",{className:"text-2xl font-bold text-yellow-900",children:H.primaryImages})]})]})}),t.jsx("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-6",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("div",{className:"w-8 h-8 bg-purple-500 rounded-lg flex items-center justify-center",children:t.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:t.jsx("path",{fillRule:"evenodd",d:"M3 3a1 1 0 000 2v8a2 2 0 002 2h2.586l-1.293 1.293a1 1 0 101.414 1.414L10 15.414l2.293 2.293a1 1 0 001.414-1.414L12.414 15H15a2 2 0 002-2V5a1 1 0 100-2H3zm11.707 4.707a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293a1 1 0 00-1.414 0l-2 2a1 1 0 101.414 1.414L8 10.414l1.293 1.293a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})})}),t.jsxs("div",{className:"mr-4",children:[t.jsx("p",{className:"text-sm font-medium text-purple-600",children:"متوسط الحجم"}),t.jsxs("p",{className:"text-2xl font-bold text-purple-900",children:[(H.averageSize/1024/1024).toFixed(1)," MB"]})]})]})})]}):t.jsx("div",{className:"text-center py-8",children:t.jsx("p",{className:"text-gray-500",children:"لا توجد إحصائيات متاحة"})})]})]})]}),R&&t.jsx(m_,{image:R,isOpen:!!R,onClose:J,onSave:se}),h&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 max-w-md mx-4",children:[t.jsx("h3",{className:"text-lg font-semibold mb-2",children:h.title}),t.jsx("p",{className:"text-gray-600 mb-4",children:h.message}),t.jsxs("div",{className:"flex gap-2 justify-end",children:[t.jsx(rt,{variant:"secondary",onClick:g,label:"إلغاء"}),t.jsx(rt,{variant:"danger",onClick:h.onConfirm,label:"تأكيد"})]})]})})]})},KD=()=>{const{userId:e}=Gh(),n=is(),{showError:a}=vc(),{userDetails:r,isLoading:o,error:d,isSuccess:h,message:g}=pR(e||""),p=()=>r?.role==="Owner"||r?.role==="Staff",f=k=>k?new Date(k).toLocaleDateString("ar-SA"):"غير محدد",v=k=>new Intl.NumberFormat("ar-SA",{style:"currency",currency:"YER"}).format(k),w=()=>{p()?n(`/admin/bookings?propertyId=${r?.propertyId}`):n(`/admin/bookings?userId=${e}`)},S=()=>{p()?n(`/admin/reviews?propertyId=${r?.propertyId}`):n(`/admin/reviews?userId=${e}`)},T=()=>{p()?n(`/admin/reports?propertyId=${r?.propertyId}`):n(`/admin/reports?userId=${e}`)},C=()=>{p()?n(`/admin/audit-logs?propertyId=${r?.propertyId}`):n(`/admin/audit-logs?userId=${e}`)},_=()=>{p()?n(`/admin/payments?propertyId=${r?.propertyId}`):n(`/admin/payments?userId=${e}`)};return o?t.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:t.jsx(pr,{size:"lg"})}):!r||d||!o&&(!h||!r)?t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-8 text-center",children:[t.jsx("div",{className:"text-red-500 text-6xl mb-4",children:"⚠️"}),t.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-2",children:"خطأ في تحميل البيانات"}),t.jsx("p",{className:"text-gray-600 mb-4",children:g||d?.message||"لم يتم العثور على بيانات المستخدم"}),t.jsx("button",{onClick:()=>n("/admin/users"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"العودة لقائمة المستخدمين"})]}):t.jsxs("div",{className:"space-y-6",children:[t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("button",{onClick:()=>n("/admin/users"),className:"text-gray-400 hover:text-gray-600 transition-colors",children:"→"}),t.jsxs("div",{className:"flex items-center space-x-4 space-x-reverse",children:[t.jsx("div",{className:"w-16 h-16 rounded-full bg-gray-200 flex items-center justify-center overflow-hidden",children:r?.avatarUrl?t.jsx("img",{src:r.avatarUrl,alt:r.userName,className:"w-full h-full object-cover"}):t.jsx("span",{className:"text-gray-500 text-2xl",children:r?.userName.charAt(0).toUpperCase()})}),t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:r?.userName}),t.jsx("p",{className:"text-gray-600",children:r?.email}),t.jsxs("div",{className:"flex items-center mt-1",children:[t.jsx("span",{className:`inline-flex px-2 py-1 text-xs font-medium rounded-full ${r?.isActive?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:r?.isActive?"نشط":"غير نشط"}),p()&&t.jsx("span",{className:"mr-2 inline-flex px-2 py-1 text-xs font-medium rounded-full bg-blue-100 text-blue-800",children:r?.role==="Owner"?"مالك كيان":"موظف"})]})]})]})]}),t.jsxs("div",{className:"text-right",children:[t.jsx("p",{className:"text-sm text-gray-500",children:"عضو منذ"}),t.jsx("p",{className:"text-lg font-medium text-gray-900",children:f(r?.createdAt||"")})]})]})}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"👤 معلومات المستخدم"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"البريد الإلكتروني"}),t.jsx("p",{className:"text-gray-900",children:r?.email})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"رقم الهاتف"}),t.jsx("p",{className:"text-gray-900",children:r?.phoneNumber||"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"تاريخ التسجيل"}),t.jsx("p",{className:"text-gray-900",children:f(r?.createdAt||"")})]})]})]}),p()&&t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:"🏨 معلومات الكيان"}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"اسم الكيان"}),t.jsx("p",{className:"text-gray-900",children:r?.propertyName||"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"عدد الوحدات"}),t.jsx("p",{className:"text-gray-900",children:r?.unitsCount||0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"صور الكيان"}),t.jsx("p",{className:"text-gray-900",children:r?.propertyImagesCount||0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"صور الوحدات"}),t.jsx("p",{className:"text-gray-900",children:r?.unitImagesCount||0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-500 mb-1",children:"صافي الإيراد"}),t.jsx("p",{className:"text-gray-900 font-medium text-green-600",children:v(r?.netRevenue||0)})]})]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"إجمالي الحجوزات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r?.bookingsCount||0}),r?.pendingBookingsCount||!1,r?.canceledBookingsCount||!1]}),t.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"📅"})})]}),t.jsxs("div",{className:"mt-3 text-xs text-gray-500",children:[t.jsxs("p",{children:["أول حجز: ",f(r?.firstBookingDate)]}),t.jsxs("p",{children:["آخر حجز: ",f(r?.lastBookingDate)]})]})]}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:p()?"تقييمات الكيان":"المراجعات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r?.reviewsCount||0})]}),t.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"⭐"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"البلاغات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:r?.reportsCreatedCount||0}),r?.reportsAgainstCount||!1]}),t.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"⚠️"})})]})}),t.jsx("div",{className:"bg-white rounded-lg shadow-sm p-6",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-500",children:"المدفوعات"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:v(r?.totalPayments||0)}),r?.totalRefunds||!1]}),t.jsx("div",{className:"w-12 h-12 bg-green-100 rounded-lg flex items-center justify-center",children:t.jsx("span",{className:"text-2xl",children:"💰"})})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"الإجراءات السريعة"}),t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-5 gap-4",children:[t.jsxs("button",{onClick:w,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"📅"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:p()?"حجوزات الكيان":"حجوزات العميل"}),t.jsx("span",{className:"text-xs text-gray-500",children:r?.bookingsCount||0})]}),t.jsxs("button",{onClick:S,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"⭐"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:p()?"تقييمات الكيان":"مراجعات العميل"}),t.jsx("span",{className:"text-xs text-gray-500",children:r?.reviewsCount||0})]}),t.jsxs("button",{onClick:T,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"📝"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"البلاغات المُنشأة"}),t.jsx("span",{className:"text-xs text-gray-500",children:r?.reportsCreatedCount||0})]}),r?.reportsAgainstCount||!1,t.jsxs("button",{onClick:C,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"📊"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:p()?"نشاط الكيان":"نشاط العميل"})]}),t.jsxs("button",{onClick:_,className:"flex flex-col items-center p-4 border border-gray-200 rounded-lg hover:bg-gray-50 transition-colors",children:[t.jsx("span",{className:"text-2xl mb-2",children:"💰"}),t.jsx("span",{className:"text-sm font-medium text-gray-900",children:"المدفوعات"}),t.jsx("span",{className:"text-xs text-gray-500",children:v(r?.totalPayments||0)})]})]})]})]})},Go="/api/admin/propertyservices",Mc={create:e=>we.post(Go,e).then(n=>n.data),update:(e,n)=>we.put(`${Go}/${e}`,n).then(a=>a.data),delete:e=>we.delete(`${Go}/${e}`).then(n=>n.data),getByProperty:e=>we.get(`${Go}/property/${e.propertyId}`).then(n=>n.data),getById:e=>we.get(`${Go}/${e.serviceId}`).then(n=>n.data),getByType:e=>we.get(`${Go}/type/${e.serviceType}`,{params:{pageNumber:e.pageNumber,pageSize:e.pageSize}}).then(n=>n.data)},GD=e=>It({queryKey:["admin","property-services","by-property",e.propertyId],queryFn:()=>Mc.getByProperty(e),enabled:!!e.propertyId}),QD=e=>It({queryKey:["admin","property-services","details",e.serviceId],queryFn:()=>Mc.getById(e),enabled:!!e.serviceId}),XD=e=>It({queryKey:["admin","property-services","by-type",e],queryFn:()=>Mc.getByType(e),enabled:!!e.serviceType,placeholderData:n=>n}),JD=()=>{const e=Bn();return Be({mutationFn:n=>Mc.create(n),onSuccess:(n,a)=>{e.invalidateQueries({queryKey:["admin","property-services","by-property",a.propertyId]}),e.invalidateQueries({queryKey:["admin","property-services","by-type"]})}})},eO=()=>{const e=Bn();return Be({mutationFn:({serviceId:n,data:a})=>Mc.update(n,a),onSuccess:(n,a)=>{e.invalidateQueries({queryKey:["admin","property-services","details",a.serviceId]}),e.invalidateQueries({queryKey:["admin","property-services"]})}})},tO=()=>{const e=Bn();return Be({mutationFn:n=>Mc.delete(n),onSuccess:()=>{e.invalidateQueries({queryKey:["admin","property-services"]})}})},nO=()=>t.jsx("span",{children:"➕"}),aO=()=>t.jsx("span",{children:"🔍"}),sO=()=>t.jsx("span",{children:"🏢"}),rO=()=>t.jsx("span",{children:"💰"}),Gd=[{name:"cleaning_services",label:"خدمة تنظيف",icon:"🧹",category:"تنظيف"},{name:"dry_cleaning",label:"تنظيف جاف",icon:"👔",category:"تنظيف"},{name:"local_laundry_service",label:"خدمة غسيل",icon:"🧺",category:"تنظيف"},{name:"iron",label:"كوي الملابس",icon:"👔",category:"تنظيف"},{name:"wash",label:"غسيل",icon:"🧴",category:"تنظيف"},{name:"soap",label:"صابون",icon:"🧼",category:"تنظيف"},{name:"sanitizer",label:"معقم",icon:"🧴",category:"تنظيف"},{name:"plumbing",label:"سباكة",icon:"🔧",category:"تنظيف"},{name:"room_service",label:"خدمة الغرف",icon:"🛎️",category:"ضيافة"},{name:"restaurant",label:"مطعم",icon:"🍴",category:"ضيافة"},{name:"local_cafe",label:"مقهى",icon:"☕",category:"ضيافة"},{name:"local_bar",label:"بار",icon:"🍺",category:"ضيافة"},{name:"breakfast_dining",label:"إفطار",icon:"🍳",category:"ضيافة"},{name:"lunch_dining",label:"غداء",icon:"🍽️",category:"ضيافة"},{name:"dinner_dining",label:"عشاء",icon:"🍽️",category:"ضيافة"},{name:"delivery_dining",label:"توصيل طعام",icon:"🚚",category:"ضيافة"},{name:"takeout_dining",label:"طعام للخارج",icon:"🥡",category:"ضيافة"},{name:"ramen_dining",label:"وجبات سريعة",icon:"🍜",category:"ضيافة"},{name:"icecream",label:"آيس كريم",icon:"🍦",category:"ضيافة"},{name:"cake",label:"كيك",icon:"🎂",category:"ضيافة"},{name:"local_pizza",label:"بيتزا",icon:"🍕",category:"ضيافة"},{name:"fastfood",label:"وجبات سريعة",icon:"🍔",category:"ضيافة"},{name:"airport_shuttle",label:"نقل مطار",icon:"🚐",category:"نقل"},{name:"local_taxi",label:"تاكسي",icon:"🚕",category:"نقل"},{name:"car_rental",label:"تأجير سيارات",icon:"🚙",category:"نقل"},{name:"car_repair",label:"صيانة سيارات",icon:"🔧",category:"نقل"},{name:"directions_car",label:"سيارة خاصة",icon:"🚗",category:"نقل"},{name:"directions_bus",label:"حافلة",icon:"🚌",category:"نقل"},{name:"directions_boat",label:"قارب",icon:"⛵",category:"نقل"},{name:"directions_bike",label:"دراجة",icon:"🚴",category:"نقل"},{name:"electric_bike",label:"دراجة كهربائية",icon:"🚴",category:"نقل"},{name:"electric_scooter",label:"سكوتر كهربائي",icon:"🛴",category:"نقل"},{name:"local_shipping",label:"شحن محلي",icon:"🚚",category:"نقل"},{name:"local_parking",label:"موقف سيارات",icon:"🅿️",category:"نقل"},{name:"valet_parking",label:"خدمة صف السيارات",icon:"🚗",category:"نقل"},{name:"wifi",label:"واي فاي",icon:"📶",category:"اتصالات"},{name:"wifi_calling",label:"مكالمات واي فاي",icon:"📞",category:"اتصالات"},{name:"router",label:"راوتر",icon:"🔌",category:"اتصالات"},{name:"phone_in_talk",label:"خدمة هاتف",icon:"📞",category:"اتصالات"},{name:"phone_callback",label:"اتصال مجاني",icon:"📞",category:"اتصالات"},{name:"support_agent",label:"دعم العملاء",icon:"🧑‍💼",category:"اتصالات"},{name:"headset_mic",label:"خدمة عملاء",icon:"🎧",category:"اتصالات"},{name:"mail",label:"بريد",icon:"📧",category:"اتصالات"},{name:"markunread_mailbox",label:"صندوق بريد",icon:"📬",category:"اتصالات"},{name:"print",label:"طباعة",icon:"🖨️",category:"اتصالات"},{name:"scanner",label:"ماسح ضوئي",icon:"📄",category:"اتصالات"},{name:"fax",label:"فاكس",icon:"📠",category:"اتصالات"},{name:"spa",label:"سبا",icon:"💆",category:"ترفيه"},{name:"hot_tub",label:"جاكوزي",icon:"♨️",category:"ترفيه"},{name:"pool",label:"مسبح",icon:"🏊",category:"ترفيه"},{name:"fitness_center",label:"صالة رياضية",icon:"💪",category:"ترفيه"},{name:"sports_tennis",label:"تنس",icon:"🎾",category:"ترفيه"},{name:"sports_golf",label:"جولف",icon:"⛳",category:"ترفيه"},{name:"sports_soccer",label:"كرة قدم",icon:"⚽",category:"ترفيه"},{name:"sports_basketball",label:"كرة سلة",icon:"🏀",category:"ترفيه"},{name:"casino",label:"كازينو",icon:"🎰",category:"ترفيه"},{name:"theater_comedy",label:"مسرح",icon:"🎭",category:"ترفيه"},{name:"movie",label:"سينما",icon:"🎬",category:"ترفيه"},{name:"music_note",label:"موسيقى",icon:"🎵",category:"ترفيه"},{name:"nightlife",label:"حياة ليلية",icon:"🌃",category:"ترفيه"},{name:"celebration",label:"احتفالات",icon:"🎉",category:"ترفيه"},{name:"business_center",label:"مركز أعمال",icon:"💼",category:"أعمال"},{name:"meeting_room",label:"قاعة اجتماعات",icon:"👥",category:"أعمال"},{name:"co_present",label:"عرض تقديمي",icon:"📊",category:"أعمال"},{name:"groups",label:"مجموعات",icon:"👥",category:"أعمال"},{name:"event",label:"فعاليات",icon:"📅",category:"أعمال"},{name:"event_available",label:"حجز فعاليات",icon:"✅",category:"أعمال"},{name:"event_seat",label:"مقاعد فعاليات",icon:"🪑",category:"أعمال"},{name:"mic",label:"ميكروفون",icon:"🎤",category:"أعمال"},{name:"videocam",label:"كاميرا فيديو",icon:"📹",category:"أعمال"},{name:"desktop_windows",label:"كمبيوتر",icon:"💻",category:"أعمال"},{name:"laptop",label:"لابتوب",icon:"💻",category:"أعمال"},{name:"medical_services",label:"خدمات طبية",icon:"🏥",category:"صحة"},{name:"local_hospital",label:"مستشفى",icon:"🏥",category:"صحة"},{name:"local_pharmacy",label:"صيدلية",icon:"💊",category:"صحة"},{name:"emergency",label:"طوارئ",icon:"🚨",category:"صحة"},{name:"vaccines",label:"لقاحات",icon:"💉",category:"صحة"},{name:"healing",label:"علاج",icon:"❤️‍🩹",category:"صحة"},{name:"monitor_heart",label:"مراقبة صحية",icon:"❤️",category:"صحة"},{name:"health_and_safety",label:"صحة وأمان",icon:"🏥",category:"صحة"},{name:"masks",label:"كمامات",icon:"😷",category:"صحة"},{name:"sanitizer",label:"معقم",icon:"🧴",category:"صحة"},{name:"psychology",label:"استشارة نفسية",icon:"🧠",category:"صحة"},{name:"self_improvement",label:"تطوير ذاتي",icon:"🧘",category:"صحة"},{name:"shopping_cart",label:"عربة تسوق",icon:"🛒",category:"تسوق"},{name:"shopping_bag",label:"حقيبة تسوق",icon:"🛍️",category:"تسوق"},{name:"local_mall",label:"مول",icon:"🛍️",category:"تسوق"},{name:"local_grocery_store",label:"بقالة",icon:"🛒",category:"تسوق"},{name:"local_convenience_store",label:"متجر صغير",icon:"🏪",category:"تسوق"},{name:"store",label:"متجر",icon:"🏪",category:"تسوق"},{name:"storefront",label:"واجهة متجر",icon:"🏪",category:"تسوق"},{name:"local_offer",label:"عروض",icon:"🏷️",category:"تسوق"},{name:"loyalty",label:"برنامج ولاء",icon:"🎁",category:"تسوق"},{name:"card_giftcard",label:"بطاقة هدية",icon:"🎁",category:"تسوق"},{name:"child_care",label:"رعاية أطفال",icon:"👶",category:"عائلة"},{name:"baby_changing_station",label:"غرفة تغيير",icon:"👶",category:"عائلة"},{name:"child_friendly",label:"صديق للأطفال",icon:"👨‍👩‍👧‍👦",category:"عائلة"},{name:"toys",label:"ألعاب",icon:"🧸",category:"عائلة"},{name:"stroller",label:"عربة أطفال",icon:"👶",category:"عائلة"},{name:"family_restroom",label:"حمام عائلي",icon:"👨‍👩‍👧‍👦",category:"عائلة"},{name:"escalator_warning",label:"تحذير أطفال",icon:"⚠️",category:"عائلة"},{name:"pregnant_woman",label:"خدمات حوامل",icon:"🤰",category:"عائلة"},{name:"pets",label:"حيوانات أليفة",icon:"🐾",category:"حيوانات"},{name:"pet_supplies",label:"مستلزمات حيوانات",icon:"🐕",category:"حيوانات"},{name:"security",label:"أمن",icon:"🔒",category:"أمان"},{name:"local_police",label:"شرطة",icon:"👮",category:"أمان"},{name:"shield",label:"حماية",icon:"🛡️",category:"أمان"},{name:"verified_user",label:"مستخدم موثق",icon:"✅",category:"أمان"},{name:"lock",label:"قفل",icon:"🔒",category:"أمان"},{name:"key",label:"مفتاح",icon:"🔑",category:"أمان"},{name:"doorbell",label:"جرس الباب",icon:"🔔",category:"أمان"},{name:"camera_alt",label:"كاميرا مراقبة",icon:"📷",category:"أمان"},{name:"local_atm",label:"صراف آلي",icon:"💳",category:"مالية"},{name:"account_balance",label:"بنك",icon:"🏦",category:"مالية"},{name:"currency_exchange",label:"صرافة",icon:"💱",category:"مالية"},{name:"payment",label:"دفع",icon:"💳",category:"مالية"},{name:"credit_card",label:"بطاقة ائتمان",icon:"💳",category:"مالية"},{name:"account_balance_wallet",label:"محفظة",icon:"👛",category:"مالية"},{name:"savings",label:"توفير",icon:"🏦",category:"مالية"},{name:"handshake",label:"استقبال",icon:"🤝",category:"أخرى"},{name:"concierge",label:"كونسيرج",icon:"🧑‍💼",category:"أخرى"},{name:"bellhop",label:"حمال",icon:"🧳",category:"أخرى"},{name:"luggage",label:"أمتعة",icon:"🧳",category:"أخرى"},{name:"umbrella",label:"مظلة",icon:"☂️",category:"أخرى"},{name:"interpreter",label:"مترجم",icon:"🗣️",category:"أخرى"},{name:"translate",label:"ترجمة",icon:"🌐",category:"أخرى"},{name:"tour",label:"جولة سياحية",icon:"🗺️",category:"أخرى"},{name:"map",label:"خريطة",icon:"🗺️",category:"أخرى"},{name:"info",label:"معلومات",icon:"ℹ️",category:"أخرى"}],iO=({selectedIcon:e,onSelectIcon:n,onClose:a})=>{const[r,o]=b.useState(""),[d,h]=b.useState("الكل"),g=["الكل",...new Set(Gd.map(f=>f.category))],p=Gd.filter(f=>{const v=f.label.toLowerCase().includes(r.toLowerCase())||f.name.toLowerCase().includes(r.toLowerCase()),w=d==="الكل"||f.category===d;return v&&w});return t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60]",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-5xl max-h-[90vh] overflow-hidden flex flex-col",children:[t.jsxs("div",{className:"flex justify-between items-center mb-4",children:[t.jsx("h3",{className:"text-lg font-semibold",children:"اختر أيقونة للخدمة"}),t.jsx("button",{onClick:a,className:"text-gray-500 hover:text-gray-700 text-xl",children:"✕"})]}),t.jsxs("div",{className:"mb-4 space-y-3",children:[t.jsx("input",{type:"text",placeholder:"ابحث عن أيقونة...",value:r,onChange:f=>o(f.target.value),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500"}),t.jsx("div",{className:"flex flex-wrap gap-2",children:g.map(f=>t.jsx("button",{onClick:()=>h(f),className:`px-3 py-1 rounded-full text-sm transition-colors ${d===f?"bg-blue-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:f},f))})]}),t.jsxs("div",{className:"flex-1 overflow-y-auto",children:[t.jsx("div",{className:"grid grid-cols-8 gap-2",children:p.map(f=>t.jsx("button",{onClick:()=>n(f.name),className:`p-3 rounded-lg border-2 transition-all hover:scale-105 ${e===f.name?"border-blue-500 bg-blue-50":"border-gray-200 hover:border-gray-300"}`,title:`${f.label} (${f.name})`,children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsx("span",{className:"text-2xl mb-1",children:f.icon}),t.jsx("span",{className:"text-xs text-gray-600",children:f.label}),t.jsx("code",{className:"text-xs text-gray-400 mt-1",children:f.name})]})},f.name))}),p.length===0&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:t.jsx("p",{children:"لا توجد أيقونات مطابقة للبحث"})})]}),t.jsx("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:t.jsxs("p",{className:"text-sm text-gray-600",children:[t.jsx("span",{className:"font-semibold",children:"ملاحظة:"})," هذه الأيقونات متوافقة مع Material Icons في Flutter. استخدم اسم الأيقونة (مثل: Icons.",e||"room_service",") في تطبيق Flutter."]})})]})})},lO=()=>{const[e,n]=b.useState(""),[a,r]=b.useState(""),[o,d]=b.useState(""),[h,g]=b.useState(1),[p,f]=b.useState(20),[v,w]=b.useState(!1),[S,T]=b.useState(null),{currencies:C,loading:_}=Cc(),k=_?[]:C.map(Te=>Te.code),[R,O]=b.useState(!1),[P,U]=b.useState(!1),[A,$]=b.useState(!1),[E,I]=b.useState(null),[Z,F]=b.useState({propertyId:"",name:"",price:{amount:0,currency:"SAR"},pricingModel:"PerBooking",icon:"room_service"}),[Y,G]=b.useState({serviceId:"",name:"",price:{amount:0,currency:"SAR"},pricingModel:"PerBooking",icon:"room_service"}),V=Te=>{const Fe=Gd.find(wt=>wt.name===Te);return Fe?Fe.icon:"🛎️"},H=(Te,Fe)=>{if(Fe)return V(Fe);const wt=Te.toLowerCase(),Nt=Gd.find(ut=>wt.includes(ut.label.toLowerCase())||wt.includes(ut.name.toLowerCase()));return Nt?Nt.icon:"🛎️"},Q=Te=>{S==="create"?F({...Z,icon:Te}):S==="edit"&&G({...Y,icon:Te}),w(!1),T(null)};Sc({pageNumber:1,pageSize:100});const{data:K,isLoading:oe}=GD({propertyId:e}),{data:W,isLoading:X}=XD({serviceType:a,pageNumber:h,pageSize:p}),{data:z}=QD({serviceId:E?.id||""}),J=JD(),se=eO(),ae=tO(),ee=[{value:"PerBooking",label:"لكل حجز"},{value:"PerDay",label:"لكل يوم"},{value:"PerPerson",label:"لكل شخص"},{value:"PerUnit",label:"لكل وحدة"},{value:"PerHour",label:"لكل ساعة"},{value:"Fixed",label:"سعر ثابت"}],re=()=>e&&K?.success&&K.data?K.data:a&&W?.items?W.items:[],me=e?oe:X,ye=()=>{F({propertyId:e||"",name:"",price:{amount:0,currency:"SAR"},pricingModel:"PerBooking",icon:"room_service"}),O(!0)},Ce=Te=>{I(Te),G({serviceId:Te.id,name:Te.name,price:Te.price,pricingModel:Object.keys(Te.pricingModel)[0],icon:Te.icon||"room_service"}),U(!0)},de=Te=>{confirm("هل أنت متأكد من حذف هذه الخدمة؟")&&ae.mutate(Te.id,{onSuccess:()=>{},onError:()=>{}})},te=Te=>{I(Te),$(!0)},_e=Te=>{Te.preventDefault(),J.mutate(Z,{onSuccess:()=>{O(!1)},onError:()=>{}})},Ie=Te=>{Te.preventDefault(),se.mutate({serviceId:Y.serviceId,data:Y},{onSuccess:()=>{U(!1)},onError:()=>{}})},at=[{header:"الخدمة",title:"الخدمة",key:"name",render:Te=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:"w-10 h-10 bg-blue-100 rounded-lg flex items-center justify-center text-xl",children:H(Te.name,Te.icon)}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium text-gray-900",children:Te.name}),Te.icon&&t.jsxs("code",{className:"text-xs text-gray-400",children:["Icons.",Te.icon]})]})]})},{header:"العقار",title:"العقار",key:"property",render:Te=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(sO,{}),t.jsxs("div",{children:[t.jsx("div",{className:"font-medium",children:Te.propertyName}),t.jsxs("div",{className:"text-sm text-gray-500",children:[Te.propertyId.substring(0,8),"..."]})]})]})},{header:"السعر",title:"السعر",key:"price",render:Te=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(rO,{}),t.jsxs("div",{children:[t.jsxs("div",{className:"font-medium text-green-600",children:[Te.price.amount," ",Te.price.currency]}),t.jsx("div",{className:"text-sm text-gray-500",children:ee.find(Fe=>Fe.value===Object.keys(Te.pricingModel)[0])?.label})]})]})},{header:"الإجراءات",title:"الإجراءات",key:"actions",render:Te=>t.jsx(Ax,{actions:[{label:"عرض التفاصيل",icon:"👁️",onClick:()=>te(Te)},{label:"تعديل",icon:"✏️",onClick:()=>Ce(Te)},{label:"حذف",icon:"🗑️",onClick:()=>de(Te),variant:"danger"}]})}],Je=re().filter(Te=>Te.name.toLowerCase().includes(o.toLowerCase())||Te.propertyName.toLowerCase().includes(o.toLowerCase())),it={totalServices:Je.length,totalIcons:Gd.length};return t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة الخدمات"}),t.jsx("p",{className:"text-gray-600",children:"إدارة خدمات العقارات والتحكم في الأسعار مع دعم الأيقونات الديناميكية"})]}),t.jsxs("button",{onClick:ye,disabled:!e,className:"flex items-center gap-2 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[t.jsx(nO,{}),"إضافة خدمة جديدة"]})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-blue-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🛎️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"إجمالي الخدمات"}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:it.totalServices})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-green-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"💰"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"خدمات مدفوعة"}),t.jsx("p",{className:"text-2xl font-bold text-green-600",children:Je.filter(Te=>Te.price.amount>0).length})]})]})}),t.jsx("div",{className:"bg-white p-4 rounded-lg shadow-sm border border-gray-200",children:t.jsxs("div",{className:"flex items-center",children:[t.jsx("div",{className:"bg-orange-100 p-2 rounded-lg",children:t.jsx("span",{className:"text-2xl",children:"🎨"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("p",{className:"text-sm font-medium text-gray-600",children:"أيقونات متاحة"}),t.jsx("p",{className:"text-2xl font-bold text-orange-600",children:it.totalIcons})]})]})})]}),t.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العقار"}),t.jsx(cc,{value:e,onChange:Te=>{n(Te),r("")},placeholder:"اختر العقار",className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نوع الخدمة"}),t.jsx("input",{type:"text",value:a,onChange:Te=>{r(Te.target.value),n("")},placeholder:"ادخل نوع الخدمة",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"البحث"}),t.jsxs("div",{className:"relative",children:[t.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400",children:t.jsx(aO,{})}),t.jsx("input",{type:"text",value:o,onChange:Te=>d(Te.target.value),placeholder:"البحث في الخدمات...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]})]}),!e&&!a&&t.jsx("div",{className:"text-center py-8 text-gray-500",children:"الرجاء اختيار عقار أو إدخال نوع خدمة لعرض النتائج"})]}),(e||a)&&t.jsx("div",{className:"bg-white rounded-lg shadow",children:t.jsx(ls,{data:Je,columns:at,loading:me,pagination:a?{current:h,total:W?.totalPages||1,pageSize:p,onChange:(Te,Fe)=>{g(Te),f(Fe)}}:void 0,onRowClick:()=>{}})}),t.jsx(Rt,{isOpen:R,onClose:()=>O(!1),title:"إضافة خدمة جديدة",size:"lg",children:t.jsxs("form",{onSubmit:_e,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"العقار"}),t.jsx(cc,{value:Z.propertyId,onChange:Te=>F(Fe=>({...Fe,propertyId:Te})),required:!0,className:"w-full"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الخدمة"}),t.jsx("input",{type:"text",value:Z.name,onChange:Te=>F(Fe=>({...Fe,name:Te.target.value})),required:!0,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{T("create"),w(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:V(Z.icon)}),t.jsx("span",{className:"text-sm",children:Z.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",Z.icon," في Flutter"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر"}),t.jsx(Zl,{value:Z.price.amount,currency:Z.price.currency,supportedCurrencies:k,onValueChange:(Te,Fe)=>F(wt=>({...wt,price:{amount:Te,currency:Fe}})),required:!0,className:"w-full",min:0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نموذج التسعير"}),t.jsx("select",{value:Z.pricingModel,onChange:Te=>F(Fe=>({...Fe,pricingModel:Te.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.map(Te=>t.jsx("option",{value:Te.value,children:Te.label},Te.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:V(Z.icon)}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",Z.icon]})]})]})]}),t.jsxs("div",{className:"flex gap-2 pt-4",children:[t.jsx("button",{type:"submit",disabled:J.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:J.isPending?"جاري الإنشاء...":"إنشاء"}),t.jsx("button",{type:"button",onClick:()=>O(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"إلغاء"})]})]})}),t.jsx(Rt,{isOpen:P,onClose:()=>U(!1),title:"تعديل الخدمة",size:"lg",children:t.jsxs("form",{onSubmit:Ie,className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم الخدمة"}),t.jsx("input",{type:"text",value:Y.name,onChange:Te=>G(Fe=>({...Fe,name:Te.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الأيقونة"}),t.jsx("div",{className:"flex items-center space-x-2 space-x-reverse",children:t.jsxs("button",{type:"button",onClick:()=>{T("edit"),w(!0)},className:"flex-1 px-3 py-2 border border-gray-300 rounded-md hover:bg-gray-50 flex items-center justify-between",children:[t.jsxs("span",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx("span",{className:"text-xl",children:V(Y.icon||"room_service")}),t.jsx("span",{className:"text-sm",children:Y.icon})]}),t.jsx("span",{className:"text-gray-400",children:"▼"})]})}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["استخدم Icons.",Y.icon," في Flutter"]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"السعر"}),t.jsx(Zl,{value:Y.price?.amount??0,currency:Y.price?.currency??"SAR",supportedCurrencies:k,onValueChange:(Te,Fe)=>G(wt=>({...wt,price:{amount:Te,currency:Fe}})),required:!0,className:"w-full",min:0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"نموذج التسعير"}),t.jsx("select",{value:Y.pricingModel,onChange:Te=>G(Fe=>({...Fe,pricingModel:Te.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:ee.map(Te=>t.jsx("option",{value:Te.value,children:Te.label},Te.value))})]})]}),t.jsxs("div",{className:"flex items-center gap-3 p-3 bg-gray-50 rounded-md",children:[t.jsx("span",{className:"text-3xl",children:V(Y.icon||"room_service")}),t.jsxs("div",{children:[t.jsx("p",{className:"text-sm font-medium text-gray-700",children:"معاينة الأيقونة"}),t.jsxs("p",{className:"text-xs text-gray-500",children:["الأيقونة المحددة: ",t.jsxs("code",{children:["Icons.",Y.icon]})]})]})]}),t.jsxs("div",{className:"flex gap-2 pt-4",children:[t.jsx("button",{type:"submit",disabled:se.isPending,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 disabled:opacity-50 transition-colors",children:se.isPending?"جاري التحديث...":"تحديث"}),t.jsx("button",{type:"button",onClick:()=>U(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"إلغاء"})]})]})}),t.jsx(Rt,{isOpen:A,onClose:()=>$(!1),title:"تفاصيل الخدمة",size:"lg",children:E&&z?.success&&t.jsxs("div",{className:"space-y-6",children:[t.jsxs("div",{className:"flex items-center gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsx("span",{className:"text-6xl",children:H(z.data.name,z.data.icon)}),t.jsx("div",{children:t.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:z.data.name})})]}),t.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 p-4 bg-gray-50 rounded-lg",children:[t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"معرف الخدمة"}),t.jsx("div",{className:"font-medium",children:z.data.id})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"اسم الأيقونة"}),t.jsx("div",{className:"font-medium font-mono",children:z.data.icon?`Icons.${z.data.icon}`:"غير محدد"})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"العقار"}),t.jsx("div",{className:"font-medium",children:z.data.propertyName})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"معرف العقار"}),t.jsx("div",{className:"font-medium",children:z.data.propertyId})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"السعر"}),t.jsxs("div",{className:"font-medium text-green-600",children:[z.data.price.amount," ",z.data.price.currency]})]}),t.jsxs("div",{children:[t.jsx("div",{className:"text-sm text-gray-500",children:"نموذج التسعير"}),t.jsx("div",{className:"font-medium",children:ee.find(Te=>Te.value===Object.keys(z.data.pricingModel)[0])?.label})]})]}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:t.jsxs("div",{className:"flex",children:[t.jsx("div",{className:"flex-shrink-0",children:t.jsx("span",{className:"text-blue-400 text-xl",children:"ℹ️"})}),t.jsxs("div",{className:"mr-3",children:[t.jsx("h3",{className:"text-sm font-medium text-blue-800",children:"معلومات إضافية"}),t.jsx("p",{className:"mt-2 text-sm text-blue-700",children:"الأيقونة المحددة متوافقة مع Material Icons في Flutter ويمكن استخدامها مباشرة في التطبيق."})]})]})})]})}),v&&t.jsx(iO,{selectedIcon:S==="create"?Z.icon:Y.icon||"room_service",onSelectIcon:Q,onClose:()=>{w(!1),T(null)}})]})},W0=b.createContext(void 0),wf=({value:e,onValueChange:n,children:a,className:r=""})=>t.jsx(W0.Provider,{value:{value:e,onValueChange:n},children:t.jsx("div",{className:Ke("w-full",r),children:a})}),Nf=({variant:e="default",className:n="",children:a,...r})=>{const o={default:"inline-flex h-10 items-center justify-center rounded-lg bg-gray-100 p-1",pills:"inline-flex items-center gap-2",underline:"inline-flex items-center border-b border-gray-200"};return t.jsx("div",{className:Ke(o[e],n),role:"tablist",...r,children:a})},as=({value:e,className:n="",children:a,...r})=>{const o=b.useContext(W0);if(!o)throw new Error("TabsTrigger must be used within Tabs");const{value:d,onValueChange:h}=o,g=d===e;return t.jsx("button",{role:"tab","aria-selected":g,onClick:()=>h(e),className:Ke("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1.5","text-sm font-medium ring-offset-white transition-all","focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2","disabled:pointer-events-none disabled:opacity-50",g?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900",n),...r,children:a})},ss=({value:e,className:n="",children:a,...r})=>{const o=b.useContext(W0);if(!o)throw new Error("TabsContent must be used within Tabs");const{value:d}=o;return d!==e?null:t.jsx("div",{role:"tabpanel",className:Ke("mt-4 focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-gray-400 focus-visible:ring-offset-2","animate-in fade-in-50 slide-in-from-bottom-1",n),...r,children:a})},h_=6048e5,oO=864e5,f_=6e4,p_=36e5,cO=1e3,sw=Symbol.for("constructDateFrom");function en(e,n){return typeof e=="function"?e(n):e&&typeof e=="object"&&sw in e?e[sw](n):e instanceof Date?new e.constructor(n):new Date(n)}function et(e,n){return en(n||e,e)}function _f(e,n,a){const r=et(e,a?.in);return isNaN(n)?en(a?.in||e,NaN):(n&&r.setDate(r.getDate()+n),r)}function g_(e,n,a){const r=et(e,a?.in);if(isNaN(n))return en(e,NaN);if(!n)return r;const o=r.getDate(),d=en(e,r.getTime());d.setMonth(r.getMonth()+n+1,0);const h=d.getDate();return o>=h?d:(r.setFullYear(d.getFullYear(),d.getMonth(),o),r)}function rw(e,n){const a=et(e,n?.in).getDay();return a===0||a===6}function x_(e,n,a){return en(e,+et(e)+n)}function dO(e,n,a){return x_(e,n*p_)}let uO={};function Ql(){return uO}function Qr(e,n){const a=Ql(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=et(e,n?.in),d=o.getDay(),h=(d<r?7:0)+d-r;return o.setDate(o.getDate()-h),o.setHours(0,0,0,0),o}function uc(e,n){return Qr(e,{...n,weekStartsOn:1})}function y_(e,n){const a=et(e,n?.in),r=a.getFullYear(),o=en(a,0);o.setFullYear(r+1,0,4),o.setHours(0,0,0,0);const d=uc(o),h=en(a,0);h.setFullYear(r,0,4),h.setHours(0,0,0,0);const g=uc(h);return a.getTime()>=d.getTime()?r+1:a.getTime()>=g.getTime()?r:r-1}function Yh(e){const n=et(e),a=new Date(Date.UTC(n.getFullYear(),n.getMonth(),n.getDate(),n.getHours(),n.getMinutes(),n.getSeconds(),n.getMilliseconds()));return a.setUTCFullYear(n.getFullYear()),+e-+a}function Rc(e,...n){const a=en.bind(null,n.find(r=>typeof r=="object"));return n.map(a)}function mc(e,n){const a=et(e,n?.in);return a.setHours(0,0,0,0),a}function mO(e,n,a){const[r,o]=Rc(a?.in,e,n),d=mc(r),h=mc(o),g=+d-Yh(d),p=+h-Yh(h);return Math.round((g-p)/oO)}function hO(e,n){const a=y_(e,n),r=en(e,0);return r.setFullYear(a,0,4),r.setHours(0,0,0,0),uc(r)}function fO(e,n,a){const r=et(e,a?.in);return r.setTime(r.getTime()+n*f_),r}function pO(e,n,a){return x_(e,n*1e3)}function gO(e,n,a){return _f(e,n*7,a)}function xO(e,n,a){return g_(e,n*12,a)}function yO(e){return en(e,Date.now())}function b_(e,n,a){const[r,o]=Rc(a?.in,e,n);return+mc(r)==+mc(o)}function bO(e){return e instanceof Date||typeof e=="object"&&Object.prototype.toString.call(e)==="[object Date]"}function v_(e){return!(!bO(e)&&typeof e!="number"||isNaN(+et(e)))}function iw(e,n){const a=et(e,n?.in);return a.setHours(23,59,59,999),a}function j_(e,n){const a=et(e,n?.in),r=a.getMonth();return a.setFullYear(a.getFullYear(),r+1,0),a.setHours(23,59,59,999),a}function vO(e,n){const[a,r]=Rc(e,n.start,n.end);return{start:a,end:r}}function jO(e,n){const{start:a,end:r}=vO(n?.in,e);let o=+a>+r;const d=o?+a:+r,h=o?r:a;h.setHours(0,0,0,0);let g=1;const p=[];for(;+h<=d;)p.push(en(a,h)),h.setDate(h.getDate()+g),h.setHours(0,0,0,0);return o?p.reverse():p}function w_(e,n){const a=et(e,n?.in);return a.setDate(1),a.setHours(0,0,0,0),a}function lw(e,n){const a=et(e,n?.in),r=a.getFullYear();return a.setFullYear(r+1,0,0),a.setHours(23,59,59,999),a}function N_(e,n){const a=et(e,n?.in);return a.setFullYear(a.getFullYear(),0,1),a.setHours(0,0,0,0),a}function wO(e,n){const a=Ql(),r=n?.weekStartsOn??n?.locale?.options?.weekStartsOn??a.weekStartsOn??a.locale?.options?.weekStartsOn??0,o=et(e,n?.in),d=o.getDay(),h=(d<r?-7:0)+6-(d-r);return o.setDate(o.getDate()+h),o.setHours(23,59,59,999),o}const NO={lessThanXSeconds:{one:"less than a second",other:"less than {{count}} seconds"},xSeconds:{one:"1 second",other:"{{count}} seconds"},halfAMinute:"half a minute",lessThanXMinutes:{one:"less than a minute",other:"less than {{count}} minutes"},xMinutes:{one:"1 minute",other:"{{count}} minutes"},aboutXHours:{one:"about 1 hour",other:"about {{count}} hours"},xHours:{one:"1 hour",other:"{{count}} hours"},xDays:{one:"1 day",other:"{{count}} days"},aboutXWeeks:{one:"about 1 week",other:"about {{count}} weeks"},xWeeks:{one:"1 week",other:"{{count}} weeks"},aboutXMonths:{one:"about 1 month",other:"about {{count}} months"},xMonths:{one:"1 month",other:"{{count}} months"},aboutXYears:{one:"about 1 year",other:"about {{count}} years"},xYears:{one:"1 year",other:"{{count}} years"},overXYears:{one:"over 1 year",other:"over {{count}} years"},almostXYears:{one:"almost 1 year",other:"almost {{count}} years"}},_O=(e,n,a)=>{let r;const o=NO[e];return typeof o=="string"?r=o:n===1?r=o.one:r=o.other.replace("{{count}}",n.toString()),a?.addSuffix?a.comparison&&a.comparison>0?"in "+r:r+" ago":r};function lc(e){return(n={})=>{const a=n.width?String(n.width):e.defaultWidth;return e.formats[a]||e.formats[e.defaultWidth]}}const SO={full:"EEEE, MMMM do, y",long:"MMMM do, y",medium:"MMM d, y",short:"MM/dd/yyyy"},CO={full:"h:mm:ss a zzzz",long:"h:mm:ss a z",medium:"h:mm:ss a",short:"h:mm a"},kO={full:"{{date}} 'at' {{time}}",long:"{{date}} 'at' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},TO={date:lc({formats:SO,defaultWidth:"full"}),time:lc({formats:CO,defaultWidth:"full"}),dateTime:lc({formats:kO,defaultWidth:"full"})},EO={lastWeek:"'last' eeee 'at' p",yesterday:"'yesterday at' p",today:"'today at' p",tomorrow:"'tomorrow at' p",nextWeek:"eeee 'at' p",other:"P"},MO=(e,n,a,r)=>EO[e];function cr(e){return(n,a)=>{const r=a?.context?String(a.context):"standalone";let o;if(r==="formatting"&&e.formattingValues){const h=e.defaultFormattingWidth||e.defaultWidth,g=a?.width?String(a.width):h;o=e.formattingValues[g]||e.formattingValues[h]}else{const h=e.defaultWidth,g=a?.width?String(a.width):e.defaultWidth;o=e.values[g]||e.values[h]}const d=e.argumentCallback?e.argumentCallback(n):n;return o[d]}}const RO={narrow:["B","A"],abbreviated:["BC","AD"],wide:["Before Christ","Anno Domini"]},AO={narrow:["1","2","3","4"],abbreviated:["Q1","Q2","Q3","Q4"],wide:["1st quarter","2nd quarter","3rd quarter","4th quarter"]},DO={narrow:["J","F","M","A","M","J","J","A","S","O","N","D"],abbreviated:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],wide:["January","February","March","April","May","June","July","August","September","October","November","December"]},OO={narrow:["S","M","T","W","T","F","S"],short:["Su","Mo","Tu","We","Th","Fr","Sa"],abbreviated:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],wide:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},PO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"}},LO={narrow:{am:"a",pm:"p",midnight:"mi",noon:"n",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},abbreviated:{am:"AM",pm:"PM",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"},wide:{am:"a.m.",pm:"p.m.",midnight:"midnight",noon:"noon",morning:"in the morning",afternoon:"in the afternoon",evening:"in the evening",night:"at night"}},zO=(e,n)=>{const a=Number(e),r=a%100;if(r>20||r<10)switch(r%10){case 1:return a+"st";case 2:return a+"nd";case 3:return a+"rd"}return a+"th"},IO={ordinalNumber:zO,era:cr({values:RO,defaultWidth:"wide"}),quarter:cr({values:AO,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cr({values:DO,defaultWidth:"wide"}),day:cr({values:OO,defaultWidth:"wide"}),dayPeriod:cr({values:PO,defaultWidth:"wide",formattingValues:LO,defaultFormattingWidth:"wide"})};function dr(e){return(n,a={})=>{const r=a.width,o=r&&e.matchPatterns[r]||e.matchPatterns[e.defaultMatchWidth],d=n.match(o);if(!d)return null;const h=d[0],g=r&&e.parsePatterns[r]||e.parsePatterns[e.defaultParseWidth],p=Array.isArray(g)?$O(g,w=>w.test(h)):BO(g,w=>w.test(h));let f;f=e.valueCallback?e.valueCallback(p):p,f=a.valueCallback?a.valueCallback(f):f;const v=n.slice(h.length);return{value:f,rest:v}}}function BO(e,n){for(const a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&n(e[a]))return a}function $O(e,n){for(let a=0;a<e.length;a++)if(n(e[a]))return a}function __(e){return(n,a={})=>{const r=n.match(e.matchPattern);if(!r)return null;const o=r[0],d=n.match(e.parsePattern);if(!d)return null;let h=e.valueCallback?e.valueCallback(d[0]):d[0];h=a.valueCallback?a.valueCallback(h):h;const g=n.slice(o.length);return{value:h,rest:g}}}const FO=/^(\d+)(th|st|nd|rd)?/i,UO=/\d+/i,HO={narrow:/^(b|a)/i,abbreviated:/^(b\.?\s?c\.?|b\.?\s?c\.?\s?e\.?|a\.?\s?d\.?|c\.?\s?e\.?)/i,wide:/^(before christ|before common era|anno domini|common era)/i},qO={any:[/^b/i,/^(a|c)/i]},YO={narrow:/^[1234]/i,abbreviated:/^q[1234]/i,wide:/^[1234](th|st|nd|rd)? quarter/i},VO={any:[/1/i,/2/i,/3/i,/4/i]},ZO={narrow:/^[jfmasond]/i,abbreviated:/^(jan|feb|mar|apr|may|jun|jul|aug|sep|oct|nov|dec)/i,wide:/^(january|february|march|april|may|june|july|august|september|october|november|december)/i},WO={narrow:[/^j/i,/^f/i,/^m/i,/^a/i,/^m/i,/^j/i,/^j/i,/^a/i,/^s/i,/^o/i,/^n/i,/^d/i],any:[/^ja/i,/^f/i,/^mar/i,/^ap/i,/^may/i,/^jun/i,/^jul/i,/^au/i,/^s/i,/^o/i,/^n/i,/^d/i]},KO={narrow:/^[smtwf]/i,short:/^(su|mo|tu|we|th|fr|sa)/i,abbreviated:/^(sun|mon|tue|wed|thu|fri|sat)/i,wide:/^(sunday|monday|tuesday|wednesday|thursday|friday|saturday)/i},GO={narrow:[/^s/i,/^m/i,/^t/i,/^w/i,/^t/i,/^f/i,/^s/i],any:[/^su/i,/^m/i,/^tu/i,/^w/i,/^th/i,/^f/i,/^sa/i]},QO={narrow:/^(a|p|mi|n|(in the|at) (morning|afternoon|evening|night))/i,any:/^([ap]\.?\s?m\.?|midnight|noon|(in the|at) (morning|afternoon|evening|night))/i},XO={any:{am:/^a/i,pm:/^p/i,midnight:/^mi/i,noon:/^no/i,morning:/morning/i,afternoon:/afternoon/i,evening:/evening/i,night:/night/i}},JO={ordinalNumber:__({matchPattern:FO,parsePattern:UO,valueCallback:e=>parseInt(e,10)}),era:dr({matchPatterns:HO,defaultMatchWidth:"wide",parsePatterns:qO,defaultParseWidth:"any"}),quarter:dr({matchPatterns:YO,defaultMatchWidth:"wide",parsePatterns:VO,defaultParseWidth:"any",valueCallback:e=>e+1}),month:dr({matchPatterns:ZO,defaultMatchWidth:"wide",parsePatterns:WO,defaultParseWidth:"any"}),day:dr({matchPatterns:KO,defaultMatchWidth:"wide",parsePatterns:GO,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:QO,defaultMatchWidth:"any",parsePatterns:XO,defaultParseWidth:"any"})},K0={code:"en-US",formatDistance:_O,formatLong:TO,formatRelative:MO,localize:IO,match:JO,options:{weekStartsOn:0,firstWeekContainsDate:1}};function eP(e,n){const a=et(e,n?.in);return mO(a,N_(a))+1}function S_(e,n){const a=et(e,n?.in),r=+uc(a)-+hO(a);return Math.round(r/h_)+1}function G0(e,n){const a=et(e,n?.in),r=a.getFullYear(),o=Ql(),d=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??o.firstWeekContainsDate??o.locale?.options?.firstWeekContainsDate??1,h=en(n?.in||e,0);h.setFullYear(r+1,0,d),h.setHours(0,0,0,0);const g=Qr(h,n),p=en(n?.in||e,0);p.setFullYear(r,0,d),p.setHours(0,0,0,0);const f=Qr(p,n);return+a>=+g?r+1:+a>=+f?r:r-1}function tP(e,n){const a=Ql(),r=n?.firstWeekContainsDate??n?.locale?.options?.firstWeekContainsDate??a.firstWeekContainsDate??a.locale?.options?.firstWeekContainsDate??1,o=G0(e,n),d=en(n?.in||e,0);return d.setFullYear(o,0,r),d.setHours(0,0,0,0),Qr(d,n)}function Q0(e,n){const a=et(e,n?.in),r=+Qr(a,n)-+tP(a,n);return Math.round(r/h_)+1}function Ht(e,n){const a=e<0?"-":"",r=Math.abs(e).toString().padStart(n,"0");return a+r}const Vi={y(e,n){const a=e.getFullYear(),r=a>0?a:1-a;return Ht(n==="yy"?r%100:r,n.length)},M(e,n){const a=e.getMonth();return n==="M"?String(a+1):Ht(a+1,2)},d(e,n){return Ht(e.getDate(),n.length)},a(e,n){const a=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.toUpperCase();case"aaa":return a;case"aaaaa":return a[0];case"aaaa":default:return a==="am"?"a.m.":"p.m."}},h(e,n){return Ht(e.getHours()%12||12,n.length)},H(e,n){return Ht(e.getHours(),n.length)},m(e,n){return Ht(e.getMinutes(),n.length)},s(e,n){return Ht(e.getSeconds(),n.length)},S(e,n){const a=n.length,r=e.getMilliseconds(),o=Math.trunc(r*Math.pow(10,a-3));return Ht(o,n.length)}},Qo={midnight:"midnight",noon:"noon",morning:"morning",afternoon:"afternoon",evening:"evening",night:"night"},ow={G:function(e,n,a){const r=e.getFullYear()>0?1:0;switch(n){case"G":case"GG":case"GGG":return a.era(r,{width:"abbreviated"});case"GGGGG":return a.era(r,{width:"narrow"});case"GGGG":default:return a.era(r,{width:"wide"})}},y:function(e,n,a){if(n==="yo"){const r=e.getFullYear(),o=r>0?r:1-r;return a.ordinalNumber(o,{unit:"year"})}return Vi.y(e,n)},Y:function(e,n,a,r){const o=G0(e,r),d=o>0?o:1-o;if(n==="YY"){const h=d%100;return Ht(h,2)}return n==="Yo"?a.ordinalNumber(d,{unit:"year"}):Ht(d,n.length)},R:function(e,n){const a=y_(e);return Ht(a,n.length)},u:function(e,n){const a=e.getFullYear();return Ht(a,n.length)},Q:function(e,n,a){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"Q":return String(r);case"QQ":return Ht(r,2);case"Qo":return a.ordinalNumber(r,{unit:"quarter"});case"QQQ":return a.quarter(r,{width:"abbreviated",context:"formatting"});case"QQQQQ":return a.quarter(r,{width:"narrow",context:"formatting"});case"QQQQ":default:return a.quarter(r,{width:"wide",context:"formatting"})}},q:function(e,n,a){const r=Math.ceil((e.getMonth()+1)/3);switch(n){case"q":return String(r);case"qq":return Ht(r,2);case"qo":return a.ordinalNumber(r,{unit:"quarter"});case"qqq":return a.quarter(r,{width:"abbreviated",context:"standalone"});case"qqqqq":return a.quarter(r,{width:"narrow",context:"standalone"});case"qqqq":default:return a.quarter(r,{width:"wide",context:"standalone"})}},M:function(e,n,a){const r=e.getMonth();switch(n){case"M":case"MM":return Vi.M(e,n);case"Mo":return a.ordinalNumber(r+1,{unit:"month"});case"MMM":return a.month(r,{width:"abbreviated",context:"formatting"});case"MMMMM":return a.month(r,{width:"narrow",context:"formatting"});case"MMMM":default:return a.month(r,{width:"wide",context:"formatting"})}},L:function(e,n,a){const r=e.getMonth();switch(n){case"L":return String(r+1);case"LL":return Ht(r+1,2);case"Lo":return a.ordinalNumber(r+1,{unit:"month"});case"LLL":return a.month(r,{width:"abbreviated",context:"standalone"});case"LLLLL":return a.month(r,{width:"narrow",context:"standalone"});case"LLLL":default:return a.month(r,{width:"wide",context:"standalone"})}},w:function(e,n,a,r){const o=Q0(e,r);return n==="wo"?a.ordinalNumber(o,{unit:"week"}):Ht(o,n.length)},I:function(e,n,a){const r=S_(e);return n==="Io"?a.ordinalNumber(r,{unit:"week"}):Ht(r,n.length)},d:function(e,n,a){return n==="do"?a.ordinalNumber(e.getDate(),{unit:"date"}):Vi.d(e,n)},D:function(e,n,a){const r=eP(e);return n==="Do"?a.ordinalNumber(r,{unit:"dayOfYear"}):Ht(r,n.length)},E:function(e,n,a){const r=e.getDay();switch(n){case"E":case"EE":case"EEE":return a.day(r,{width:"abbreviated",context:"formatting"});case"EEEEE":return a.day(r,{width:"narrow",context:"formatting"});case"EEEEEE":return a.day(r,{width:"short",context:"formatting"});case"EEEE":default:return a.day(r,{width:"wide",context:"formatting"})}},e:function(e,n,a,r){const o=e.getDay(),d=(o-r.weekStartsOn+8)%7||7;switch(n){case"e":return String(d);case"ee":return Ht(d,2);case"eo":return a.ordinalNumber(d,{unit:"day"});case"eee":return a.day(o,{width:"abbreviated",context:"formatting"});case"eeeee":return a.day(o,{width:"narrow",context:"formatting"});case"eeeeee":return a.day(o,{width:"short",context:"formatting"});case"eeee":default:return a.day(o,{width:"wide",context:"formatting"})}},c:function(e,n,a,r){const o=e.getDay(),d=(o-r.weekStartsOn+8)%7||7;switch(n){case"c":return String(d);case"cc":return Ht(d,n.length);case"co":return a.ordinalNumber(d,{unit:"day"});case"ccc":return a.day(o,{width:"abbreviated",context:"standalone"});case"ccccc":return a.day(o,{width:"narrow",context:"standalone"});case"cccccc":return a.day(o,{width:"short",context:"standalone"});case"cccc":default:return a.day(o,{width:"wide",context:"standalone"})}},i:function(e,n,a){const r=e.getDay(),o=r===0?7:r;switch(n){case"i":return String(o);case"ii":return Ht(o,n.length);case"io":return a.ordinalNumber(o,{unit:"day"});case"iii":return a.day(r,{width:"abbreviated",context:"formatting"});case"iiiii":return a.day(r,{width:"narrow",context:"formatting"});case"iiiiii":return a.day(r,{width:"short",context:"formatting"});case"iiii":default:return a.day(r,{width:"wide",context:"formatting"})}},a:function(e,n,a){const o=e.getHours()/12>=1?"pm":"am";switch(n){case"a":case"aa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"aaa":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"aaaaa":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"aaaa":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},b:function(e,n,a){const r=e.getHours();let o;switch(r===12?o=Qo.noon:r===0?o=Qo.midnight:o=r/12>=1?"pm":"am",n){case"b":case"bb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"bbb":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"}).toLowerCase();case"bbbbb":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"bbbb":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},B:function(e,n,a){const r=e.getHours();let o;switch(r>=17?o=Qo.evening:r>=12?o=Qo.afternoon:r>=4?o=Qo.morning:o=Qo.night,n){case"B":case"BB":case"BBB":return a.dayPeriod(o,{width:"abbreviated",context:"formatting"});case"BBBBB":return a.dayPeriod(o,{width:"narrow",context:"formatting"});case"BBBB":default:return a.dayPeriod(o,{width:"wide",context:"formatting"})}},h:function(e,n,a){if(n==="ho"){let r=e.getHours()%12;return r===0&&(r=12),a.ordinalNumber(r,{unit:"hour"})}return Vi.h(e,n)},H:function(e,n,a){return n==="Ho"?a.ordinalNumber(e.getHours(),{unit:"hour"}):Vi.H(e,n)},K:function(e,n,a){const r=e.getHours()%12;return n==="Ko"?a.ordinalNumber(r,{unit:"hour"}):Ht(r,n.length)},k:function(e,n,a){let r=e.getHours();return r===0&&(r=24),n==="ko"?a.ordinalNumber(r,{unit:"hour"}):Ht(r,n.length)},m:function(e,n,a){return n==="mo"?a.ordinalNumber(e.getMinutes(),{unit:"minute"}):Vi.m(e,n)},s:function(e,n,a){return n==="so"?a.ordinalNumber(e.getSeconds(),{unit:"second"}):Vi.s(e,n)},S:function(e,n){return Vi.S(e,n)},X:function(e,n,a){const r=e.getTimezoneOffset();if(r===0)return"Z";switch(n){case"X":return dw(r);case"XXXX":case"XX":return Pl(r);case"XXXXX":case"XXX":default:return Pl(r,":")}},x:function(e,n,a){const r=e.getTimezoneOffset();switch(n){case"x":return dw(r);case"xxxx":case"xx":return Pl(r);case"xxxxx":case"xxx":default:return Pl(r,":")}},O:function(e,n,a){const r=e.getTimezoneOffset();switch(n){case"O":case"OO":case"OOO":return"GMT"+cw(r,":");case"OOOO":default:return"GMT"+Pl(r,":")}},z:function(e,n,a){const r=e.getTimezoneOffset();switch(n){case"z":case"zz":case"zzz":return"GMT"+cw(r,":");case"zzzz":default:return"GMT"+Pl(r,":")}},t:function(e,n,a){const r=Math.trunc(+e/1e3);return Ht(r,n.length)},T:function(e,n,a){return Ht(+e,n.length)}};function cw(e,n=""){const a=e>0?"-":"+",r=Math.abs(e),o=Math.trunc(r/60),d=r%60;return d===0?a+String(o):a+String(o)+n+Ht(d,2)}function dw(e,n){return e%60===0?(e>0?"-":"+")+Ht(Math.abs(e)/60,2):Pl(e,n)}function Pl(e,n=""){const a=e>0?"-":"+",r=Math.abs(e),o=Ht(Math.trunc(r/60),2),d=Ht(r%60,2);return a+o+n+d}const uw=(e,n)=>{switch(e){case"P":return n.date({width:"short"});case"PP":return n.date({width:"medium"});case"PPP":return n.date({width:"long"});case"PPPP":default:return n.date({width:"full"})}},C_=(e,n)=>{switch(e){case"p":return n.time({width:"short"});case"pp":return n.time({width:"medium"});case"ppp":return n.time({width:"long"});case"pppp":default:return n.time({width:"full"})}},nP=(e,n)=>{const a=e.match(/(P+)(p+)?/)||[],r=a[1],o=a[2];if(!o)return uw(e,n);let d;switch(r){case"P":d=n.dateTime({width:"short"});break;case"PP":d=n.dateTime({width:"medium"});break;case"PPP":d=n.dateTime({width:"long"});break;case"PPPP":default:d=n.dateTime({width:"full"});break}return d.replace("{{date}}",uw(r,n)).replace("{{time}}",C_(o,n))},Vh={p:C_,P:nP},aP=/^D+$/,sP=/^Y+$/,rP=["D","DD","YY","YYYY"];function k_(e){return aP.test(e)}function T_(e){return sP.test(e)}function Vx(e,n,a){const r=iP(e,n,a);if(console.warn(r),rP.includes(e))throw new RangeError(r)}function iP(e,n,a){const r=e[0]==="Y"?"years":"days of the month";return`Use \`${e.toLowerCase()}\` instead of \`${e}\` (in \`${n}\`) for formatting ${r} to the input \`${a}\`; see: https://github.com/date-fns/date-fns/blob/master/docs/unicodeTokens.md`}const lP=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,oP=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,cP=/^'([^]*?)'?$/,dP=/''/g,uP=/[a-zA-Z]/;function ga(e,n,a){const r=Ql(),o=a?.locale??r.locale??K0,d=a?.firstWeekContainsDate??a?.locale?.options?.firstWeekContainsDate??r.firstWeekContainsDate??r.locale?.options?.firstWeekContainsDate??1,h=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,g=et(e,a?.in);if(!v_(g))throw new RangeError("Invalid time value");let p=n.match(oP).map(v=>{const w=v[0];if(w==="p"||w==="P"){const S=Vh[w];return S(v,o.formatLong)}return v}).join("").match(lP).map(v=>{if(v==="''")return{isToken:!1,value:"'"};const w=v[0];if(w==="'")return{isToken:!1,value:mP(v)};if(ow[w])return{isToken:!0,value:v};if(w.match(uP))throw new RangeError("Format string contains an unescaped latin alphabet character `"+w+"`");return{isToken:!1,value:v}});o.localize.preprocessor&&(p=o.localize.preprocessor(g,p));const f={firstWeekContainsDate:d,weekStartsOn:h,locale:o};return p.map(v=>{if(!v.isToken)return v.value;const w=v.value;(!a?.useAdditionalWeekYearTokens&&T_(w)||!a?.useAdditionalDayOfYearTokens&&k_(w))&&Vx(w,n,String(e));const S=ow[w[0]];return S(g,w,o.localize,f)}).join("")}function mP(e){const n=e.match(cP);return n?n[1].replace(dP,"'"):e}function hP(e,n){return et(e,n?.in).getDate()}function E_(e,n){const a=et(e,n?.in),r=a.getFullYear(),o=a.getMonth(),d=en(a,0);return d.setFullYear(r,o+1,0),d.setHours(0,0,0,0),d.getDate()}function fP(){return Object.assign({},Ql())}function pP(e,n){return et(e,n?.in).getHours()}function gP(e,n){const a=et(e,n?.in).getDay();return a===0?7:a}function xP(e){return et(e).getMilliseconds()}function yP(e,n){return et(e,n?.in).getMinutes()}function bP(e,n){return et(e,n?.in).getMonth()}function vP(e){return et(e).getSeconds()}function jP(e,n){return et(e,n?.in).getFullYear()}function sx(e,n){return+et(e)>+et(n)}function Ch(e,n){return+et(e)<+et(n)}function wP(e,n){return+et(e)==+et(n)}function NP(e,n){const a=_P(n)?new n(0):en(n,0);return a.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),a.setHours(e.getHours(),e.getMinutes(),e.getSeconds(),e.getMilliseconds()),a}function _P(e){return typeof e=="function"&&e.prototype?.constructor===e}const SP=10;class M_{subPriority=0;validate(n,a){return!0}}class CP extends M_{constructor(n,a,r,o,d){super(),this.value=n,this.validateValue=a,this.setValue=r,this.priority=o,d&&(this.subPriority=d)}validate(n,a){return this.validateValue(n,this.value,a)}set(n,a,r){return this.setValue(n,a,this.value,r)}}class kP extends M_{priority=SP;subPriority=-1;constructor(n,a){super(),this.context=n||(r=>en(a,r))}set(n,a){return a.timestampIsSet?n:en(n,NP(n,this.context))}}class Bt{run(n,a,r,o){const d=this.parse(n,a,r,o);return d?{setter:new CP(d.value,this.validate,this.set,this.priority,this.subPriority),rest:d.rest}:null}validate(n,a,r){return!0}}class TP extends Bt{priority=140;parse(n,a,r){switch(a){case"G":case"GG":case"GGG":return r.era(n,{width:"abbreviated"})||r.era(n,{width:"narrow"});case"GGGGG":return r.era(n,{width:"narrow"});case"GGGG":default:return r.era(n,{width:"wide"})||r.era(n,{width:"abbreviated"})||r.era(n,{width:"narrow"})}}set(n,a,r){return a.era=r,n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["R","u","t","T"]}const Ln={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},ur={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function zn(e,n){return e&&{value:n(e.value),rest:e.rest}}function jn(e,n){const a=n.match(e);return a?{value:parseInt(a[0],10),rest:n.slice(a[0].length)}:null}function mr(e,n){const a=n.match(e);if(!a)return null;if(a[0]==="Z")return{value:0,rest:n.slice(1)};const r=a[1]==="+"?1:-1,o=a[2]?parseInt(a[2],10):0,d=a[3]?parseInt(a[3],10):0,h=a[5]?parseInt(a[5],10):0;return{value:r*(o*p_+d*f_+h*cO),rest:n.slice(a[0].length)}}function R_(e){return jn(Ln.anyDigitsSigned,e)}function En(e,n){switch(e){case 1:return jn(Ln.singleDigit,n);case 2:return jn(Ln.twoDigits,n);case 3:return jn(Ln.threeDigits,n);case 4:return jn(Ln.fourDigits,n);default:return jn(new RegExp("^\\d{1,"+e+"}"),n)}}function Zh(e,n){switch(e){case 1:return jn(Ln.singleDigitSigned,n);case 2:return jn(Ln.twoDigitsSigned,n);case 3:return jn(Ln.threeDigitsSigned,n);case 4:return jn(Ln.fourDigitsSigned,n);default:return jn(new RegExp("^-?\\d{1,"+e+"}"),n)}}function X0(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function A_(e,n){const a=n>0,r=a?n:1-n;let o;if(r<=50)o=e||100;else{const d=r+50,h=Math.trunc(d/100)*100,g=e>=d%100;o=e+h-(g?100:0)}return a?o:1-o}function D_(e){return e%400===0||e%4===0&&e%100!==0}class EP extends Bt{priority=130;incompatibleTokens=["Y","R","u","w","I","i","e","c","t","T"];parse(n,a,r){const o=d=>({year:d,isTwoDigitYear:a==="yy"});switch(a){case"y":return zn(En(4,n),o);case"yo":return zn(r.ordinalNumber(n,{unit:"year"}),o);default:return zn(En(a.length,n),o)}}validate(n,a){return a.isTwoDigitYear||a.year>0}set(n,a,r){const o=n.getFullYear();if(r.isTwoDigitYear){const h=A_(r.year,o);return n.setFullYear(h,0,1),n.setHours(0,0,0,0),n}const d=!("era"in a)||a.era===1?r.year:1-r.year;return n.setFullYear(d,0,1),n.setHours(0,0,0,0),n}}class MP extends Bt{priority=130;parse(n,a,r){const o=d=>({year:d,isTwoDigitYear:a==="YY"});switch(a){case"Y":return zn(En(4,n),o);case"Yo":return zn(r.ordinalNumber(n,{unit:"year"}),o);default:return zn(En(a.length,n),o)}}validate(n,a){return a.isTwoDigitYear||a.year>0}set(n,a,r,o){const d=G0(n,o);if(r.isTwoDigitYear){const g=A_(r.year,d);return n.setFullYear(g,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),Qr(n,o)}const h=!("era"in a)||a.era===1?r.year:1-r.year;return n.setFullYear(h,0,o.firstWeekContainsDate),n.setHours(0,0,0,0),Qr(n,o)}incompatibleTokens=["y","R","u","Q","q","M","L","I","d","D","i","t","T"]}class RP extends Bt{priority=130;parse(n,a){return Zh(a==="R"?4:a.length,n)}set(n,a,r){const o=en(n,0);return o.setFullYear(r,0,4),o.setHours(0,0,0,0),uc(o)}incompatibleTokens=["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]}class AP extends Bt{priority=130;parse(n,a){return Zh(a==="u"?4:a.length,n)}set(n,a,r){return n.setFullYear(r,0,1),n.setHours(0,0,0,0),n}incompatibleTokens=["G","y","Y","R","w","I","i","e","c","t","T"]}class DP extends Bt{priority=120;parse(n,a,r){switch(a){case"Q":case"QQ":return En(a.length,n);case"Qo":return r.ordinalNumber(n,{unit:"quarter"});case"QQQ":return r.quarter(n,{width:"abbreviated",context:"formatting"})||r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQQ":return r.quarter(n,{width:"narrow",context:"formatting"});case"QQQQ":default:return r.quarter(n,{width:"wide",context:"formatting"})||r.quarter(n,{width:"abbreviated",context:"formatting"})||r.quarter(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=1&&a<=4}set(n,a,r){return n.setMonth((r-1)*3,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]}class OP extends Bt{priority=120;parse(n,a,r){switch(a){case"q":case"qq":return En(a.length,n);case"qo":return r.ordinalNumber(n,{unit:"quarter"});case"qqq":return r.quarter(n,{width:"abbreviated",context:"standalone"})||r.quarter(n,{width:"narrow",context:"standalone"});case"qqqqq":return r.quarter(n,{width:"narrow",context:"standalone"});case"qqqq":default:return r.quarter(n,{width:"wide",context:"standalone"})||r.quarter(n,{width:"abbreviated",context:"standalone"})||r.quarter(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=1&&a<=4}set(n,a,r){return n.setMonth((r-1)*3,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]}class PP extends Bt{incompatibleTokens=["Y","R","q","Q","L","w","I","D","i","e","c","t","T"];priority=110;parse(n,a,r){const o=d=>d-1;switch(a){case"M":return zn(jn(Ln.month,n),o);case"MM":return zn(En(2,n),o);case"Mo":return zn(r.ordinalNumber(n,{unit:"month"}),o);case"MMM":return r.month(n,{width:"abbreviated",context:"formatting"})||r.month(n,{width:"narrow",context:"formatting"});case"MMMMM":return r.month(n,{width:"narrow",context:"formatting"});case"MMMM":default:return r.month(n,{width:"wide",context:"formatting"})||r.month(n,{width:"abbreviated",context:"formatting"})||r.month(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=11}set(n,a,r){return n.setMonth(r,1),n.setHours(0,0,0,0),n}}class LP extends Bt{priority=110;parse(n,a,r){const o=d=>d-1;switch(a){case"L":return zn(jn(Ln.month,n),o);case"LL":return zn(En(2,n),o);case"Lo":return zn(r.ordinalNumber(n,{unit:"month"}),o);case"LLL":return r.month(n,{width:"abbreviated",context:"standalone"})||r.month(n,{width:"narrow",context:"standalone"});case"LLLLL":return r.month(n,{width:"narrow",context:"standalone"});case"LLLL":default:return r.month(n,{width:"wide",context:"standalone"})||r.month(n,{width:"abbreviated",context:"standalone"})||r.month(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=0&&a<=11}set(n,a,r){return n.setMonth(r,1),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]}function zP(e,n,a){const r=et(e,a?.in),o=Q0(r,a)-n;return r.setDate(r.getDate()-o*7),et(r,a?.in)}class IP extends Bt{priority=100;parse(n,a,r){switch(a){case"w":return jn(Ln.week,n);case"wo":return r.ordinalNumber(n,{unit:"week"});default:return En(a.length,n)}}validate(n,a){return a>=1&&a<=53}set(n,a,r,o){return Qr(zP(n,r,o),o)}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","i","t","T"]}function BP(e,n,a){const r=et(e,a?.in),o=S_(r,a)-n;return r.setDate(r.getDate()-o*7),r}class $P extends Bt{priority=100;parse(n,a,r){switch(a){case"I":return jn(Ln.week,n);case"Io":return r.ordinalNumber(n,{unit:"week"});default:return En(a.length,n)}}validate(n,a){return a>=1&&a<=53}set(n,a,r){return uc(BP(n,r))}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]}const FP=[31,28,31,30,31,30,31,31,30,31,30,31],UP=[31,29,31,30,31,30,31,31,30,31,30,31];class HP extends Bt{priority=90;subPriority=1;parse(n,a,r){switch(a){case"d":return jn(Ln.date,n);case"do":return r.ordinalNumber(n,{unit:"date"});default:return En(a.length,n)}}validate(n,a){const r=n.getFullYear(),o=D_(r),d=n.getMonth();return o?a>=1&&a<=UP[d]:a>=1&&a<=FP[d]}set(n,a,r){return n.setDate(r),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","w","I","D","i","e","c","t","T"]}class qP extends Bt{priority=90;subpriority=1;parse(n,a,r){switch(a){case"D":case"DD":return jn(Ln.dayOfYear,n);case"Do":return r.ordinalNumber(n,{unit:"date"});default:return En(a.length,n)}}validate(n,a){const r=n.getFullYear();return D_(r)?a>=1&&a<=366:a>=1&&a<=365}set(n,a,r){return n.setMonth(0,r),n.setHours(0,0,0,0),n}incompatibleTokens=["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]}function J0(e,n,a){const r=Ql(),o=a?.weekStartsOn??a?.locale?.options?.weekStartsOn??r.weekStartsOn??r.locale?.options?.weekStartsOn??0,d=et(e,a?.in),h=d.getDay(),p=(n%7+7)%7,f=7-o,v=n<0||n>6?n-(h+f)%7:(p+f)%7-(h+f)%7;return _f(d,v,a)}class YP extends Bt{priority=90;parse(n,a,r){switch(a){case"E":case"EE":case"EEE":return r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"EEEEE":return r.day(n,{width:"narrow",context:"formatting"});case"EEEEEE":return r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"EEEE":default:return r.day(n,{width:"wide",context:"formatting"})||r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=6}set(n,a,r,o){return n=J0(n,r,o),n.setHours(0,0,0,0),n}incompatibleTokens=["D","i","e","c","t","T"]}class VP extends Bt{priority=90;parse(n,a,r,o){const d=h=>{const g=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+g};switch(a){case"e":case"ee":return zn(En(a.length,n),d);case"eo":return zn(r.ordinalNumber(n,{unit:"day"}),d);case"eee":return r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"eeeee":return r.day(n,{width:"narrow",context:"formatting"});case"eeeeee":return r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"});case"eeee":default:return r.day(n,{width:"wide",context:"formatting"})||r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"})}}validate(n,a){return a>=0&&a<=6}set(n,a,r,o){return n=J0(n,r,o),n.setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]}class ZP extends Bt{priority=90;parse(n,a,r,o){const d=h=>{const g=Math.floor((h-1)/7)*7;return(h+o.weekStartsOn+6)%7+g};switch(a){case"c":case"cc":return zn(En(a.length,n),d);case"co":return zn(r.ordinalNumber(n,{unit:"day"}),d);case"ccc":return r.day(n,{width:"abbreviated",context:"standalone"})||r.day(n,{width:"short",context:"standalone"})||r.day(n,{width:"narrow",context:"standalone"});case"ccccc":return r.day(n,{width:"narrow",context:"standalone"});case"cccccc":return r.day(n,{width:"short",context:"standalone"})||r.day(n,{width:"narrow",context:"standalone"});case"cccc":default:return r.day(n,{width:"wide",context:"standalone"})||r.day(n,{width:"abbreviated",context:"standalone"})||r.day(n,{width:"short",context:"standalone"})||r.day(n,{width:"narrow",context:"standalone"})}}validate(n,a){return a>=0&&a<=6}set(n,a,r,o){return n=J0(n,r,o),n.setHours(0,0,0,0),n}incompatibleTokens=["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]}function WP(e,n,a){const r=et(e,a?.in),o=gP(r,a),d=n-o;return _f(r,d,a)}class KP extends Bt{priority=90;parse(n,a,r){const o=d=>d===0?7:d;switch(a){case"i":case"ii":return En(a.length,n);case"io":return r.ordinalNumber(n,{unit:"day"});case"iii":return zn(r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"}),o);case"iiiii":return zn(r.day(n,{width:"narrow",context:"formatting"}),o);case"iiiiii":return zn(r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"}),o);case"iiii":default:return zn(r.day(n,{width:"wide",context:"formatting"})||r.day(n,{width:"abbreviated",context:"formatting"})||r.day(n,{width:"short",context:"formatting"})||r.day(n,{width:"narrow",context:"formatting"}),o)}}validate(n,a){return a>=1&&a<=7}set(n,a,r){return n=WP(n,r),n.setHours(0,0,0,0),n}incompatibleTokens=["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]}class GP extends Bt{priority=80;parse(n,a,r){switch(a){case"a":case"aa":case"aaa":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaaa":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"aaaa":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})||r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,r){return n.setHours(X0(r),0,0,0),n}incompatibleTokens=["b","B","H","k","t","T"]}class QP extends Bt{priority=80;parse(n,a,r){switch(a){case"b":case"bb":case"bbb":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbbb":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"bbbb":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})||r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,r){return n.setHours(X0(r),0,0,0),n}incompatibleTokens=["a","B","H","k","t","T"]}class XP extends Bt{priority=80;parse(n,a,r){switch(a){case"B":case"BB":case"BBB":return r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBBB":return r.dayPeriod(n,{width:"narrow",context:"formatting"});case"BBBB":default:return r.dayPeriod(n,{width:"wide",context:"formatting"})||r.dayPeriod(n,{width:"abbreviated",context:"formatting"})||r.dayPeriod(n,{width:"narrow",context:"formatting"})}}set(n,a,r){return n.setHours(X0(r),0,0,0),n}incompatibleTokens=["a","b","t","T"]}class JP extends Bt{priority=70;parse(n,a,r){switch(a){case"h":return jn(Ln.hour12h,n);case"ho":return r.ordinalNumber(n,{unit:"hour"});default:return En(a.length,n)}}validate(n,a){return a>=1&&a<=12}set(n,a,r){const o=n.getHours()>=12;return o&&r<12?n.setHours(r+12,0,0,0):!o&&r===12?n.setHours(0,0,0,0):n.setHours(r,0,0,0),n}incompatibleTokens=["H","K","k","t","T"]}class eL extends Bt{priority=70;parse(n,a,r){switch(a){case"H":return jn(Ln.hour23h,n);case"Ho":return r.ordinalNumber(n,{unit:"hour"});default:return En(a.length,n)}}validate(n,a){return a>=0&&a<=23}set(n,a,r){return n.setHours(r,0,0,0),n}incompatibleTokens=["a","b","h","K","k","t","T"]}class tL extends Bt{priority=70;parse(n,a,r){switch(a){case"K":return jn(Ln.hour11h,n);case"Ko":return r.ordinalNumber(n,{unit:"hour"});default:return En(a.length,n)}}validate(n,a){return a>=0&&a<=11}set(n,a,r){return n.getHours()>=12&&r<12?n.setHours(r+12,0,0,0):n.setHours(r,0,0,0),n}incompatibleTokens=["h","H","k","t","T"]}class nL extends Bt{priority=70;parse(n,a,r){switch(a){case"k":return jn(Ln.hour24h,n);case"ko":return r.ordinalNumber(n,{unit:"hour"});default:return En(a.length,n)}}validate(n,a){return a>=1&&a<=24}set(n,a,r){const o=r<=24?r%24:r;return n.setHours(o,0,0,0),n}incompatibleTokens=["a","b","h","H","K","t","T"]}class aL extends Bt{priority=60;parse(n,a,r){switch(a){case"m":return jn(Ln.minute,n);case"mo":return r.ordinalNumber(n,{unit:"minute"});default:return En(a.length,n)}}validate(n,a){return a>=0&&a<=59}set(n,a,r){return n.setMinutes(r,0,0),n}incompatibleTokens=["t","T"]}class sL extends Bt{priority=50;parse(n,a,r){switch(a){case"s":return jn(Ln.second,n);case"so":return r.ordinalNumber(n,{unit:"second"});default:return En(a.length,n)}}validate(n,a){return a>=0&&a<=59}set(n,a,r){return n.setSeconds(r,0),n}incompatibleTokens=["t","T"]}class rL extends Bt{priority=30;parse(n,a){const r=o=>Math.trunc(o*Math.pow(10,-a.length+3));return zn(En(a.length,n),r)}set(n,a,r){return n.setMilliseconds(r),n}incompatibleTokens=["t","T"]}class iL extends Bt{priority=10;parse(n,a){switch(a){case"X":return mr(ur.basicOptionalMinutes,n);case"XX":return mr(ur.basic,n);case"XXXX":return mr(ur.basicOptionalSeconds,n);case"XXXXX":return mr(ur.extendedOptionalSeconds,n);case"XXX":default:return mr(ur.extended,n)}}set(n,a,r){return a.timestampIsSet?n:en(n,n.getTime()-Yh(n)-r)}incompatibleTokens=["t","T","x"]}class lL extends Bt{priority=10;parse(n,a){switch(a){case"x":return mr(ur.basicOptionalMinutes,n);case"xx":return mr(ur.basic,n);case"xxxx":return mr(ur.basicOptionalSeconds,n);case"xxxxx":return mr(ur.extendedOptionalSeconds,n);case"xxx":default:return mr(ur.extended,n)}}set(n,a,r){return a.timestampIsSet?n:en(n,n.getTime()-Yh(n)-r)}incompatibleTokens=["t","T","X"]}class oL extends Bt{priority=40;parse(n){return R_(n)}set(n,a,r){return[en(n,r*1e3),{timestampIsSet:!0}]}incompatibleTokens="*"}class cL extends Bt{priority=20;parse(n){return R_(n)}set(n,a,r){return[en(n,r),{timestampIsSet:!0}]}incompatibleTokens="*"}const dL={G:new TP,y:new EP,Y:new MP,R:new RP,u:new AP,Q:new DP,q:new OP,M:new PP,L:new LP,w:new IP,I:new $P,d:new HP,D:new qP,E:new YP,e:new VP,c:new ZP,i:new KP,a:new GP,b:new QP,B:new XP,h:new JP,H:new eL,K:new tL,k:new nL,m:new aL,s:new sL,S:new rL,X:new iL,x:new lL,t:new oL,T:new cL},uL=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,mL=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,hL=/^'([^]*?)'?$/,fL=/''/g,pL=/\S/,gL=/[a-zA-Z]/;function xL(e,n,a,r){const o=()=>en(r?.in||a,NaN),d=fP(),h=r?.locale??d.locale??K0,g=r?.firstWeekContainsDate??r?.locale?.options?.firstWeekContainsDate??d.firstWeekContainsDate??d.locale?.options?.firstWeekContainsDate??1,p=r?.weekStartsOn??r?.locale?.options?.weekStartsOn??d.weekStartsOn??d.locale?.options?.weekStartsOn??0;if(!n)return e?o():et(a,r?.in);const f={firstWeekContainsDate:g,weekStartsOn:p,locale:h},v=[new kP(r?.in,a)],w=n.match(mL).map(k=>{const R=k[0];if(R in Vh){const O=Vh[R];return O(k,h.formatLong)}return k}).join("").match(uL),S=[];for(let k of w){!r?.useAdditionalWeekYearTokens&&T_(k)&&Vx(k,n,e),!r?.useAdditionalDayOfYearTokens&&k_(k)&&Vx(k,n,e);const R=k[0],O=dL[R];if(O){const{incompatibleTokens:P}=O;if(Array.isArray(P)){const A=S.find($=>P.includes($.token)||$.token===R);if(A)throw new RangeError(`The format string mustn't contain \`${A.fullToken}\` and \`${k}\` at the same time`)}else if(O.incompatibleTokens==="*"&&S.length>0)throw new RangeError(`The format string mustn't contain \`${k}\` and any other token at the same time`);S.push({token:R,fullToken:k});const U=O.run(e,k,h.match,f);if(!U)return o();v.push(U.setter),e=U.rest}else{if(R.match(gL))throw new RangeError("Format string contains an unescaped latin alphabet character `"+R+"`");if(k==="''"?k="'":R==="'"&&(k=yL(k)),e.indexOf(k)===0)e=e.slice(k.length);else return o()}}if(e.length>0&&pL.test(e))return o();const T=v.map(k=>k.priority).sort((k,R)=>R-k).filter((k,R,O)=>O.indexOf(k)===R).map(k=>v.filter(R=>R.priority===k).sort((R,O)=>O.subPriority-R.subPriority)).map(k=>k[0]);let C=et(a,r?.in);if(isNaN(+C))return o();const _={};for(const k of T){if(!k.validate(C,f))return o();const R=k.set(C,_,f);Array.isArray(R)?(C=R[0],Object.assign(_,R[1])):C=R}return C}function yL(e){return e.match(hL)[1].replace(fL,"'")}function mw(e,n){const a=et(e,n?.in);return a.setMinutes(0,0,0),a}function bL(e,n,a){const[r,o]=Rc(a?.in,e,n);return+mw(r)==+mw(o)}function O_(e,n,a){const[r,o]=Rc(a?.in,e,n);return r.getFullYear()===o.getFullYear()&&r.getMonth()===o.getMonth()}function vL(e,n,a){const[r,o]=Rc(a?.in,e,n);return r.getFullYear()===o.getFullYear()}function jL(e,n){return b_(en(e,e),yO(e))}function wL(e,n,a){const r=+et(e,a?.in),[o,d]=[+et(n.start,a?.in),+et(n.end,a?.in)].sort((h,g)=>h-g);return r>=o&&r<=d}function NL(e,n,a){const r=et(e,a?.in),o=r.getFullYear(),d=r.getDate(),h=en(e,0);h.setFullYear(o,n,15),h.setHours(0,0,0,0);const g=E_(h);return r.setMonth(n,Math.min(d,g)),r}function _L(e,n,a){const r=et(e,a?.in);return r.setDate(n),r}function SL(e,n,a){const r=et(e,a?.in);return r.setHours(n),r}function CL(e,n,a){const r=et(e,a?.in);return r.setMilliseconds(n),r}function kL(e,n,a){const r=et(e,a?.in);return r.setMinutes(n),r}function TL(e,n,a){const r=et(e,a?.in);return r.setSeconds(n),r}function EL(e,n,a){const r=et(e,a?.in);return isNaN(+r)?en(e,NaN):(r.setFullYear(n),r)}const P_=({year:e,month:n,data:a={},onDayClick:r,onDayHover:o,onRangeSelect:d,renderDay:h,selectedDates:g=[],rangeStart:p,rangeEnd:f,multiSelect:v=!1,className:w})=>{const[S,T]=b.useState(!1),[C,_]=b.useState(null),[k,R]=b.useState(null),[O,P]=b.useState(null),U=b.useRef(null),A=b.useMemo(()=>{const V=w_(new Date(e,n-1)),H=j_(new Date(e,n-1)),Q=jO({start:V,end:H}),K=V.getDay(),oe=H.getDay(),W=Array.from({length:K},(z,J)=>{const se=new Date(V);return se.setDate(se.getDate()-(K-J)),se}),X=Array.from({length:6-oe},(z,J)=>{const se=new Date(H);return se.setDate(se.getDate()+J+1),se});return[...W,...Q,...X].map(z=>{const J=ga(z,"yyyy-MM-dd");return{date:z,dateString:J,isCurrentMonth:O_(z,new Date(e,n-1)),isToday:jL(z),isPast:Ch(z,mc(new Date)),data:a[J]}})},[e,n,a]),$=b.useMemo(()=>["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"],[]),E=b.useCallback((V,H)=>{H.preventDefault(),v&&(T(!0),_(V),R(V))},[v]),I=b.useCallback(V=>{P(V),o?.(V),S&&C&&R(V)},[S,C,o]),Z=b.useCallback(()=>{if(S&&C&&k&&d){const V=C<k?C:k,H=C<k?k:C;d(V,H)}T(!1),_(null),R(null)},[S,C,k,d]),F=b.useCallback((V,H)=>{if(!S&&r)if(H.shiftKey&&g.length>0){const Q=g[g.length-1],K=Q<V?Q:V,oe=Q<V?V:Q;d?.(K,oe)}else H.ctrlKey||H.metaKey,r(V)},[S,r,d,g]);b.useEffect(()=>{const V=()=>{S&&Z()};return document.addEventListener("mouseup",V),()=>document.removeEventListener("mouseup",V)},[S,Z]);const Y=b.useCallback(V=>!p||!f?!1:V>=p&&V<=f,[p,f]),G=b.useCallback(V=>{if(!C||!k)return!1;const H=C<k?C:k,Q=C<k?k:C;return V>=H&&V<=Q},[C,k]);return t.jsxs("div",{ref:U,className:Ke("bg-white rounded-lg shadow-sm border border-gray-200",w),onMouseLeave:()=>{P(null),o?.(null)},children:[t.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:$.map((V,H)=>t.jsx("div",{className:"py-3 px-2 text-center text-sm font-medium text-gray-700 bg-gray-50",children:V},H))}),t.jsx("div",{className:"grid grid-cols-7",children:A.map(V=>{const H=g.includes(V.dateString),Q=Y(V.dateString),K=G(V.dateString),oe=V.dateString===p||V.dateString===C,W=V.dateString===f||V.dateString===k;return t.jsx("div",{className:Ke("relative aspect-square border-r border-b border-gray-100 p-1","transition-all duration-150 select-none",!V.isCurrentMonth&&"bg-gray-50 opacity-50",V.isToday&&"ring-2 ring-blue-400 ring-inset",V.isPast&&"opacity-60",(H||Q||K)&&V.isCurrentMonth&&"bg-blue-50",oe&&"bg-blue-100 rounded-l-lg",W&&"bg-blue-100 rounded-r-lg",O===V.dateString&&"bg-gray-100","cursor-pointer hover:bg-gray-50"),onMouseDown:X=>E(V.dateString,X),onMouseEnter:()=>I(V.dateString),onClick:X=>F(V.dateString,X),children:h?h(V):t.jsxs("div",{className:"flex flex-col h-full",children:[t.jsx("div",{className:Ke("text-sm font-medium",V.isToday?"text-blue-600":"text-gray-900"),children:ga(V.date,"d")}),V.data&&t.jsx("div",{className:"flex-1 mt-1"})]})},V.dateString)})})]})};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ML=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),L_=(...e)=>e.filter((n,a,r)=>!!n&&n.trim()!==""&&r.indexOf(n)===a).join(" ").trim();/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var RL={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AL=b.forwardRef(({color:e="currentColor",size:n=24,strokeWidth:a=2,absoluteStrokeWidth:r,className:o="",children:d,iconNode:h,...g},p)=>b.createElement("svg",{ref:p,...RL,width:n,height:n,stroke:e,strokeWidth:r?Number(a)*24/Number(n):a,className:L_("lucide",o),...g},[...h.map(([f,v])=>b.createElement(f,v)),...Array.isArray(d)?d:[d]]));/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qt=(e,n)=>{const a=b.forwardRef(({className:r,...o},d)=>b.createElement(AL,{ref:d,iconNode:n,className:L_(`lucide-${ML(e)}`,r),...o}));return a.displayName=`${e}`,a};/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DL=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],OL=qt("ArrowRight",DL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PL=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],LL=qt("Building",PL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 18h.01",key:"lrp35t"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M16 18h.01",key:"kzsmim"}]],IL=qt("CalendarDays",zL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BL=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],hc=qt("Calendar",BL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $L=[["line",{x1:"12",x2:"12",y1:"20",y2:"10",key:"1vz5eb"}],["line",{x1:"18",x2:"18",y1:"20",y2:"4",key:"cun8e5"}],["line",{x1:"6",x2:"6",y1:"20",y2:"16",key:"hq0ia6"}]],FL=qt("ChartNoAxesColumnIncreasing",$L);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UL=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],HL=qt("ChevronDown",UL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qL=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],YL=qt("ChevronLeft",qL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VL=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],z_=qt("ChevronRight",VL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],Sf=qt("CircleAlert",ZL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WL=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],I_=qt("CircleCheckBig",WL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],GL=qt("CircleX",KL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QL=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],XL=qt("Clock",QL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const JL=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],ey=qt("Copy",JL);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ez=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],Du=qt("DollarSign",ez);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],nz=qt("Download",tz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const az=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],sz=qt("House",az);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rz=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],iz=qt("Info",rz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lz=[["path",{d:"M12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83z",key:"zw3jo"}],["path",{d:"M2 12a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 12",key:"1wduqc"}],["path",{d:"M2 17a1 1 0 0 0 .58.91l8.6 3.91a2 2 0 0 0 1.65 0l8.58-3.9A1 1 0 0 0 22 17",key:"kqbvx6"}]],B_=qt("Layers",lz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oz=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],$_=qt("Percent",oz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cz=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],dz=qt("Plus",cz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uz=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],mz=qt("RefreshCw",uz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hz=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],F_=qt("Settings",hz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fz=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],pz=qt("ShieldCheck",fz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gz=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ty=qt("SquarePen",gz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xz=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}]],yz=qt("Trash",xz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bz=[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]],U_=qt("TrendingDown",bz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vz=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],fu=qt("TrendingUp",vz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jz=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],H_=qt("Upload",jz);/**
 * @license lucide-react v0.474.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wz=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Cf=qt("X",wz),ot=b.forwardRef(({variant:e="primary",size:n="md",loading:a=!1,icon:r,iconPosition:o="left",fullWidth:d=!1,rounded:h="md",className:g="",children:p,disabled:f,...v},w)=>{const S=Ke("inline-flex items-center justify-center font-medium transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2","disabled:opacity-60 disabled:cursor-not-allowed","active:scale-[0.98]"),T={primary:Ke("bg-blue-600 text-white border border-transparent","hover:bg-blue-700 focus:ring-blue-500","shadow-sm hover:shadow"),secondary:Ke("bg-gray-600 text-white border border-transparent","hover:bg-gray-700 focus:ring-gray-500","shadow-sm hover:shadow"),outline:Ke("bg-white text-gray-700 border border-gray-300","hover:bg-gray-50 focus:ring-gray-500"),ghost:Ke("bg-transparent text-gray-700 border border-transparent","hover:bg-gray-100 focus:ring-gray-500"),danger:Ke("bg-red-600 text-white border border-transparent","hover:bg-red-700 focus:ring-red-500","shadow-sm hover:shadow"),success:Ke("bg-green-600 text-white border border-transparent","hover:bg-green-700 focus:ring-green-500","shadow-sm hover:shadow"),warning:Ke("bg-amber-600 text-white border border-transparent","hover:bg-amber-700 focus:ring-amber-500","shadow-sm hover:shadow")},C={xs:"text-xs px-2 py-1",sm:"text-sm px-3 py-1.5",md:"text-sm px-4 py-2",lg:"text-base px-5 py-2.5",xl:"text-base px-6 py-3"},_={sm:"rounded",md:"rounded-md",lg:"rounded-lg",full:"rounded-full"};return t.jsxs("button",{ref:w,className:Ke(S,T[e],C[n],_[h],d&&"w-full",g),disabled:f||a,...v,children:[a&&t.jsxs("svg",{className:Ke("animate-spin h-4 w-4",!!p&&(o==="left"?"mr-2":"ml-2")),fill:"none",viewBox:"0 0 24 24",children:[t.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),t.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),!a&&r&&o==="left"&&t.jsx("span",{className:Ke(!!p&&"mr-2"),children:r}),p,!a&&r&&o==="right"&&t.jsx("span",{className:Ke(!!p&&"ml-2"),children:r})]})});ot.displayName="Button";const Ss=b.forwardRef(({children:e,className:n="",onChange:a,error:r=!1,icon:o,placeholder:d,disabled:h,...g},p)=>t.jsxs("div",{className:"relative",children:[o&&t.jsx("div",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",children:o}),t.jsxs("select",{ref:p,className:Ke("w-full appearance-none px-3 py-2 pr-10 text-sm border rounded-md transition-all duration-200","focus:outline-none focus:ring-2 focus:ring-offset-0",r?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500/20",h&&"bg-gray-50 cursor-not-allowed opacity-60",!!o&&"pl-10",n),onChange:f=>a?.(f.target.value),disabled:h,...g,children:[d&&t.jsx("option",{value:"",disabled:!0,children:d}),e]}),t.jsx(HL,{className:"absolute right-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}));Ss.displayName="Select";const Nz=({variant:e="default",size:n="md",fullWidth:a=!1,className:r="",children:o,...d})=>{const h={default:"gap-0.5",pills:"gap-2",tabs:"gap-0 border-b border-gray-200"};return t.jsx("div",{className:Ke("inline-flex items-center",h[e],a&&"w-full",e==="default"&&"bg-gray-100 p-0.5 rounded-lg",r),...d,children:We.Children.map(o,(g,p)=>We.isValidElement(g)?We.cloneElement(g,{className:Ke(g.props.className,e==="default"&&p===0&&"rounded-l-md",e==="default"&&p===We.Children.count(o)-1&&"rounded-r-md",e==="default"&&"rounded-none",a&&"flex-1")}):g)})},q_=({year:e,month:n,onMonthChange:a,onViewChange:r,currentView:o="month",onExport:d,onImport:h,onSettings:g,onClone:p,title:f,actions:v})=>{const w=()=>{n===1?a(e-1,12):a(e,n-1)},S=()=>{n===12?a(e+1,1):a(e,n+1)},T=()=>{const k=new Date;a(k.getFullYear(),k.getMonth()+1)},C=["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],_=Array.from({length:10},(k,R)=>new Date().getFullYear()-2+R);return t.jsx("div",{className:"bg-white border-b border-gray-200 px-4 py-3",children:t.jsxs("div",{className:"flex items-center justify-between flex-wrap gap-3",children:[t.jsxs("div",{className:"flex items-center gap-4",children:[f&&t.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:f}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{variant:"outline",size:"sm",onClick:w,icon:t.jsx(z_,{className:"h-4 w-4"})}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(Ss,{value:n.toString(),onChange:k=>a(e,parseInt(k)),className:"w-28",children:C.map((k,R)=>t.jsx("option",{value:R+1,children:k},R+1))}),t.jsx(Ss,{value:e.toString(),onChange:k=>a(parseInt(k),n),className:"w-20",children:_.map(k=>t.jsx("option",{value:k,children:k},k))})]}),t.jsx(ot,{variant:"outline",size:"sm",onClick:S,icon:t.jsx(YL,{className:"h-4 w-4"})}),t.jsx(ot,{variant:"outline",size:"sm",onClick:T,children:"اليوم"})]})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[r&&t.jsxs(Nz,{children:[t.jsx(ot,{variant:o==="month"?"primary":"outline",size:"sm",onClick:()=>r("month"),icon:t.jsx(hc,{className:"h-4 w-4"}),children:"شهري"}),t.jsx(ot,{variant:o==="year"?"primary":"outline",size:"sm",onClick:()=>r("year"),children:"سنوي"}),t.jsx(ot,{variant:o==="list"?"primary":"outline",size:"sm",onClick:()=>r("list"),children:"قائمة"})]}),(p||h||d||g)&&t.jsxs("div",{className:"flex items-center gap-2 border-r pr-3",children:[p&&t.jsx(ot,{variant:"outline",size:"sm",onClick:p,icon:t.jsx(ey,{className:"h-4 w-4"}),children:"نسخ"}),h&&t.jsx(ot,{variant:"outline",size:"sm",onClick:h,icon:t.jsx(H_,{className:"h-4 w-4"}),children:"استيراد"}),d&&t.jsx(ot,{variant:"outline",size:"sm",onClick:d,icon:t.jsx(nz,{className:"h-4 w-4"}),children:"تصدير"}),g&&t.jsx(ot,{variant:"outline",size:"sm",onClick:g,icon:t.jsx(F_,{className:"h-4 w-4"})})]}),v]})]})})};var Et=(e=>(e.Available="Available",e.Booked="Booked",e.Blocked="Blocked",e.Maintenance="Maintenance",e.Hold="Hold",e))(Et||{});const _z=()=>{const e=[{status:Et.Available,label:"متاح",color:"bg-green-100 border-green-200",icon:"✓"},{status:Et.Booked,label:"محجوز",color:"bg-red-100 border-red-200",icon:"●"},{status:Et.Blocked,label:"محظور",color:"bg-gray-200 border-gray-300",icon:"✕"},{status:Et.Maintenance,label:"صيانة",color:"bg-yellow-100 border-yellow-200",icon:"🔧"},{status:Et.Hold,label:"معلق",color:"bg-blue-100 border-blue-200",icon:"⏸"}];return t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:t.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"دليل الألوان:"}),e.map(n=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-8 h-8 rounded border ${n.color} flex items-center justify-center`,children:t.jsx("span",{className:"text-xs",children:n.icon})}),t.jsx("span",{className:"text-sm text-gray-600",children:n.label})]},n.status))]})})},Sz=({stats:e})=>{const n=[{label:"إجمالي الأيام",value:e.totalDays,icon:hc,color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},{label:"الأيام المتاحة",value:e.availableDays,icon:XL,color:"green",bgColor:"bg-green-50",textColor:"text-green-600",percentage:(e.availableDays/e.totalDays*100).toFixed(1)},{label:"الأيام المحجوزة",value:e.bookedDays,icon:fu,color:"red",bgColor:"bg-red-50",textColor:"text-red-600",percentage:(e.bookedDays/e.totalDays*100).toFixed(1)},{label:"معدل الإشغال",value:`${e.occupancyRate.toFixed(1)}%`,icon:fu,color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600"}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:n.map((a,r)=>{const o=a.icon;return t.jsx(Ia,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:a.label}),t.jsx("p",{className:"text-2xl font-bold text-gray-900",children:a.value}),a.percentage&&t.jsxs("p",{className:`text-sm mt-1 ${a.textColor}`,children:[a.percentage,"% من الإجمالي"]})]}),t.jsx("div",{className:`p-3 rounded-lg ${a.bgColor}`,children:t.jsx(o,{className:`h-5 w-5 ${a.textColor}`})})]})},r)})})},Cz=({selectedCount:e,onBlock:n,onAvailable:a,onUpdate:r,onBulkOperations:o})=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{variant:"outline",size:"sm",onClick:a,icon:t.jsx(I_,{className:"h-4 w-4"}),disabled:e===0,children:"تعيين كمتاحة"}),t.jsx(ot,{variant:"outline",size:"sm",onClick:n,icon:t.jsx(pz,{className:"h-4 w-4"}),disabled:e===0,children:"حظر سريع"}),t.jsx(ot,{variant:"outline",size:"sm",onClick:r,icon:t.jsx(ty,{className:"h-4 w-4"}),disabled:e===0,children:"تحديث"}),t.jsx(ot,{variant:"primary",size:"sm",onClick:o,icon:t.jsx(B_,{className:"h-4 w-4"}),disabled:e===0,children:"عمليات متعددة"})]}),Wh=({isOpen:e,onClose:n,title:a,description:r,size:o="md",children:d,footer:h,closeOnOverlay:g=!0,closeOnEsc:p=!0,showClose:f=!0,className:v=""})=>{if(b.useEffect(()=>{const S=T=>{p&&T.key==="Escape"&&n()};return e&&(document.addEventListener("keydown",S),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",S),document.body.style.overflow="unset"}},[e,n,p]),!e)return null;const w={xs:"max-w-xs",sm:"max-w-sm",md:"max-w-md",lg:"max-w-lg",xl:"max-w-xl",full:"max-w-full mx-4"};return t.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:t.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[t.jsx("div",{className:"fixed inset-0 bg-black/50 backdrop-blur-sm transition-opacity",onClick:g?n:void 0,"aria-hidden":"true"}),t.jsxs("div",{className:Ke("relative w-full bg-white rounded-xl shadow-2xl transition-all","animate-in fade-in zoom-in-95 duration-200",w[o],v),children:[(a||f)&&t.jsxs("div",{className:"flex items-start justify-between px-6 py-4 border-b",children:[t.jsxs("div",{children:[a&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:a}),r&&t.jsx("p",{className:"mt-1 text-sm text-gray-600",children:r})]}),f&&t.jsx(ot,{variant:"ghost",size:"sm",onClick:n,className:"-mr-2 -mt-2",icon:t.jsx(Cf,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"px-6 py-4 max-h-[calc(100vh-200px)] overflow-y-auto",children:d}),h&&t.jsx("div",{className:"flex items-center justify-end gap-3 px-6 py-4 border-t bg-gray-50 rounded-b-xl",children:h})]})]})})},Y_=b.createContext({}),kf=({errors:e,className:n="",children:a,...r})=>t.jsx(Y_.Provider,{value:{errors:e},children:t.jsx("form",{className:Ke("space-y-6",n),...r,children:a})}),La=({name:e,label:n,required:a,help:r,error:o,className:d="",children:h})=>{const{errors:g}=b.useContext(Y_),p=o||e&&g?.[e];return t.jsxs("div",{className:Ke("space-y-2",d),children:[n&&t.jsxs("label",{htmlFor:e,className:"block text-sm font-medium text-gray-700",children:[n,a&&t.jsx("span",{className:"ml-1 text-red-500",children:"*"})]}),t.jsx("div",{children:h}),r&&!p&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:r}),p&&t.jsxs("div",{className:"flex items-center gap-1 mt-1",children:[t.jsx(Sf,{className:"h-3 w-3 text-red-500"}),t.jsx("p",{className:"text-xs text-red-600",children:p})]})]})},kz=({title:e,description:n,children:a,className:r=""})=>t.jsxs("div",{className:Ke("space-y-4",r),children:[(e||n)&&t.jsxs("div",{className:"border-b pb-2",children:[e&&t.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:e}),n&&t.jsx("p",{className:"text-sm text-gray-600 mt-1",children:n})]}),t.jsx("div",{className:"space-y-4",children:a})]});kf.Field=La;kf.Section=kz;const ia=b.forwardRef(({error:e=!1,icon:n,iconPosition:a="left",addon:r,addonPosition:o="left",className:d="",disabled:h,...g},p)=>{const f=t.jsx("input",{ref:p,className:Ke("w-full px-3 py-2 text-sm border rounded-md transition-all duration-200","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-offset-0",e?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500/20",h&&"bg-gray-50 cursor-not-allowed opacity-60",!!n&&a==="left"&&"pl-10",!!n&&a==="right"&&"pr-10",!!r&&o==="left"&&"rounded-l-none",!!r&&o==="right"&&"rounded-r-none",d),disabled:h,...g});return!n&&!r?f:t.jsxs("div",{className:"relative flex",children:[r&&o==="left"&&t.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-600 bg-gray-50 border border-r-0 border-gray-300 rounded-l-md",children:r}),t.jsxs("div",{className:"relative flex-1",children:[n&&t.jsx("div",{className:Ke("absolute top-1/2 transform -translate-y-1/2 text-gray-400 pointer-events-none",a==="left"?"left-3":"right-3"),children:n}),f]}),r&&o==="right"&&t.jsx("span",{className:"inline-flex items-center px-3 text-sm text-gray-600 bg-gray-50 border border-l-0 border-gray-300 rounded-r-md",children:r})]})});ia.displayName="Input";const Ou=b.forwardRef(({error:e=!1,resize:n="vertical",showCount:a=!1,maxLength:r,className:o="",disabled:d,value:h,...g},p)=>{const f={none:"resize-none",vertical:"resize-y",horizontal:"resize-x",both:"resize"},v=h?String(h).length:0;return t.jsxs("div",{className:"relative",children:[t.jsx("textarea",{ref:p,value:h,maxLength:r,className:Ke("w-full px-3 py-2 text-sm border rounded-md transition-all duration-200","placeholder:text-gray-400","focus:outline-none focus:ring-2 focus:ring-offset-0",e?"border-red-300 focus:border-red-500 focus:ring-red-500/20":"border-gray-300 hover:border-gray-400 focus:border-blue-500 focus:ring-blue-500/20",d&&"bg-gray-50 cursor-not-allowed opacity-60",f[n],a&&r!==void 0&&"pb-6",o),disabled:d,...g}),a&&r!==void 0&&t.jsxs("div",{className:Ke("absolute bottom-2 right-2 text-xs",v===r?"text-red-500":"text-gray-400"),children:[v,"/",r]})]})});Ou.displayName="Textarea";const Tf=({checked:e=!1,onChange:n,disabled:a=!1,size:r="md",label:o,labelPosition:d="right",color:h="primary",className:g=""})=>{const p={sm:{container:"h-5 w-9",thumb:"h-4 w-4",translate:"translate-x-4"},md:{container:"h-6 w-11",thumb:"h-5 w-5",translate:"translate-x-5"},lg:{container:"h-7 w-14",thumb:"h-6 w-6",translate:"translate-x-7"}},f={primary:"bg-blue-600",success:"bg-green-600",danger:"bg-red-600"},v=p[r],w=t.jsx("button",{type:"button",role:"switch","aria-checked":e,onClick:()=>!a&&n?.(!e),disabled:a,className:Ke("relative inline-flex items-center rounded-full transition-colors duration-200","focus:outline-none focus:ring-2 focus:ring-offset-2",v.container,e?f[h]:"bg-gray-300",a&&"opacity-50 cursor-not-allowed",h==="primary"&&"focus:ring-blue-500",h==="success"&&"focus:ring-green-500",h==="danger"&&"focus:ring-red-500"),children:t.jsx("span",{className:Ke("inline-block transform rounded-full bg-white shadow-lg transition-transform duration-200",v.thumb,e?v.translate:"translate-x-1")})});return o?t.jsxs("label",{className:Ke("inline-flex items-center gap-3 cursor-pointer",a&&"cursor-not-allowed opacity-60",g),children:[d==="left"&&t.jsx("span",{className:"text-sm text-gray-700",children:o}),w,d==="right"&&t.jsx("span",{className:"text-sm text-gray-700",children:o})]}):w};class Tz{basePath="/api/admin/units";async getMonthlyAvailability(n,a,r){return(await we.get(`${this.basePath}/${n}/availability/${a}/${r}`)).data.data}async updateAvailability(n){await we.post(`${this.basePath}/${n.unitId}/availability`,n)}async bulkUpdateAvailability(n){await we.post(`${this.basePath}/${n.unitId}/availability/bulk`,n)}async cloneAvailability(n){await we.post(`${this.basePath}/${n.unitId}/availability/clone`,n)}async deleteAvailability(n,a,r){await we.delete(`${this.basePath}/${n}/availability/${a}/${r}`)}async checkAvailability(n){return(await we.get(`${this.basePath}/${n.unitId}/availability/check`,{params:{checkIn:n.checkIn,checkOut:n.checkOut,adults:n.adults,children:n.children,includePricing:n.includePricing}})).data.data}}const $d=new Tz;let Ez={data:""},Mz=e=>typeof window=="object"?((e?e.querySelector("#_goober"):window._goober)||Object.assign((e||document.head).appendChild(document.createElement("style")),{innerHTML:" ",id:"_goober"})).firstChild:e||Ez,Rz=/(?:([\u0080-\uFFFF\w-%@]+) *:? *([^{;]+?);|([^;}{]*?) *{)|(}\s*)/g,Az=/\/\*[^]*?\*\/|  +/g,hw=/\n+/g,el=(e,n)=>{let a="",r="",o="";for(let d in e){let h=e[d];d[0]=="@"?d[1]=="i"?a=d+" "+h+";":r+=d[1]=="f"?el(h,d):d+"{"+el(h,d[1]=="k"?"":n)+"}":typeof h=="object"?r+=el(h,n?n.replace(/([^,])+/g,g=>d.replace(/([^,]*:\S+\([^)]*\))|([^,])+/g,p=>/&/.test(p)?p.replace(/&/g,g):g?g+" "+p:p)):d):h!=null&&(d=/^--/.test(d)?d:d.replace(/[A-Z]/g,"-$&").toLowerCase(),o+=el.p?el.p(d,h):d+":"+h+";")}return a+(n&&o?n+"{"+o+"}":o)+r},Vr={},V_=e=>{if(typeof e=="object"){let n="";for(let a in e)n+=a+V_(e[a]);return n}return e},Dz=(e,n,a,r,o)=>{let d=V_(e),h=Vr[d]||(Vr[d]=(p=>{let f=0,v=11;for(;f<p.length;)v=101*v+p.charCodeAt(f++)>>>0;return"go"+v})(d));if(!Vr[h]){let p=d!==e?e:(f=>{let v,w,S=[{}];for(;v=Rz.exec(f.replace(Az,""));)v[4]?S.shift():v[3]?(w=v[3].replace(hw," ").trim(),S.unshift(S[0][w]=S[0][w]||{})):S[0][v[1]]=v[2].replace(hw," ").trim();return S[0]})(e);Vr[h]=el(o?{["@keyframes "+h]:p}:p,a?"":"."+h)}let g=a&&Vr.g?Vr.g:null;return a&&(Vr.g=Vr[h]),((p,f,v,w)=>{w?f.data=f.data.replace(w,p):f.data.indexOf(p)===-1&&(f.data=v?p+f.data:f.data+p)})(Vr[h],n,r,g),h},Oz=(e,n,a)=>e.reduce((r,o,d)=>{let h=n[d];if(h&&h.call){let g=h(a),p=g&&g.props&&g.props.className||/^go/.test(g)&&g;h=p?"."+p:g&&typeof g=="object"?g.props?"":el(g,""):g===!1?"":g}return r+o+(h??"")},"");function Ef(e){let n=this||{},a=e.call?e(n.p):e;return Dz(a.unshift?a.raw?Oz(a,[].slice.call(arguments,1),n.p):a.reduce((r,o)=>Object.assign(r,o&&o.call?o(n.p):o),{}):a,Mz(n.target),n.g,n.o,n.k)}let Z_,Zx,Wx;Ef.bind({g:1});let Xr=Ef.bind({k:1});function Pz(e,n,a,r){el.p=n,Z_=e,Zx=a,Wx=r}function sl(e,n){let a=this||{};return function(){let r=arguments;function o(d,h){let g=Object.assign({},d),p=g.className||o.className;a.p=Object.assign({theme:Zx&&Zx()},g),a.o=/ *go\d+/.test(p),g.className=Ef.apply(a,r)+(p?" "+p:"");let f=e;return e[0]&&(f=g.as||e,delete g.as),Wx&&f[0]&&Wx(g),Z_(f,g)}return o}}var Lz=e=>typeof e=="function",Kx=(e,n)=>Lz(e)?e(n):e,zz=(()=>{let e=0;return()=>(++e).toString()})(),Iz=(()=>{let e;return()=>{if(e===void 0&&typeof window<"u"){let n=matchMedia("(prefers-reduced-motion: reduce)");e=!n||n.matches}return e}})(),Bz=20,W_=(e,n)=>{switch(n.type){case 0:return{...e,toasts:[n.toast,...e.toasts].slice(0,Bz)};case 1:return{...e,toasts:e.toasts.map(d=>d.id===n.toast.id?{...d,...n.toast}:d)};case 2:let{toast:a}=n;return W_(e,{type:e.toasts.find(d=>d.id===a.id)?1:0,toast:a});case 3:let{toastId:r}=n;return{...e,toasts:e.toasts.map(d=>d.id===r||r===void 0?{...d,dismissed:!0,visible:!1}:d)};case 4:return n.toastId===void 0?{...e,toasts:[]}:{...e,toasts:e.toasts.filter(d=>d.id!==n.toastId)};case 5:return{...e,pausedAt:n.time};case 6:let o=n.time-(e.pausedAt||0);return{...e,pausedAt:void 0,toasts:e.toasts.map(d=>({...d,pauseDuration:d.pauseDuration+o}))}}},$z=[],rx={toasts:[],pausedAt:void 0},ny=e=>{rx=W_(rx,e),$z.forEach(n=>{n(rx)})},Fz=(e,n="blank",a)=>({createdAt:Date.now(),visible:!0,dismissed:!1,type:n,ariaProps:{role:"status","aria-live":"polite"},message:e,pauseDuration:0,...a,id:a?.id||zz()}),Pu=e=>(n,a)=>{let r=Fz(n,e,a);return ny({type:2,toast:r}),r.id},Mt=(e,n)=>Pu("blank")(e,n);Mt.error=Pu("error");Mt.success=Pu("success");Mt.loading=Pu("loading");Mt.custom=Pu("custom");Mt.dismiss=e=>{ny({type:3,toastId:e})};Mt.remove=e=>ny({type:4,toastId:e});Mt.promise=(e,n,a)=>{let r=Mt.loading(n.loading,{...a,...a?.loading});return typeof e=="function"&&(e=e()),e.then(o=>{let d=n.success?Kx(n.success,o):void 0;return d?Mt.success(d,{id:r,...a,...a?.success}):Mt.dismiss(r),o}).catch(o=>{let d=n.error?Kx(n.error,o):void 0;d?Mt.error(d,{id:r,...a,...a?.error}):Mt.dismiss(r)}),e};var Uz=Xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
 transform: scale(1) rotate(45deg);
  opacity: 1;
}`,Hz=Xr`
from {
  transform: scale(0);
  opacity: 0;
}
to {
  transform: scale(1);
  opacity: 1;
}`,qz=Xr`
from {
  transform: scale(0) rotate(90deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(90deg);
	opacity: 1;
}`,Yz=sl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#ff4b4b"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Uz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;

  &:after,
  &:before {
    content: '';
    animation: ${Hz} 0.15s ease-out forwards;
    animation-delay: 150ms;
    position: absolute;
    border-radius: 3px;
    opacity: 0;
    background: ${e=>e.secondary||"#fff"};
    bottom: 9px;
    left: 4px;
    height: 2px;
    width: 12px;
  }

  &:before {
    animation: ${qz} 0.15s ease-out forwards;
    animation-delay: 180ms;
    transform: rotate(90deg);
  }
`,Vz=Xr`
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
`,Zz=sl("div")`
  width: 12px;
  height: 12px;
  box-sizing: border-box;
  border: 2px solid;
  border-radius: 100%;
  border-color: ${e=>e.secondary||"#e0e0e0"};
  border-right-color: ${e=>e.primary||"#616161"};
  animation: ${Vz} 1s linear infinite;
`,Wz=Xr`
from {
  transform: scale(0) rotate(45deg);
	opacity: 0;
}
to {
  transform: scale(1) rotate(45deg);
	opacity: 1;
}`,Kz=Xr`
0% {
	height: 0;
	width: 0;
	opacity: 0;
}
40% {
  height: 0;
	width: 6px;
	opacity: 1;
}
100% {
  opacity: 1;
  height: 10px;
}`,Gz=sl("div")`
  width: 20px;
  opacity: 0;
  height: 20px;
  border-radius: 10px;
  background: ${e=>e.primary||"#61d345"};
  position: relative;
  transform: rotate(45deg);

  animation: ${Wz} 0.3s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
  animation-delay: 100ms;
  &:after {
    content: '';
    box-sizing: border-box;
    animation: ${Kz} 0.2s ease-out forwards;
    opacity: 0;
    animation-delay: 200ms;
    position: absolute;
    border-right: 2px solid;
    border-bottom: 2px solid;
    border-color: ${e=>e.secondary||"#fff"};
    bottom: 6px;
    left: 6px;
    height: 10px;
    width: 6px;
  }
`,Qz=sl("div")`
  position: absolute;
`,Xz=sl("div")`
  position: relative;
  display: flex;
  justify-content: center;
  align-items: center;
  min-width: 20px;
  min-height: 20px;
`,Jz=Xr`
from {
  transform: scale(0.6);
  opacity: 0.4;
}
to {
  transform: scale(1);
  opacity: 1;
}`,eI=sl("div")`
  position: relative;
  transform: scale(0.6);
  opacity: 0.4;
  min-width: 20px;
  animation: ${Jz} 0.3s 0.12s cubic-bezier(0.175, 0.885, 0.32, 1.275)
    forwards;
`,tI=({toast:e})=>{let{icon:n,type:a,iconTheme:r}=e;return n!==void 0?typeof n=="string"?b.createElement(eI,null,n):n:a==="blank"?null:b.createElement(Xz,null,b.createElement(Zz,{...r}),a!=="loading"&&b.createElement(Qz,null,a==="error"?b.createElement(Yz,{...r}):b.createElement(Gz,{...r})))},nI=e=>`
0% {transform: translate3d(0,${e*-200}%,0) scale(.6); opacity:.5;}
100% {transform: translate3d(0,0,0) scale(1); opacity:1;}
`,aI=e=>`
0% {transform: translate3d(0,0,-1px) scale(1); opacity:1;}
100% {transform: translate3d(0,${e*-150}%,-1px) scale(.6); opacity:0;}
`,sI="0%{opacity:0;} 100%{opacity:1;}",rI="0%{opacity:1;} 100%{opacity:0;}",iI=sl("div")`
  display: flex;
  align-items: center;
  background: #fff;
  color: #363636;
  line-height: 1.3;
  will-change: transform;
  box-shadow: 0 3px 10px rgba(0, 0, 0, 0.1), 0 3px 3px rgba(0, 0, 0, 0.05);
  max-width: 350px;
  pointer-events: auto;
  padding: 8px 10px;
  border-radius: 8px;
`,lI=sl("div")`
  display: flex;
  justify-content: center;
  margin: 4px 10px;
  color: inherit;
  flex: 1 1 auto;
  white-space: pre-line;
`,oI=(e,n)=>{let a=e.includes("top")?1:-1,[r,o]=Iz()?[sI,rI]:[nI(a),aI(a)];return{animation:n?`${Xr(r)} 0.35s cubic-bezier(.21,1.02,.73,1) forwards`:`${Xr(o)} 0.4s forwards cubic-bezier(.06,.71,.55,1)`}};b.memo(({toast:e,position:n,style:a,children:r})=>{let o=e.height?oI(e.position||n||"top-center",e.visible):{opacity:0},d=b.createElement(tI,{toast:e}),h=b.createElement(lI,{...e.ariaProps},Kx(e.message,e));return b.createElement(iI,{className:e.className,style:{...o,...a,...e.style}},typeof r=="function"?r({icon:d,message:h}):b.createElement(b.Fragment,null,d,h))});Pz(b.createElement);Ef`
  z-index: 9999;
  > * {
    pointer-events: auto;
  }
`;const ay=(e,n,a)=>{const r=Bn(),o=["availability",e,n,a],{data:d,isLoading:h,error:g,refetch:p}=It({queryKey:o,queryFn:()=>$d.getMonthlyAvailability(e,n,a),enabled:!!e&&n>0&&a>0}),f=Be({mutationFn:_=>$d.updateAvailability(_),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم تحديث الإتاحة بنجاح")},onError:_=>{Mt.error(_.response?.data?.message||"حدث خطأ في تحديث الإتاحة")}}),v=Be({mutationFn:_=>$d.bulkUpdateAvailability(_),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم تحديث الإتاحة بنجاح")},onError:_=>{Mt.error(_.response?.data?.message||"حدث خطأ في تحديث الإتاحة")}}),w=Be({mutationFn:_=>$d.cloneAvailability(_),onSuccess:()=>{r.invalidateQueries({queryKey:["availability",e]}),Mt.success("تم نسخ الإتاحة بنجاح")},onError:_=>{Mt.error(_.response?.data?.message||"حدث خطأ في نسخ الإتاحة")}}),S=Be({mutationFn:({startDate:_,endDate:k})=>$d.deleteAvailability(e,_,k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم حذف الإتاحة بنجاح")},onError:_=>{Mt.error(_.response?.data?.message||"حدث خطأ في حذف الإتاحة")}}),T=b.useCallback(_=>{const k=_.map(R=>({startDate:R,endDate:R,status:Et.Blocked,reason:"حظر سريع",notes:"",overwriteExisting:!0}));v.mutate({unitId:e,periods:k,overwriteExisting:!0})},[e,v]),C=b.useCallback(_=>{const k=_.map(R=>({startDate:R,endDate:R,status:Et.Available,reason:"",notes:"",overwriteExisting:!0}));v.mutate({unitId:e,periods:k,overwriteExisting:!0})},[e,v]);return{data:d,isLoading:h,error:g,refetch:p,updateAvailability:f,bulkUpdateAvailability:v,cloneAvailability:w,deleteAvailability:S,quickBlock:T,quickAvailable:C}},cI=({unitId:e,selectedDates:n,onClose:a,onSuccess:r})=>{const{updateAvailability:o}=ay(e,0,0),[d,h]=b.useState({unitId:e,startDate:n[0],endDate:n[n.length-1],status:Et.Blocked,reason:"",notes:"",overwriteExisting:!0}),[g,p]=b.useState(!1),f=[{value:Et.Available,label:"متاح"},{value:Et.Blocked,label:"محظور"},{value:Et.Maintenance,label:"صيانة"},{value:Et.Hold,label:"معلق"}],v={[Et.Blocked]:["حجز خاص","صيانة مجدولة","إغلاق موسمي","طلب المالك","أخرى"],[Et.Maintenance]:["صيانة دورية","إصلاحات","تجديدات","تنظيف عميق","أخرى"],[Et.Hold]:["انتظار التأكيد","حجز مؤقت","قيد المراجعة","أخرى"]},w=async S=>{S.preventDefault(),p(!0);try{await o.mutateAsync(d),r()}catch(T){console.error("Error updating availability:",T)}finally{p(!1)}};return t.jsx(Wh,{isOpen:!0,onClose:a,title:"تحديث الإتاحة",size:"md",children:t.jsxs(kf,{onSubmit:w,className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(hc,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"الفترة المحددة"})]}),t.jsx("div",{className:"text-sm text-gray-600",children:n.length===1?t.jsx("span",{children:ga(new Date(n[0]),"dd/MM/yyyy")}):t.jsxs("span",{children:["من ",ga(new Date(n[0]),"dd/MM/yyyy"),"إلى ",ga(new Date(n[n.length-1]),"dd/MM/yyyy"),t.jsxs("span",{className:"mr-2 text-gray-500",children:["(",n.length," يوم)"]})]})})]}),t.jsx(La,{label:"الحالة",required:!0,children:t.jsx(Ss,{value:d.status,onChange:S=>h({...d,status:S,reason:""}),children:f.map(S=>t.jsx("option",{value:S.value,children:S.label},S.value))})}),d.status&&d.status!==Et.Available&&t.jsx(La,{label:"السبب",children:t.jsxs(Ss,{value:d.reason,onChange:S=>h({...d,reason:S}),children:[t.jsx("option",{value:"",children:"اختر السبب"}),v[d.status]?.map(S=>t.jsx("option",{value:S,children:S},S))]})}),d.reason==="أخرى"&&t.jsx(La,{label:"السبب المخصص",children:t.jsx(ia,{placeholder:"أدخل السبب...",onChange:S=>h({...d,reason:S.target.value})})}),t.jsx(La,{label:"ملاحظات",children:t.jsx(Ou,{value:d.notes,onChange:S=>h({...d,notes:S.target.value}),placeholder:"أضف ملاحظات إضافية...",rows:3})}),t.jsx(La,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tf,{checked:d.overwriteExisting,onChange:S=>h({...d,overwriteExisting:S})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"استبدال البيانات الموجودة"}),t.jsx("p",{className:"text-xs text-gray-500",children:"سيتم استبدال أي إتاحة موجودة في هذه الفترة"})]})]})}),d.status===Et.Blocked&&t.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Sf,{className:"h-4 w-4 text-yellow-600 mt-0.5"}),t.jsxs("div",{className:"text-sm text-yellow-800",children:[t.jsx("p",{className:"font-medium mb-1",children:"تنبيه"}),t.jsx("p",{children:"حظر هذه الأيام سيمنع العملاء من حجزها"})]})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[t.jsx(ot,{type:"button",variant:"outline",onClick:a,disabled:g,children:"إلغاء"}),t.jsx(ot,{type:"submit",variant:"primary",loading:g,children:"تحديث الإتاحة"})]})]})})},sy=({startDate:e="",endDate:n="",onChange:a,minDate:r,maxDate:o,disabled:d=!1,className:h="",placeholder:g={start:"من تاريخ",end:"إلى تاريخ"}})=>{const[p,f]=b.useState(null),v=S=>{a(S,n),S&&n&&S>n&&a(S,S)},w=S=>{a(e,S),e&&S&&S<e&&a(S,S)};return t.jsxs("div",{className:Ke("flex items-center gap-2",h),children:[t.jsxs("div",{className:"relative flex-1",children:[t.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),t.jsx("input",{type:"date",value:e,onChange:S=>v(S.target.value),onFocus:()=>f("start"),onBlur:()=>f(null),min:r,max:n||o,disabled:d,placeholder:g.start,className:Ke("w-full pl-10 pr-3 py-2 text-sm border rounded-md transition-all duration-200","hover:border-gray-400",p==="start"?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-300",d&&"bg-gray-50 cursor-not-allowed opacity-60")})]}),t.jsx(OL,{className:"h-4 w-4 text-gray-400 flex-shrink-0"}),t.jsxs("div",{className:"relative flex-1",children:[t.jsx(hc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"}),t.jsx("input",{type:"date",value:n,onChange:S=>w(S.target.value),onFocus:()=>f("end"),onBlur:()=>f(null),min:e||r,max:o,disabled:d||!e,placeholder:g.end,className:Ke("w-full pl-10 pr-3 py-2 text-sm border rounded-md transition-all duration-200","hover:border-gray-400",p==="end"?"border-blue-500 ring-2 ring-blue-500/20":"border-gray-300",(d||!e)&&"bg-gray-50 cursor-not-allowed opacity-60")})]})]})},dI=({unitId:e,selectedDates:n,onClose:a,onSuccess:r})=>{const{bulkUpdateAvailability:o,cloneAvailability:d}=ay(e,0,0),[h,g]=b.useState("bulk-update"),[p,f]=b.useState(Et.Blocked),[v,w]=b.useState(""),[S,T]=b.useState(""),[C,_]=b.useState(!0),[k,R]=b.useState({start:"",end:""}),[O,P]=b.useState({start:"",end:""}),[U,A]=b.useState(1),[$,E]=b.useState("weekly"),[I,Z]=b.useState([]),[F,Y]=b.useState([]),G=async()=>{const Q=n.map(K=>({startDate:K,endDate:K,status:p,reason:v,notes:S,overwriteExisting:C}));try{await o.mutateAsync({unitId:e,periods:Q,overwriteExisting:C}),r()}catch(K){console.error("Bulk update failed:",K)}},V=async()=>{if(!k.start||!k.end||!O.start){Mt.error("يرجى تحديد فترة المصدر والهدف");return}try{await d.mutateAsync({unitId:e,sourceStartDate:k.start,sourceEndDate:k.end,targetStartDate:O.start,repeatCount:U}),r()}catch(Q){console.error("Clone failed:",Q)}},H=async()=>{const Q=[];if(Q.length===0){Mt.error("لم يتم إنشاء أي تواريخ من النمط المحدد");return}const K=Q.map(oe=>({startDate:oe,endDate:oe,status:p,reason:"تطبيق نمط",notes:S,overwriteExisting:C}));try{await o.mutateAsync({unitId:e,periods:K,overwriteExisting:C}),r()}catch(oe){console.error("Pattern apply failed:",oe)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:t.jsxs(Ia,{className:"w-full max-w-2xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"عمليات متعددة"}),t.jsx(ot,{variant:"ghost",size:"sm",onClick:a,icon:t.jsx(Cf,{className:"h-4 w-4"})})]}),t.jsx("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:t.jsxs(wf,{value:h,onValueChange:g,children:[t.jsxs(Nf,{className:"grid grid-cols-4 w-full",children:[t.jsx(as,{value:"bulk-update",children:"تحديث جماعي"}),t.jsx(as,{value:"clone",children:"نسخ"}),t.jsx(as,{value:"pattern",children:"نمط"}),t.jsx(as,{value:"import",children:"استيراد"})]}),t.jsxs(ss,{value:"bulk-update",className:"space-y-4",children:[t.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["سيتم تطبيق التحديث على ",n.length," يوم محدد"]})}),t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحالة"}),t.jsxs(Ss,{value:p,onChange:Q=>f(Q),children:[t.jsx("option",{value:Et.Available,children:"متاح"}),t.jsx("option",{value:Et.Blocked,children:"محظور"}),t.jsx("option",{value:Et.Maintenance,children:"صيانة"}),t.jsx("option",{value:Et.Hold,children:"معلق"})]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السبب"}),t.jsx(ia,{value:v,onChange:Q=>w(Q.target.value),placeholder:"أدخل سبب التحديث..."})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"ملاحظات"}),t.jsx(Ou,{value:S,onChange:Q=>T(Q.target.value),placeholder:"ملاحظات إضافية...",rows:3})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tf,{checked:C,onChange:_}),t.jsx("label",{className:"text-sm text-gray-700",children:"استبدال البيانات الموجودة"})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:G,loading:o.isPending,children:"تطبيق التحديث"})]})]}),t.jsx(ss,{value:"clone",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفترة المصدر"}),t.jsx(sy,{startDate:k.start,endDate:k.end,onChange:(Q,K)=>R({start:Q,end:K})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية للنسخ"}),t.jsx(ia,{type:"date",value:O.start,onChange:Q=>P({...O,start:Q.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد مرات التكرار"}),t.jsx(ia,{type:"number",min:"1",max:"12",value:U,onChange:Q=>A(parseInt(Q.target.value))})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:V,loading:d.isPending,icon:t.jsx(ey,{className:"h-4 w-4"}),children:"نسخ الإتاحة"})]})}),t.jsx(ss,{value:"pattern",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع النمط"}),t.jsxs(Ss,{value:$,onChange:Q=>E(Q),children:[t.jsx("option",{value:"weekly",children:"أسبوعي"}),t.jsx("option",{value:"monthly",children:"شهري"})]})]}),$==="weekly"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"أيام الأسبوع"}),t.jsx("div",{className:"flex gap-2 flex-wrap",children:["الأحد","الإثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"].map((Q,K)=>t.jsx(ot,{variant:I.includes(K)?"primary":"outline",size:"sm",onClick:()=>{I.includes(K)?Z(I.filter(oe=>oe!==K)):Z([...I,K])},children:Q},K))})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:H,icon:t.jsx(mz,{className:"h-4 w-4"}),children:"تطبيق النمط"})]})}),t.jsxs(ss,{value:"import",className:"space-y-4",children:[t.jsx("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8",children:t.jsxs("div",{className:"text-center",children:[t.jsx(H_,{className:"h-12 w-12 text-gray-400 mx-auto mb-4"}),t.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"اسحب وأفلت ملف CSV أو Excel هنا"}),t.jsx(ot,{variant:"outline",size:"sm",children:"اختر ملف"})]})}),t.jsx("div",{className:"bg-gray-50 rounded-lg p-3",children:t.jsx("p",{className:"text-sm text-gray-600",children:"صيغة الملف المطلوبة: التاريخ، الحالة، السبب، الملاحظات"})})]})]})}),t.jsx("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:t.jsx(ot,{variant:"outline",onClick:a,children:"إلغاء"})})]})})},Mf=({size:e="md",variant:n="spinner",color:a="primary",text:r,fullScreen:o=!1,className:d=""})=>{const h={xs:"h-3 w-3",sm:"h-4 w-4",md:"h-6 w-6",lg:"h-8 w-8",xl:"h-12 w-12"},g={primary:"border-blue-600",secondary:"border-gray-600",white:"border-white",dark:"border-gray-900"},p=n==="spinner"&&t.jsx("div",{className:Ke("animate-spin rounded-full border-2 border-t-transparent",h[e],g[a]),"aria-label":"Loading"}),f=n==="dots"&&t.jsx("div",{className:"flex gap-1",children:[0,1,2].map(T=>t.jsx("div",{className:Ke("rounded-full bg-current animate-pulse",e==="xs"&&"h-1 w-1",e==="sm"&&"h-1.5 w-1.5",e==="md"&&"h-2 w-2",e==="lg"&&"h-3 w-3",e==="xl"&&"h-4 w-4",a==="primary"&&"text-blue-600",a==="secondary"&&"text-gray-600",a==="white"&&"text-white",a==="dark"&&"text-gray-900"),style:{animationDelay:`${T*150}ms`}},T))}),v=n==="pulse"&&t.jsxs("div",{className:Ke("space-y-2",h[e]),children:[t.jsx("div",{className:"bg-gray-300 rounded h-2 animate-pulse"}),t.jsx("div",{className:"bg-gray-300 rounded h-2 animate-pulse",style:{width:"75%"}})]}),w=n==="ring"&&t.jsxs("div",{className:Ke("relative",h[e]),children:[t.jsx("div",{className:Ke("absolute inset-0 rounded-full border-2 opacity-25",g[a])}),t.jsx("div",{className:Ke("absolute inset-0 rounded-full border-2 border-t-transparent animate-spin",g[a])})]}),S=t.jsxs("div",{className:Ke("flex flex-col items-center justify-center gap-3",d),children:[p,f,v,w,r&&t.jsx("p",{className:Ke("text-sm font-medium",a==="primary"&&"text-blue-600",a==="secondary"&&"text-gray-600",a==="white"&&"text-white",a==="dark"&&"text-gray-900"),children:r})]});return o?t.jsx("div",{className:"fixed inset-0 bg-white/80 backdrop-blur-sm flex items-center justify-center z-50",children:S}):S},ry=({variant:e="info",title:n,description:a,children:r,icon:o,closable:d=!1,onClose:h,className:g="",action:p})=>{const v={info:{container:"bg-blue-50 border-blue-200",icon:"text-blue-600",title:"text-blue-900",description:"text-blue-800",defaultIcon:t.jsx(iz,{className:"h-5 w-5"})},success:{container:"bg-green-50 border-green-200",icon:"text-green-600",title:"text-green-900",description:"text-green-800",defaultIcon:t.jsx(I_,{className:"h-5 w-5"})},warning:{container:"bg-amber-50 border-amber-200",icon:"text-amber-600",title:"text-amber-900",description:"text-amber-800",defaultIcon:t.jsx(Sf,{className:"h-5 w-5"})},error:{container:"bg-red-50 border-red-200",icon:"text-red-600",title:"text-red-900",description:"text-red-800",defaultIcon:t.jsx(GL,{className:"h-5 w-5"})}}[e];return t.jsx("div",{className:Ke("relative rounded-lg border px-4 py-3 transition-all duration-200","animate-in fade-in slide-in-from-top-1",v.container,g),role:"alert",children:t.jsxs("div",{className:"flex gap-3",children:[(o||v.defaultIcon)&&t.jsx("div",{className:Ke("flex-shrink-0 mt-0.5",v.icon),children:o||v.defaultIcon}),t.jsxs("div",{className:"flex-1",children:[n&&t.jsx("h3",{className:Ke("font-semibold text-sm mb-1",v.title),children:n}),a&&t.jsx("p",{className:Ke("text-sm",v.description),children:a}),r&&t.jsx("div",{className:Ke("text-sm",v.description),children:r}),p&&t.jsx("div",{className:"mt-3",children:p})]}),d&&t.jsx("button",{onClick:h,className:Ke("flex-shrink-0 ml-auto -mr-1 -mt-1 p-1 rounded-md transition-colors","hover:bg-black/5 focus:outline-none focus:ring-2 focus:ring-offset-2",e==="info"&&"focus:ring-blue-500",e==="success"&&"focus:ring-green-500",e==="warning"&&"focus:ring-amber-500",e==="error"&&"focus:ring-red-500"),children:t.jsx(Cf,{className:Ke("h-4 w-4",v.icon)})})]})})},uI=({unitId:e,unitName:n,initialYear:a=new Date().getFullYear(),initialMonth:r=new Date().getMonth()+1})=>{const[o,d]=b.useState(a),[h,g]=b.useState(r),[p,f]=b.useState([]),[v,w]=b.useState(!1),[S,T]=b.useState(!1),[C,_]=b.useState(null),[k,R]=b.useState("month"),{data:O,isLoading:P,error:U,quickBlock:A,quickAvailable:$}=ay(e,o,h),E=b.useCallback((V,H)=>{d(V),g(H),f([])},[]),I=b.useCallback(V=>{f(H=>H.includes(V)?H.filter(Q=>Q!==V):[...H,V])},[]),Z=b.useCallback((V,H)=>{const Q=new Date(V),K=new Date(H),oe=[];for(let W=new Date(Q);W<=K;W.setDate(W.getDate()+1))oe.push(ga(new Date(W),"yyyy-MM-dd"));f(oe),T(!0)},[]),F=b.useCallback(()=>{p.length>0&&(A(p),f([]))},[p,A]),Y=b.useCallback(()=>{p.length>0&&($(p),f([]))},[p,$]),G=b.useCallback(V=>{const H=O?.calendar[V.dateString],Q=H?.status||Et.Available,K=p.includes(V.dateString),oe={[Et.Available]:"bg-green-100 text-green-800 border-green-200",[Et.Booked]:"bg-red-100 text-red-800 border-red-200",[Et.Blocked]:"bg-gray-200 text-gray-700 border-gray-300",[Et.Maintenance]:"bg-yellow-100 text-yellow-800 border-yellow-200",[Et.Hold]:"bg-blue-100 text-blue-800 border-blue-200"},W={[Et.Available]:"✓",[Et.Booked]:"●",[Et.Blocked]:"✕",[Et.Maintenance]:"🔧",[Et.Hold]:"⏸"};return t.jsxs("div",{className:Ke("flex flex-col h-full p-1 rounded transition-all",V.isCurrentMonth&&oe[Q],K&&"ring-2 ring-blue-500",V.isPast&&"opacity-60"),children:[t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsx("span",{className:Ke("text-sm font-medium",V.isToday&&"font-bold"),children:ga(V.date,"d")}),t.jsx("span",{className:"text-xs",children:W[Q]})]}),H?.reason&&t.jsx("div",{className:"mt-1 text-xs truncate",title:H.reason,children:H.reason}),H?.bookingId&&t.jsx("div",{className:"mt-auto",children:t.jsxs("span",{className:"text-xs bg-white/50 px-1 rounded",children:["#",H.bookingId.slice(0,6)]})})]})},[O,p]);return P?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx(Mf,{size:"lg"})}):U?t.jsx(ry,{variant:"error",children:"حدث خطأ في تحميل بيانات الإتاحة"}):t.jsxs("div",{className:"space-y-4",children:[t.jsx(q_,{year:o,month:h,onMonthChange:E,onViewChange:R,currentView:k,title:`إتاحة ${n}`,actions:t.jsx(Cz,{selectedCount:p.length,onBlock:F,onAvailable:Y,onUpdate:()=>w(!0),onBulkOperations:()=>T(!0)})}),O?.stats&&t.jsx(Sz,{stats:O.stats}),t.jsx(_z,{}),k==="month"&&t.jsx(P_,{year:o,month:h,data:O?.calendar,selectedDates:p,onDayClick:I,onRangeSelect:Z,onDayHover:_,renderDay:G,multiSelect:!0}),v&&p.length>0&&t.jsx(cI,{unitId:e,selectedDates:p,onClose:()=>w(!1),onSuccess:()=>{w(!1),f([])}}),S&&t.jsx(dI,{unitId:e,selectedDates:p,onClose:()=>T(!1),onSuccess:()=>{T(!1),f([])}})]})},mI=()=>{const e=[{type:"Base",label:"سعر أساسي",color:"bg-gray-100 border-gray-200"},{type:"Custom",label:"سعر مخصص",color:"bg-blue-100 border-blue-200"},{type:"Weekend",label:"نهاية الأسبوع",color:"bg-purple-100 border-purple-200"},{type:"Holiday",label:"عطلة رسمية",color:"bg-red-100 border-red-200"},{type:"Seasonal",label:"موسمي",color:"bg-green-100 border-green-200"},{type:"Special",label:"عرض خاص",color:"bg-yellow-100 border-yellow-200"}];return t.jsx("div",{className:"bg-white rounded-lg border border-gray-200 p-3",children:t.jsxs("div",{className:"flex items-center gap-6 flex-wrap",children:[t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"أنواع التسعير:"}),e.map(n=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("div",{className:`w-6 h-6 rounded border ${n.color}`}),t.jsx("span",{className:"text-sm text-gray-600",children:n.label})]},n.type))]})})},hI=({stats:e,currency:n})=>{const a=o=>new Intl.NumberFormat("ar-YE",{style:"currency",currency:n,minimumFractionDigits:0,maximumFractionDigits:0}).format(o),r=[{label:"متوسط السعر",value:a(e.averagePrice),icon:Du,color:"blue",bgColor:"bg-blue-50",textColor:"text-blue-600"},{label:"أعلى سعر",value:a(e.maxPrice),icon:fu,color:"green",bgColor:"bg-green-50",textColor:"text-green-600",change:e.maxPrice>e.averagePrice?`+${((e.maxPrice-e.averagePrice)/e.averagePrice*100).toFixed(0)}%`:null},{label:"أقل سعر",value:a(e.minPrice),icon:U_,color:"red",bgColor:"bg-red-50",textColor:"text-red-600",change:e.minPrice<e.averagePrice?`-${((e.averagePrice-e.minPrice)/e.averagePrice*100).toFixed(0)}%`:null},{label:"الإيرادات المحتملة",value:a(e.potentialRevenue),icon:FL,color:"purple",bgColor:"bg-purple-50",textColor:"text-purple-600",subtitle:`${e.daysWithSpecialPricing} يوم بتسعير خاص`}];return t.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:r.map((o,d)=>{const h=o.icon;return t.jsx(Ia,{className:"p-4",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("p",{className:"text-sm text-gray-600 mb-1",children:o.label}),t.jsx("p",{className:"text-xl font-bold text-gray-900",children:o.value}),o.change&&t.jsxs("p",{className:`text-sm mt-1 ${o.textColor}`,children:[o.change," من المتوسط"]}),o.subtitle&&t.jsx("p",{className:"text-xs text-gray-500 mt-1",children:o.subtitle})]}),t.jsx("div",{className:`p-3 rounded-lg ${o.bgColor}`,children:t.jsx(h,{className:`h-5 w-5 ${o.textColor}`})})]})},d)})})},fI=({selectedCount:e,onIncrease:n,onDecrease:a,onUpdate:r,onBulkOperations:o})=>t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx(ot,{size:"sm",variant:"outline",onClick:n,icon:t.jsx(fu,{className:"h-4 w-4"}),disabled:e===0,children:"+10%"}),t.jsx(ot,{size:"sm",variant:"outline",onClick:a,icon:t.jsx(U_,{className:"h-4 w-4"}),disabled:e===0,children:"-10%"}),t.jsx(ot,{size:"sm",variant:"outline",onClick:r,icon:t.jsx(ty,{className:"h-4 w-4"}),disabled:e===0,children:"تحديث"}),t.jsx(ot,{size:"sm",variant:"primary",onClick:o,icon:t.jsx(B_,{className:"h-4 w-4"}),disabled:e===0,children:"عمليات متقدمة"})]}),Jo=({value:e,onValueChange:n,min:a=0,max:r=100,step:o=1,disabled:d=!1,showLabels:h=!1,showValue:g=!1,formatValue:p=w=>w.toString(),marks:f,className:v=""})=>{const[w,S]=b.useState(!1),T=(e[0]-a)/(r-a)*100;return t.jsxs("div",{className:Ke("relative",v),children:[g&&t.jsx("div",{className:"absolute -top-8 transform -translate-x-1/2 bg-gray-900 text-white text-xs px-2 py-1 rounded",style:{left:`${T}%`},children:p(e[0])}),t.jsxs("div",{className:"relative",children:[t.jsx("input",{type:"range",min:a,max:r,step:o,value:e[0],onChange:C=>n([Number(C.target.value)]),onMouseDown:()=>S(!0),onMouseUp:()=>S(!1),disabled:d,className:Ke("w-full h-2 bg-gray-200 rounded-lg appearance-none cursor-pointer","focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2","[&::-webkit-slider-thumb]:appearance-none","[&::-webkit-slider-thumb]:w-5 [&::-webkit-slider-thumb]:h-5","[&::-webkit-slider-thumb]:bg-blue-600 [&::-webkit-slider-thumb]:rounded-full","[&::-webkit-slider-thumb]:cursor-pointer [&::-webkit-slider-thumb]:transition-all",w&&"[&::-webkit-slider-thumb]:scale-125 [&::-webkit-slider-thumb]:shadow-lg",d&&"opacity-50 cursor-not-allowed")}),t.jsx("div",{className:"absolute top-0 h-2 bg-blue-600 rounded-lg pointer-events-none",style:{width:`${T}%`}})]}),h&&t.jsxs("div",{className:"flex justify-between mt-1",children:[t.jsx("span",{className:"text-xs text-gray-500",children:a}),t.jsx("span",{className:"text-xs text-gray-500",children:r})]}),f&&t.jsx("div",{className:"relative mt-2",children:f.map(C=>{const _=(C.value-a)/(r-a)*100;return t.jsxs("div",{className:"absolute transform -translate-x-1/2",style:{left:`${_}%`},children:[t.jsx("div",{className:"w-0.5 h-2 bg-gray-300"}),C.label&&t.jsx("span",{className:"text-xs text-gray-500 mt-1 block",children:C.label})]},C.value)})})]})};class pI{basePath="/api/admin/units";async getMonthlyPricing(n,a,r){return(await we.get(`${this.basePath}/${n}/pricing/${a}/${r}`)).data.data}async updatePricing(n){await we.post(`${this.basePath}/${n.unitId}/pricing`,n)}async bulkUpdatePricing(n){await we.post(`${this.basePath}/${n.unitId}/pricing/bulk`,n)}async copyPricing(n){await we.post(`${this.basePath}/${n.unitId}/pricing/copy`,n)}async deletePricing(n,a){await we.delete(`${this.basePath}/${n}/pricing/${a}`)}async getSeasonalPricing(n){return(await we.get(`${this.basePath}/${n}/pricing/templates`)).data}async applySeasonalPricing(n){await we.post(`${this.basePath}/${n.unitId}/pricing/apply-template`,n)}async getPricingBreakdown(n,a,r){return(await we.get(`${this.basePath}/${n}/pricing/breakdown`,{params:{checkIn:a,checkOut:r}})).data.data}}const Ll=new pI,Rf=(e,n,a)=>{const r=Bn(),o=["pricing",e,n,a],{data:d,isLoading:h,error:g,refetch:p}=It({queryKey:o,queryFn:()=>Ll.getMonthlyPricing(e,n,a),enabled:!!e&&n>0&&a>0}),f=Be({mutationFn:k=>Ll.updatePricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم تحديث التسعير بنجاح")},onError:k=>{Mt.error(k.response?.data?.message||"حدث خطأ في تحديث التسعير")}}),v=Be({mutationFn:k=>Ll.bulkUpdatePricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم تحديث التسعير بنجاح")},onError:k=>{Mt.error(k.response?.data?.message||"حدث خطأ في تحديث التسعير")}}),w=Be({mutationFn:k=>Ll.copyPricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:["pricing",e]}),Mt.success("تم نسخ التسعير بنجاح")},onError:k=>{Mt.error(k.response?.data?.message||"حدث خطأ في نسخ التسعير")}}),S=Be({mutationFn:k=>Ll.applySeasonalPricing(k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم تطبيق التسعير الموسمي بنجاح")},onError:k=>{Mt.error(k.response?.data?.message||"حدث خطأ في تطبيق التسعير الموسمي")}}),T=Be({mutationFn:k=>Ll.deletePricing(e,k),onSuccess:()=>{r.invalidateQueries({queryKey:o}),Mt.success("تم حذف التسعير بنجاح")},onError:k=>{Mt.error(k.response?.data?.message||"حدث خطأ في حذف التسعير")}}),C=b.useCallback((k,R)=>{const O=k.map(P=>({startDate:P,endDate:P,priceType:"Custom",price:0,currency:d?.currency||"YER",tier:"1",percentageChange:R,overwriteExisting:!0}));v.mutate({unitId:e,periods:O,overwriteExisting:!0})},[e,v,d]),_=b.useCallback((k,R,O)=>{f.mutate({unitId:e,startDate:k,endDate:R,priceType:"Weekend",price:0,currency:d?.currency||"YER",pricingTier:"2",percentageChange:O,overwriteExisting:!0})},[e,f,d]);return{data:d,isLoading:h,error:g,refetch:p,updatePricing:f,bulkUpdatePricing:v,copyPricing:w,applySeasonalPricing:S,deletePricing:T,applyPercentageChange:C,applyWeekendPricing:_}},gI=e=>{Bn();const{data:n,isLoading:a,error:r}=It({queryKey:["seasonal-pricing",e],queryFn:()=>Ll.getSeasonalPricing(e),enabled:!!e});return{seasonalPricing:n?.seasons||[],statistics:n?.statistics,isLoading:a,error:r}},xI=({unitId:e,selectedDates:n,basePrice:a,currency:r,onClose:o,onSuccess:d})=>{const{updatePricing:h}=Rf(e,0,0),[g,p]=b.useState("fixed"),[f,v]=b.useState({unitId:e,startDate:n[0],endDate:n[n.length-1],priceType:"Custom",price:a,currency:r,pricingTier:"1",percentageChange:0,description:"",overwriteExisting:!0}),[w,S]=b.useState(!1),T=[{value:"Custom",label:"سعر مخصص"},{value:"Weekend",label:"نهاية الأسبوع"},{value:"Holiday",label:"عطلة رسمية"},{value:"Seasonal",label:"موسمي"},{value:"Special",label:"عرض خاص"}],C=[{value:"1",label:"عادي"},{value:"2",label:"مميز"},{value:"3",label:"VIP"}],_=()=>g==="percentage"&&f.percentageChange?a+a*f.percentageChange/100:f.price||a,k=async R=>{R.preventDefault(),S(!0);try{const O={...f,price:g==="percentage"?0:f.price,percentageChange:g==="percentage"?f.percentageChange:void 0};await h.mutateAsync(O),d()}catch(O){console.error("Error updating pricing:",O)}finally{S(!1)}};return t.jsx(Wh,{isOpen:!0,onClose:o,title:"تحديث التسعير",size:"md",children:t.jsxs(kf,{onSubmit:k,className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[t.jsx(hc,{className:"h-4 w-4 text-gray-500"}),t.jsx("span",{className:"text-sm font-medium text-gray-700",children:"الفترة المحددة"})]}),t.jsx("div",{className:"text-sm text-gray-600",children:n.length===1?t.jsx("span",{children:ga(new Date(n[0]),"dd/MM/yyyy")}):t.jsxs("span",{children:["من ",ga(new Date(n[0]),"dd/MM/yyyy"),"إلى ",ga(new Date(n[n.length-1]),"dd/MM/yyyy"),t.jsxs("span",{className:"mr-2 text-gray-500",children:["(",n.length," يوم)"]})]})})]}),t.jsx(La,{label:"نوع التسعير",required:!0,children:t.jsx(Ss,{value:f.priceType,onChange:R=>v({...f,priceType:R}),children:T.map(R=>t.jsx("option",{value:R.value,children:R.label},R.value))})}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ot,{type:"button",variant:g==="fixed"?"primary":"outline",onClick:()=>p("fixed"),className:"flex-1",icon:t.jsx(Du,{className:"h-4 w-4"}),children:"سعر ثابت"}),t.jsx(ot,{type:"button",variant:g==="percentage"?"primary":"outline",onClick:()=>p("percentage"),className:"flex-1",icon:t.jsx($_,{className:"h-4 w-4"}),children:"نسبة مئوية"})]}),g==="fixed"?t.jsxs(La,{label:"السعر",required:!0,children:[t.jsxs("div",{className:"relative",children:[t.jsx(ia,{type:"number",value:f.price,onChange:R=>v({...f,price:parseFloat(R.target.value)}),min:"0",step:"100",className:"pl-12"}),t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:r})]}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["السعر الأساسي: ",a," ",r]})]}):t.jsx(La,{label:"نسبة التغيير",children:t.jsxs("div",{className:"space-y-3",children:[t.jsx(Jo,{value:[f.percentageChange||0],onValueChange:R=>v({...f,percentageChange:R[0]}),min:-50,max:100,step:5,className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-sm",children:[t.jsx("span",{className:"text-gray-500",children:"-50%"}),t.jsxs("span",{className:"font-medium text-lg",children:[f.percentageChange>0?"+":"",f.percentageChange,"%"]}),t.jsx("span",{className:"text-gray-500",children:"+100%"})]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["السعر الجديد: ",_().toFixed(0)," ",r]})})]})}),t.jsx(La,{label:"فئة التسعير",children:t.jsx(Ss,{value:f.pricingTier,onChange:R=>v({...f,pricingTier:R}),children:C.map(R=>t.jsx("option",{value:R.value,children:R.label},R.value))})}),t.jsx(La,{label:"وصف التسعير",children:t.jsx(Ou,{value:f.description,onChange:R=>v({...f,description:R.target.value}),placeholder:"مثال: عرض خاص لنهاية الأسبوع...",rows:3})}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsx(La,{label:"الحد الأدنى للسعر",children:t.jsx(ia,{type:"number",value:f.minPrice||"",onChange:R=>v({...f,minPrice:parseFloat(R.target.value)||void 0}),placeholder:"اختياري"})}),t.jsx(La,{label:"الحد الأقصى للسعر",children:t.jsx(ia,{type:"number",value:f.maxPrice||"",onChange:R=>v({...f,maxPrice:parseFloat(R.target.value)||void 0}),placeholder:"اختياري"})})]}),t.jsx(La,{children:t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tf,{checked:f.overwriteExisting,onChange:R=>v({...f,overwriteExisting:R})}),t.jsxs("div",{children:[t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"استبدال الأسعار الموجودة"}),t.jsx("p",{className:"text-xs text-gray-500",children:"سيتم استبدال أي تسعير موجود في هذه الفترة"})]})]})}),t.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-3",children:t.jsxs("div",{className:"flex items-start gap-2",children:[t.jsx(Sf,{className:"h-4 w-4 text-blue-600 mt-0.5"}),t.jsx("div",{className:"text-sm text-blue-800",children:t.jsx("p",{children:"سيتم تطبيق هذا التسعير على جميع الأيام المحددة"})})]})}),t.jsxs("div",{className:"flex items-center justify-end gap-3 pt-4 border-t",children:[t.jsx(ot,{type:"button",variant:"outline",onClick:o,disabled:w,children:"إلغاء"}),t.jsx(ot,{type:"submit",variant:"primary",loading:w,children:"تحديث التسعير"})]})]})})},yI=({unitId:e,onClose:n,onSuccess:a})=>{const{seasonalPricing:r,statistics:o,isLoading:d}=gI(e),{applySeasonalPricing:h}=Rf(e,0,0),[g,p]=b.useState("templates"),[f,v]=b.useState([]),[w,S]=b.useState({name:"",type:"High",price:0,percentageChange:0,priority:1}),T=[{value:"Low",label:"موسم منخفض",color:"bg-blue-100 text-blue-800"},{value:"Regular",label:"موسم عادي",color:"bg-gray-100 text-gray-800"},{value:"High",label:"موسم مرتفع",color:"bg-orange-100 text-orange-800"},{value:"Peak",label:"موسم ذروة",color:"bg-red-100 text-red-800"}],C=[{id:"summer",name:"الصيف",seasons:[{name:"بداية الصيف",type:"High",startDate:"2024-06-01",endDate:"2024-06-30",percentageChange:20},{name:"ذروة الصيف",type:"Peak",startDate:"2024-07-01",endDate:"2024-08-15",percentageChange:40},{name:"نهاية الصيف",type:"High",startDate:"2024-08-16",endDate:"2024-08-31",percentageChange:15}]},{id:"winter",name:"الشتاء",seasons:[{name:"بداية الشتاء",type:"Low",startDate:"2024-12-01",endDate:"2024-12-20",percentageChange:-20},{name:"عطلة رأس السنة",type:"Peak",startDate:"2024-12-21",endDate:"2025-01-05",percentageChange:50},{name:"منتصف الشتاء",type:"Regular",startDate:"2025-01-06",endDate:"2025-02-28",percentageChange:0}]}],_=async k=>{try{await h.mutateAsync({unitId:e,seasons:k.seasons,currency:"YER"}),a()}catch(R){console.error("Error applying template:",R)}};return d?t.jsx(Wh,{isOpen:!0,onClose:n,title:"التسعير الموسمي",children:t.jsx("div",{className:"flex items-center justify-center h-64",children:t.jsx(Mf,{size:"lg"})})}):t.jsxs(Wh,{isOpen:!0,onClose:n,title:"التسعير الموسمي",size:"lg",children:[t.jsxs(wf,{value:g,onValueChange:p,children:[t.jsxs(Nf,{className:"grid grid-cols-3 w-full",children:[t.jsx(as,{value:"templates",children:"قوالب جاهزة"}),t.jsx(as,{value:"current",children:"المواسم الحالية"}),t.jsx(as,{value:"custom",children:"إنشاء موسم"})]}),t.jsx(ss,{value:"templates",className:"space-y-4",children:t.jsx("div",{className:"grid gap-4",children:C.map(k=>t.jsxs(Ia,{className:"p-4",children:[t.jsxs("div",{className:"flex items-start justify-between mb-3",children:[t.jsx("h3",{className:"font-semibold text-lg",children:k.name}),t.jsx(ot,{size:"sm",variant:"primary",onClick:()=>_(k),children:"تطبيق القالب"})]}),t.jsx("div",{className:"space-y-2",children:k.seasons.map((R,O)=>t.jsxs("div",{className:"flex items-center justify-between text-sm",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("span",{className:`px-2 py-1 rounded text-xs ${T.find(P=>P.value===R.type)?.color}`,children:R.type}),t.jsx("span",{children:R.name})]}),t.jsxs("div",{className:"flex items-center gap-4 text-gray-600",children:[t.jsxs("span",{children:[ga(new Date(R.startDate),"dd/MM")," - ",ga(new Date(R.endDate),"dd/MM")]}),t.jsxs("span",{className:R.percentageChange>0?"text-green-600":"text-red-600",children:[R.percentageChange>0?"+":"",R.percentageChange,"%"]})]})]},O))})]},k.id))})}),t.jsxs(ss,{value:"current",className:"space-y-4",children:[o&&t.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-4",children:[t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"إجمالي المواسم"}),t.jsx("p",{className:"text-lg font-semibold",children:o.totalSeasons})]}),t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"مواسم نشطة"}),t.jsx("p",{className:"text-lg font-semibold text-green-600",children:o.activeSeasons})]}),t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"متوسط السعر"}),t.jsx("p",{className:"text-lg font-semibold",children:o.averageSeasonalPrice})]}),t.jsxs(Ia,{className:"p-3",children:[t.jsx("p",{className:"text-xs text-gray-600",children:"الأيام المغطاة"}),t.jsx("p",{className:"text-lg font-semibold",children:o.totalDaysCovered})]})]}),t.jsx("div",{className:"space-y-3",children:r.map(k=>t.jsx(Ia,{className:"p-4",children:t.jsxs("div",{className:"flex items-center justify-between",children:[t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx("div",{className:`px-3 py-1 rounded ${T.find(R=>R.value===k.type)?.color}`,children:k.type}),t.jsxs("div",{children:[t.jsx("h4",{className:"font-medium",children:k.name}),t.jsxs("p",{className:"text-sm text-gray-600",children:[ga(new Date(k.startDate),"dd/MM/yyyy")," -",ga(new Date(k.endDate),"dd/MM/yyyy")]})]})]}),t.jsxs("div",{className:"flex items-center gap-4",children:[t.jsxs("div",{className:"text-right",children:[t.jsxs("p",{className:"font-semibold",children:[k.price," ",k.currency]}),k.percentageChange&&t.jsxs("p",{className:`text-sm ${k.percentageChange>0?"text-green-600":"text-red-600"}`,children:[k.percentageChange>0?"+":"",k.percentageChange,"%"]})]}),t.jsxs("div",{className:"flex gap-1",children:[t.jsx(ot,{variant:"ghost",size:"sm",icon:t.jsx(ty,{className:"h-4 w-4"})}),t.jsx(ot,{variant:"ghost",size:"sm",icon:t.jsx(yz,{className:"h-4 w-4"})})]})]})]})},k.id))})]}),t.jsx(ss,{value:"custom",className:"space-y-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"اسم الموسم"}),t.jsx(ia,{value:w.name,onChange:k=>S({...w,name:k.target.value}),placeholder:"مثال: موسم الصيف"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع الموسم"}),t.jsx("div",{className:"grid grid-cols-4 gap-2",children:T.map(k=>t.jsx(ot,{variant:w.type===k.value?"primary":"outline",size:"sm",onClick:()=>S({...w,type:k.value}),className:"text-xs",children:k.label},k.value))})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"فترة الموسم"}),t.jsx(sy,{startDate:w.startDate||"",endDate:w.endDate||"",onChange:(k,R)=>S({...w,startDate:k,endDate:R})})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر"}),t.jsx(ia,{type:"number",value:w.price,onChange:k=>S({...w,price:parseFloat(k.target.value)}),placeholder:"0"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نسبة التغيير"}),t.jsx(ia,{type:"number",value:w.percentageChange,onChange:k=>S({...w,percentageChange:parseFloat(k.target.value)}),placeholder:"0"})]})]}),t.jsx(ot,{variant:"primary",className:"w-full",icon:t.jsx(dz,{className:"h-4 w-4"}),children:"إضافة الموسم"})]})})]}),t.jsx("div",{className:"flex items-center justify-end gap-3 mt-6 pt-4 border-t",children:t.jsx(ot,{variant:"outline",onClick:n,children:"إغلاق"})})]})},bI=({unitId:e,selectedDates:n,basePrice:a,currency:r,onClose:o,onSuccess:d})=>{const{bulkUpdatePricing:h,copyPricing:g}=Rf(e,0,0),[p,f]=b.useState("bulk-update"),[v,w]=b.useState("Custom"),[S,T]=b.useState(a),[C,_]=b.useState(0),[k,R]=b.useState("fixed"),[O,P]=b.useState(""),[U,A]=b.useState(!0),[$,E]=b.useState({start:"",end:""}),[I,Z]=b.useState({start:""}),[F,Y]=b.useState(1),[G,V]=b.useState({type:"none",value:0}),[H,Q]=b.useState("weekday"),[K,oe]=b.useState({monday:0,tuesday:0,wednesday:0,thursday:0,friday:10,saturday:20,sunday:20}),[W,X]=b.useState(a),[z,J]=b.useState({demandFactor:1,seasonFactor:1,competitionFactor:1,minPrice:a*.7,maxPrice:a*1.5}),se=async()=>{const ye=n.map(Ce=>({startDate:Ce,endDate:Ce,priceType:v,price:k==="fixed"?S:0,currency:r,tier:"1",percentageChange:k==="percentage"?C:void 0,description:O,overwriteExisting:U}));try{await h.mutateAsync({unitId:e,periods:ye,overwriteExisting:U}),d()}catch(Ce){console.error("Bulk update failed:",Ce)}},ae=async()=>{if(!$.start||!$.end||!I.start){Mt.error("يرجى تحديد فترة المصدر والهدف");return}try{await g.mutateAsync({unitId:e,sourceStartDate:$.start,sourceEndDate:$.end,targetStartDate:I.start,repeatCount:F,adjustmentType:G.type,adjustmentValue:G.value,overwriteExisting:!0}),d()}catch(ye){console.error("Copy failed:",ye)}},ee=async()=>{const ye=[];H==="weekday"&&n.forEach(Ce=>{const de=new Date(Ce).getDay(),_e=["sunday","monday","tuesday","wednesday","thursday","friday","saturday"][de],Ie=K[_e];ye.push({startDate:Ce,endDate:Ce,priceType:rw(new Date(Ce))?"Weekend":"Custom",price:0,currency:r,tier:"1",percentageChange:Ie,description:`تسعير ${rw(new Date(Ce))?"نهاية الأسبوع":"يوم عمل"}`,overwriteExisting:!0})});try{await h.mutateAsync({unitId:e,periods:ye,overwriteExisting:!0}),d()}catch(Ce){console.error("Dynamic pricing failed:",Ce)}},re=()=>{const ye=W*z.demandFactor*z.seasonFactor*z.competitionFactor;return Math.min(Math.max(ye,z.minPrice),z.maxPrice)},me=async()=>{const ye=re(),Ce=n.map(de=>({startDate:de,endDate:de,priceType:"Custom",price:ye,currency:r,tier:"1",minPrice:z.minPrice,maxPrice:z.maxPrice,description:"تسعير محسوب بالمعادلة",overwriteExisting:!0}));try{await h.mutateAsync({unitId:e,periods:Ce,overwriteExisting:!0}),d()}catch(de){console.error("Formula pricing failed:",de)}};return t.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:t.jsxs(Ia,{className:"w-full max-w-3xl max-h-[90vh] overflow-hidden",children:[t.jsxs("div",{className:"flex items-center justify-between p-4 border-b",children:[t.jsx("h2",{className:"text-lg font-semibold",children:"عمليات التسعير المتقدمة"}),t.jsx(ot,{variant:"ghost",size:"sm",onClick:o,icon:t.jsx(Cf,{className:"h-4 w-4"})})]}),t.jsxs("div",{className:"p-4 overflow-y-auto max-h-[calc(90vh-120px)]",children:[t.jsxs("div",{className:"bg-blue-50 rounded-lg p-3 mb-4",children:[t.jsxs("p",{className:"text-sm text-blue-800",children:["سيتم تطبيق التحديث على ",n.length," يوم محدد"]}),t.jsxs("p",{className:"text-xs text-blue-600 mt-1",children:["السعر الأساسي الحالي: ",a," ",r]})]}),t.jsxs(wf,{value:p,onValueChange:f,children:[t.jsxs(Nf,{className:"grid grid-cols-4 w-full",children:[t.jsx(as,{value:"bulk-update",children:"تحديث جماعي"}),t.jsx(as,{value:"copy",children:"نسخ"}),t.jsx(as,{value:"dynamic",children:"ديناميكي"}),t.jsx(as,{value:"formula",children:"معادلة"})]}),t.jsx(ss,{value:"bulk-update",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"نوع التسعير"}),t.jsxs(Ss,{value:v,onChange:w,children:[t.jsx("option",{value:"Custom",children:"مخصص"}),t.jsx("option",{value:"Weekend",children:"نهاية الأسبوع"}),t.jsx("option",{value:"Holiday",children:"عطلة رسمية"}),t.jsx("option",{value:"Seasonal",children:"موسمي"}),t.jsx("option",{value:"Special",children:"عرض خاص"})]})]}),t.jsxs("div",{className:"flex gap-2",children:[t.jsx(ot,{type:"button",variant:k==="fixed"?"primary":"outline",onClick:()=>R("fixed"),className:"flex-1",icon:t.jsx(Du,{className:"h-4 w-4"}),children:"سعر ثابت"}),t.jsx(ot,{type:"button",variant:k==="percentage"?"primary":"outline",onClick:()=>R("percentage"),className:"flex-1",icon:t.jsx($_,{className:"h-4 w-4"}),children:"نسبة مئوية"})]}),k==="fixed"?t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر"}),t.jsxs("div",{className:"relative",children:[t.jsx(ia,{type:"number",value:S,onChange:ye=>T(parseFloat(ye.target.value)),min:"0",step:"100",className:"pl-12"}),t.jsx("span",{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-gray-500",children:r})]})]}):t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["نسبة التغيير: ",C>0?"+":"",C,"%"]}),t.jsx(Jo,{value:[C],onValueChange:ye=>_(ye[0]),min:-50,max:100,step:5,className:"w-full"}),t.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mt-1",children:[t.jsx("span",{children:"-50%"}),t.jsx("span",{children:"0%"}),t.jsx("span",{children:"+100%"})]}),t.jsx("div",{className:"bg-blue-50 rounded-lg p-3 mt-3",children:t.jsxs("p",{className:"text-sm text-blue-800",children:["السعر الجديد: ",(a+a*C/100).toFixed(0)," ",r]})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"وصف التحديث"}),t.jsx(Ou,{value:O,onChange:ye=>P(ye.target.value),placeholder:"أضف وصف للتسعير...",rows:2})]}),t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsx(Tf,{checked:U,onChange:A}),t.jsx("label",{className:"text-sm text-gray-700",children:"استبدال الأسعار الموجودة"})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:se,loading:h.isPending,children:"تطبيق التحديث"})]})}),t.jsx(ss,{value:"copy",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الفترة المصدر"}),t.jsx(sy,{startDate:$.start,endDate:$.end,onChange:(ye,Ce)=>E({start:ye,end:Ce})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تاريخ البداية للنسخ"}),t.jsx(ia,{type:"date",value:I.start,onChange:ye=>Z({start:ye.target.value})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"عدد مرات التكرار"}),t.jsx(ia,{type:"number",min:"1",max:"12",value:F,onChange:ye=>Y(parseInt(ye.target.value))}),t.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["سيتم نسخ الفترة ",F," مرة متتالية"]})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"تعديل الأسعار المنسوخة"}),t.jsxs(Ss,{value:G.type,onChange:ye=>V({...G,type:ye}),children:[t.jsx("option",{value:"none",children:"بدون تعديل"}),t.jsx("option",{value:"percentage",children:"نسبة مئوية"}),t.jsx("option",{value:"fixed",children:"مبلغ ثابت"})]}),G.type!=="none"&&t.jsx("div",{className:"mt-2",children:t.jsx(ia,{type:"number",value:G.value,onChange:ye=>V({...G,value:parseFloat(ye.target.value)}),placeholder:G.type==="percentage"?"النسبة المئوية":"المبلغ"})})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:ae,loading:g.isPending,icon:t.jsx(ey,{className:"h-4 w-4"}),children:"نسخ التسعير"})]})}),t.jsx(ss,{value:"dynamic",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"استراتيجية التسعير"}),t.jsxs(Ss,{value:H,onChange:ye=>Q(ye),children:[t.jsx("option",{value:"weekday",children:"حسب أيام الأسبوع"}),t.jsx("option",{value:"occupancy",children:"حسب معدل الإشغال"}),t.jsx("option",{value:"season",children:"حسب الموسم"})]})]}),H==="weekday"&&t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"نسبة التغيير لكل يوم"}),t.jsx("div",{className:"space-y-2",children:Object.entries(K).map(([ye,Ce])=>t.jsxs("div",{className:"flex items-center gap-3",children:[t.jsxs("span",{className:"w-24 text-sm capitalize",children:[ye==="monday"&&"الإثنين",ye==="tuesday"&&"الثلاثاء",ye==="wednesday"&&"الأربعاء",ye==="thursday"&&"الخميس",ye==="friday"&&"الجمعة",ye==="saturday"&&"السبت",ye==="sunday"&&"الأحد"]}),t.jsx("div",{className:"flex-1",children:t.jsx(Jo,{value:[Ce],onValueChange:de=>oe({...K,[ye]:de[0]}),min:-30,max:50,step:5})}),t.jsxs("span",{className:`text-sm w-12 text-left ${Ce>0?"text-green-600":Ce<0?"text-red-600":""}`,children:[Ce>0?"+":"",Ce,"%"]})]},ye))})]}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:ee,icon:t.jsx(fu,{className:"h-4 w-4"}),children:"تطبيق التسعير الديناميكي"})]})}),t.jsx(ss,{value:"formula",className:"space-y-4 mt-4",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[t.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"المعادلة:"}),t.jsx("code",{className:"text-xs bg-white p-2 rounded block",children:"السعر = السعر الأساسي × معامل الطلب × معامل الموسم × معامل المنافسة"})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"السعر الأساسي"}),t.jsx(ia,{type:"number",value:W,onChange:ye=>X(parseFloat(ye.target.value)),min:"0"})]}),t.jsxs("div",{className:"space-y-3",children:[t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["معامل الطلب: ",z.demandFactor.toFixed(1)]}),t.jsx(Jo,{value:[z.demandFactor],onValueChange:ye=>J({...z,demandFactor:ye[0]}),min:.5,max:2,step:.1})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["معامل الموسم: ",z.seasonFactor.toFixed(1)]}),t.jsx(Jo,{value:[z.seasonFactor],onValueChange:ye=>J({...z,seasonFactor:ye[0]}),min:.5,max:2,step:.1})]}),t.jsxs("div",{children:[t.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["معامل المنافسة: ",z.competitionFactor.toFixed(1)]}),t.jsx(Jo,{value:[z.competitionFactor],onValueChange:ye=>J({...z,competitionFactor:ye[0]}),min:.5,max:2,step:.1})]})]}),t.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأدنى"}),t.jsx(ia,{type:"number",value:z.minPrice,onChange:ye=>J({...z,minPrice:parseFloat(ye.target.value)})})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"الحد الأقصى"}),t.jsx(ia,{type:"number",value:z.maxPrice,onChange:ye=>J({...z,maxPrice:parseFloat(ye.target.value)})})]})]}),t.jsx("div",{className:"bg-green-50 rounded-lg p-4",children:t.jsxs("p",{className:"text-sm font-medium text-green-800",children:["السعر المحسوب: ",re().toFixed(0)," ",r]})}),t.jsx(ot,{variant:"primary",className:"w-full",onClick:me,children:"تطبيق المعادلة"})]})})]})]}),t.jsx("div",{className:"flex items-center justify-end gap-3 p-4 border-t",children:t.jsx(ot,{variant:"outline",onClick:o,children:"إلغاء"})})]})})},vI=({unitId:e,unitName:n,initialYear:a=new Date().getFullYear(),initialMonth:r=new Date().getMonth()+1})=>{const[o,d]=b.useState(a),[h,g]=b.useState(r),[p,f]=b.useState([]),[v,w]=b.useState(!1),[S,T]=b.useState(!1),[C,_]=b.useState(!1),[k,R]=b.useState("month"),{data:O,isLoading:P,error:U,applyPercentageChange:A}=Rf(e,o,h),$=b.useCallback((G,V)=>{d(G),g(V),f([])},[]),E=b.useCallback(G=>{f(V=>V.includes(G)?V.filter(H=>H!==G):[...V,G])},[]),I=b.useCallback((G,V)=>{const H=new Date(G),Q=new Date(V),K=[];for(let oe=new Date(H);oe<=Q;oe.setDate(oe.getDate()+1))K.push(ga(new Date(oe),"yyyy-MM-dd"));f(K),_(!0)},[]),Z=b.useCallback(()=>{p.length>0&&(A(p,10),f([]))},[p,A]),F=b.useCallback(()=>{p.length>0&&(A(p,-10),f([]))},[p,A]),Y=b.useCallback(G=>{const V=O?.calendar[G.dateString],H=V?.price||O?.basePrice||0,Q=V?.priceType||"Base",K=V?.percentageChange,oe=p.includes(G.dateString),W={Base:"bg-gray-100",Custom:"bg-blue-100",Weekend:"bg-purple-100",Holiday:"bg-red-100",Seasonal:"bg-green-100",Special:"bg-yellow-100"},X=z=>z>=1e6?`${(z/1e6).toFixed(1)}M`:z>=1e3?`${(z/1e3).toFixed(0)}K`:z.toString();return t.jsxs("div",{className:Ke("flex flex-col h-full p-1 rounded transition-all",G.isCurrentMonth&&W[Q],oe&&"ring-2 ring-blue-500",G.isPast&&"opacity-60"),children:[t.jsxs("div",{className:"flex items-center justify-between mb-1",children:[t.jsx("span",{className:Ke("text-xs font-medium",G.isToday&&"text-blue-600"),children:ga(G.date,"d")}),K&&t.jsxs("span",{className:Ke("text-xs font-medium",K>0?"text-green-600":"text-red-600"),children:[K>0?"+":"",K,"%"]})]}),t.jsxs("div",{className:"flex items-center gap-1 mt-auto",children:[t.jsx(Du,{className:"h-3 w-3 text-gray-500"}),t.jsx("span",{className:"text-sm font-semibold text-gray-900",children:X(H)})]}),Q!=="Base"&&t.jsx("div",{className:"mt-1",children:t.jsx("span",{className:"text-xs text-gray-600",children:Q})})]})},[O,p]);return P?t.jsx("div",{className:"flex items-center justify-center h-96",children:t.jsx(Mf,{size:"lg"})}):U?t.jsx(ry,{variant:"error",children:"حدث خطأ في تحميل بيانات التسعير"}):t.jsxs("div",{className:"space-y-4",children:[t.jsx(q_,{year:o,month:h,onMonthChange:$,onViewChange:R,currentView:k,title:`تسعير ${n}`,onSettings:()=>T(!0),actions:t.jsx(fI,{selectedCount:p.length,onIncrease:Z,onDecrease:F,onUpdate:()=>w(!0),onBulkOperations:()=>_(!0)})}),O?.stats&&t.jsx(hI,{stats:O.stats,currency:O.currency}),t.jsx(mI,{}),k==="month"&&t.jsx(P_,{year:o,month:h,data:O?.calendar,selectedDates:p,onDayClick:E,onRangeSelect:I,renderDay:Y,multiSelect:!0}),v&&p.length>0&&t.jsx(xI,{unitId:e,selectedDates:p,basePrice:O?.basePrice||0,currency:O?.currency||"YER",onClose:()=>w(!1),onSuccess:()=>{w(!1),f([])}}),S&&t.jsx(yI,{unitId:e,onClose:()=>T(!1),onSuccess:()=>T(!1)}),C&&t.jsx(bI,{unitId:e,selectedDates:p,basePrice:O?.basePrice||0,currency:O?.currency||"YER",onClose:()=>_(!1),onSuccess:()=>{_(!1),f([])}})]})},jI=({children:e,separator:n,className:a=""})=>{const r=We.Children.toArray(e);return t.jsx("nav",{"aria-label":"Breadcrumb",className:Ke("py-2",a),children:t.jsx("ol",{className:"flex items-center flex-wrap gap-2 text-sm",children:r.map((o,d)=>t.jsxs(We.Fragment,{children:[o,d<r.length-1&&t.jsx("span",{className:"text-gray-400 mx-1",children:n||t.jsx(z_,{className:"h-4 w-4"})})]},d))})})},wI=({href:e,active:n,icon:a,children:r,onClick:o,className:d=""})=>{const h=t.jsxs(t.Fragment,{children:[a&&t.jsx("span",{className:"flex-shrink-0",children:a}),t.jsx("span",{children:r})]}),g=Ke("flex items-center gap-1.5 transition-colors duration-200","hover:text-blue-600 focus:outline-none focus:text-blue-600",n&&"text-gray-900 font-semibold pointer-events-none",!n&&"text-gray-600",d);return t.jsx("li",{className:"flex items-center",children:e&&!n?t.jsx("a",{href:e,onClick:o,className:g,children:h}):t.jsx("span",{className:g,children:h})})},Fd=Object.assign(jI,{Item:wI}),NI=()=>{const{unitId:e}=Gh(),n=is(),[a,r]=b.useState("availability"),{data:o,isLoading:d,error:h}=It({queryKey:["unit-details",e],queryFn:async()=>(await we.get(`/api/admin/units/${e}`)).data.data,enabled:!!e});return d?t.jsx("div",{className:"flex items-center justify-center h-screen",children:t.jsx(Mf,{size:"lg"})}):h||!o?t.jsx("div",{className:"p-6",children:t.jsx(ry,{variant:"error",children:"حدث خطأ في تحميل بيانات الوحدة"})}):t.jsxs("div",{className:"min-h-screen bg-gray-50",children:[t.jsx("div",{className:"bg-white border-b",children:t.jsx("div",{className:"container mx-auto px-4 py-4",children:t.jsxs(Fd,{children:[t.jsx(Fd.Item,{href:"/dashboard",icon:t.jsx(sz,{className:"h-4 w-4"}),children:"الرئيسية"}),t.jsx(Fd.Item,{href:"/properties",icon:t.jsx(LL,{className:"h-4 w-4"}),children:"العقارات"}),t.jsx(Fd.Item,{href:`/properties/${o.propertyId}`,children:o.propertyName}),t.jsxs(Fd.Item,{active:!0,children:["إدارة ",o.name]})]})})}),t.jsxs("div",{className:"container mx-auto px-4 py-6",children:[t.jsx(Ia,{className:"mb-6",children:t.jsx("div",{className:"p-6",children:t.jsxs("div",{className:"flex items-start justify-between",children:[t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:o.name}),t.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-600",children:[t.jsx("span",{className:"bg-gray-100 px-3 py-1 rounded-full",children:o.type}),t.jsxs("span",{children:["السعة: ",o.maxAdults," بالغ، ",o.maxChildren," طفل"]}),t.jsxs("span",{children:["السعر الأساسي: ",o.basePrice," ",o.currency]})]})]}),t.jsx(ot,{variant:"outline",size:"sm",onClick:()=>n(`/units/${e}/settings`),icon:t.jsx(F_,{className:"h-4 w-4"}),children:"الإعدادات"})]})})}),t.jsx(Ia,{children:t.jsxs(wf,{value:a,onValueChange:r,children:[t.jsx("div",{className:"border-b",children:t.jsxs(Nf,{className:"w-full justify-start p-0",children:[t.jsxs(as,{value:"availability",className:"flex items-center gap-2 px-6 py-4",children:[t.jsx(IL,{className:"h-4 w-4"}),"إدارة الإتاحة"]}),t.jsxs(as,{value:"pricing",className:"flex items-center gap-2 px-6 py-4",children:[t.jsx(Du,{className:"h-4 w-4"}),"إدارة التسعير"]})]})}),t.jsxs("div",{className:"p-6",children:[t.jsx(ss,{value:"availability",className:"mt-0",children:t.jsx(uI,{unitId:e,unitName:o.name})}),t.jsx(ss,{value:"pricing",className:"mt-0",children:t.jsx(vI,{unitId:e,unitName:o.name})})]})]})})]})]})};function _I(e){return Object.keys(e).length===0}function iy(e=null){const n=b.useContext(wc);return!n||_I(n)?e:n}const SI=k0();function ly(e=SI){return iy(e)}function ix(e){const n=i2(e);return e!==n&&n.styles?(n.styles.match(/^@layer\s+[^{]*$/)||(n.styles=`@layer global{${n.styles}}`),n):e}function CI({styles:e,themeId:n,defaultTheme:a={}}){const r=ly(a),o=n&&r[n]||r;let d=typeof e=="function"?e(o):e;return o.modularCssLayers&&(Array.isArray(d)?d=d.map(h=>ix(typeof h=="function"?h(o):h)):d=ix(d)),t.jsx(s2,{styles:d})}const kI=["className","component"];function TI(e={}){const{themeId:n,defaultTheme:a,defaultClassName:r="MuiBox-root",generateClassName:o}=e,d=r2("div",{shouldForwardProp:g=>g!=="theme"&&g!=="sx"&&g!=="as"})(ku);return b.forwardRef(function(p,f){const v=ly(a),w=T0(p),{className:S,component:T="div"}=w,C=wn(w,kI);return t.jsx(d,ze({as:T,ref:f,className:Pn(S,o?o(r):r),theme:n&&v[n]||v},C))})}function EI(e){const{theme:n,name:a,props:r}=e;return!n||!n.components||!n.components[a]||!n.components[a].defaultProps?r:nu(n.components[a].defaultProps,r)}function MI({props:e,name:n,defaultTheme:a,themeId:r}){let o=ly(a);return o=o[r]||o,EI({theme:o,name:n,props:e})}const K_=b.createContext(null);function G_(){return b.useContext(K_)}const RI=typeof Symbol=="function"&&Symbol.for,AI=RI?Symbol.for("mui.nested"):"__THEME_NESTED__";function DI(e,n){return typeof n=="function"?n(e):ze({},e,n)}function OI(e){const{children:n,theme:a}=e,r=G_(),o=b.useMemo(()=>{const d=r===null?a:DI(r,a);return d!=null&&(d[AI]=r!==null),d},[a,r]);return t.jsx(K_.Provider,{value:o,children:n})}const PI=["value"],Q_=b.createContext();function LI(e){let{value:n}=e,a=wn(e,PI);return t.jsx(Q_.Provider,ze({value:n??!0},a))}const zI=()=>{const e=b.useContext(Q_);return e??!1};function II(e){const n=iy(),a=N3()||"",{modularCssLayers:r}=e;let o="mui.global, mui.components, mui.theme, mui.custom, mui.sx";return!r||n!==null?o="":typeof r=="string"?o=r.replace(/mui(?!\.)/g,o):o=`@layer ${o};`,IN(()=>{const d=document.querySelector("head");if(!d)return;const h=d.firstChild;if(o){var g;if(h&&(g=h.hasAttribute)!=null&&g.call(h,"data-mui-layer-order")&&h.getAttribute("data-mui-layer-order")===a)return;const f=document.createElement("style");f.setAttribute("data-mui-layer-order",a),f.textContent=o,d.prepend(f)}else{var p;(p=d.querySelector(`style[data-mui-layer-order="${a}"]`))==null||p.remove()}},[o,a]),o?t.jsx(CI,{styles:o}):null}const fw={};function pw(e,n,a,r=!1){return b.useMemo(()=>{const o=e&&n[e]||n;if(typeof a=="function"){const d=a(o),h=e?ze({},n,{[e]:d}):d;return r?()=>h:h}return e?ze({},n,{[e]:a}):ze({},n,a)},[e,n,a,r])}function BI(e){const{children:n,theme:a,themeId:r}=e,o=iy(fw),d=G_()||fw,h=pw(r,o,a),g=pw(r,d,a,!0),p=h.direction==="rtl",f=II(h);return t.jsx(OI,{theme:g,children:t.jsx(wc.Provider,{value:h,children:t.jsx(LI,{value:p,children:t.jsxs($3,{value:h?.components,children:[f,n]})})})})}function $I({props:e,name:n}){return MI({props:e,name:n,defaultTheme:m2,themeId:lu})}const FI=["theme"];function UI(e){let{theme:n}=e,a=wn(e,FI);const r=n[lu];let o=r||n;return typeof n!="function"&&(r&&!r.vars?o=ze({},r,{vars:null}):n&&!n.vars&&(o=ze({},n,{vars:null}))),t.jsx(BI,ze({},a,{themeId:r?lu:void 0,theme:o}))}function Gx(e,n){return Gx=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(a,r){return a.__proto__=r,a},Gx(e,n)}function HI(e,n){e.prototype=Object.create(n.prototype),e.prototype.constructor=e,Gx(e,n)}const gw=We.createContext(null);function qI(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function oy(e,n){var a=function(d){return n&&b.isValidElement(d)?n(d):d},r=Object.create(null);return e&&b.Children.map(e,function(o){return o}).forEach(function(o){r[o.key]=a(o)}),r}function YI(e,n){e=e||{},n=n||{};function a(v){return v in n?n[v]:e[v]}var r=Object.create(null),o=[];for(var d in e)d in n?o.length&&(r[d]=o,o=[]):o.push(d);var h,g={};for(var p in n){if(r[p])for(h=0;h<r[p].length;h++){var f=r[p][h];g[r[p][h]]=a(f)}g[p]=a(p)}for(h=0;h<o.length;h++)g[o[h]]=a(o[h]);return g}function Bl(e,n,a){return a[n]!=null?a[n]:e.props[n]}function VI(e,n){return oy(e.children,function(a){return b.cloneElement(a,{onExited:n.bind(null,a),in:!0,appear:Bl(a,"appear",e),enter:Bl(a,"enter",e),exit:Bl(a,"exit",e)})})}function ZI(e,n,a){var r=oy(e.children),o=YI(n,r);return Object.keys(o).forEach(function(d){var h=o[d];if(b.isValidElement(h)){var g=d in n,p=d in r,f=n[d],v=b.isValidElement(f)&&!f.props.in;p&&(!g||v)?o[d]=b.cloneElement(h,{onExited:a.bind(null,h),in:!0,exit:Bl(h,"exit",e),enter:Bl(h,"enter",e)}):!p&&g&&!v?o[d]=b.cloneElement(h,{in:!1}):p&&g&&b.isValidElement(f)&&(o[d]=b.cloneElement(h,{onExited:a.bind(null,h),in:f.props.in,exit:Bl(h,"exit",e),enter:Bl(h,"enter",e)}))}}),o}var WI=Object.values||function(e){return Object.keys(e).map(function(n){return e[n]})},KI={component:"div",childFactory:function(n){return n}},cy=function(e){HI(n,e);function n(r,o){var d;d=e.call(this,r,o)||this;var h=d.handleExited.bind(qI(d));return d.state={contextValue:{isMounting:!0},handleExited:h,firstRender:!0},d}var a=n.prototype;return a.componentDidMount=function(){this.mounted=!0,this.setState({contextValue:{isMounting:!1}})},a.componentWillUnmount=function(){this.mounted=!1},n.getDerivedStateFromProps=function(o,d){var h=d.children,g=d.handleExited,p=d.firstRender;return{children:p?VI(o,g):ZI(o,h,g),firstRender:!1}},a.handleExited=function(o,d){var h=oy(this.props.children);o.key in h||(o.props.onExited&&o.props.onExited(d),this.mounted&&this.setState(function(g){var p=ze({},g.children);return delete p[o.key],{children:p}}))},a.render=function(){var o=this.props,d=o.component,h=o.childFactory,g=wn(o,["component","childFactory"]),p=this.state.contextValue,f=WI(this.state.children).map(h);return delete g.appear,delete g.enter,delete g.exit,d===null?We.createElement(gw.Provider,{value:p},f):We.createElement(gw.Provider,{value:p},We.createElement(d,g,f))},n}(We.Component);cy.propTypes={};cy.defaultProps=KI;function GI(e){const{className:n,classes:a,pulsate:r=!1,rippleX:o,rippleY:d,rippleSize:h,in:g,onExited:p,timeout:f}=e,[v,w]=b.useState(!1),S=Pn(n,a.ripple,a.rippleVisible,r&&a.ripplePulsate),T={width:h,height:h,top:-(h/2)+d,left:-(h/2)+o},C=Pn(a.child,v&&a.childLeaving,r&&a.childPulsate);return!g&&!v&&w(!0),b.useEffect(()=>{if(!g&&p!=null){const _=setTimeout(p,f);return()=>{clearTimeout(_)}}},[p,g,f]),t.jsx("span",{className:S,style:T,children:t.jsx("span",{className:C})})}const Ns=Ys("MuiTouchRipple",["root","ripple","rippleVisible","ripplePulsate","child","childLeaving","childPulsate"]),QI=["center","classes","className"];let Af=e=>e,xw,yw,bw,vw;const Qx=550,XI=80,JI=Nc(xw||(xw=Af`
  0% {
    transform: scale(0);
    opacity: 0.1;
  }

  100% {
    transform: scale(1);
    opacity: 0.3;
  }
`)),e7=Nc(yw||(yw=Af`
  0% {
    opacity: 1;
  }

  100% {
    opacity: 0;
  }
`)),t7=Nc(bw||(bw=Af`
  0% {
    transform: scale(1);
  }

  50% {
    transform: scale(0.92);
  }

  100% {
    transform: scale(1);
  }
`)),n7=Xn("span",{name:"MuiTouchRipple",slot:"Root"})({overflow:"hidden",pointerEvents:"none",position:"absolute",zIndex:0,top:0,right:0,bottom:0,left:0,borderRadius:"inherit"}),a7=Xn(GI,{name:"MuiTouchRipple",slot:"Ripple"})(vw||(vw=Af`
  opacity: 0;
  position: absolute;

  &.${0} {
    opacity: 0.3;
    transform: scale(1);
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  &.${0} {
    animation-duration: ${0}ms;
  }

  & .${0} {
    opacity: 1;
    display: block;
    width: 100%;
    height: 100%;
    border-radius: 50%;
    background-color: currentColor;
  }

  & .${0} {
    opacity: 0;
    animation-name: ${0};
    animation-duration: ${0}ms;
    animation-timing-function: ${0};
  }

  & .${0} {
    position: absolute;
    /* @noflip */
    left: 0px;
    top: 0;
    animation-name: ${0};
    animation-duration: 2500ms;
    animation-timing-function: ${0};
    animation-iteration-count: infinite;
    animation-delay: 200ms;
  }
`),Ns.rippleVisible,JI,Qx,({theme:e})=>e.transitions.easing.easeInOut,Ns.ripplePulsate,({theme:e})=>e.transitions.duration.shorter,Ns.child,Ns.childLeaving,e7,Qx,({theme:e})=>e.transitions.easing.easeInOut,Ns.childPulsate,t7,({theme:e})=>e.transitions.easing.easeInOut),s7=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiTouchRipple"}),{center:o=!1,classes:d={},className:h}=r,g=wn(r,QI),[p,f]=b.useState([]),v=b.useRef(0),w=b.useRef(null);b.useEffect(()=>{w.current&&(w.current(),w.current=null)},[p]);const S=b.useRef(!1),T=k3(),C=b.useRef(null),_=b.useRef(null),k=b.useCallback(U=>{const{pulsate:A,rippleX:$,rippleY:E,rippleSize:I,cb:Z}=U;f(F=>[...F,t.jsx(a7,{classes:{ripple:Pn(d.ripple,Ns.ripple),rippleVisible:Pn(d.rippleVisible,Ns.rippleVisible),ripplePulsate:Pn(d.ripplePulsate,Ns.ripplePulsate),child:Pn(d.child,Ns.child),childLeaving:Pn(d.childLeaving,Ns.childLeaving),childPulsate:Pn(d.childPulsate,Ns.childPulsate)},timeout:Qx,pulsate:A,rippleX:$,rippleY:E,rippleSize:I},v.current)]),v.current+=1,w.current=Z},[d]),R=b.useCallback((U={},A={},$=()=>{})=>{const{pulsate:E=!1,center:I=o||A.pulsate,fakeElement:Z=!1}=A;if(U?.type==="mousedown"&&S.current){S.current=!1;return}U?.type==="touchstart"&&(S.current=!0);const F=Z?null:_.current,Y=F?F.getBoundingClientRect():{width:0,height:0,left:0,top:0};let G,V,H;if(I||U===void 0||U.clientX===0&&U.clientY===0||!U.clientX&&!U.touches)G=Math.round(Y.width/2),V=Math.round(Y.height/2);else{const{clientX:Q,clientY:K}=U.touches&&U.touches.length>0?U.touches[0]:U;G=Math.round(Q-Y.left),V=Math.round(K-Y.top)}if(I)H=Math.sqrt((2*Y.width**2+Y.height**2)/3),H%2===0&&(H+=1);else{const Q=Math.max(Math.abs((F?F.clientWidth:0)-G),G)*2+2,K=Math.max(Math.abs((F?F.clientHeight:0)-V),V)*2+2;H=Math.sqrt(Q**2+K**2)}U!=null&&U.touches?C.current===null&&(C.current=()=>{k({pulsate:E,rippleX:G,rippleY:V,rippleSize:H,cb:$})},T.start(XI,()=>{C.current&&(C.current(),C.current=null)})):k({pulsate:E,rippleX:G,rippleY:V,rippleSize:H,cb:$})},[o,k,T]),O=b.useCallback(()=>{R({},{pulsate:!0})},[R]),P=b.useCallback((U,A)=>{if(T.clear(),U?.type==="touchend"&&C.current){C.current(),C.current=null,T.start(0,()=>{P(U,A)});return}C.current=null,f($=>$.length>0?$.slice(1):$),w.current=A},[T]);return b.useImperativeHandle(a,()=>({pulsate:O,start:R,stop:P}),[O,R,P]),t.jsx(n7,ze({className:Pn(Ns.root,d.root,h),ref:_},g,{children:t.jsx(cy,{component:null,exit:!0,children:p})}))});function r7(e){return xr("MuiButtonBase",e)}const i7=Ys("MuiButtonBase",["root","disabled","focusVisible"]),l7=["action","centerRipple","children","className","component","disabled","disableRipple","disableTouchRipple","focusRipple","focusVisibleClassName","LinkComponent","onBlur","onClick","onContextMenu","onDragLeave","onFocus","onFocusVisible","onKeyDown","onKeyUp","onMouseDown","onMouseLeave","onMouseUp","onTouchEnd","onTouchMove","onTouchStart","tabIndex","TouchRippleProps","touchRippleRef","type"],o7=e=>{const{disabled:n,focusVisible:a,focusVisibleClassName:r,classes:o}=e,h=Jr({root:["root",n&&"disabled",a&&"focusVisible"]},r7,o);return a&&r&&(h.root+=` ${r}`),h},c7=Xn("button",{name:"MuiButtonBase",slot:"Root",overridesResolver:(e,n)=>n.root})({display:"inline-flex",alignItems:"center",justifyContent:"center",position:"relative",boxSizing:"border-box",WebkitTapHighlightColor:"transparent",backgroundColor:"transparent",outline:0,border:0,margin:0,borderRadius:0,padding:0,cursor:"pointer",userSelect:"none",verticalAlign:"middle",MozAppearance:"none",WebkitAppearance:"none",textDecoration:"none",color:"inherit","&::-moz-focus-inner":{borderStyle:"none"},[`&.${i7.disabled}`]:{pointerEvents:"none",cursor:"default"},"@media print":{colorAdjust:"exact"}}),dy=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiButtonBase"}),{action:o,centerRipple:d=!1,children:h,className:g,component:p="button",disabled:f=!1,disableRipple:v=!1,disableTouchRipple:w=!1,focusRipple:S=!1,LinkComponent:T="a",onBlur:C,onClick:_,onContextMenu:k,onDragLeave:R,onFocus:O,onFocusVisible:P,onKeyDown:U,onKeyUp:A,onMouseDown:$,onMouseLeave:E,onMouseUp:I,onTouchEnd:Z,onTouchMove:F,onTouchStart:Y,tabIndex:G=0,TouchRippleProps:V,touchRippleRef:H,type:Q}=r,K=wn(r,l7),oe=b.useRef(null),W=b.useRef(null),X=Y1(W,H),{isFocusVisibleRef:z,onFocus:J,onBlur:se,ref:ae}=P3(),[ee,re]=b.useState(!1);f&&ee&&re(!1),b.useImperativeHandle(o,()=>({focusVisible:()=>{re(!0),oe.current.focus()}}),[]);const[me,ye]=b.useState(!1);b.useEffect(()=>{ye(!0)},[]);const Ce=me&&!v&&!f;b.useEffect(()=>{ee&&S&&!v&&me&&W.current.pulsate()},[v,S,ee,me]);function de(Le,Ct,rn=w){return ah(Fn=>(Ct&&Ct(Fn),!rn&&W.current&&W.current[Le](Fn),!0))}const te=de("start",$),_e=de("stop",k),Ie=de("stop",R),at=de("stop",I),Je=de("stop",Le=>{ee&&Le.preventDefault(),E&&E(Le)}),it=de("start",Y),Te=de("stop",Z),Fe=de("stop",F),wt=de("stop",Le=>{se(Le),z.current===!1&&re(!1),C&&C(Le)},!1),Nt=ah(Le=>{oe.current||(oe.current=Le.currentTarget),J(Le),z.current===!0&&(re(!0),P&&P(Le)),O&&O(Le)}),ut=()=>{const Le=oe.current;return p&&p!=="button"&&!(Le.tagName==="A"&&Le.href)},Ee=b.useRef(!1),Pe=ah(Le=>{S&&!Ee.current&&ee&&W.current&&Le.key===" "&&(Ee.current=!0,W.current.stop(Le,()=>{W.current.start(Le)})),Le.target===Le.currentTarget&&ut()&&Le.key===" "&&Le.preventDefault(),U&&U(Le),Le.target===Le.currentTarget&&ut()&&Le.key==="Enter"&&!f&&(Le.preventDefault(),_&&_(Le))}),qe=ah(Le=>{S&&Le.key===" "&&W.current&&ee&&!Le.defaultPrevented&&(Ee.current=!1,W.current.stop(Le,()=>{W.current.pulsate(Le)})),A&&A(Le),_&&Le.target===Le.currentTarget&&ut()&&Le.key===" "&&!Le.defaultPrevented&&_(Le)});let De=p;De==="button"&&(K.href||K.to)&&(De=T);const He={};De==="button"?(He.type=Q===void 0?"button":Q,He.disabled=f):(!K.href&&!K.to&&(He.role="button"),f&&(He["aria-disabled"]=f));const ct=Y1(a,ae,oe),ce=ze({},r,{centerRipple:d,component:p,disabled:f,disableRipple:v,disableTouchRipple:w,focusRipple:S,tabIndex:G,focusVisible:ee}),Oe=o7(ce);return t.jsxs(c7,ze({as:De,className:Pn(Oe.root,g),ownerState:ce,onBlur:wt,onClick:_,onContextMenu:_e,onFocus:Nt,onKeyDown:Pe,onKeyUp:qe,onMouseDown:te,onMouseLeave:Je,onMouseUp:at,onDragLeave:Ie,onTouchEnd:Te,onTouchMove:Fe,onTouchStart:it,ref:ct,tabIndex:f?-1:G,type:Q},He,K,{children:[h,Ce?t.jsx(s7,ze({ref:X,center:d},V)):null]}))});function d7(e){return xr("MuiTypography",e)}Ys("MuiTypography",["root","h1","h2","h3","h4","h5","h6","subtitle1","subtitle2","body1","body2","inherit","button","caption","overline","alignLeft","alignRight","alignCenter","alignJustify","noWrap","gutterBottom","paragraph"]);const u7=["align","className","component","gutterBottom","noWrap","paragraph","variant","variantMapping"],m7=e=>{const{align:n,gutterBottom:a,noWrap:r,paragraph:o,variant:d,classes:h}=e,g={root:["root",d,e.align!=="inherit"&&`align${St(n)}`,a&&"gutterBottom",r&&"noWrap",o&&"paragraph"]};return Jr(g,d7,h)},h7=Xn("span",{name:"MuiTypography",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.variant&&n[a.variant],a.align!=="inherit"&&n[`align${St(a.align)}`],a.noWrap&&n.noWrap,a.gutterBottom&&n.gutterBottom,a.paragraph&&n.paragraph]}})(({theme:e,ownerState:n})=>ze({margin:0},n.variant==="inherit"&&{font:"inherit"},n.variant!=="inherit"&&e.typography[n.variant],n.align!=="inherit"&&{textAlign:n.align},n.noWrap&&{overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n.gutterBottom&&{marginBottom:"0.35em"},n.paragraph&&{marginBottom:16})),jw={h1:"h1",h2:"h2",h3:"h3",h4:"h4",h5:"h5",h6:"h6",subtitle1:"h6",subtitle2:"h6",body1:"p",body2:"p",inherit:"p"},f7={primary:"primary.main",textPrimary:"text.primary",secondary:"secondary.main",textSecondary:"text.secondary",error:"error.main"},p7=e=>f7[e]||e,On=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiTypography"}),o=p7(r.color),d=T0(ze({},r,{color:o})),{align:h="inherit",className:g,component:p,gutterBottom:f=!1,noWrap:v=!1,paragraph:w=!1,variant:S="body1",variantMapping:T=jw}=d,C=wn(d,u7),_=ze({},d,{align:h,color:o,className:g,component:p,gutterBottom:f,noWrap:v,paragraph:w,variant:S,variantMapping:T}),k=p||(w?"p":T[S]||jw[S])||"span",R=m7(_);return t.jsx(h7,ze({as:k,ref:a,ownerState:_,className:Pn(R.root,g)},C))}),g7=b.createContext(void 0);function x7(){return b.useContext(g7)}const y7=Ys("MuiBox",["root"]),b7=E0(),on=TI({themeId:lu,defaultTheme:b7,defaultClassName:y7.root,generateClassName:$N.generate});function v7(e){return xr("MuiButton",e)}const ph=Ys("MuiButton",["root","text","textInherit","textPrimary","textSecondary","textSuccess","textError","textInfo","textWarning","outlined","outlinedInherit","outlinedPrimary","outlinedSecondary","outlinedSuccess","outlinedError","outlinedInfo","outlinedWarning","contained","containedInherit","containedPrimary","containedSecondary","containedSuccess","containedError","containedInfo","containedWarning","disableElevation","focusVisible","disabled","colorInherit","colorPrimary","colorSecondary","colorSuccess","colorError","colorInfo","colorWarning","textSizeSmall","textSizeMedium","textSizeLarge","outlinedSizeSmall","outlinedSizeMedium","outlinedSizeLarge","containedSizeSmall","containedSizeMedium","containedSizeLarge","sizeMedium","sizeSmall","sizeLarge","fullWidth","startIcon","endIcon","icon","iconSizeSmall","iconSizeMedium","iconSizeLarge"]),j7=b.createContext({}),w7=b.createContext(void 0),N7=["children","color","component","className","disabled","disableElevation","disableFocusRipple","endIcon","focusVisibleClassName","fullWidth","size","startIcon","type","variant"],_7=e=>{const{color:n,disableElevation:a,fullWidth:r,size:o,variant:d,classes:h}=e,g={root:["root",d,`${d}${St(n)}`,`size${St(o)}`,`${d}Size${St(o)}`,`color${St(n)}`,a&&"disableElevation",r&&"fullWidth"],label:["label"],startIcon:["icon","startIcon",`iconSize${St(o)}`],endIcon:["icon","endIcon",`iconSize${St(o)}`]},p=Jr(g,v7,h);return ze({},h,p)},X_=e=>ze({},e.size==="small"&&{"& > *:nth-of-type(1)":{fontSize:18}},e.size==="medium"&&{"& > *:nth-of-type(1)":{fontSize:20}},e.size==="large"&&{"& > *:nth-of-type(1)":{fontSize:22}}),S7=Xn(dy,{shouldForwardProp:e=>xf(e)||e==="classes",name:"MuiButton",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`${a.variant}${St(a.color)}`],n[`size${St(a.size)}`],n[`${a.variant}Size${St(a.size)}`],a.color==="inherit"&&n.colorInherit,a.disableElevation&&n.disableElevation,a.fullWidth&&n.fullWidth]}})(({theme:e,ownerState:n})=>{var a,r;const o=e.palette.mode==="light"?e.palette.grey[300]:e.palette.grey[800],d=e.palette.mode==="light"?e.palette.grey.A100:e.palette.grey[700];return ze({},e.typography.button,{minWidth:64,padding:"6px 16px",borderRadius:(e.vars||e).shape.borderRadius,transition:e.transitions.create(["background-color","box-shadow","border-color","color"],{duration:e.transitions.duration.short}),"&:hover":ze({textDecoration:"none",backgroundColor:e.vars?`rgba(${e.vars.palette.text.primaryChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(e.palette.text.primary,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},n.variant==="text"&&n.color!=="inherit"&&{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},n.variant==="outlined"&&n.color!=="inherit"&&{border:`1px solid ${(e.vars||e).palette[n.color].main}`,backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},n.variant==="contained"&&{backgroundColor:e.vars?e.vars.palette.Button.inheritContainedHoverBg:d,boxShadow:(e.vars||e).shadows[4],"@media (hover: none)":{boxShadow:(e.vars||e).shadows[2],backgroundColor:(e.vars||e).palette.grey[300]}},n.variant==="contained"&&n.color!=="inherit"&&{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}}),"&:active":ze({},n.variant==="contained"&&{boxShadow:(e.vars||e).shadows[8]}),[`&.${ph.focusVisible}`]:ze({},n.variant==="contained"&&{boxShadow:(e.vars||e).shadows[6]}),[`&.${ph.disabled}`]:ze({color:(e.vars||e).palette.action.disabled},n.variant==="outlined"&&{border:`1px solid ${(e.vars||e).palette.action.disabledBackground}`},n.variant==="contained"&&{color:(e.vars||e).palette.action.disabled,boxShadow:(e.vars||e).shadows[0],backgroundColor:(e.vars||e).palette.action.disabledBackground})},n.variant==="text"&&{padding:"6px 8px"},n.variant==="text"&&n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main},n.variant==="outlined"&&{padding:"5px 15px",border:"1px solid currentColor"},n.variant==="outlined"&&n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].main,border:e.vars?`1px solid rgba(${e.vars.palette[n.color].mainChannel} / 0.5)`:`1px solid ${za.alpha(e.palette[n.color].main,.5)}`},n.variant==="contained"&&{color:e.vars?e.vars.palette.text.primary:(a=(r=e.palette).getContrastText)==null?void 0:a.call(r,e.palette.grey[300]),backgroundColor:e.vars?e.vars.palette.Button.inheritContainedBg:o,boxShadow:(e.vars||e).shadows[2]},n.variant==="contained"&&n.color!=="inherit"&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main},n.color==="inherit"&&{color:"inherit",borderColor:"currentColor"},n.size==="small"&&n.variant==="text"&&{padding:"4px 5px",fontSize:e.typography.pxToRem(13)},n.size==="large"&&n.variant==="text"&&{padding:"8px 11px",fontSize:e.typography.pxToRem(15)},n.size==="small"&&n.variant==="outlined"&&{padding:"3px 9px",fontSize:e.typography.pxToRem(13)},n.size==="large"&&n.variant==="outlined"&&{padding:"7px 21px",fontSize:e.typography.pxToRem(15)},n.size==="small"&&n.variant==="contained"&&{padding:"4px 10px",fontSize:e.typography.pxToRem(13)},n.size==="large"&&n.variant==="contained"&&{padding:"8px 22px",fontSize:e.typography.pxToRem(15)},n.fullWidth&&{width:"100%"})},({ownerState:e})=>e.disableElevation&&{boxShadow:"none","&:hover":{boxShadow:"none"},[`&.${ph.focusVisible}`]:{boxShadow:"none"},"&:active":{boxShadow:"none"},[`&.${ph.disabled}`]:{boxShadow:"none"}}),C7=Xn("span",{name:"MuiButton",slot:"StartIcon",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.startIcon,n[`iconSize${St(a.size)}`]]}})(({ownerState:e})=>ze({display:"inherit",marginRight:8,marginLeft:-4},e.size==="small"&&{marginLeft:-2},X_(e))),k7=Xn("span",{name:"MuiButton",slot:"EndIcon",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.endIcon,n[`iconSize${St(a.size)}`]]}})(({ownerState:e})=>ze({display:"inherit",marginRight:-4,marginLeft:8},e.size==="small"&&{marginRight:-2},X_(e))),gh=b.forwardRef(function(n,a){const r=b.useContext(j7),o=b.useContext(w7),d=nu(r,n),h=ei({props:d,name:"MuiButton"}),{children:g,color:p="primary",component:f="button",className:v,disabled:w=!1,disableElevation:S=!1,disableFocusRipple:T=!1,endIcon:C,focusVisibleClassName:_,fullWidth:k=!1,size:R="medium",startIcon:O,type:P,variant:U="text"}=h,A=wn(h,N7),$=ze({},h,{color:p,component:f,disabled:w,disableElevation:S,disableFocusRipple:T,fullWidth:k,size:R,type:P,variant:U}),E=_7($),I=O&&t.jsx(C7,{className:E.startIcon,ownerState:$,children:O}),Z=C&&t.jsx(k7,{className:E.endIcon,ownerState:$,children:C}),F=o||"";return t.jsxs(S7,ze({ownerState:$,className:Pn(r.className,E.root,v,F),component:f,disabled:w,focusRipple:!T,focusVisibleClassName:Pn(E.focusVisible,_),ref:a,type:P},A,{classes:E,children:[I,g,Z]}))});function T7(e){return xr("PrivateSwitchBase",e)}Ys("PrivateSwitchBase",["root","checked","disabled","input","edgeStart","edgeEnd"]);const E7=["autoFocus","checked","checkedIcon","className","defaultChecked","disabled","disableFocusRipple","edge","icon","id","inputProps","inputRef","name","onBlur","onChange","onFocus","readOnly","required","tabIndex","type","value"],M7=e=>{const{classes:n,checked:a,disabled:r,edge:o}=e,d={root:["root",a&&"checked",r&&"disabled",o&&`edge${St(o)}`],input:["input"]};return Jr(d,T7,n)},R7=Xn(dy,{name:"MuiSwitchBase"})(({ownerState:e})=>ze({padding:9,borderRadius:"50%"},e.edge==="start"&&{marginLeft:e.size==="small"?-3:-12},e.edge==="end"&&{marginRight:e.size==="small"?-3:-12})),A7=Xn("input",{name:"MuiSwitchBase",shouldForwardProp:xf})({cursor:"inherit",position:"absolute",opacity:0,width:"100%",height:"100%",top:0,left:0,margin:0,padding:0,zIndex:1}),D7=b.forwardRef(function(n,a){const{autoFocus:r,checked:o,checkedIcon:d,className:h,defaultChecked:g,disabled:p,disableFocusRipple:f=!1,edge:v=!1,icon:w,id:S,inputProps:T,inputRef:C,name:_,onBlur:k,onChange:R,onFocus:O,readOnly:P,required:U=!1,tabIndex:A,type:$,value:E}=n,I=wn(n,E7),[Z,F]=BN({controlled:o,default:!!g,name:"SwitchBase",state:"checked"}),Y=x7(),G=X=>{O&&O(X),Y&&Y.onFocus&&Y.onFocus(X)},V=X=>{k&&k(X),Y&&Y.onBlur&&Y.onBlur(X)},H=X=>{if(X.nativeEvent.defaultPrevented)return;const z=X.target.checked;F(z),R&&R(X,z)};let Q=p;Y&&typeof Q>"u"&&(Q=Y.disabled);const K=$==="checkbox"||$==="radio",oe=ze({},n,{checked:Z,disabled:Q,disableFocusRipple:f,edge:v}),W=M7(oe);return t.jsxs(R7,ze({component:"span",className:Pn(W.root,h),centerRipple:!0,focusRipple:!f,disabled:Q,tabIndex:null,role:void 0,onFocus:G,onBlur:V,ownerState:oe,ref:a},I,{children:[t.jsx(A7,ze({autoFocus:r,checked:o,defaultChecked:g,className:W.input,disabled:Q,id:K?S:void 0,name:_,onChange:H,readOnly:P,ref:C,required:U,ownerState:oe,tabIndex:A,type:$},$==="checkbox"&&E===void 0?{}:{value:E},T)),Z?d:w]}))}),O7=al(t.jsx("path",{d:"M19 5v14H5V5h14m0-2H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2z"}),"CheckBoxOutlineBlank"),P7=al(t.jsx("path",{d:"M19 3H5c-1.11 0-2 .9-2 2v14c0 1.1.89 2 2 2h14c1.11 0 2-.9 2-2V5c0-1.1-.89-2-2-2zm-9 14l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z"}),"CheckBox"),L7=al(t.jsx("path",{d:"M19 3H5c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h14c1.1 0 2-.9 2-2V5c0-1.1-.9-2-2-2zm-2 10H7v-2h10v2z"}),"IndeterminateCheckBox");function z7(e){return xr("MuiCheckbox",e)}const lx=Ys("MuiCheckbox",["root","checked","disabled","indeterminate","colorPrimary","colorSecondary","sizeSmall","sizeMedium"]),I7=["checkedIcon","color","icon","indeterminate","indeterminateIcon","inputProps","size","className"],B7=e=>{const{classes:n,indeterminate:a,color:r,size:o}=e,d={root:["root",a&&"indeterminate",`color${St(r)}`,`size${St(o)}`]},h=Jr(d,z7,n);return ze({},n,h)},$7=Xn(D7,{shouldForwardProp:e=>xf(e)||e==="classes",name:"MuiCheckbox",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,a.indeterminate&&n.indeterminate,n[`size${St(a.size)}`],a.color!=="default"&&n[`color${St(a.color)}`]]}})(({theme:e,ownerState:n})=>ze({color:(e.vars||e).palette.text.secondary},!n.disableRipple&&{"&:hover":{backgroundColor:e.vars?`rgba(${n.color==="default"?e.vars.palette.action.activeChannel:e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:za.alpha(n.color==="default"?e.palette.action.active:e.palette[n.color].main,e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:"transparent"}}},n.color!=="default"&&{[`&.${lx.checked}, &.${lx.indeterminate}`]:{color:(e.vars||e).palette[n.color].main},[`&.${lx.disabled}`]:{color:(e.vars||e).palette.action.disabled}})),F7=t.jsx(P7,{}),U7=t.jsx(O7,{}),H7=t.jsx(L7,{}),q7=b.forwardRef(function(n,a){var r,o;const d=ei({props:n,name:"MuiCheckbox"}),{checkedIcon:h=F7,color:g="primary",icon:p=U7,indeterminate:f=!1,indeterminateIcon:v=H7,inputProps:w,size:S="medium",className:T}=d,C=wn(d,I7),_=f?v:p,k=f?v:h,R=ze({},d,{color:g,indeterminate:f,size:S}),O=B7(R);return t.jsx($7,ze({type:"checkbox",inputProps:ze({"data-indeterminate":f},w),icon:b.cloneElement(_,{fontSize:(r=_.props.fontSize)!=null?r:S}),checkedIcon:b.cloneElement(k,{fontSize:(o=k.props.fontSize)!=null?o:S}),ownerState:R,ref:a,className:Pn(O.root,T)},C,{classes:O}))});function Y7(e){return xr("MuiCircularProgress",e)}Ys("MuiCircularProgress",["root","determinate","indeterminate","colorPrimary","colorSecondary","svg","circle","circleDeterminate","circleIndeterminate","circleDisableShrink"]);const V7=["className","color","disableShrink","size","style","thickness","value","variant"];let Df=e=>e,ww,Nw,_w,Sw;const Zi=44,Z7=Nc(ww||(ww=Df`
  0% {
    transform: rotate(0deg);
  }

  100% {
    transform: rotate(360deg);
  }
`)),W7=Nc(Nw||(Nw=Df`
  0% {
    stroke-dasharray: 1px, 200px;
    stroke-dashoffset: 0;
  }

  50% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -15px;
  }

  100% {
    stroke-dasharray: 100px, 200px;
    stroke-dashoffset: -125px;
  }
`)),K7=e=>{const{classes:n,variant:a,color:r,disableShrink:o}=e,d={root:["root",a,`color${St(r)}`],svg:["svg"],circle:["circle",`circle${St(a)}`,o&&"circleDisableShrink"]};return Jr(d,Y7,n)},G7=Xn("span",{name:"MuiCircularProgress",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`color${St(a.color)}`]]}})(({ownerState:e,theme:n})=>ze({display:"inline-block"},e.variant==="determinate"&&{transition:n.transitions.create("transform")},e.color!=="inherit"&&{color:(n.vars||n).palette[e.color].main}),({ownerState:e})=>e.variant==="indeterminate"&&df(_w||(_w=Df`
      animation: ${0} 1.4s linear infinite;
    `),Z7)),Q7=Xn("svg",{name:"MuiCircularProgress",slot:"Svg",overridesResolver:(e,n)=>n.svg})({display:"block"}),X7=Xn("circle",{name:"MuiCircularProgress",slot:"Circle",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.circle,n[`circle${St(a.variant)}`],a.disableShrink&&n.circleDisableShrink]}})(({ownerState:e,theme:n})=>ze({stroke:"currentColor"},e.variant==="determinate"&&{transition:n.transitions.create("stroke-dashoffset")},e.variant==="indeterminate"&&{strokeDasharray:"80px, 200px",strokeDashoffset:0}),({ownerState:e})=>e.variant==="indeterminate"&&!e.disableShrink&&df(Sw||(Sw=Df`
      animation: ${0} 1.4s ease-in-out infinite;
    `),W7)),Cw=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiCircularProgress"}),{className:o,color:d="primary",disableShrink:h=!1,size:g=40,style:p,thickness:f=3.6,value:v=0,variant:w="indeterminate"}=r,S=wn(r,V7),T=ze({},r,{color:d,disableShrink:h,size:g,thickness:f,value:v,variant:w}),C=K7(T),_={},k={},R={};if(w==="determinate"){const O=2*Math.PI*((Zi-f)/2);_.strokeDasharray=O.toFixed(3),R["aria-valuenow"]=Math.round(v),_.strokeDashoffset=`${((100-v)/100*O).toFixed(3)}px`,k.transform="rotate(-90deg)"}return t.jsx(G7,ze({className:Pn(C.root,o),style:ze({width:g,height:g},k,p),ownerState:T,ref:a,role:"progressbar"},R,S,{children:t.jsx(Q7,{className:C.svg,ownerState:T,viewBox:`${Zi/2} ${Zi/2} ${Zi} ${Zi}`,children:t.jsx(X7,{className:C.circle,style:_,ownerState:T,cx:Zi,cy:Zi,r:(Zi-f)/2,fill:"none",strokeWidth:f})})}))});function J7(e){return xr("MuiPagination",e)}Ys("MuiPagination",["root","ul","outlined","text"]);const e8=["boundaryCount","componentName","count","defaultPage","disabled","hideNextButton","hidePrevButton","onChange","page","showFirstButton","showLastButton","siblingCount"];function t8(e={}){const{boundaryCount:n=1,componentName:a="usePagination",count:r=1,defaultPage:o=1,disabled:d=!1,hideNextButton:h=!1,hidePrevButton:g=!1,onChange:p,page:f,showFirstButton:v=!1,showLastButton:w=!1,siblingCount:S=1}=e,T=wn(e,e8),[C,_]=BN({controlled:f,default:o,name:a,state:"page"}),k=(Z,F)=>{f||_(F),p&&p(Z,F)},R=(Z,F)=>{const Y=F-Z+1;return Array.from({length:Y},(G,V)=>Z+V)},O=R(1,Math.min(n,r)),P=R(Math.max(r-n+1,n+1),r),U=Math.max(Math.min(C-S,r-n-S*2-1),n+2),A=Math.min(Math.max(C+S,n+S*2+2),P.length>0?P[0]-2:r-1),$=[...v?["first"]:[],...g?[]:["previous"],...O,...U>n+2?["start-ellipsis"]:n+1<r-n?[n+1]:[],...R(U,A),...A<r-n-1?["end-ellipsis"]:r-n>n?[r-n]:[],...P,...h?[]:["next"],...w?["last"]:[]],E=Z=>{switch(Z){case"first":return 1;case"previous":return C-1;case"next":return C+1;case"last":return r;default:return null}},I=$.map(Z=>typeof Z=="number"?{onClick:F=>{k(F,Z)},type:"page",page:Z,selected:Z===C,disabled:d,"aria-current":Z===C?"true":void 0}:{onClick:F=>{k(F,E(Z))},type:Z,page:E(Z),selected:!1,disabled:d||Z.indexOf("ellipsis")===-1&&(Z==="next"||Z==="last"?C>=r:C<=1)});return ze({items:I},T)}function n8(e){return xr("MuiPaginationItem",e)}const vs=Ys("MuiPaginationItem",["root","page","sizeSmall","sizeLarge","text","textPrimary","textSecondary","outlined","outlinedPrimary","outlinedSecondary","rounded","ellipsis","firstLast","previousNext","focusVisible","disabled","selected","icon","colorPrimary","colorSecondary"]),kw=al(t.jsx("path",{d:"M18.41 16.59L13.82 12l4.59-4.59L17 6l-6 6 6 6zM6 6h2v12H6z"}),"FirstPage"),Tw=al(t.jsx("path",{d:"M5.59 7.41L10.18 12l-4.59 4.59L7 18l6-6-6-6zM16 6h2v12h-2z"}),"LastPage"),Ew=al(t.jsx("path",{d:"M15.41 7.41L14 6l-6 6 6 6 1.41-1.41L10.83 12z"}),"NavigateBefore"),Mw=al(t.jsx("path",{d:"M10 6L8.59 7.41 13.17 12l-4.58 4.59L10 18l6-6z"}),"NavigateNext"),a8=["className","color","component","components","disabled","page","selected","shape","size","slots","type","variant"],J_=(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant],n[`size${St(a.size)}`],a.variant==="text"&&n[`text${St(a.color)}`],a.variant==="outlined"&&n[`outlined${St(a.color)}`],a.shape==="rounded"&&n.rounded,a.type==="page"&&n.page,(a.type==="start-ellipsis"||a.type==="end-ellipsis")&&n.ellipsis,(a.type==="previous"||a.type==="next")&&n.previousNext,(a.type==="first"||a.type==="last")&&n.firstLast]},s8=e=>{const{classes:n,color:a,disabled:r,selected:o,size:d,shape:h,type:g,variant:p}=e,f={root:["root",`size${St(d)}`,p,h,a!=="standard"&&`color${St(a)}`,a!=="standard"&&`${p}${St(a)}`,r&&"disabled",o&&"selected",{page:"page",first:"firstLast",last:"firstLast","start-ellipsis":"ellipsis","end-ellipsis":"ellipsis",previous:"previousNext",next:"previousNext"}[g]],icon:["icon"]};return Jr(f,n8,n)},r8=Xn("div",{name:"MuiPaginationItem",slot:"Root",overridesResolver:J_})(({theme:e,ownerState:n})=>ze({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,height:"auto",[`&.${vs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity}},n.size==="small"&&{minWidth:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},n.size==="large"&&{minWidth:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)})),i8=Xn(dy,{name:"MuiPaginationItem",slot:"Root",overridesResolver:J_})(({theme:e,ownerState:n})=>ze({},e.typography.body2,{borderRadius:32/2,textAlign:"center",boxSizing:"border-box",minWidth:32,height:32,padding:"0 6px",margin:"0 3px",color:(e.vars||e).palette.text.primary,[`&.${vs.focusVisible}`]:{backgroundColor:(e.vars||e).palette.action.focus},[`&.${vs.disabled}`]:{opacity:(e.vars||e).palette.action.disabledOpacity},transition:e.transitions.create(["color","background-color"],{duration:e.transitions.duration.short}),"&:hover":{backgroundColor:(e.vars||e).palette.action.hover,"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${vs.selected}`]:{backgroundColor:(e.vars||e).palette.action.selected,"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.hoverOpacity}))`:za.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.hoverOpacity),"@media (hover: none)":{backgroundColor:(e.vars||e).palette.action.selected}},[`&.${vs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette.action.selectedChannel} / calc(${e.vars.palette.action.selectedOpacity} + ${e.vars.palette.action.focusOpacity}))`:za.alpha(e.palette.action.selected,e.palette.action.selectedOpacity+e.palette.action.focusOpacity)},[`&.${vs.disabled}`]:{opacity:1,color:(e.vars||e).palette.action.disabled,backgroundColor:(e.vars||e).palette.action.selected}}},n.size==="small"&&{minWidth:26,height:26,borderRadius:26/2,margin:"0 1px",padding:"0 4px"},n.size==="large"&&{minWidth:40,height:40,borderRadius:40/2,padding:"0 10px",fontSize:e.typography.pxToRem(15)},n.shape==="rounded"&&{borderRadius:(e.vars||e).shape.borderRadius}),({theme:e,ownerState:n})=>ze({},n.variant==="text"&&{[`&.${vs.selected}`]:ze({},n.color!=="standard"&&{color:(e.vars||e).palette[n.color].contrastText,backgroundColor:(e.vars||e).palette[n.color].main,"&:hover":{backgroundColor:(e.vars||e).palette[n.color].dark,"@media (hover: none)":{backgroundColor:(e.vars||e).palette[n.color].main}},[`&.${vs.focusVisible}`]:{backgroundColor:(e.vars||e).palette[n.color].dark}},{[`&.${vs.disabled}`]:{color:(e.vars||e).palette.action.disabled}})},n.variant==="outlined"&&{border:e.vars?`1px solid rgba(${e.vars.palette.common.onBackgroundChannel} / 0.23)`:`1px solid ${e.palette.mode==="light"?"rgba(0, 0, 0, 0.23)":"rgba(255, 255, 255, 0.23)"}`,[`&.${vs.selected}`]:ze({},n.color!=="standard"&&{color:(e.vars||e).palette[n.color].main,border:`1px solid ${e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / 0.5)`:za.alpha(e.palette[n.color].main,.5)}`,backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / ${e.vars.palette.action.activatedOpacity})`:za.alpha(e.palette[n.color].main,e.palette.action.activatedOpacity),"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:za.alpha(e.palette[n.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity),"@media (hover: none)":{backgroundColor:"transparent"}},[`&.${vs.focusVisible}`]:{backgroundColor:e.vars?`rgba(${e.vars.palette[n.color].mainChannel} / calc(${e.vars.palette.action.activatedOpacity} + ${e.vars.palette.action.focusOpacity}))`:za.alpha(e.palette[n.color].main,e.palette.action.activatedOpacity+e.palette.action.focusOpacity)}},{[`&.${vs.disabled}`]:{borderColor:(e.vars||e).palette.action.disabledBackground,color:(e.vars||e).palette.action.disabled}})})),l8=Xn("div",{name:"MuiPaginationItem",slot:"Icon",overridesResolver:(e,n)=>n.icon})(({theme:e,ownerState:n})=>ze({fontSize:e.typography.pxToRem(20),margin:"0 -8px"},n.size==="small"&&{fontSize:e.typography.pxToRem(18)},n.size==="large"&&{fontSize:e.typography.pxToRem(22)})),o8=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiPaginationItem"}),{className:o,color:d="standard",component:h,components:g={},disabled:p=!1,page:f,selected:v=!1,shape:w="circular",size:S="medium",slots:T={},type:C="page",variant:_="text"}=r,k=wn(r,a8),R=ze({},r,{color:d,disabled:p,selected:v,shape:w,size:S,type:C,variant:_}),O=zI(),P=s8(R),A=(O?{previous:T.next||g.next||Mw,next:T.previous||g.previous||Ew,last:T.first||g.first||kw,first:T.last||g.last||Tw}:{previous:T.previous||g.previous||Ew,next:T.next||g.next||Mw,first:T.first||g.first||kw,last:T.last||g.last||Tw})[C];return C==="start-ellipsis"||C==="end-ellipsis"?t.jsx(r8,{ref:a,ownerState:R,className:Pn(P.root,o),children:"…"}):t.jsxs(i8,ze({ref:a,ownerState:R,component:h,disabled:p,className:Pn(P.root,o)},k,{children:[C==="page"&&f,A?t.jsx(l8,{as:A,ownerState:R,className:P.icon}):null]}))}),c8=["boundaryCount","className","color","count","defaultPage","disabled","getItemAriaLabel","hideNextButton","hidePrevButton","onChange","page","renderItem","shape","showFirstButton","showLastButton","siblingCount","size","variant"],d8=e=>{const{classes:n,variant:a}=e;return Jr({root:["root",a],ul:["ul"]},J7,n)},u8=Xn("nav",{name:"MuiPagination",slot:"Root",overridesResolver:(e,n)=>{const{ownerState:a}=e;return[n.root,n[a.variant]]}})({}),m8=Xn("ul",{name:"MuiPagination",slot:"Ul",overridesResolver:(e,n)=>n.ul})({display:"flex",flexWrap:"wrap",alignItems:"center",padding:0,margin:0,listStyle:"none"});function h8(e,n,a){return e==="page"?`${a?"":"Go to "}page ${n}`:`Go to ${e} page`}const Rw=b.forwardRef(function(n,a){const r=ei({props:n,name:"MuiPagination"}),{boundaryCount:o=1,className:d,color:h="standard",count:g=1,defaultPage:p=1,disabled:f=!1,getItemAriaLabel:v=h8,hideNextButton:w=!1,hidePrevButton:S=!1,renderItem:T=I=>t.jsx(o8,ze({},I)),shape:C="circular",showFirstButton:_=!1,showLastButton:k=!1,siblingCount:R=1,size:O="medium",variant:P="text"}=r,U=wn(r,c8),{items:A}=t8(ze({},r,{componentName:"Pagination"})),$=ze({},r,{boundaryCount:o,color:h,count:g,defaultPage:p,disabled:f,getItemAriaLabel:v,hideNextButton:w,hidePrevButton:S,renderItem:T,shape:C,showFirstButton:_,showLastButton:k,siblingCount:R,size:O,variant:P}),E=d8($);return t.jsx(u8,ze({"aria-label":"pagination navigation",className:Pn(E.root,d),ownerState:$,ref:a},U,{children:t.jsx(m8,{className:E.ul,ownerState:$,children:A.map((I,Z)=>t.jsx("li",{children:T(ze({},I,{color:h,"aria-label":v(I.type,I.page,I.selected),shape:C,size:O,variant:P}))},Z))})}))}),Xx={getCities:()=>we.get("/api/admin/system-settings/cities").then(e=>e.data.data||[]),saveCities:e=>we.put("/api/admin/system-settings/cities",e).then(n=>n.data.data||!1)},f8=()=>{const[e,n]=b.useState([]),[a,r]=b.useState(!0),[o,d]=b.useState(null);return b.useEffect(()=>{Xx.getCities().then(h=>n(h)).catch(h=>d(h)).finally(()=>r(!1))},[]),{cities:e,loading:a,error:o}},p8=()=>{const{showSuccess:e,showError:n}=vc(),[a,r]=b.useState(0),{currencies:o,loading:d,error:h}=Cc(),[g,p]=b.useState([]),[f,v]=b.useState(!1),[w,S]=b.useState(!1),[T,C]=b.useState(null),[_,k]=b.useState({code:"",arabicCode:"",name:"",arabicName:"",exchangeRate:0,isDefault:!1}),{cities:R,loading:O,error:P}=f8(),[U,A]=b.useState([]),[$,E]=b.useState(!1),[I,Z]=b.useState(!1),[F,Y]=b.useState(null),[G,V]=b.useState({name:"",country:"",images:[]}),H=5,[Q,K]=b.useState(1),[oe,W]=b.useState(1),X=T?!T.isDefault:g.some(te=>te.isDefault);b.useEffect(()=>{d||p(o)},[d,o]),b.useEffect(()=>{const te=Math.max(1,Math.ceil(g.length/H));oe>te&&W(te)},[g,oe]),b.useEffect(()=>{O||A(R)},[O,R]),b.useEffect(()=>{const te=Math.max(1,Math.ceil(U.length/H));Q>te&&K(te)},[U,Q]),b.useCallback((te,_e)=>{p(Ie=>Ie.map(at=>at.code===te?{...at,exchangeRate:parseFloat(_e)}:at))},[]),b.useCallback(te=>{p(_e=>_e.map(Ie=>({...Ie,isDefault:Ie.code===te})))},[]);const z=()=>{C(null),k({code:"",arabicCode:"",name:"",arabicName:"",exchangeRate:0,isDefault:!1}),S(!0)},J=te=>{C(te),k({code:te.code,arabicCode:te.arabicCode,name:te.name,arabicName:te.arabicName,exchangeRate:te.exchangeRate||0,isDefault:te.isDefault}),S(!0)},se=async te=>{if(!window.confirm("هل أنت متأكد من الحذف؟"))return;const _e=g.filter(Ie=>Ie.code!==te);p(_e);try{await Px.saveCurrencies(_e),e("تم الحذف بنجاح")}catch(Ie){n(Ie.message||"فشل في الحذف")}},ae=async()=>{let te;T?te=g.map(_e=>_e.code===T.code?{..._}:_e):te=[...g,_],v(!0);try{await Px.saveCurrencies(te),p(te),e(T?"تم التحديث بنجاح":"تم الإضافة بنجاح"),S(!1)}catch(_e){n(_e.message||"فشل في الحفظ")}finally{v(!1)}},ee=()=>{Y(null),V({name:"",country:"",images:[]}),Z(!0)},re=te=>{Y(te),V({...te}),Z(!0)},me=async te=>{if(!window.confirm("هل أنت متأكد من الحذف؟"))return;const _e=U.filter(Ie=>Ie.name!==te);A(_e);try{await Xx.saveCities(_e),e("تم الحذف بنجاح")}catch(Ie){n(Ie.message||"فشل في الحذف")}},ye=async()=>{let te;F?te=U.map(_e=>_e.name===F.name?G:_e):te=[...U,G],E(!0);try{await Xx.saveCities(te),A(te),e(F?"تم التحديث بنجاح":"تم الإضافة بنجاح"),Z(!1)}catch(_e){n(_e.message||"فشل في الحفظ")}finally{E(!1)}},Ce=U.slice((Q-1)*H,Q*H),de=g.slice((oe-1)*H,oe*H);return t.jsxs(on,{className:"min-h-screen bg-gray-50 p-6",dir:"rtl",children:[t.jsx("div",{className:"flex justify-between items-center mb-4",children:t.jsxs("div",{children:[t.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"إدارة المدخلات"}),t.jsx(On,{className:"text-gray-600",children:"تحتوي على ادارة المدن والعملات ."})]})}),t.jsxs(on,{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-6",children:[t.jsxs(on,{className:"bg-blue-50 p-4 rounded-lg flex items-center",children:[t.jsx(On,{className:"text-blue-600 text-2xl ml-3",children:"📌"}),t.jsxs(on,{children:[t.jsx(On,{className:"text-sm text-blue-600",children:"المدن"}),t.jsx(On,{className:"text-2xl font-bold text-blue-900",children:"0"})]})]}),t.jsxs(on,{className:"bg-green-50 p-4 rounded-lg flex items-center",children:[t.jsx(On,{className:"text-green-600 text-2xl ml-3",children:"🔧"}),t.jsxs(on,{children:[t.jsx(On,{className:"text-sm text-green-600",children:"العملات"}),t.jsx(On,{className:"text-2xl font-bold text-green-900",children:g.length})]})]}),t.jsxs(on,{className:"bg-yellow-50 p-4 rounded-lg flex items-center",children:[t.jsx(On,{className:"text-yellow-600 text-2xl ml-3",children:"📂"}),t.jsxs(on,{children:[t.jsx(On,{className:"text-sm text-yellow-600",children:"القسم 3"}),t.jsx(On,{className:"text-2xl font-bold text-yellow-900",children:"0"})]})]}),t.jsxs(on,{className:"bg-purple-50 p-4 rounded-lg flex items-center",children:[t.jsx(On,{className:"text-purple-600 text-2xl ml-3",children:"📝"}),t.jsxs(on,{children:[t.jsx(On,{className:"text-sm text-purple-600",children:"القسم 4"}),t.jsx(On,{className:"text-2xl font-bold text-purple-900",children:"0"})]})]})]}),t.jsxs(on,{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[t.jsxs(on,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(on,{className:"flex justify-between items-center mb-4",children:[t.jsx(On,{variant:"h6",className:"font-semibold",children:"المدن"}),t.jsx(gh,{variant:"contained",color:"primary",onClick:ee,children:"+ إضافة"})]}),O?t.jsx(on,{className:"flex justify-center py-10",children:t.jsx(Cw,{})}):P?t.jsx(On,{color:"error",align:"center",children:P.message}):t.jsxs("div",{className:"space-y-2",children:[Ce.map(te=>t.jsx("div",{className:"p-3 rounded-lg border border-gray-200 hover:border-gray-300 cursor-pointer transition-colors",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsx("h3",{className:"font-medium text-gray-900 text-sm",children:te.name}),t.jsxs("p",{className:"text-xs text-gray-600",children:["الدولة: ",te.country]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["الصور: ",te.images.length]})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>re(te),className:"text-blue-600 hover:text-blue-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>me(te.name),className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},te.name)),U.length===0&&t.jsxs("div",{className:"text-center py-10 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🏙️"}),t.jsx(On,{className:"text-sm",children:"لا توجد مدن"})]}),U.length>H&&t.jsx(on,{className:"flex justify-center mt-2",children:t.jsx(Rw,{dir:"ltr",count:Math.ceil(U.length/H),page:Q,onChange:(te,_e)=>K(_e),size:"small",color:"primary"})})]})]}),t.jsxs(on,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(on,{className:"flex justify-between items-center mb-4",children:[t.jsx(On,{variant:"h6",className:"font-semibold",children:"العملات"}),t.jsx(gh,{variant:"contained",color:"primary",onClick:z,children:"+ إضافة"})]}),d?t.jsx(on,{className:"flex justify-center py-10",children:t.jsx(Cw,{})}):h?t.jsx(On,{color:"error",align:"center",children:h.message}):t.jsxs("div",{className:"space-y-2",children:[de.map(te=>t.jsx("div",{className:"p-3 rounded-lg border border-gray-200 hover:border-gray-300 cursor-pointer transition-colors",children:t.jsxs("div",{className:"flex justify-between items-start",children:[t.jsxs("div",{className:"flex-1",children:[t.jsxs("h3",{className:"font-medium text-gray-900 text-sm",children:[te.name," (",te.code,")"]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["القيمة: ",te.exchangeRate??""]}),t.jsxs("p",{className:"text-xs text-gray-600",children:["افتراضي: ",te.isDefault?"نعم":"لا"]})]}),t.jsxs("div",{className:"flex space-x-1 space-x-reverse",children:[t.jsx("button",{onClick:()=>J(te),className:"text-blue-600 hover:text-blue-800 text-xs",children:"✏️"}),t.jsx("button",{onClick:()=>se(te.code),className:"text-red-600 hover:text-red-800 text-xs",children:"🗑️"})]})]})},te.code)),g.length===0&&t.jsxs("div",{className:"text-center py-10 text-gray-500",children:[t.jsx("div",{className:"text-3xl mb-2",children:"🔧"}),t.jsx(On,{className:"text-sm",children:"لا توجد مدخلات"})]}),g.length>H&&t.jsx(on,{className:"flex justify-center mt-2",children:t.jsx(Rw,{dir:"ltr",count:Math.ceil(g.length/H),page:oe,onChange:(te,_e)=>W(_e),size:"small",color:"primary"})})]})]}),t.jsxs(on,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(on,{className:"flex justify-between items-center mb-4",children:[t.jsx(On,{variant:"h6",className:"font-semibold",children:"القسم 3"}),t.jsx(gh,{variant:"contained",disabled:!0,children:"+ إضافة"})]}),t.jsx(on,{className:"text-center text-gray-500 py-10",children:"لا توجد بيانات"})]}),t.jsxs(on,{className:"bg-white rounded-lg shadow-sm p-6",children:[t.jsxs(on,{className:"flex justify-between items-center mb-4",children:[t.jsx(On,{variant:"h6",className:"font-semibold",children:"القسم 4"}),t.jsx(gh,{variant:"contained",disabled:!0,children:"+ إضافة"})]}),t.jsx(on,{className:"text-center text-gray-500 py-10",children:"لا توجد بيانات"})]})]}),w&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:T?"تعديل المدخل":"إضافة مدخل جديد"}),t.jsxs("form",{onSubmit:te=>{te.preventDefault(),ae()},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"المعرف"}),t.jsx("input",{type:"text",value:_.code,onChange:te=>k(_e=>({..._e,code:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الرمز العربي"}),t.jsx("input",{type:"text",value:_.arabicCode,onChange:te=>k(_e=>({..._e,arabicCode:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الاسم"}),t.jsx("input",{type:"text",value:_.name,onChange:te=>k(_e=>({..._e,name:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"القيمة"}),t.jsx("input",{type:"number",value:_.exchangeRate,onChange:te=>k(_e=>({..._e,exchangeRate:parseFloat(te.target.value)||0})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),t.jsxs("div",{className:"flex items-center space-x-2 space-x-reverse",children:[t.jsx(q7,{checked:_.isDefault,disabled:X,onChange:te=>k(_e=>({..._e,isDefault:te.target.checked}))}),t.jsx("label",{className:"text-sm font-medium text-gray-700",children:"افتراضي"})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>S(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:T?"تحديث":"إضافة"})]})]})]})}),I&&t.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:t.jsxs("div",{className:"bg-white rounded-lg p-6 w-full max-w-md",children:[t.jsx("h3",{className:"text-lg font-semibold mb-4",children:F?"تعديل المدينة":"إضافة مدينة جديدة"}),t.jsxs("form",{onSubmit:te=>{te.preventDefault(),ye()},children:[t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"اسم المدينة"}),t.jsx("input",{type:"text",value:G.name,onChange:te=>V(_e=>({..._e,name:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"الدولة"}),t.jsx("input",{type:"text",value:G.country,onChange:te=>V(_e=>({..._e,country:te.target.value})),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500",required:!0})]}),t.jsxs("div",{children:[t.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"صور المدينة"}),t.jsx(Yl,{value:G.images,multiple:!0,onChange:te=>V(_e=>({..._e,images:Array.isArray(te)?te:[te]}))})]})]}),t.jsxs("div",{className:"flex justify-end space-x-2 space-x-reverse mt-6",children:[t.jsx("button",{type:"button",onClick:()=>Z(!1),className:"px-4 py-2 text-gray-600 border border-gray-300 rounded-md hover:bg-gray-50",children:"إلغاء"}),t.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700",children:F?"تحديث":"إضافة"})]})]})]})})]})},g8=()=>{const[e,n]=b.useState([]),[a,r]=b.useState(0),[o,d]=b.useState(1),[h,g]=b.useState(20),[p,f]=b.useState({}),[v,w]=b.useState(!1),[S,T]=b.useState(null),[C,_]=b.useState(!1),[k,R]=b.useState(null),[O,P]=b.useState({type:bn.HORIZONTAL_PROPERTY_LIST,displayOrder:0,target:Is.PROPERTIES,isActive:!0}),U=b.useMemo(()=>[{key:"displayOrder",title:"الترتيب",width:"80px"},{key:"type",title:"النوع",render:(F,Y)=>Y.type},{key:"target",title:"المستهدف",render:(F,Y)=>Y.target===Is.PROPERTIES?"كيانات":"وحدات"},{key:"isActive",title:"نشط",render:(F,Y)=>Y.isActive?"نعم":"لا",width:"80px"}],[]),A=async()=>{try{w(!0);const F={pageNumber:o,pageSize:h,target:p.target,type:p.type},Y=await tc.getSections(F);n(Y.items),r(Y.totalCount)}catch(F){T(F.message||"حدث خطأ")}finally{w(!1)}};b.useEffect(()=>{A()},[o,h,p]);const $=()=>{P({type:bn.HORIZONTAL_PROPERTY_LIST,displayOrder:0,target:Is.PROPERTIES,isActive:!0}),R(null)},E=async()=>{await tc.createSection(O),_(!1),$(),A()},I=async()=>{if(!k)return;const F={sectionId:k.id,type:O.type,displayOrder:O.displayOrder,target:O.target,isActive:O.isActive??!0};await tc.updateSection(k.id,F),_(!1),$(),A()},Z=async F=>{await tc.deleteSection(F.id),A()};return t.jsxs(ou,{children:[t.jsxs("div",{className:"flex items-center gap-4 mb-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm",children:"المستهدف"}),t.jsxs("select",{className:"border rounded px-2 py-1",value:p.target||"",onChange:F=>f({...p,target:F.target.value||void 0}),children:[t.jsx("option",{value:"",children:"الكل"}),t.jsx("option",{value:Is.PROPERTIES,children:"كيانات"}),t.jsx("option",{value:Is.UNITS,children:"وحدات"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm",children:"النوع"}),t.jsxs("select",{className:"border rounded px-2 py-1",value:p.type||"",onChange:F=>f({...p,type:F.target.value||void 0}),children:[t.jsx("option",{value:"",children:"الكل"}),Object.values(bn).map(F=>t.jsx("option",{value:F,children:F},F))]})]}),t.jsx("button",{className:"btn btn-primary ml-auto",onClick:()=>{$(),_(!0)},children:"إنشاء قسم"})]}),t.jsx(ls,{data:e,columns:U,loading:v,pagination:{current:o,pageSize:h,total:a,onChange:(F,Y)=>{d(F),g(Y)}},actions:[{label:"تعديل",onClick:F=>{R(F),P({type:F.type,displayOrder:F.displayOrder,target:F.target,isActive:F.isActive}),_(!0)},color:"blue"},{label:"حذف",onClick:Z,color:"red"}]}),t.jsx(Rt,{isOpen:C,onClose:()=>_(!1),title:k?"تعديل قسم":"إنشاء قسم",children:t.jsxs("div",{className:"space-y-4",children:[t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm w-28",children:"النوع"}),t.jsx("select",{className:"border rounded px-2 py-1 flex-1",value:O.type,onChange:F=>P({...O,type:F.target.value}),children:Object.values(bn).map(F=>t.jsx("option",{value:F,children:F},F))})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm w-28",children:"المستهدف"}),t.jsxs("select",{className:"border rounded px-2 py-1 flex-1",value:O.target,onChange:F=>P({...O,target:F.target.value}),children:[t.jsx("option",{value:Is.PROPERTIES,children:"كيانات"}),t.jsx("option",{value:Is.UNITS,children:"وحدات"})]})]}),t.jsxs("div",{className:"flex items-center gap-2",children:[t.jsx("label",{className:"text-sm w-28",children:"الترتيب"}),t.jsx("input",{className:"border rounded px-2 py-1 flex-1",type:"number",value:O.displayOrder,onChange:F=>P({...O,displayOrder:Number(F.target.value)})})]}),t.jsxs("div",{className:"flex justify-end gap-2",children:[t.jsx("button",{className:"btn",onClick:()=>_(!1),children:"إلغاء"}),t.jsx("button",{className:"btn btn-primary",onClick:k?I:E,children:k?"حفظ":"إنشاء"})]})]})})]})},Aw=()=>t.jsx(Kl,{title:"لوحة معلومات مالك الكيان",description:"إحصائيات وأداء كياناتك، الحجوزات الحالية، والإيرادات المحققة",icon:"📊",comingSoon:!0}),x8=()=>t.jsx(Kl,{title:"إدارة كياناتي",description:"عرض وإدارة كياناتك المسجلة في النظام، إضافة كيانات جديدة وتحديث البيانات",icon:"🏢",comingSoon:!0}),y8=()=>t.jsx(Kl,{title:"إدارة الوحدات",description:"إدارة وحدات كياناتك مع الحقول الديناميكية المخصصة لكل نوع من أنواع الوحدات",icon:"🏠",comingSoon:!0}),b8=()=>t.jsx(Kl,{title:"إدارة الحجوزات",description:"عرض وإدارة حجوزات كياناتك، متابعة حالات الحجوزات والمدفوعات",icon:"📝",comingSoon:!0}),v8=()=>t.jsx(Kl,{title:"إدارة الموظفين",description:"إدارة فريق عمل كيانك، إضافة موظفين جدد وتحديد صلاحياتهم",icon:"👨‍💼",comingSoon:!0}),j8=()=>t.jsxs(pk,{children:[t.jsxs(gt,{path:"/auth",element:t.jsx(RM,{}),children:[t.jsx(gt,{path:"login",element:t.jsx(AM,{})}),t.jsx(gt,{path:"forgot-password",element:t.jsx(dR,{})}),t.jsx(gt,{index:!0,element:t.jsx($l,{to:"login",replace:!0})})]}),t.jsx(gt,{path:"/auth/register",element:t.jsx(XM,{})}),t.jsxs(gt,{path:"/admin",element:t.jsx(EM,{}),children:[t.jsx(gt,{index:!0,element:t.jsx(_j,{})}),t.jsx(gt,{path:"inputs",element:t.jsx(p8,{})}),t.jsx(gt,{path:"dashboard",element:t.jsx(_j,{})}),t.jsx(gt,{path:"users",element:t.jsx(gR,{})}),t.jsx(gt,{path:"users/:userId",element:t.jsx(KD,{})}),t.jsx(gt,{path:"properties",element:t.jsx(NR,{})}),t.jsx(gt,{path:"property-types",element:t.jsx(CR,{})}),t.jsx(gt,{path:"units",element:t.jsx(MR,{})}),t.jsx(gt,{path:"property-images/:propertyId",element:t.jsx(ZD,{})}),t.jsx(gt,{path:"unit-images/:propertyId/:unitId",element:t.jsx(WD,{})}),t.jsx(gt,{path:"bookings",element:t.jsx(RR,{})}),t.jsx(gt,{path:"payments",element:t.jsx(OR,{})}),t.jsx(gt,{path:"amenities",element:t.jsx(zR,{})}),t.jsx(gt,{path:"property-services",element:t.jsx(lO,{})}),t.jsx(gt,{path:"/units/:unitId/availability-pricing",element:t.jsx(NI,{})}),t.jsx(gt,{path:"reviews",element:t.jsx(HR,{})}),t.jsx(gt,{path:"notifications",element:t.jsx(qR,{})}),t.jsx(gt,{path:"reports",element:t.jsx(ZR,{})}),t.jsx(gt,{path:"audit-logs",element:t.jsx(tA,{})}),t.jsx(gt,{path:"settings",element:t.jsx(nA,{})}),t.jsx(gt,{path:"sections",element:t.jsx(g8,{})})]}),t.jsxs(gt,{path:"/property-owner",element:t.jsx(MM,{}),children:[t.jsx(gt,{index:!0,element:t.jsx(Aw,{})}),t.jsx(gt,{path:"dashboard",element:t.jsx(Aw,{})}),t.jsx(gt,{path:"properties",element:t.jsx(x8,{})}),t.jsx(gt,{path:"units",element:t.jsx(y8,{})}),t.jsx(gt,{path:"bookings",element:t.jsx(b8,{})}),t.jsx(gt,{path:"staff",element:t.jsx(v8,{})})]}),t.jsx(gt,{path:"/test",element:t.jsx(uR,{})}),t.jsx(gt,{path:"/profile",element:t.jsx(ou,{children:t.jsx(mR,{})})}),t.jsx(gt,{path:"/settings",element:t.jsx(ou,{children:t.jsx(hR,{})})}),t.jsx(gt,{path:"/",element:t.jsx($l,{to:"/auth/login",replace:!0})}),t.jsx(gt,{path:"*",element:t.jsx($l,{to:"/auth/login",replace:!0})})]}),w8=E0({palette:{orange:{50:"#FFF3E0",100:"#FFE0B2",200:"#FFCC80",300:"#FFB74D",400:"#FFA726",500:"#FF9800",600:"#FB8C00",700:"#F57C00",800:"#EF6C00",900:"#E65100",main:"#FF9800",light:"#FFA726",dark:"#FB8C00",contrastText:"#fff"}}}),N8=new c5({defaultOptions:{queries:{staleTime:1e3*60*5,gcTime:1e3*60*10}}});function _8(){return t.jsx(f5,{client:N8,children:t.jsx(Ik,{children:t.jsx(UI,{theme:w8,children:t.jsx(a3,{children:t.jsx(s3,{children:t.jsx("div",{dir:"rtl",className:"min-h-screen",children:t.jsx(j8,{})})})})})})})}const S8=["localeText"],Dw=b.createContext(null),C8=function(n){const{localeText:a}=n,r=wn(n,S8),{adapter:o,localeText:d}=b.useContext(Dw)??{adapter:void 0,localeText:void 0},h=$I({props:r,name:"MuiLocalizationProvider"}),{children:g,dateAdapter:p,dateFormats:f,dateLibInstance:v,adapterLocale:w,localeText:S}=h,T=b.useMemo(()=>ze({},S,d,a),[S,d,a]),C=b.useMemo(()=>{if(!p)return o||null;const R=new p({locale:w,formats:f,instance:v});if(!R.isMUIAdapter)throw new Error(["MUI X: The date adapter should be imported from `@mui/x-date-pickers` or `@mui/x-date-pickers-pro`, not from `@date-io`","For example, `import { AdapterDayjs } from '@mui/x-date-pickers/AdapterDayjs'` instead of `import AdapterDayjs from '@date-io/dayjs'`","More information on the installation documentation: https://mui.com/x/react-date-pickers/quickstart/#installation"].join(`
`));return R},[p,w,f,v,o]),_=b.useMemo(()=>C?{minDate:C.date("1900-01-01T00:00:00.000"),maxDate:C.date("2099-12-31T00:00:00.000")}:null,[C]),k=b.useMemo(()=>({utils:C,adapter:C,defaultDates:_,localeText:T}),[_,C,T]);return t.jsx(Dw.Provider,{value:k,children:g})},k8={y:{sectionType:"year",contentType:"digit",maxLength:4},yy:"year",yyy:{sectionType:"year",contentType:"digit",maxLength:4},yyyy:"year",M:{sectionType:"month",contentType:"digit",maxLength:2},MM:"month",MMMM:{sectionType:"month",contentType:"letter"},MMM:{sectionType:"month",contentType:"letter"},L:{sectionType:"month",contentType:"digit",maxLength:2},LL:"month",LLL:{sectionType:"month",contentType:"letter"},LLLL:{sectionType:"month",contentType:"letter"},d:{sectionType:"day",contentType:"digit",maxLength:2},dd:"day",do:{sectionType:"day",contentType:"digit-with-letter"},E:{sectionType:"weekDay",contentType:"letter"},EE:{sectionType:"weekDay",contentType:"letter"},EEE:{sectionType:"weekDay",contentType:"letter"},EEEE:{sectionType:"weekDay",contentType:"letter"},EEEEE:{sectionType:"weekDay",contentType:"letter"},i:{sectionType:"weekDay",contentType:"digit",maxLength:1},ii:"weekDay",iii:{sectionType:"weekDay",contentType:"letter"},iiii:{sectionType:"weekDay",contentType:"letter"},e:{sectionType:"weekDay",contentType:"digit",maxLength:1},ee:"weekDay",eee:{sectionType:"weekDay",contentType:"letter"},eeee:{sectionType:"weekDay",contentType:"letter"},eeeee:{sectionType:"weekDay",contentType:"letter"},eeeeee:{sectionType:"weekDay",contentType:"letter"},c:{sectionType:"weekDay",contentType:"digit",maxLength:1},cc:"weekDay",ccc:{sectionType:"weekDay",contentType:"letter"},cccc:{sectionType:"weekDay",contentType:"letter"},ccccc:{sectionType:"weekDay",contentType:"letter"},cccccc:{sectionType:"weekDay",contentType:"letter"},a:"meridiem",aa:"meridiem",aaa:"meridiem",H:{sectionType:"hours",contentType:"digit",maxLength:2},HH:"hours",h:{sectionType:"hours",contentType:"digit",maxLength:2},hh:"hours",m:{sectionType:"minutes",contentType:"digit",maxLength:2},mm:"minutes",s:{sectionType:"seconds",contentType:"digit",maxLength:2},ss:"seconds"},T8={year:"yyyy",month:"LLLL",monthShort:"MMM",dayOfMonth:"d",dayOfMonthFull:"do",weekday:"EEEE",weekdayShort:"EEEEEE",hours24h:"HH",hours12h:"hh",meridiem:"aa",minutes:"mm",seconds:"ss",fullDate:"PP",keyboardDate:"P",shortDate:"MMM d",normalDate:"d MMMM",normalDateWithWeekday:"EEE, MMM d",fullTime12h:"hh:mm aa",fullTime24h:"HH:mm",keyboardDateTime12h:"P hh:mm aa",keyboardDateTime24h:"P HH:mm"};class E8{constructor(n){this.isMUIAdapter=!0,this.isTimezoneCompatible=!1,this.lib=void 0,this.locale=void 0,this.formats=void 0,this.formatTokenMap=k8,this.escapedCharacters={start:"'",end:"'"},this.longFormatters=void 0,this.date=h=>typeof h>"u"?new Date:h===null?null:new Date(h),this.getInvalidDate=()=>new Date("Invalid Date"),this.getTimezone=()=>"default",this.setTimezone=h=>h,this.toJsDate=h=>h,this.getCurrentLocaleCode=()=>this.locale.code,this.is12HourCycleInCurrentLocale=()=>/a/.test(this.locale.formatLong.time({width:"short"})),this.expandFormat=h=>{const g=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g;return h.match(g).map(p=>{const f=p[0];if(f==="p"||f==="P"){const v=this.longFormatters[f];return v(p,this.locale.formatLong)}return p}).join("")},this.formatNumber=h=>h,this.getDayOfWeek=h=>h.getDay()+1;const{locale:a,formats:r,longFormatters:o,lib:d}=n;this.locale=a,this.formats=ze({},T8,r),this.longFormatters=o,this.lib=d||"date-fns"}}class M8 extends E8{constructor({locale:n,formats:a}={}){super({locale:n??K0,formats:a,longFormatters:Vh}),this.parse=(r,o)=>r===""?null:xL(r,o,new Date,{locale:this.locale}),this.isValid=r=>r==null?!1:v_(r),this.format=(r,o)=>this.formatByString(r,this.formats[o]),this.formatByString=(r,o)=>ga(r,o,{locale:this.locale}),this.isEqual=(r,o)=>r===null&&o===null?!0:r===null||o===null?!1:wP(r,o),this.isSameYear=(r,o)=>vL(r,o),this.isSameMonth=(r,o)=>O_(r,o),this.isSameDay=(r,o)=>b_(r,o),this.isSameHour=(r,o)=>bL(r,o),this.isAfter=(r,o)=>sx(r,o),this.isAfterYear=(r,o)=>sx(r,lw(o)),this.isAfterDay=(r,o)=>sx(r,iw(o)),this.isBefore=(r,o)=>Ch(r,o),this.isBeforeYear=(r,o)=>Ch(r,this.startOfYear(o)),this.isBeforeDay=(r,o)=>Ch(r,this.startOfDay(o)),this.isWithinRange=(r,[o,d])=>wL(r,{start:o,end:d}),this.startOfYear=r=>N_(r),this.startOfMonth=r=>w_(r),this.startOfWeek=r=>Qr(r,{locale:this.locale}),this.startOfDay=r=>mc(r),this.endOfYear=r=>lw(r),this.endOfMonth=r=>j_(r),this.endOfWeek=r=>wO(r,{locale:this.locale}),this.endOfDay=r=>iw(r),this.addYears=(r,o)=>xO(r,o),this.addMonths=(r,o)=>g_(r,o),this.addWeeks=(r,o)=>gO(r,o),this.addDays=(r,o)=>_f(r,o),this.addHours=(r,o)=>dO(r,o),this.addMinutes=(r,o)=>fO(r,o),this.addSeconds=(r,o)=>pO(r,o),this.getYear=r=>jP(r),this.getMonth=r=>bP(r),this.getDate=r=>hP(r),this.getHours=r=>pP(r),this.getMinutes=r=>yP(r),this.getSeconds=r=>vP(r),this.getMilliseconds=r=>xP(r),this.setYear=(r,o)=>EL(r,o),this.setMonth=(r,o)=>NL(r,o),this.setDate=(r,o)=>_L(r,o),this.setHours=(r,o)=>SL(r,o),this.setMinutes=(r,o)=>kL(r,o),this.setSeconds=(r,o)=>TL(r,o),this.setMilliseconds=(r,o)=>CL(r,o),this.getDaysInMonth=r=>E_(r),this.getWeekArray=r=>{const o=this.startOfWeek(this.startOfMonth(r)),d=this.endOfWeek(this.endOfMonth(r));let h=0,g=o;const p=[];for(;this.isBefore(g,d);){const f=Math.floor(h/7);p[f]=p[f]||[],p[f].push(g),g=this.addDays(g,1),h+=1}return p},this.getWeekNumber=r=>Q0(r,{locale:this.locale}),this.getYearRange=([r,o])=>{const d=this.startOfYear(r),h=this.endOfYear(o),g=[];let p=d;for(;this.isBefore(p,h);)g.push(p),p=this.addYears(p,1);return g}}}const R8={lessThanXSeconds:{one:"أقل من ثانية",two:"أقل من ثانيتين",threeToTen:"أقل من {{count}} ثواني",other:"أقل من {{count}} ثانية"},xSeconds:{one:"ثانية واحدة",two:"ثانيتان",threeToTen:"{{count}} ثواني",other:"{{count}} ثانية"},halfAMinute:"نصف دقيقة",lessThanXMinutes:{one:"أقل من دقيقة",two:"أقل من دقيقتين",threeToTen:"أقل من {{count}} دقائق",other:"أقل من {{count}} دقيقة"},xMinutes:{one:"دقيقة واحدة",two:"دقيقتان",threeToTen:"{{count}} دقائق",other:"{{count}} دقيقة"},aboutXHours:{one:"ساعة واحدة تقريباً",two:"ساعتين تقريبا",threeToTen:"{{count}} ساعات تقريباً",other:"{{count}} ساعة تقريباً"},xHours:{one:"ساعة واحدة",two:"ساعتان",threeToTen:"{{count}} ساعات",other:"{{count}} ساعة"},xDays:{one:"يوم واحد",two:"يومان",threeToTen:"{{count}} أيام",other:"{{count}} يوم"},aboutXWeeks:{one:"أسبوع واحد تقريبا",two:"أسبوعين تقريبا",threeToTen:"{{count}} أسابيع تقريبا",other:"{{count}} أسبوعا تقريبا"},xWeeks:{one:"أسبوع واحد",two:"أسبوعان",threeToTen:"{{count}} أسابيع",other:"{{count}} أسبوعا"},aboutXMonths:{one:"شهر واحد تقريباً",two:"شهرين تقريبا",threeToTen:"{{count}} أشهر تقريبا",other:"{{count}} شهرا تقريباً"},xMonths:{one:"شهر واحد",two:"شهران",threeToTen:"{{count}} أشهر",other:"{{count}} شهرا"},aboutXYears:{one:"سنة واحدة تقريباً",two:"سنتين تقريبا",threeToTen:"{{count}} سنوات تقريباً",other:"{{count}} سنة تقريباً"},xYears:{one:"سنة واحد",two:"سنتان",threeToTen:"{{count}} سنوات",other:"{{count}} سنة"},overXYears:{one:"أكثر من سنة",two:"أكثر من سنتين",threeToTen:"أكثر من {{count}} سنوات",other:"أكثر من {{count}} سنة"},almostXYears:{one:"ما يقارب سنة واحدة",two:"ما يقارب سنتين",threeToTen:"ما يقارب {{count}} سنوات",other:"ما يقارب {{count}} سنة"}},A8=(e,n,a)=>{const r=R8[e];let o;return typeof r=="string"?o=r:n===1?o=r.one:n===2?o=r.two:n<=10?o=r.threeToTen.replace("{{count}}",String(n)):o=r.other.replace("{{count}}",String(n)),a?.addSuffix?a.comparison&&a.comparison>0?"خلال "+o:"منذ "+o:o},D8={full:"EEEE، do MMMM y",long:"do MMMM y",medium:"d MMM y",short:"dd/MM/yyyy"},O8={full:"HH:mm:ss",long:"HH:mm:ss",medium:"HH:mm:ss",short:"HH:mm"},P8={full:"{{date}} 'عند الساعة' {{time}}",long:"{{date}} 'عند الساعة' {{time}}",medium:"{{date}}, {{time}}",short:"{{date}}, {{time}}"},L8={date:lc({formats:D8,defaultWidth:"full"}),time:lc({formats:O8,defaultWidth:"full"}),dateTime:lc({formats:P8,defaultWidth:"full"})},z8={lastWeek:"eeee 'الماضي عند الساعة' p",yesterday:"'الأمس عند الساعة' p",today:"'اليوم عند الساعة' p",tomorrow:"'غدا عند الساعة' p",nextWeek:"eeee 'القادم عند الساعة' p",other:"P"},I8=e=>z8[e],B8={narrow:["ق","ب"],abbreviated:["ق.م.","ب.م."],wide:["قبل الميلاد","بعد الميلاد"]},$8={narrow:["1","2","3","4"],abbreviated:["ر1","ر2","ر3","ر4"],wide:["الربع الأول","الربع الثاني","الربع الثالث","الربع الرابع"]},F8={narrow:["ي","ف","م","أ","م","ي","ي","أ","س","أ","ن","د"],abbreviated:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"],wide:["يناير","فبراير","مارس","أبريل","مايو","يونيو","يوليو","أغسطس","سبتمبر","أكتوبر","نوفمبر","ديسمبر"]},U8={narrow:["ح","ن","ث","ر","خ","ج","س"],short:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],abbreviated:["أحد","اثنين","ثلاثاء","أربعاء","خميس","جمعة","سبت"],wide:["الأحد","الاثنين","الثلاثاء","الأربعاء","الخميس","الجمعة","السبت"]},H8={narrow:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"المساء",night:"الليل",midnight:"منتصف الليل"}},q8={narrow:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},abbreviated:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"},wide:{am:"ص",pm:"م",morning:"في الصباح",noon:"الظهر",afternoon:"بعد الظهر",evening:"في المساء",night:"في الليل",midnight:"منتصف الليل"}},Y8=e=>String(e),V8={ordinalNumber:Y8,era:cr({values:B8,defaultWidth:"wide"}),quarter:cr({values:$8,defaultWidth:"wide",argumentCallback:e=>e-1}),month:cr({values:F8,defaultWidth:"wide"}),day:cr({values:U8,defaultWidth:"wide"}),dayPeriod:cr({values:H8,defaultWidth:"wide",formattingValues:q8,defaultFormattingWidth:"wide"})},Z8=/^(\d+)(th|st|nd|rd)?/i,W8=/\d+/i,K8={narrow:/[قب]/,abbreviated:/[قب]\.م\./,wide:/(قبل|بعد) الميلاد/},G8={any:[/قبل/,/بعد/]},Q8={narrow:/^[1234]/i,abbreviated:/ر[1234]/,wide:/الربع (الأول|الثاني|الثالث|الرابع)/},X8={any:[/1/i,/2/i,/3/i,/4/i]},J8={narrow:/^[أيفمسند]/,abbreviated:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/,wide:/^(يناير|فبراير|مارس|أبريل|مايو|يونيو|يوليو|أغسطس|سبتمبر|أكتوبر|نوفمبر|ديسمبر)/},eB={narrow:[/^ي/i,/^ف/i,/^م/i,/^أ/i,/^م/i,/^ي/i,/^ي/i,/^أ/i,/^س/i,/^أ/i,/^ن/i,/^د/i],any:[/^يناير/i,/^فبراير/i,/^مارس/i,/^أبريل/i,/^مايو/i,/^يونيو/i,/^يوليو/i,/^أغسطس/i,/^سبتمبر/i,/^أكتوبر/i,/^نوفمبر/i,/^ديسمبر/i]},tB={narrow:/^[حنثرخجس]/i,short:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,abbreviated:/^(أحد|اثنين|ثلاثاء|أربعاء|خميس|جمعة|سبت)/i,wide:/^(الأحد|الاثنين|الثلاثاء|الأربعاء|الخميس|الجمعة|السبت)/i},nB={narrow:[/^ح/i,/^ن/i,/^ث/i,/^ر/i,/^خ/i,/^ج/i,/^س/i],wide:[/^الأحد/i,/^الاثنين/i,/^الثلاثاء/i,/^الأربعاء/i,/^الخميس/i,/^الجمعة/i,/^السبت/i],any:[/^أح/i,/^اث/i,/^ث/i,/^أر/i,/^خ/i,/^ج/i,/^س/i]},aB={narrow:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/,any:/^(ص|م|منتصف الليل|الظهر|بعد الظهر|في الصباح|في المساء|في الليل)/},sB={any:{am:/^ص/,pm:/^م/,midnight:/منتصف الليل/,noon:/الظهر/,afternoon:/بعد الظهر/,morning:/في الصباح/,evening:/في المساء/,night:/في الليل/}},rB={ordinalNumber:__({matchPattern:Z8,parsePattern:W8,valueCallback:e=>parseInt(e,10)}),era:dr({matchPatterns:K8,defaultMatchWidth:"wide",parsePatterns:G8,defaultParseWidth:"any"}),quarter:dr({matchPatterns:Q8,defaultMatchWidth:"wide",parsePatterns:X8,defaultParseWidth:"any",valueCallback:e=>e+1}),month:dr({matchPatterns:J8,defaultMatchWidth:"wide",parsePatterns:eB,defaultParseWidth:"any"}),day:dr({matchPatterns:tB,defaultMatchWidth:"wide",parsePatterns:nB,defaultParseWidth:"any"}),dayPeriod:dr({matchPatterns:aB,defaultMatchWidth:"any",parsePatterns:sB,defaultParseWidth:"any"})},iB={code:"ar",formatDistance:A8,formatLong:L8,formatRelative:I8,localize:V8,match:rB,options:{weekStartsOn:6,firstWeekContainsDate:1}};NC.createRoot(document.getElementById("root")).render(t.jsx(b.StrictMode,{children:t.jsx(C8,{dateAdapter:M8,adapterLocale:iB,children:t.jsx(_8,{})})}));"serviceWorker"in navigator&&navigator.serviceWorker.register("/firebase-messaging-sw.js").catch(console.error);
